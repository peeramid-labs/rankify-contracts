apikey=XQ4CJB821I1QV6QSW1KDUB9XPPB5CVC3NX&module=contract&action=verifysourcecode&contractaddress=0xEd482B8eCCFA5d2EDbD43E8414803d8362bd6F45&sourceCode=%7B%22language%22%3A%22Solidity%22%2C%22sources%22%3A%7B%22%40openzeppelin%2Fcontracts-upgradeable%2Fgovernance%2Futils%2FVotesUpgradeable.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.2.0%29%20%28governance%2Futils%2FVotes.sol%29%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BIERC5805%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Finterfaces%2FIERC5805.sol%5C%22%3B%5Cnimport%20%7BContextUpgradeable%7D%20from%20%5C%22..%2F..%2Futils%2FContextUpgradeable.sol%5C%22%3B%5Cnimport%20%7BNoncesUpgradeable%7D%20from%20%5C%22..%2F..%2Futils%2FNoncesUpgradeable.sol%5C%22%3B%5Cnimport%20%7BEIP712Upgradeable%7D%20from%20%5C%22..%2F..%2Futils%2Fcryptography%2FEIP712Upgradeable.sol%5C%22%3B%5Cnimport%20%7BCheckpoints%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Fstructs%2FCheckpoints.sol%5C%22%3B%5Cnimport%20%7BSafeCast%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Fmath%2FSafeCast.sol%5C%22%3B%5Cnimport%20%7BECDSA%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Fcryptography%2FECDSA.sol%5C%22%3B%5Cnimport%20%7BTime%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Ftypes%2FTime.sol%5C%22%3B%5Cnimport%20%7BInitializable%7D%20from%20%5C%22..%2F..%2Fproxy%2Futils%2FInitializable.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20This%20is%20a%20base%20abstract%20contract%20that%20tracks%20voting%20units%2C%20which%20are%20a%20measure%20of%20voting%20power%20that%20can%20be%5Cn%20%2A%20transferred%2C%20and%20provides%20a%20system%20of%20vote%20delegation%2C%20where%20an%20account%20can%20delegate%20its%20voting%20units%20to%20a%20sort%20of%5Cn%20%2A%20%5C%22representative%5C%22%20that%20will%20pool%20delegated%20voting%20units%20from%20different%20accounts%20and%20can%20then%20use%20it%20to%20vote%20in%5Cn%20%2A%20decisions.%20In%20fact%2C%20voting%20units%20_must_%20be%20delegated%20in%20order%20to%20count%20as%20actual%20votes%2C%20and%20an%20account%20has%20to%5Cn%20%2A%20delegate%20those%20votes%20to%20itself%20if%20it%20wishes%20to%20participate%20in%20decisions%20and%20does%20not%20have%20a%20trusted%20representative.%5Cn%20%2A%5Cn%20%2A%20This%20contract%20is%20often%20combined%20with%20a%20token%20contract%20such%20that%20voting%20units%20correspond%20to%20token%20units.%20For%20an%5Cn%20%2A%20example%2C%20see%20%7BERC721Votes%7D.%5Cn%20%2A%5Cn%20%2A%20The%20full%20history%20of%20delegate%20votes%20is%20tracked%20on-chain%20so%20that%20governance%20protocols%20can%20consider%20votes%20as%20distributed%5Cn%20%2A%20at%20a%20particular%20block%20number%20to%20protect%20against%20flash%20loans%20and%20double%20voting.%20The%20opt-in%20delegate%20system%20makes%20the%5Cn%20%2A%20cost%20of%20this%20history%20tracking%20optional.%5Cn%20%2A%5Cn%20%2A%20When%20using%20this%20module%20the%20derived%20contract%20must%20implement%20%7B_getVotingUnits%7D%20%28for%20example%2C%20make%20it%20return%5Cn%20%2A%20%7BERC721-balanceOf%7D%29%2C%20and%20can%20use%20%7B_transferVotingUnits%7D%20to%20track%20a%20change%20in%20the%20distribution%20of%20those%20units%20%28in%20the%5Cn%20%2A%20previous%20example%2C%20it%20would%20be%20included%20in%20%7BERC721-_update%7D%29.%5Cn%20%2A%2F%5Cnabstract%20contract%20VotesUpgradeable%20is%20Initializable%2C%20ContextUpgradeable%2C%20EIP712Upgradeable%2C%20NoncesUpgradeable%2C%20IERC5805%20%7B%5Cn%20%20%20%20using%20Checkpoints%20for%20Checkpoints.Trace208%3B%5Cn%5Cn%20%20%20%20bytes32%20private%20constant%20DELEGATION_TYPEHASH%20%3D%5Cn%20%20%20%20%20%20%20%20keccak256%28%5C%22Delegation%28address%20delegatee%2Cuint256%20nonce%2Cuint256%20expiry%29%5C%22%29%3B%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40custom%3Astorage-location%20erc7201%3Aopenzeppelin.storage.Votes%5Cn%20%20%20%20struct%20VotesStorage%20%7B%5Cn%20%20%20%20%20%20%20%20mapping%28address%20account%20%3D%3E%20address%29%20_delegatee%3B%5Cn%5Cn%20%20%20%20%20%20%20%20mapping%28address%20delegatee%20%3D%3E%20Checkpoints.Trace208%29%20_delegateCheckpoints%3B%5Cn%5Cn%20%20%20%20%20%20%20%20Checkpoints.Trace208%20_totalCheckpoints%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%20keccak256%28abi.encode%28uint256%28keccak256%28%5C%22openzeppelin.storage.Votes%5C%22%29%29%20-%201%29%29%20%26%20~bytes32%28uint256%280xff%29%29%5Cn%20%20%20%20bytes32%20private%20constant%20VotesStorageLocation%20%3D%200xe8b26c30fad74198956032a3533d903385d56dd795af560196f9c78d4af40d00%3B%5Cn%5Cn%20%20%20%20function%20_getVotesStorage%28%29%20private%20pure%20returns%20%28VotesStorage%20storage%20%24%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24.slot%20%3A%3D%20VotesStorageLocation%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20clock%20was%20incorrectly%20modified.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC6372InconsistentClock%28%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Lookup%20to%20future%20votes%20is%20not%20available.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC5805FutureLookup%28uint256%20timepoint%2C%20uint48%20clock%29%3B%5Cn%5Cn%20%20%20%20function%20__Votes_init%28%29%20internal%20onlyInitializing%20%7B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20__Votes_init_unchained%28%29%20internal%20onlyInitializing%20%7B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Clock%20used%20for%20flagging%20checkpoints.%20Can%20be%20overridden%20to%20implement%20timestamp%20based%5Cn%20%20%20%20%20%2A%20checkpoints%20%28and%20voting%29%2C%20in%20which%20case%20%7BCLOCK_MODE%7D%20should%20be%20overridden%20as%20well%20to%20match.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20clock%28%29%20public%20view%20virtual%20returns%20%28uint48%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20Time.blockNumber%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Machine-readable%20description%20of%20the%20clock%20as%20specified%20in%20ERC-6372.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20%2F%2F%20solhint-disable-next-line%20func-name-mixedcase%5Cn%20%20%20%20function%20CLOCK_MODE%28%29%20public%20view%20virtual%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Check%20that%20the%20clock%20was%20not%20modified%5Cn%20%20%20%20%20%20%20%20if%20%28clock%28%29%20%21%3D%20Time.blockNumber%28%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC6372InconsistentClock%28%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20%5C%22mode%3Dblocknumber%26from%3Ddefault%5C%22%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Validate%20that%20a%20timepoint%20is%20in%20the%20past%2C%20and%20return%20it%20as%20a%20uint48.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_validateTimepoint%28uint256%20timepoint%29%20internal%20view%20returns%20%28uint48%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint48%20currentTimepoint%20%3D%20clock%28%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28timepoint%20%3E%3D%20currentTimepoint%29%20revert%20ERC5805FutureLookup%28timepoint%2C%20currentTimepoint%29%3B%5Cn%20%20%20%20%20%20%20%20return%20SafeCast.toUint48%28timepoint%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20current%20amount%20of%20votes%20that%20%60account%60%20has.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getVotes%28address%20account%29%20public%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20VotesStorage%20storage%20%24%20%3D%20_getVotesStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20%24._delegateCheckpoints%5Baccount%5D.latest%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20amount%20of%20votes%20that%20%60account%60%20had%20at%20a%20specific%20moment%20in%20the%20past.%20If%20the%20%60clock%28%29%60%20is%5Cn%20%20%20%20%20%2A%20configured%20to%20use%20block%20numbers%2C%20this%20will%20return%20the%20value%20at%20the%20end%20of%20the%20corresponding%20block.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60timepoint%60%20must%20be%20in%20the%20past.%20If%20operating%20using%20block%20numbers%2C%20the%20block%20must%20be%20already%20mined.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getPastVotes%28address%20account%2C%20uint256%20timepoint%29%20public%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20VotesStorage%20storage%20%24%20%3D%20_getVotesStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20%24._delegateCheckpoints%5Baccount%5D.upperLookupRecent%28_validateTimepoint%28timepoint%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20total%20supply%20of%20votes%20available%20at%20a%20specific%20moment%20in%20the%20past.%20If%20the%20%60clock%28%29%60%20is%5Cn%20%20%20%20%20%2A%20configured%20to%20use%20block%20numbers%2C%20this%20will%20return%20the%20value%20at%20the%20end%20of%20the%20corresponding%20block.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20This%20value%20is%20the%20sum%20of%20all%20available%20votes%2C%20which%20is%20not%20necessarily%20the%20sum%20of%20all%20delegated%20votes.%5Cn%20%20%20%20%20%2A%20Votes%20that%20have%20not%20been%20delegated%20are%20still%20part%20of%20total%20supply%2C%20even%20though%20they%20would%20not%20participate%20in%20a%5Cn%20%20%20%20%20%2A%20vote.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60timepoint%60%20must%20be%20in%20the%20past.%20If%20operating%20using%20block%20numbers%2C%20the%20block%20must%20be%20already%20mined.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getPastTotalSupply%28uint256%20timepoint%29%20public%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20VotesStorage%20storage%20%24%20%3D%20_getVotesStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20%24._totalCheckpoints.upperLookupRecent%28_validateTimepoint%28timepoint%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20current%20total%20supply%20of%20votes.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_getTotalSupply%28%29%20internal%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20VotesStorage%20storage%20%24%20%3D%20_getVotesStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20%24._totalCheckpoints.latest%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20delegate%20that%20%60account%60%20has%20chosen.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20delegates%28address%20account%29%20public%20view%20virtual%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20VotesStorage%20storage%20%24%20%3D%20_getVotesStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20%24._delegatee%5Baccount%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Delegates%20votes%20from%20the%20sender%20to%20%60delegatee%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20delegate%28address%20delegatee%29%20public%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20address%20account%20%3D%20_msgSender%28%29%3B%5Cn%20%20%20%20%20%20%20%20_delegate%28account%2C%20delegatee%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Delegates%20votes%20from%20signer%20to%20%60delegatee%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20delegateBySig%28%5Cn%20%20%20%20%20%20%20%20address%20delegatee%2C%5Cn%20%20%20%20%20%20%20%20uint256%20nonce%2C%5Cn%20%20%20%20%20%20%20%20uint256%20expiry%2C%5Cn%20%20%20%20%20%20%20%20uint8%20v%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20r%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20s%5Cn%20%20%20%20%29%20public%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28block.timestamp%20%3E%20expiry%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20VotesExpiredSignature%28expiry%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20address%20signer%20%3D%20ECDSA.recover%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_hashTypedDataV4%28keccak256%28abi.encode%28DELEGATION_TYPEHASH%2C%20delegatee%2C%20nonce%2C%20expiry%29%29%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20v%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20r%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20s%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20_useCheckedNonce%28signer%2C%20nonce%29%3B%5Cn%20%20%20%20%20%20%20%20_delegate%28signer%2C%20delegatee%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Delegate%20all%20of%20%60account%60%27s%20voting%20units%20to%20%60delegatee%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20events%20%7BIVotes-DelegateChanged%7D%20and%20%7BIVotes-DelegateVotesChanged%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_delegate%28address%20account%2C%20address%20delegatee%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20VotesStorage%20storage%20%24%20%3D%20_getVotesStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20address%20oldDelegate%20%3D%20delegates%28account%29%3B%5Cn%20%20%20%20%20%20%20%20%24._delegatee%5Baccount%5D%20%3D%20delegatee%3B%5Cn%5Cn%20%20%20%20%20%20%20%20emit%20DelegateChanged%28account%2C%20oldDelegate%2C%20delegatee%29%3B%5Cn%20%20%20%20%20%20%20%20_moveDelegateVotes%28oldDelegate%2C%20delegatee%2C%20_getVotingUnits%28account%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Transfers%2C%20mints%2C%20or%20burns%20voting%20units.%20To%20register%20a%20mint%2C%20%60from%60%20should%20be%20zero.%20To%20register%20a%20burn%2C%20%60to%60%5Cn%20%20%20%20%20%2A%20should%20be%20zero.%20Total%20supply%20of%20voting%20units%20will%20be%20adjusted%20with%20mints%20and%20burns.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_transferVotingUnits%28address%20from%2C%20address%20to%2C%20uint256%20amount%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20VotesStorage%20storage%20%24%20%3D%20_getVotesStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28from%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_push%28%24._totalCheckpoints%2C%20_add%2C%20SafeCast.toUint208%28amount%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20%28to%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_push%28%24._totalCheckpoints%2C%20_subtract%2C%20SafeCast.toUint208%28amount%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_moveDelegateVotes%28delegates%28from%29%2C%20delegates%28to%29%2C%20amount%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Moves%20delegated%20votes%20from%20one%20delegate%20to%20another.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_moveDelegateVotes%28address%20from%2C%20address%20to%2C%20uint256%20amount%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20VotesStorage%20storage%20%24%20%3D%20_getVotesStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28from%20%21%3D%20to%20%26%26%20amount%20%3E%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28from%20%21%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28uint256%20oldValue%2C%20uint256%20newValue%29%20%3D%20_push%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24._delegateCheckpoints%5Bfrom%5D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_subtract%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20SafeCast.toUint208%28amount%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20emit%20DelegateVotesChanged%28from%2C%20oldValue%2C%20newValue%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28to%20%21%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28uint256%20oldValue%2C%20uint256%20newValue%29%20%3D%20_push%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24._delegateCheckpoints%5Bto%5D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_add%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20SafeCast.toUint208%28amount%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20emit%20DelegateVotesChanged%28to%2C%20oldValue%2C%20newValue%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Get%20number%20of%20checkpoints%20for%20%60account%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_numCheckpoints%28address%20account%29%20internal%20view%20virtual%20returns%20%28uint32%29%20%7B%5Cn%20%20%20%20%20%20%20%20VotesStorage%20storage%20%24%20%3D%20_getVotesStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20SafeCast.toUint32%28%24._delegateCheckpoints%5Baccount%5D.length%28%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Get%20the%20%60pos%60-th%20checkpoint%20for%20%60account%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_checkpoints%28%5Cn%20%20%20%20%20%20%20%20address%20account%2C%5Cn%20%20%20%20%20%20%20%20uint32%20pos%5Cn%20%20%20%20%29%20internal%20view%20virtual%20returns%20%28Checkpoints.Checkpoint208%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20VotesStorage%20storage%20%24%20%3D%20_getVotesStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20%24._delegateCheckpoints%5Baccount%5D.at%28pos%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_push%28%5Cn%20%20%20%20%20%20%20%20Checkpoints.Trace208%20storage%20store%2C%5Cn%20%20%20%20%20%20%20%20function%28uint208%2C%20uint208%29%20view%20returns%20%28uint208%29%20op%2C%5Cn%20%20%20%20%20%20%20%20uint208%20delta%5Cn%20%20%20%20%29%20private%20returns%20%28uint208%20oldValue%2C%20uint208%20newValue%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20store.push%28clock%28%29%2C%20op%28store.latest%28%29%2C%20delta%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_add%28uint208%20a%2C%20uint208%20b%29%20private%20pure%20returns%20%28uint208%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20a%20%2B%20b%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_subtract%28uint208%20a%2C%20uint208%20b%29%20private%20pure%20returns%20%28uint208%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20a%20-%20b%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Must%20return%20the%20voting%20units%20held%20by%20an%20account.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_getVotingUnits%28address%29%20internal%20view%20virtual%20returns%20%28uint256%29%3B%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts-upgradeable%2Fproxy%2Futils%2FInitializable.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.0.0%29%20%28proxy%2Futils%2FInitializable.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20This%20is%20a%20base%20contract%20to%20aid%20in%20writing%20upgradeable%20contracts%2C%20or%20any%20kind%20of%20contract%20that%20will%20be%20deployed%5Cn%20%2A%20behind%20a%20proxy.%20Since%20proxied%20contracts%20do%20not%20make%20use%20of%20a%20constructor%2C%20it%27s%20common%20to%20move%20constructor%20logic%20to%20an%5Cn%20%2A%20external%20initializer%20function%2C%20usually%20called%20%60initialize%60.%20It%20then%20becomes%20necessary%20to%20protect%20this%20initializer%5Cn%20%2A%20function%20so%20it%20can%20only%20be%20called%20once.%20The%20%7Binitializer%7D%20modifier%20provided%20by%20this%20contract%20will%20have%20this%20effect.%5Cn%20%2A%5Cn%20%2A%20The%20initialization%20functions%20use%20a%20version%20number.%20Once%20a%20version%20number%20is%20used%2C%20it%20is%20consumed%20and%20cannot%20be%5Cn%20%2A%20reused.%20This%20mechanism%20prevents%20re-execution%20of%20each%20%5C%22step%5C%22%20but%20allows%20the%20creation%20of%20new%20initialization%20steps%20in%5Cn%20%2A%20case%20an%20upgrade%20adds%20a%20module%20that%20needs%20to%20be%20initialized.%5Cn%20%2A%5Cn%20%2A%20For%20example%3A%5Cn%20%2A%5Cn%20%2A%20%5B.hljs-theme-light.nopadding%5D%5Cn%20%2A%20%60%60%60solidity%5Cn%20%2A%20contract%20MyToken%20is%20ERC20Upgradeable%20%7B%5Cn%20%2A%20%20%20%20%20function%20initialize%28%29%20initializer%20public%20%7B%5Cn%20%2A%20%20%20%20%20%20%20%20%20__ERC20_init%28%5C%22MyToken%5C%22%2C%20%5C%22MTK%5C%22%29%3B%5Cn%20%2A%20%20%20%20%20%7D%5Cn%20%2A%20%7D%5Cn%20%2A%5Cn%20%2A%20contract%20MyTokenV2%20is%20MyToken%2C%20ERC20PermitUpgradeable%20%7B%5Cn%20%2A%20%20%20%20%20function%20initializeV2%28%29%20reinitializer%282%29%20public%20%7B%5Cn%20%2A%20%20%20%20%20%20%20%20%20__ERC20Permit_init%28%5C%22MyToken%5C%22%29%3B%5Cn%20%2A%20%20%20%20%20%7D%5Cn%20%2A%20%7D%5Cn%20%2A%20%60%60%60%5Cn%20%2A%5Cn%20%2A%20TIP%3A%20To%20avoid%20leaving%20the%20proxy%20in%20an%20uninitialized%20state%2C%20the%20initializer%20function%20should%20be%20called%20as%20early%20as%5Cn%20%2A%20possible%20by%20providing%20the%20encoded%20function%20call%20as%20the%20%60_data%60%20argument%20to%20%7BERC1967Proxy-constructor%7D.%5Cn%20%2A%5Cn%20%2A%20CAUTION%3A%20When%20used%20with%20inheritance%2C%20manual%20care%20must%20be%20taken%20to%20not%20invoke%20a%20parent%20initializer%20twice%2C%20or%20to%20ensure%5Cn%20%2A%20that%20all%20initializers%20are%20idempotent.%20This%20is%20not%20verified%20automatically%20as%20constructors%20are%20by%20Solidity.%5Cn%20%2A%5Cn%20%2A%20%5BCAUTION%5D%5Cn%20%2A%20%3D%3D%3D%3D%5Cn%20%2A%20Avoid%20leaving%20a%20contract%20uninitialized.%5Cn%20%2A%5Cn%20%2A%20An%20uninitialized%20contract%20can%20be%20taken%20over%20by%20an%20attacker.%20This%20applies%20to%20both%20a%20proxy%20and%20its%20implementation%5Cn%20%2A%20contract%2C%20which%20may%20impact%20the%20proxy.%20To%20prevent%20the%20implementation%20contract%20from%20being%20used%2C%20you%20should%20invoke%5Cn%20%2A%20the%20%7B_disableInitializers%7D%20function%20in%20the%20constructor%20to%20automatically%20lock%20it%20when%20it%20is%20deployed%3A%5Cn%20%2A%5Cn%20%2A%20%5B.hljs-theme-light.nopadding%5D%5Cn%20%2A%20%60%60%60%5Cn%20%2A%20%2F%2F%2F%20%40custom%3Aoz-upgrades-unsafe-allow%20constructor%5Cn%20%2A%20constructor%28%29%20%7B%5Cn%20%2A%20%20%20%20%20_disableInitializers%28%29%3B%5Cn%20%2A%20%7D%5Cn%20%2A%20%60%60%60%5Cn%20%2A%20%3D%3D%3D%3D%5Cn%20%2A%2F%5Cnabstract%20contract%20Initializable%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Storage%20of%20the%20initializable%20contract.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20It%27s%20implemented%20on%20a%20custom%20ERC-7201%20namespace%20to%20reduce%20the%20risk%20of%20storage%20collisions%5Cn%20%20%20%20%20%2A%20when%20using%20with%20upgradeable%20contracts.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20%40custom%3Astorage-location%20erc7201%3Aopenzeppelin.storage.Initializable%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20struct%20InitializableStorage%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%20%20%20%20%2A%20%40dev%20Indicates%20that%20the%20contract%20has%20been%20initialized.%5Cn%20%20%20%20%20%20%20%20%20%2A%2F%5Cn%20%20%20%20%20%20%20%20uint64%20_initialized%3B%5Cn%20%20%20%20%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%20%20%20%20%2A%20%40dev%20Indicates%20that%20the%20contract%20is%20in%20the%20process%20of%20being%20initialized.%5Cn%20%20%20%20%20%20%20%20%20%2A%2F%5Cn%20%20%20%20%20%20%20%20bool%20_initializing%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%20keccak256%28abi.encode%28uint256%28keccak256%28%5C%22openzeppelin.storage.Initializable%5C%22%29%29%20-%201%29%29%20%26%20~bytes32%28uint256%280xff%29%29%5Cn%20%20%20%20bytes32%20private%20constant%20INITIALIZABLE_STORAGE%20%3D%200xf0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a00%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20contract%20is%20already%20initialized.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20InvalidInitialization%28%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20contract%20is%20not%20initializing.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20NotInitializing%28%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Triggered%20when%20the%20contract%20has%20been%20initialized%20or%20reinitialized.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20event%20Initialized%28uint64%20version%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20A%20modifier%20that%20defines%20a%20protected%20initializer%20function%20that%20can%20be%20invoked%20at%20most%20once.%20In%20its%20scope%2C%5Cn%20%20%20%20%20%2A%20%60onlyInitializing%60%20functions%20can%20be%20used%20to%20initialize%20parent%20contracts.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Similar%20to%20%60reinitializer%281%29%60%2C%20except%20that%20in%20the%20context%20of%20a%20constructor%20an%20%60initializer%60%20may%20be%20invoked%20any%5Cn%20%20%20%20%20%2A%20number%20of%20times.%20This%20behavior%20in%20the%20constructor%20can%20be%20useful%20during%20testing%20and%20is%20not%20expected%20to%20be%20used%20in%5Cn%20%20%20%20%20%2A%20production.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20an%20%7BInitialized%7D%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20modifier%20initializer%28%29%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20solhint-disable-next-line%20var-name-mixedcase%5Cn%20%20%20%20%20%20%20%20InitializableStorage%20storage%20%24%20%3D%20_getInitializableStorage%28%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Cache%20values%20to%20avoid%20duplicated%20sloads%5Cn%20%20%20%20%20%20%20%20bool%20isTopLevelCall%20%3D%20%21%24._initializing%3B%5Cn%20%20%20%20%20%20%20%20uint64%20initialized%20%3D%20%24._initialized%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Allowed%20calls%3A%5Cn%20%20%20%20%20%20%20%20%2F%2F%20-%20initialSetup%3A%20the%20contract%20is%20not%20in%20the%20initializing%20state%20and%20no%20previous%20version%20was%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20initialized%5Cn%20%20%20%20%20%20%20%20%2F%2F%20-%20construction%3A%20the%20contract%20is%20initialized%20at%20version%201%20%28no%20reininitialization%29%20and%20the%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20current%20contract%20is%20just%20being%20deployed%5Cn%20%20%20%20%20%20%20%20bool%20initialSetup%20%3D%20initialized%20%3D%3D%200%20%26%26%20isTopLevelCall%3B%5Cn%20%20%20%20%20%20%20%20bool%20construction%20%3D%20initialized%20%3D%3D%201%20%26%26%20address%28this%29.code.length%20%3D%3D%200%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28%21initialSetup%20%26%26%20%21construction%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20InvalidInitialization%28%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%24._initialized%20%3D%201%3B%5Cn%20%20%20%20%20%20%20%20if%20%28isTopLevelCall%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24._initializing%20%3D%20true%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_%3B%5Cn%20%20%20%20%20%20%20%20if%20%28isTopLevelCall%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24._initializing%20%3D%20false%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20emit%20Initialized%281%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20A%20modifier%20that%20defines%20a%20protected%20reinitializer%20function%20that%20can%20be%20invoked%20at%20most%20once%2C%20and%20only%20if%20the%5Cn%20%20%20%20%20%2A%20contract%20hasn%27t%20been%20initialized%20to%20a%20greater%20version%20before.%20In%20its%20scope%2C%20%60onlyInitializing%60%20functions%20can%20be%5Cn%20%20%20%20%20%2A%20used%20to%20initialize%20parent%20contracts.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20A%20reinitializer%20may%20be%20used%20after%20the%20original%20initialization%20step.%20This%20is%20essential%20to%20configure%20modules%20that%5Cn%20%20%20%20%20%2A%20are%20added%20through%20upgrades%20and%20that%20require%20initialization.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20When%20%60version%60%20is%201%2C%20this%20modifier%20is%20similar%20to%20%60initializer%60%2C%20except%20that%20functions%20marked%20with%20%60reinitializer%60%5Cn%20%20%20%20%20%2A%20cannot%20be%20nested.%20If%20one%20is%20invoked%20in%20the%20context%20of%20another%2C%20execution%20will%20revert.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Note%20that%20versions%20can%20jump%20in%20increments%20greater%20than%201%3B%20this%20implies%20that%20if%20multiple%20reinitializers%20coexist%20in%5Cn%20%20%20%20%20%2A%20a%20contract%2C%20executing%20them%20in%20the%20right%20order%20is%20up%20to%20the%20developer%20or%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20Setting%20the%20version%20to%202%2A%2A64%20-%201%20will%20prevent%20any%20future%20reinitialization.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20an%20%7BInitialized%7D%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20modifier%20reinitializer%28uint64%20version%29%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20solhint-disable-next-line%20var-name-mixedcase%5Cn%20%20%20%20%20%20%20%20InitializableStorage%20storage%20%24%20%3D%20_getInitializableStorage%28%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28%24._initializing%20%7C%7C%20%24._initialized%20%3E%3D%20version%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20InvalidInitialization%28%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%24._initialized%20%3D%20version%3B%5Cn%20%20%20%20%20%20%20%20%24._initializing%20%3D%20true%3B%5Cn%20%20%20%20%20%20%20%20_%3B%5Cn%20%20%20%20%20%20%20%20%24._initializing%20%3D%20false%3B%5Cn%20%20%20%20%20%20%20%20emit%20Initialized%28version%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Modifier%20to%20protect%20an%20initialization%20function%20so%20that%20it%20can%20only%20be%20invoked%20by%20functions%20with%20the%5Cn%20%20%20%20%20%2A%20%7Binitializer%7D%20and%20%7Breinitializer%7D%20modifiers%2C%20directly%20or%20indirectly.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20modifier%20onlyInitializing%28%29%20%7B%5Cn%20%20%20%20%20%20%20%20_checkInitializing%28%29%3B%5Cn%20%20%20%20%20%20%20%20_%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Reverts%20if%20the%20contract%20is%20not%20in%20an%20initializing%20state.%20See%20%7BonlyInitializing%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_checkInitializing%28%29%20internal%20view%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28%21_isInitializing%28%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20NotInitializing%28%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Locks%20the%20contract%2C%20preventing%20any%20future%20reinitialization.%20This%20cannot%20be%20part%20of%20an%20initializer%20call.%5Cn%20%20%20%20%20%2A%20Calling%20this%20in%20the%20constructor%20of%20a%20contract%20will%20prevent%20that%20contract%20from%20being%20initialized%20or%20reinitialized%5Cn%20%20%20%20%20%2A%20to%20any%20version.%20It%20is%20recommended%20to%20use%20this%20to%20lock%20implementation%20contracts%20that%20are%20designed%20to%20be%20called%5Cn%20%20%20%20%20%2A%20through%20proxies.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20an%20%7BInitialized%7D%20event%20the%20first%20time%20it%20is%20successfully%20executed.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_disableInitializers%28%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20solhint-disable-next-line%20var-name-mixedcase%5Cn%20%20%20%20%20%20%20%20InitializableStorage%20storage%20%24%20%3D%20_getInitializableStorage%28%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28%24._initializing%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20InvalidInitialization%28%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20%28%24._initialized%20%21%3D%20type%28uint64%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24._initialized%20%3D%20type%28uint64%29.max%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20emit%20Initialized%28type%28uint64%29.max%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20highest%20version%20that%20has%20been%20initialized.%20See%20%7Breinitializer%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_getInitializedVersion%28%29%20internal%20view%20returns%20%28uint64%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_getInitializableStorage%28%29._initialized%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20%60true%60%20if%20the%20contract%20is%20currently%20initializing.%20See%20%7BonlyInitializing%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_isInitializing%28%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_getInitializableStorage%28%29._initializing%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20a%20pointer%20to%20the%20storage%20namespace.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20%2F%2F%20solhint-disable-next-line%20var-name-mixedcase%5Cn%20%20%20%20function%20_getInitializableStorage%28%29%20private%20pure%20returns%20%28InitializableStorage%20storage%20%24%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24.slot%20%3A%3D%20INITIALIZABLE_STORAGE%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts-upgradeable%2Ftoken%2FERC20%2FERC20Upgradeable.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.2.0%29%20%28token%2FERC20%2FERC20.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BIERC20%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC20%2FIERC20.sol%5C%22%3B%5Cnimport%20%7BIERC20Metadata%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC20%2Fextensions%2FIERC20Metadata.sol%5C%22%3B%5Cnimport%20%7BContextUpgradeable%7D%20from%20%5C%22..%2F..%2Futils%2FContextUpgradeable.sol%5C%22%3B%5Cnimport%20%7BIERC20Errors%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Finterfaces%2Fdraft-IERC6093.sol%5C%22%3B%5Cnimport%20%7BInitializable%7D%20from%20%5C%22..%2F..%2Fproxy%2Futils%2FInitializable.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Implementation%20of%20the%20%7BIERC20%7D%20interface.%5Cn%20%2A%5Cn%20%2A%20This%20implementation%20is%20agnostic%20to%20the%20way%20tokens%20are%20created.%20This%20means%5Cn%20%2A%20that%20a%20supply%20mechanism%20has%20to%20be%20added%20in%20a%20derived%20contract%20using%20%7B_mint%7D.%5Cn%20%2A%5Cn%20%2A%20TIP%3A%20For%20a%20detailed%20writeup%20see%20our%20guide%5Cn%20%2A%20https%3A%2F%2Fforum.openzeppelin.com%2Ft%2Fhow-to-implement-erc20-supply-mechanisms%2F226%5BHow%5Cn%20%2A%20to%20implement%20supply%20mechanisms%5D.%5Cn%20%2A%5Cn%20%2A%20The%20default%20value%20of%20%7Bdecimals%7D%20is%2018.%20To%20change%20this%2C%20you%20should%20override%5Cn%20%2A%20this%20function%20so%20it%20returns%20a%20different%20value.%5Cn%20%2A%5Cn%20%2A%20We%20have%20followed%20general%20OpenZeppelin%20Contracts%20guidelines%3A%20functions%20revert%5Cn%20%2A%20instead%20returning%20%60false%60%20on%20failure.%20This%20behavior%20is%20nonetheless%5Cn%20%2A%20conventional%20and%20does%20not%20conflict%20with%20the%20expectations%20of%20ERC-20%5Cn%20%2A%20applications.%5Cn%20%2A%2F%5Cnabstract%20contract%20ERC20Upgradeable%20is%20Initializable%2C%20ContextUpgradeable%2C%20IERC20%2C%20IERC20Metadata%2C%20IERC20Errors%20%7B%5Cn%20%20%20%20%2F%2F%2F%20%40custom%3Astorage-location%20erc7201%3Aopenzeppelin.storage.ERC20%5Cn%20%20%20%20struct%20ERC20Storage%20%7B%5Cn%20%20%20%20%20%20%20%20mapping%28address%20account%20%3D%3E%20uint256%29%20_balances%3B%5Cn%5Cn%20%20%20%20%20%20%20%20mapping%28address%20account%20%3D%3E%20mapping%28address%20spender%20%3D%3E%20uint256%29%29%20_allowances%3B%5Cn%5Cn%20%20%20%20%20%20%20%20uint256%20_totalSupply%3B%5Cn%5Cn%20%20%20%20%20%20%20%20string%20_name%3B%5Cn%20%20%20%20%20%20%20%20string%20_symbol%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%20keccak256%28abi.encode%28uint256%28keccak256%28%5C%22openzeppelin.storage.ERC20%5C%22%29%29%20-%201%29%29%20%26%20~bytes32%28uint256%280xff%29%29%5Cn%20%20%20%20bytes32%20private%20constant%20ERC20StorageLocation%20%3D%200x52c63247e1f47db19d5ce0460030c497f067ca4cebf71ba98eeadabe20bace00%3B%5Cn%5Cn%20%20%20%20function%20_getERC20Storage%28%29%20private%20pure%20returns%20%28ERC20Storage%20storage%20%24%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24.slot%20%3A%3D%20ERC20StorageLocation%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Sets%20the%20values%20for%20%7Bname%7D%20and%20%7Bsymbol%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20All%20two%20of%20these%20values%20are%20immutable%3A%20they%20can%20only%20be%20set%20once%20during%5Cn%20%20%20%20%20%2A%20construction.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20__ERC20_init%28string%20memory%20name_%2C%20string%20memory%20symbol_%29%20internal%20onlyInitializing%20%7B%5Cn%20%20%20%20%20%20%20%20__ERC20_init_unchained%28name_%2C%20symbol_%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20__ERC20_init_unchained%28string%20memory%20name_%2C%20string%20memory%20symbol_%29%20internal%20onlyInitializing%20%7B%5Cn%20%20%20%20%20%20%20%20ERC20Storage%20storage%20%24%20%3D%20_getERC20Storage%28%29%3B%5Cn%20%20%20%20%20%20%20%20%24._name%20%3D%20name_%3B%5Cn%20%20%20%20%20%20%20%20%24._symbol%20%3D%20symbol_%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20name%20of%20the%20token.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20name%28%29%20public%20view%20virtual%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20ERC20Storage%20storage%20%24%20%3D%20_getERC20Storage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20%24._name%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20symbol%20of%20the%20token%2C%20usually%20a%20shorter%20version%20of%20the%5Cn%20%20%20%20%20%2A%20name.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20symbol%28%29%20public%20view%20virtual%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20ERC20Storage%20storage%20%24%20%3D%20_getERC20Storage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20%24._symbol%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20number%20of%20decimals%20used%20to%20get%20its%20user%20representation.%5Cn%20%20%20%20%20%2A%20For%20example%2C%20if%20%60decimals%60%20equals%20%602%60%2C%20a%20balance%20of%20%60505%60%20tokens%20should%5Cn%20%20%20%20%20%2A%20be%20displayed%20to%20a%20user%20as%20%605.05%60%20%28%60505%20%2F%2010%20%2A%2A%202%60%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Tokens%20usually%20opt%20for%20a%20value%20of%2018%2C%20imitating%20the%20relationship%20between%5Cn%20%20%20%20%20%2A%20Ether%20and%20Wei.%20This%20is%20the%20default%20value%20returned%20by%20this%20function%2C%20unless%5Cn%20%20%20%20%20%2A%20it%27s%20overridden.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20This%20information%20is%20only%20used%20for%20_display_%20purposes%3A%20it%20in%5Cn%20%20%20%20%20%2A%20no%20way%20affects%20any%20of%20the%20arithmetic%20of%20the%20contract%2C%20including%5Cn%20%20%20%20%20%2A%20%7BIERC20-balanceOf%7D%20and%20%7BIERC20-transfer%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20decimals%28%29%20public%20view%20virtual%20returns%20%28uint8%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%2018%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC20-totalSupply%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20totalSupply%28%29%20public%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20ERC20Storage%20storage%20%24%20%3D%20_getERC20Storage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20%24._totalSupply%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC20-balanceOf%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20balanceOf%28address%20account%29%20public%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20ERC20Storage%20storage%20%24%20%3D%20_getERC20Storage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20%24._balances%5Baccount%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC20-transfer%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60to%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20-%20the%20caller%20must%20have%20a%20balance%20of%20at%20least%20%60value%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20transfer%28address%20to%2C%20uint256%20value%29%20public%20virtual%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20address%20owner%20%3D%20_msgSender%28%29%3B%5Cn%20%20%20%20%20%20%20%20_transfer%28owner%2C%20to%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20return%20true%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC20-allowance%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20allowance%28address%20owner%2C%20address%20spender%29%20public%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20ERC20Storage%20storage%20%24%20%3D%20_getERC20Storage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20%24._allowances%5Bowner%5D%5Bspender%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC20-approve%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20If%20%60value%60%20is%20the%20maximum%20%60uint256%60%2C%20the%20allowance%20is%20not%20updated%20on%5Cn%20%20%20%20%20%2A%20%60transferFrom%60.%20This%20is%20semantically%20equivalent%20to%20an%20infinite%20approval.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60spender%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20approve%28address%20spender%2C%20uint256%20value%29%20public%20virtual%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20address%20owner%20%3D%20_msgSender%28%29%3B%5Cn%20%20%20%20%20%20%20%20_approve%28owner%2C%20spender%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20return%20true%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC20-transferFrom%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Skips%20emitting%20an%20%7BApproval%7D%20event%20indicating%20an%20allowance%20update.%20This%20is%20not%5Cn%20%20%20%20%20%2A%20required%20by%20the%20ERC.%20See%20%7Bxref-ERC20-_approve-address-address-uint256-bool-%7D%5B_approve%5D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20Does%20not%20update%20the%20allowance%20if%20the%20current%20allowance%5Cn%20%20%20%20%20%2A%20is%20the%20maximum%20%60uint256%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60from%60%20and%20%60to%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20-%20%60from%60%20must%20have%20a%20balance%20of%20at%20least%20%60value%60.%5Cn%20%20%20%20%20%2A%20-%20the%20caller%20must%20have%20allowance%20for%20%60%60from%60%60%27s%20tokens%20of%20at%20least%5Cn%20%20%20%20%20%2A%20%60value%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20transferFrom%28address%20from%2C%20address%20to%2C%20uint256%20value%29%20public%20virtual%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20address%20spender%20%3D%20_msgSender%28%29%3B%5Cn%20%20%20%20%20%20%20%20_spendAllowance%28from%2C%20spender%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20_transfer%28from%2C%20to%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20return%20true%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Moves%20a%20%60value%60%20amount%20of%20tokens%20from%20%60from%60%20to%20%60to%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20internal%20function%20is%20equivalent%20to%20%7Btransfer%7D%2C%20and%20can%20be%20used%20to%5Cn%20%20%20%20%20%2A%20e.g.%20implement%20automatic%20token%20fees%2C%20slashing%20mechanisms%2C%20etc.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransfer%7D%20event.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20This%20function%20is%20not%20virtual%2C%20%7B_update%7D%20should%20be%20overridden%20instead.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_transfer%28address%20from%2C%20address%20to%2C%20uint256%20value%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28from%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC20InvalidSender%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20%28to%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC20InvalidReceiver%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_update%28from%2C%20to%2C%20value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Transfers%20a%20%60value%60%20amount%20of%20tokens%20from%20%60from%60%20to%20%60to%60%2C%20or%20alternatively%20mints%20%28or%20burns%29%20if%20%60from%60%5Cn%20%20%20%20%20%2A%20%28or%20%60to%60%29%20is%20the%20zero%20address.%20All%20customizations%20to%20transfers%2C%20mints%2C%20and%20burns%20should%20be%20done%20by%20overriding%5Cn%20%20%20%20%20%2A%20this%20function.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransfer%7D%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_update%28address%20from%2C%20address%20to%2C%20uint256%20value%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20ERC20Storage%20storage%20%24%20%3D%20_getERC20Storage%28%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28from%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Overflow%20check%20required%3A%20The%20rest%20of%20the%20code%20assumes%20that%20totalSupply%20never%20overflows%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24._totalSupply%20%2B%3D%20value%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20fromBalance%20%3D%20%24._balances%5Bfrom%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28fromBalance%20%3C%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC20InsufficientBalance%28from%2C%20fromBalance%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Overflow%20not%20possible%3A%20value%20%3C%3D%20fromBalance%20%3C%3D%20totalSupply.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24._balances%5Bfrom%5D%20%3D%20fromBalance%20-%20value%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28to%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Overflow%20not%20possible%3A%20value%20%3C%3D%20totalSupply%20or%20value%20%3C%3D%20fromBalance%20%3C%3D%20totalSupply.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24._totalSupply%20-%3D%20value%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Overflow%20not%20possible%3A%20balance%20%2B%20value%20is%20at%20most%20totalSupply%2C%20which%20we%20know%20fits%20into%20a%20uint256.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24._balances%5Bto%5D%20%2B%3D%20value%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20emit%20Transfer%28from%2C%20to%2C%20value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Creates%20a%20%60value%60%20amount%20of%20tokens%20and%20assigns%20them%20to%20%60account%60%2C%20by%20transferring%20it%20from%20address%280%29.%5Cn%20%20%20%20%20%2A%20Relies%20on%20the%20%60_update%60%20mechanism%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransfer%7D%20event%20with%20%60from%60%20set%20to%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20This%20function%20is%20not%20virtual%2C%20%7B_update%7D%20should%20be%20overridden%20instead.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_mint%28address%20account%2C%20uint256%20value%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28account%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC20InvalidReceiver%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_update%28address%280%29%2C%20account%2C%20value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Destroys%20a%20%60value%60%20amount%20of%20tokens%20from%20%60account%60%2C%20lowering%20the%20total%20supply.%5Cn%20%20%20%20%20%2A%20Relies%20on%20the%20%60_update%60%20mechanism.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransfer%7D%20event%20with%20%60to%60%20set%20to%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20This%20function%20is%20not%20virtual%2C%20%7B_update%7D%20should%20be%20overridden%20instead%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_burn%28address%20account%2C%20uint256%20value%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28account%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC20InvalidSender%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_update%28account%2C%20address%280%29%2C%20value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Sets%20%60value%60%20as%20the%20allowance%20of%20%60spender%60%20over%20the%20%60owner%60%20s%20tokens.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20internal%20function%20is%20equivalent%20to%20%60approve%60%2C%20and%20can%20be%20used%20to%5Cn%20%20%20%20%20%2A%20e.g.%20set%20automatic%20allowances%20for%20certain%20subsystems%2C%20etc.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20an%20%7BApproval%7D%20event.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60owner%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20-%20%60spender%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Overrides%20to%20this%20logic%20should%20be%20done%20to%20the%20variant%20with%20an%20additional%20%60bool%20emitEvent%60%20argument.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_approve%28address%20owner%2C%20address%20spender%2C%20uint256%20value%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20_approve%28owner%2C%20spender%2C%20value%2C%20true%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Variant%20of%20%7B_approve%7D%20with%20an%20optional%20flag%20to%20enable%20or%20disable%20the%20%7BApproval%7D%20event.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20By%20default%20%28when%20calling%20%7B_approve%7D%29%20the%20flag%20is%20set%20to%20true.%20On%20the%20other%20hand%2C%20approval%20changes%20made%20by%5Cn%20%20%20%20%20%2A%20%60_spendAllowance%60%20during%20the%20%60transferFrom%60%20operation%20set%20the%20flag%20to%20false.%20This%20saves%20gas%20by%20not%20emitting%20any%5Cn%20%20%20%20%20%2A%20%60Approval%60%20event%20during%20%60transferFrom%60%20operations.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Anyone%20who%20wishes%20to%20continue%20emitting%20%60Approval%60%20events%20on%20the%60transferFrom%60%20operation%20can%20force%20the%20flag%20to%5Cn%20%20%20%20%20%2A%20true%20using%20the%20following%20override%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20%60%60%60solidity%5Cn%20%20%20%20%20%2A%20function%20_approve%28address%20owner%2C%20address%20spender%2C%20uint256%20value%2C%20bool%29%20internal%20virtual%20override%20%7B%5Cn%20%20%20%20%20%2A%20%20%20%20%20super._approve%28owner%2C%20spender%2C%20value%2C%20true%29%3B%5Cn%20%20%20%20%20%2A%20%7D%5Cn%20%20%20%20%20%2A%20%60%60%60%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%20are%20the%20same%20as%20%7B_approve%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_approve%28address%20owner%2C%20address%20spender%2C%20uint256%20value%2C%20bool%20emitEvent%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20ERC20Storage%20storage%20%24%20%3D%20_getERC20Storage%28%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28owner%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC20InvalidApprover%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20%28spender%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC20InvalidSpender%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%24._allowances%5Bowner%5D%5Bspender%5D%20%3D%20value%3B%5Cn%20%20%20%20%20%20%20%20if%20%28emitEvent%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20emit%20Approval%28owner%2C%20spender%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Updates%20%60owner%60%20s%20allowance%20for%20%60spender%60%20based%20on%20spent%20%60value%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Does%20not%20update%20the%20allowance%20value%20in%20case%20of%20infinite%20allowance.%5Cn%20%20%20%20%20%2A%20Revert%20if%20not%20enough%20allowance%20is%20available.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Does%20not%20emit%20an%20%7BApproval%7D%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_spendAllowance%28address%20owner%2C%20address%20spender%2C%20uint256%20value%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20currentAllowance%20%3D%20allowance%28owner%2C%20spender%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28currentAllowance%20%3C%20type%28uint256%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28currentAllowance%20%3C%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC20InsufficientAllowance%28spender%2C%20currentAllowance%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_approve%28owner%2C%20spender%2C%20currentAllowance%20-%20value%2C%20false%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts-upgradeable%2Ftoken%2FERC20%2Fextensions%2FERC20VotesUpgradeable.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28token%2FERC20%2Fextensions%2FERC20Votes.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BERC20Upgradeable%7D%20from%20%5C%22..%2FERC20Upgradeable.sol%5C%22%3B%5Cnimport%20%7BVotesUpgradeable%7D%20from%20%5C%22..%2F..%2F..%2Fgovernance%2Futils%2FVotesUpgradeable.sol%5C%22%3B%5Cnimport%20%7BCheckpoints%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Fstructs%2FCheckpoints.sol%5C%22%3B%5Cnimport%20%7BInitializable%7D%20from%20%5C%22..%2F..%2F..%2Fproxy%2Futils%2FInitializable.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Extension%20of%20ERC-20%20to%20support%20Compound-like%20voting%20and%20delegation.%20This%20version%20is%20more%20generic%20than%20Compound%27s%2C%5Cn%20%2A%20and%20supports%20token%20supply%20up%20to%202%5E208%5E%20-%201%2C%20while%20COMP%20is%20limited%20to%202%5E96%5E%20-%201.%5Cn%20%2A%5Cn%20%2A%20NOTE%3A%20This%20contract%20does%20not%20provide%20interface%20compatibility%20with%20Compound%27s%20COMP%20token.%5Cn%20%2A%5Cn%20%2A%20This%20extension%20keeps%20a%20history%20%28checkpoints%29%20of%20each%20account%27s%20vote%20power.%20Vote%20power%20can%20be%20delegated%20either%5Cn%20%2A%20by%20calling%20the%20%7BVotes-delegate%7D%20function%20directly%2C%20or%20by%20providing%20a%20signature%20to%20be%20used%20with%20%7BVotes-delegateBySig%7D.%20Voting%5Cn%20%2A%20power%20can%20be%20queried%20through%20the%20public%20accessors%20%7BVotes-getVotes%7D%20and%20%7BVotes-getPastVotes%7D.%5Cn%20%2A%5Cn%20%2A%20By%20default%2C%20token%20balance%20does%20not%20account%20for%20voting%20power.%20This%20makes%20transfers%20cheaper.%20The%20downside%20is%20that%20it%5Cn%20%2A%20requires%20users%20to%20delegate%20to%20themselves%20in%20order%20to%20activate%20checkpoints%20and%20have%20their%20voting%20power%20tracked.%5Cn%20%2A%2F%5Cnabstract%20contract%20ERC20VotesUpgradeable%20is%20Initializable%2C%20ERC20Upgradeable%2C%20VotesUpgradeable%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Total%20supply%20cap%20has%20been%20exceeded%2C%20introducing%20a%20risk%20of%20votes%20overflowing.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC20ExceededSafeSupply%28uint256%20increasedSupply%2C%20uint256%20cap%29%3B%5Cn%5Cn%20%20%20%20function%20__ERC20Votes_init%28%29%20internal%20onlyInitializing%20%7B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20__ERC20Votes_init_unchained%28%29%20internal%20onlyInitializing%20%7B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Maximum%20token%20supply.%20Defaults%20to%20%60type%28uint208%29.max%60%20%282%5E208%5E%20-%201%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20maximum%20is%20enforced%20in%20%7B_update%7D.%20It%20limits%20the%20total%20supply%20of%20the%20token%2C%20which%20is%20otherwise%20a%20uint256%2C%5Cn%20%20%20%20%20%2A%20so%20that%20checkpoints%20can%20be%20stored%20in%20the%20Trace208%20structure%20used%20by%20%7BVotes%7D.%20Increasing%20this%20value%20will%20not%5Cn%20%20%20%20%20%2A%20remove%20the%20underlying%20limitation%2C%20and%20will%20cause%20%7B_update%7D%20to%20fail%20because%20of%20a%20math%20overflow%20in%5Cn%20%20%20%20%20%2A%20%7BVotes-_transferVotingUnits%7D.%20An%20override%20could%20be%20used%20to%20further%20restrict%20the%20total%20supply%20%28to%20a%20lower%20value%29%20if%5Cn%20%20%20%20%20%2A%20additional%20logic%20requires%20it.%20When%20resolving%20override%20conflicts%20on%20this%20function%2C%20the%20minimum%20should%20be%5Cn%20%20%20%20%20%2A%20returned.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_maxSupply%28%29%20internal%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20type%28uint208%29.max%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Move%20voting%20power%20when%20tokens%20are%20transferred.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BIVotes-DelegateVotesChanged%7D%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_update%28address%20from%2C%20address%20to%2C%20uint256%20value%29%20internal%20virtual%20override%20%7B%5Cn%20%20%20%20%20%20%20%20super._update%28from%2C%20to%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28from%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20supply%20%3D%20totalSupply%28%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20cap%20%3D%20_maxSupply%28%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28supply%20%3E%20cap%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC20ExceededSafeSupply%28supply%2C%20cap%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_transferVotingUnits%28from%2C%20to%2C%20value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20voting%20units%20of%20an%20%60account%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20Overriding%20this%20function%20may%20compromise%20the%20internal%20vote%20accounting.%5Cn%20%20%20%20%20%2A%20%60ERC20Votes%60%20assumes%20tokens%20map%20to%20voting%20units%201%3A1%20and%20this%20is%20not%20easy%20to%20change.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_getVotingUnits%28address%20account%29%20internal%20view%20virtual%20override%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20balanceOf%28account%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Get%20number%20of%20checkpoints%20for%20%60account%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20numCheckpoints%28address%20account%29%20public%20view%20virtual%20returns%20%28uint32%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_numCheckpoints%28account%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Get%20the%20%60pos%60-th%20checkpoint%20for%20%60account%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20checkpoints%28address%20account%2C%20uint32%20pos%29%20public%20view%20virtual%20returns%20%28Checkpoints.Checkpoint208%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_checkpoints%28account%2C%20pos%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts-upgradeable%2Futils%2FContextUpgradeable.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.0.1%29%20%28utils%2FContext.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cnimport%20%7BInitializable%7D%20from%20%5C%22..%2Fproxy%2Futils%2FInitializable.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Provides%20information%20about%20the%20current%20execution%20context%2C%20including%20the%5Cn%20%2A%20sender%20of%20the%20transaction%20and%20its%20data.%20While%20these%20are%20generally%20available%5Cn%20%2A%20via%20msg.sender%20and%20msg.data%2C%20they%20should%20not%20be%20accessed%20in%20such%20a%20direct%5Cn%20%2A%20manner%2C%20since%20when%20dealing%20with%20meta-transactions%20the%20account%20sending%20and%5Cn%20%2A%20paying%20for%20execution%20may%20not%20be%20the%20actual%20sender%20%28as%20far%20as%20an%20application%5Cn%20%2A%20is%20concerned%29.%5Cn%20%2A%5Cn%20%2A%20This%20contract%20is%20only%20required%20for%20intermediate%2C%20library-like%20contracts.%5Cn%20%2A%2F%5Cnabstract%20contract%20ContextUpgradeable%20is%20Initializable%20%7B%5Cn%20%20%20%20function%20__Context_init%28%29%20internal%20onlyInitializing%20%7B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20__Context_init_unchained%28%29%20internal%20onlyInitializing%20%7B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20function%20_msgSender%28%29%20internal%20view%20virtual%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20msg.sender%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_msgData%28%29%20internal%20view%20virtual%20returns%20%28bytes%20calldata%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20msg.data%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_contextSuffixLength%28%29%20internal%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%200%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts-upgradeable%2Futils%2Fcryptography%2FEIP712Upgradeable.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2Fcryptography%2FEIP712.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BMessageHashUtils%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Fcryptography%2FMessageHashUtils.sol%5C%22%3B%5Cnimport%20%7BIERC5267%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Finterfaces%2FIERC5267.sol%5C%22%3B%5Cnimport%20%7BInitializable%7D%20from%20%5C%22..%2F..%2Fproxy%2Futils%2FInitializable.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-712%5BEIP-712%5D%20is%20a%20standard%20for%20hashing%20and%20signing%20of%20typed%20structured%20data.%5Cn%20%2A%5Cn%20%2A%20The%20encoding%20scheme%20specified%20in%20the%20EIP%20requires%20a%20domain%20separator%20and%20a%20hash%20of%20the%20typed%20structured%20data%2C%20whose%5Cn%20%2A%20encoding%20is%20very%20generic%20and%20therefore%20its%20implementation%20in%20Solidity%20is%20not%20feasible%2C%20thus%20this%20contract%5Cn%20%2A%20does%20not%20implement%20the%20encoding%20itself.%20Protocols%20need%20to%20implement%20the%20type-specific%20encoding%20they%20need%20in%20order%20to%5Cn%20%2A%20produce%20the%20hash%20of%20their%20typed%20data%20using%20a%20combination%20of%20%60abi.encode%60%20and%20%60keccak256%60.%5Cn%20%2A%5Cn%20%2A%20This%20contract%20implements%20the%20EIP-712%20domain%20separator%20%28%7B_domainSeparatorV4%7D%29%20that%20is%20used%20as%20part%20of%20the%20encoding%5Cn%20%2A%20scheme%2C%20and%20the%20final%20step%20of%20the%20encoding%20to%20obtain%20the%20message%20digest%20that%20is%20then%20signed%20via%20ECDSA%5Cn%20%2A%20%28%7B_hashTypedDataV4%7D%29.%5Cn%20%2A%5Cn%20%2A%20The%20implementation%20of%20the%20domain%20separator%20was%20designed%20to%20be%20as%20efficient%20as%20possible%20while%20still%20properly%20updating%5Cn%20%2A%20the%20chain%20id%20to%20protect%20against%20replay%20attacks%20on%20an%20eventual%20fork%20of%20the%20chain.%5Cn%20%2A%5Cn%20%2A%20NOTE%3A%20This%20contract%20implements%20the%20version%20of%20the%20encoding%20known%20as%20%5C%22v4%5C%22%2C%20as%20implemented%20by%20the%20JSON%20RPC%20method%5Cn%20%2A%20https%3A%2F%2Fdocs.metamask.io%2Fguide%2Fsigning-data.html%5B%60eth_signTypedDataV4%60%20in%20MetaMask%5D.%5Cn%20%2A%5Cn%20%2A%20NOTE%3A%20In%20the%20upgradeable%20version%20of%20this%20contract%2C%20the%20cached%20values%20will%20correspond%20to%20the%20address%2C%20and%20the%20domain%5Cn%20%2A%20separator%20of%20the%20implementation%20contract.%20This%20will%20cause%20the%20%7B_domainSeparatorV4%7D%20function%20to%20always%20rebuild%20the%5Cn%20%2A%20separator%20from%20the%20immutable%20values%2C%20which%20is%20cheaper%20than%20accessing%20a%20cached%20version%20in%20cold%20storage.%5Cn%20%2A%2F%5Cnabstract%20contract%20EIP712Upgradeable%20is%20Initializable%2C%20IERC5267%20%7B%5Cn%20%20%20%20bytes32%20private%20constant%20TYPE_HASH%20%3D%5Cn%20%20%20%20%20%20%20%20keccak256%28%5C%22EIP712Domain%28string%20name%2Cstring%20version%2Cuint256%20chainId%2Caddress%20verifyingContract%29%5C%22%29%3B%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40custom%3Astorage-location%20erc7201%3Aopenzeppelin.storage.EIP712%5Cn%20%20%20%20struct%20EIP712Storage%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%2F%20%40custom%3Aoz-renamed-from%20_HASHED_NAME%5Cn%20%20%20%20%20%20%20%20bytes32%20_hashedName%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%2F%20%40custom%3Aoz-renamed-from%20_HASHED_VERSION%5Cn%20%20%20%20%20%20%20%20bytes32%20_hashedVersion%3B%5Cn%5Cn%20%20%20%20%20%20%20%20string%20_name%3B%5Cn%20%20%20%20%20%20%20%20string%20_version%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%20keccak256%28abi.encode%28uint256%28keccak256%28%5C%22openzeppelin.storage.EIP712%5C%22%29%29%20-%201%29%29%20%26%20~bytes32%28uint256%280xff%29%29%5Cn%20%20%20%20bytes32%20private%20constant%20EIP712StorageLocation%20%3D%200xa16a46d94261c7517cc8ff89f61c0ce93598e3c849801011dee649a6a557d100%3B%5Cn%5Cn%20%20%20%20function%20_getEIP712Storage%28%29%20private%20pure%20returns%20%28EIP712Storage%20storage%20%24%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24.slot%20%3A%3D%20EIP712StorageLocation%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Initializes%20the%20domain%20separator%20and%20parameter%20caches.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20The%20meaning%20of%20%60name%60%20and%20%60version%60%20is%20specified%20in%5Cn%20%20%20%20%20%2A%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-712%23definition-of-domainseparator%5BEIP-712%5D%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60name%60%3A%20the%20user%20readable%20name%20of%20the%20signing%20domain%2C%20i.e.%20the%20name%20of%20the%20DApp%20or%20the%20protocol.%5Cn%20%20%20%20%20%2A%20-%20%60version%60%3A%20the%20current%20major%20version%20of%20the%20signing%20domain.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20These%20parameters%20cannot%20be%20changed%20except%20through%20a%20xref%3Alearn%3A%3Aupgrading-smart-contracts.adoc%5Bsmart%5Cn%20%20%20%20%20%2A%20contract%20upgrade%5D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20__EIP712_init%28string%20memory%20name%2C%20string%20memory%20version%29%20internal%20onlyInitializing%20%7B%5Cn%20%20%20%20%20%20%20%20__EIP712_init_unchained%28name%2C%20version%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20__EIP712_init_unchained%28string%20memory%20name%2C%20string%20memory%20version%29%20internal%20onlyInitializing%20%7B%5Cn%20%20%20%20%20%20%20%20EIP712Storage%20storage%20%24%20%3D%20_getEIP712Storage%28%29%3B%5Cn%20%20%20%20%20%20%20%20%24._name%20%3D%20name%3B%5Cn%20%20%20%20%20%20%20%20%24._version%20%3D%20version%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Reset%20prior%20values%20in%20storage%20if%20upgrading%5Cn%20%20%20%20%20%20%20%20%24._hashedName%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20%24._hashedVersion%20%3D%200%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20domain%20separator%20for%20the%20current%20chain.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_domainSeparatorV4%28%29%20internal%20view%20returns%20%28bytes32%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_buildDomainSeparator%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_buildDomainSeparator%28%29%20private%20view%20returns%20%28bytes32%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20keccak256%28abi.encode%28TYPE_HASH%2C%20_EIP712NameHash%28%29%2C%20_EIP712VersionHash%28%29%2C%20block.chainid%2C%20address%28this%29%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Given%20an%20already%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-712%23definition-of-hashstruct%5Bhashed%20struct%5D%2C%20this%5Cn%20%20%20%20%20%2A%20function%20returns%20the%20hash%20of%20the%20fully%20encoded%20EIP712%20message%20for%20this%20domain.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20hash%20can%20be%20used%20together%20with%20%7BECDSA-recover%7D%20to%20obtain%20the%20signer%20of%20a%20message.%20For%20example%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20%60%60%60solidity%5Cn%20%20%20%20%20%2A%20bytes32%20digest%20%3D%20_hashTypedDataV4%28keccak256%28abi.encode%28%5Cn%20%20%20%20%20%2A%20%20%20%20%20keccak256%28%5C%22Mail%28address%20to%2Cstring%20contents%29%5C%22%29%2C%5Cn%20%20%20%20%20%2A%20%20%20%20%20mailTo%2C%5Cn%20%20%20%20%20%2A%20%20%20%20%20keccak256%28bytes%28mailContents%29%29%5Cn%20%20%20%20%20%2A%20%29%29%29%3B%5Cn%20%20%20%20%20%2A%20address%20signer%20%3D%20ECDSA.recover%28digest%2C%20signature%29%3B%5Cn%20%20%20%20%20%2A%20%60%60%60%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_hashTypedDataV4%28bytes32%20structHash%29%20internal%20view%20virtual%20returns%20%28bytes32%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20MessageHashUtils.toTypedDataHash%28_domainSeparatorV4%28%29%2C%20structHash%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC-5267%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20eip712Domain%28%29%5Cn%20%20%20%20%20%20%20%20public%5Cn%20%20%20%20%20%20%20%20view%5Cn%20%20%20%20%20%20%20%20virtual%5Cn%20%20%20%20%20%20%20%20returns%20%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes1%20fields%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20string%20memory%20name%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20string%20memory%20version%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20chainId%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20address%20verifyingContract%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes32%20salt%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20extensions%5Cn%20%20%20%20%20%20%20%20%29%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20EIP712Storage%20storage%20%24%20%3D%20_getEIP712Storage%28%29%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20If%20the%20hashed%20name%20and%20version%20in%20storage%20are%20non-zero%2C%20the%20contract%20hasn%27t%20been%20properly%20initialized%5Cn%20%20%20%20%20%20%20%20%2F%2F%20and%20the%20EIP712%20domain%20is%20not%20reliable%2C%20as%20it%20will%20be%20missing%20name%20and%20version.%5Cn%20%20%20%20%20%20%20%20require%28%24._hashedName%20%3D%3D%200%20%26%26%20%24._hashedVersion%20%3D%3D%200%2C%20%5C%22EIP712%3A%20Uninitialized%5C%22%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20return%20%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20hex%5C%220f%5C%22%2C%20%2F%2F%2001111%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_EIP712Name%28%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_EIP712Version%28%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20block.chainid%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20address%28this%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes32%280%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20new%20uint256%5B%5D%280%29%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20name%20parameter%20for%20the%20EIP712%20domain.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20This%20function%20reads%20from%20storage%20by%20default%2C%20but%20can%20be%20redefined%20to%20return%20a%20constant%20value%20if%20gas%20costs%5Cn%20%20%20%20%20%2A%20are%20a%20concern.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_EIP712Name%28%29%20internal%20view%20virtual%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20EIP712Storage%20storage%20%24%20%3D%20_getEIP712Storage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20%24._name%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20version%20parameter%20for%20the%20EIP712%20domain.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20This%20function%20reads%20from%20storage%20by%20default%2C%20but%20can%20be%20redefined%20to%20return%20a%20constant%20value%20if%20gas%20costs%5Cn%20%20%20%20%20%2A%20are%20a%20concern.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_EIP712Version%28%29%20internal%20view%20virtual%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20EIP712Storage%20storage%20%24%20%3D%20_getEIP712Storage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20%24._version%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20hash%20of%20the%20name%20parameter%20for%20the%20EIP712%20domain.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20In%20previous%20versions%20this%20function%20was%20virtual.%20In%20this%20version%20you%20should%20override%20%60_EIP712Name%60%20instead.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_EIP712NameHash%28%29%20internal%20view%20returns%20%28bytes32%29%20%7B%5Cn%20%20%20%20%20%20%20%20EIP712Storage%20storage%20%24%20%3D%20_getEIP712Storage%28%29%3B%5Cn%20%20%20%20%20%20%20%20string%20memory%20name%20%3D%20_EIP712Name%28%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28bytes%28name%29.length%20%3E%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20keccak256%28bytes%28name%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20the%20name%20is%20empty%2C%20the%20contract%20may%20have%20been%20upgraded%20without%20initializing%20the%20new%20storage.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20We%20return%20the%20name%20hash%20in%20storage%20if%20non-zero%2C%20otherwise%20we%20assume%20the%20name%20is%20empty%20by%20design.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes32%20hashedName%20%3D%20%24._hashedName%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28hashedName%20%21%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20hashedName%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20keccak256%28%5C%22%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20hash%20of%20the%20version%20parameter%20for%20the%20EIP712%20domain.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20In%20previous%20versions%20this%20function%20was%20virtual.%20In%20this%20version%20you%20should%20override%20%60_EIP712Version%60%20instead.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_EIP712VersionHash%28%29%20internal%20view%20returns%20%28bytes32%29%20%7B%5Cn%20%20%20%20%20%20%20%20EIP712Storage%20storage%20%24%20%3D%20_getEIP712Storage%28%29%3B%5Cn%20%20%20%20%20%20%20%20string%20memory%20version%20%3D%20_EIP712Version%28%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28bytes%28version%29.length%20%3E%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20keccak256%28bytes%28version%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20the%20version%20is%20empty%2C%20the%20contract%20may%20have%20been%20upgraded%20without%20initializing%20the%20new%20storage.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20We%20return%20the%20version%20hash%20in%20storage%20if%20non-zero%2C%20otherwise%20we%20assume%20the%20version%20is%20empty%20by%20design.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes32%20hashedVersion%20%3D%20%24._hashedVersion%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28hashedVersion%20%21%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20hashedVersion%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20keccak256%28%5C%22%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts-upgradeable%2Futils%2Fintrospection%2FERC165Upgradeable.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2Fintrospection%2FERC165.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BIERC165%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Fintrospection%2FIERC165.sol%5C%22%3B%5Cnimport%20%7BInitializable%7D%20from%20%5C%22..%2F..%2Fproxy%2Futils%2FInitializable.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Implementation%20of%20the%20%7BIERC165%7D%20interface.%5Cn%20%2A%5Cn%20%2A%20Contracts%20that%20want%20to%20implement%20ERC-165%20should%20inherit%20from%20this%20contract%20and%20override%20%7BsupportsInterface%7D%20to%20check%5Cn%20%2A%20for%20the%20additional%20interface%20id%20that%20will%20be%20supported.%20For%20example%3A%5Cn%20%2A%5Cn%20%2A%20%60%60%60solidity%5Cn%20%2A%20function%20supportsInterface%28bytes4%20interfaceId%29%20public%20view%20virtual%20override%20returns%20%28bool%29%20%7B%5Cn%20%2A%20%20%20%20%20return%20interfaceId%20%3D%3D%20type%28MyInterface%29.interfaceId%20%7C%7C%20super.supportsInterface%28interfaceId%29%3B%5Cn%20%2A%20%7D%5Cn%20%2A%20%60%60%60%5Cn%20%2A%2F%5Cnabstract%20contract%20ERC165Upgradeable%20is%20Initializable%2C%20IERC165%20%7B%5Cn%20%20%20%20function%20__ERC165_init%28%29%20internal%20onlyInitializing%20%7B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20__ERC165_init_unchained%28%29%20internal%20onlyInitializing%20%7B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC165-supportsInterface%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20supportsInterface%28bytes4%20interfaceId%29%20public%20view%20virtual%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20interfaceId%20%3D%3D%20type%28IERC165%29.interfaceId%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts-upgradeable%2Futils%2FNoncesUpgradeable.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.0.0%29%20%28utils%2FNonces.sol%29%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cnimport%20%7BInitializable%7D%20from%20%5C%22..%2Fproxy%2Futils%2FInitializable.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Provides%20tracking%20nonces%20for%20addresses.%20Nonces%20will%20only%20increment.%5Cn%20%2A%2F%5Cnabstract%20contract%20NoncesUpgradeable%20is%20Initializable%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20nonce%20used%20for%20an%20%60account%60%20is%20not%20the%20expected%20current%20nonce.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20InvalidAccountNonce%28address%20account%2C%20uint256%20currentNonce%29%3B%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40custom%3Astorage-location%20erc7201%3Aopenzeppelin.storage.Nonces%5Cn%20%20%20%20struct%20NoncesStorage%20%7B%5Cn%20%20%20%20%20%20%20%20mapping%28address%20account%20%3D%3E%20uint256%29%20_nonces%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%20keccak256%28abi.encode%28uint256%28keccak256%28%5C%22openzeppelin.storage.Nonces%5C%22%29%29%20-%201%29%29%20%26%20~bytes32%28uint256%280xff%29%29%5Cn%20%20%20%20bytes32%20private%20constant%20NoncesStorageLocation%20%3D%200x5ab42ced628888259c08ac98db1eb0cf702fc1501344311d8b100cd1bfe4bb00%3B%5Cn%5Cn%20%20%20%20function%20_getNoncesStorage%28%29%20private%20pure%20returns%20%28NoncesStorage%20storage%20%24%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24.slot%20%3A%3D%20NoncesStorageLocation%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20__Nonces_init%28%29%20internal%20onlyInitializing%20%7B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20__Nonces_init_unchained%28%29%20internal%20onlyInitializing%20%7B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20next%20unused%20nonce%20for%20an%20address.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20nonces%28address%20owner%29%20public%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20NoncesStorage%20storage%20%24%20%3D%20_getNoncesStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20%24._nonces%5Bowner%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Consumes%20a%20nonce.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%20the%20current%20value%20and%20increments%20nonce.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_useNonce%28address%20owner%29%20internal%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20NoncesStorage%20storage%20%24%20%3D%20_getNoncesStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20For%20each%20account%2C%20the%20nonce%20has%20an%20initial%20value%20of%200%2C%20can%20only%20be%20incremented%20by%20one%2C%20and%20cannot%20be%5Cn%20%20%20%20%20%20%20%20%2F%2F%20decremented%20or%20reset.%20This%20guarantees%20that%20the%20nonce%20never%20overflows.%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20It%20is%20important%20to%20do%20x%2B%2B%20and%20not%20%2B%2Bx%20here.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%24._nonces%5Bowner%5D%2B%2B%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Same%20as%20%7B_useNonce%7D%20but%20checking%20that%20%60nonce%60%20is%20the%20next%20valid%20for%20%60owner%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_useCheckedNonce%28address%20owner%2C%20uint256%20nonce%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20current%20%3D%20_useNonce%28owner%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28nonce%20%21%3D%20current%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20InvalidAccountNonce%28owner%2C%20current%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts-upgradeable%2Futils%2FReentrancyGuardUpgradeable.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2FReentrancyGuard.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cnimport%20%7BInitializable%7D%20from%20%5C%22..%2Fproxy%2Futils%2FInitializable.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Contract%20module%20that%20helps%20prevent%20reentrant%20calls%20to%20a%20function.%5Cn%20%2A%5Cn%20%2A%20Inheriting%20from%20%60ReentrancyGuard%60%20will%20make%20the%20%7BnonReentrant%7D%20modifier%5Cn%20%2A%20available%2C%20which%20can%20be%20applied%20to%20functions%20to%20make%20sure%20there%20are%20no%20nested%5Cn%20%2A%20%28reentrant%29%20calls%20to%20them.%5Cn%20%2A%5Cn%20%2A%20Note%20that%20because%20there%20is%20a%20single%20%60nonReentrant%60%20guard%2C%20functions%20marked%20as%5Cn%20%2A%20%60nonReentrant%60%20may%20not%20call%20one%20another.%20This%20can%20be%20worked%20around%20by%20making%5Cn%20%2A%20those%20functions%20%60private%60%2C%20and%20then%20adding%20%60external%60%20%60nonReentrant%60%20entry%5Cn%20%2A%20points%20to%20them.%5Cn%20%2A%5Cn%20%2A%20TIP%3A%20If%20EIP-1153%20%28transient%20storage%29%20is%20available%20on%20the%20chain%20you%27re%20deploying%20at%2C%5Cn%20%2A%20consider%20using%20%7BReentrancyGuardTransient%7D%20instead.%5Cn%20%2A%5Cn%20%2A%20TIP%3A%20If%20you%20would%20like%20to%20learn%20more%20about%20reentrancy%20and%20alternative%20ways%5Cn%20%2A%20to%20protect%20against%20it%2C%20check%20out%20our%20blog%20post%5Cn%20%2A%20https%3A%2F%2Fblog.openzeppelin.com%2Freentrancy-after-istanbul%2F%5BReentrancy%20After%20Istanbul%5D.%5Cn%20%2A%2F%5Cnabstract%20contract%20ReentrancyGuardUpgradeable%20is%20Initializable%20%7B%5Cn%20%20%20%20%2F%2F%20Booleans%20are%20more%20expensive%20than%20uint256%20or%20any%20type%20that%20takes%20up%20a%20full%5Cn%20%20%20%20%2F%2F%20word%20because%20each%20write%20operation%20emits%20an%20extra%20SLOAD%20to%20first%20read%20the%5Cn%20%20%20%20%2F%2F%20slot%27s%20contents%2C%20replace%20the%20bits%20taken%20up%20by%20the%20boolean%2C%20and%20then%20write%5Cn%20%20%20%20%2F%2F%20back.%20This%20is%20the%20compiler%27s%20defense%20against%20contract%20upgrades%20and%5Cn%20%20%20%20%2F%2F%20pointer%20aliasing%2C%20and%20it%20cannot%20be%20disabled.%5Cn%5Cn%20%20%20%20%2F%2F%20The%20values%20being%20non-zero%20value%20makes%20deployment%20a%20bit%20more%20expensive%2C%5Cn%20%20%20%20%2F%2F%20but%20in%20exchange%20the%20refund%20on%20every%20call%20to%20nonReentrant%20will%20be%20lower%20in%5Cn%20%20%20%20%2F%2F%20amount.%20Since%20refunds%20are%20capped%20to%20a%20percentage%20of%20the%20total%5Cn%20%20%20%20%2F%2F%20transaction%27s%20gas%2C%20it%20is%20best%20to%20keep%20them%20low%20in%20cases%20like%20this%20one%2C%20to%5Cn%20%20%20%20%2F%2F%20increase%20the%20likelihood%20of%20the%20full%20refund%20coming%20into%20effect.%5Cn%20%20%20%20uint256%20private%20constant%20NOT_ENTERED%20%3D%201%3B%5Cn%20%20%20%20uint256%20private%20constant%20ENTERED%20%3D%202%3B%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40custom%3Astorage-location%20erc7201%3Aopenzeppelin.storage.ReentrancyGuard%5Cn%20%20%20%20struct%20ReentrancyGuardStorage%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20_status%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%20keccak256%28abi.encode%28uint256%28keccak256%28%5C%22openzeppelin.storage.ReentrancyGuard%5C%22%29%29%20-%201%29%29%20%26%20~bytes32%28uint256%280xff%29%29%5Cn%20%20%20%20bytes32%20private%20constant%20ReentrancyGuardStorageLocation%20%3D%200x9b779b17422d0df92223018b32b4d1fa46e071723d6817e2486d003becc55f00%3B%5Cn%5Cn%20%20%20%20function%20_getReentrancyGuardStorage%28%29%20private%20pure%20returns%20%28ReentrancyGuardStorage%20storage%20%24%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24.slot%20%3A%3D%20ReentrancyGuardStorageLocation%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Unauthorized%20reentrant%20call.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ReentrancyGuardReentrantCall%28%29%3B%5Cn%5Cn%20%20%20%20function%20__ReentrancyGuard_init%28%29%20internal%20onlyInitializing%20%7B%5Cn%20%20%20%20%20%20%20%20__ReentrancyGuard_init_unchained%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20__ReentrancyGuard_init_unchained%28%29%20internal%20onlyInitializing%20%7B%5Cn%20%20%20%20%20%20%20%20ReentrancyGuardStorage%20storage%20%24%20%3D%20_getReentrancyGuardStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20%24._status%20%3D%20NOT_ENTERED%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Prevents%20a%20contract%20from%20calling%20itself%2C%20directly%20or%20indirectly.%5Cn%20%20%20%20%20%2A%20Calling%20a%20%60nonReentrant%60%20function%20from%20another%20%60nonReentrant%60%5Cn%20%20%20%20%20%2A%20function%20is%20not%20supported.%20It%20is%20possible%20to%20prevent%20this%20from%20happening%5Cn%20%20%20%20%20%2A%20by%20making%20the%20%60nonReentrant%60%20function%20external%2C%20and%20making%20it%20call%20a%5Cn%20%20%20%20%20%2A%20%60private%60%20function%20that%20does%20the%20actual%20work.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20modifier%20nonReentrant%28%29%20%7B%5Cn%20%20%20%20%20%20%20%20_nonReentrantBefore%28%29%3B%5Cn%20%20%20%20%20%20%20%20_%3B%5Cn%20%20%20%20%20%20%20%20_nonReentrantAfter%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_nonReentrantBefore%28%29%20private%20%7B%5Cn%20%20%20%20%20%20%20%20ReentrancyGuardStorage%20storage%20%24%20%3D%20_getReentrancyGuardStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20On%20the%20first%20call%20to%20nonReentrant%2C%20_status%20will%20be%20NOT_ENTERED%5Cn%20%20%20%20%20%20%20%20if%20%28%24._status%20%3D%3D%20ENTERED%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ReentrancyGuardReentrantCall%28%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Any%20calls%20to%20nonReentrant%20after%20this%20point%20will%20fail%5Cn%20%20%20%20%20%20%20%20%24._status%20%3D%20ENTERED%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_nonReentrantAfter%28%29%20private%20%7B%5Cn%20%20%20%20%20%20%20%20ReentrancyGuardStorage%20storage%20%24%20%3D%20_getReentrancyGuardStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20By%20storing%20the%20original%20value%20once%20again%2C%20a%20refund%20is%20triggered%20%28see%5Cn%20%20%20%20%20%20%20%20%2F%2F%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-2200%29%5Cn%20%20%20%20%20%20%20%20%24._status%20%3D%20NOT_ENTERED%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20true%20if%20the%20reentrancy%20guard%20is%20currently%20set%20to%20%5C%22entered%5C%22%2C%20which%20indicates%20there%20is%20a%5Cn%20%20%20%20%20%2A%20%60nonReentrant%60%20function%20in%20the%20call%20stack.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_reentrancyGuardEntered%28%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20ReentrancyGuardStorage%20storage%20%24%20%3D%20_getReentrancyGuardStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20%24._status%20%3D%3D%20ENTERED%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Faccess%2FOwnable.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.0.0%29%20%28access%2FOwnable.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BContext%7D%20from%20%5C%22..%2Futils%2FContext.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Contract%20module%20which%20provides%20a%20basic%20access%20control%20mechanism%2C%20where%5Cn%20%2A%20there%20is%20an%20account%20%28an%20owner%29%20that%20can%20be%20granted%20exclusive%20access%20to%5Cn%20%2A%20specific%20functions.%5Cn%20%2A%5Cn%20%2A%20The%20initial%20owner%20is%20set%20to%20the%20address%20provided%20by%20the%20deployer.%20This%20can%5Cn%20%2A%20later%20be%20changed%20with%20%7BtransferOwnership%7D.%5Cn%20%2A%5Cn%20%2A%20This%20module%20is%20used%20through%20inheritance.%20It%20will%20make%20available%20the%20modifier%5Cn%20%2A%20%60onlyOwner%60%2C%20which%20can%20be%20applied%20to%20your%20functions%20to%20restrict%20their%20use%20to%5Cn%20%2A%20the%20owner.%5Cn%20%2A%2F%5Cnabstract%20contract%20Ownable%20is%20Context%20%7B%5Cn%20%20%20%20address%20private%20_owner%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20caller%20account%20is%20not%20authorized%20to%20perform%20an%20operation.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20OwnableUnauthorizedAccount%28address%20account%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20owner%20is%20not%20a%20valid%20owner%20account.%20%28eg.%20%60address%280%29%60%29%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20OwnableInvalidOwner%28address%20owner%29%3B%5Cn%5Cn%20%20%20%20event%20OwnershipTransferred%28address%20indexed%20previousOwner%2C%20address%20indexed%20newOwner%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Initializes%20the%20contract%20setting%20the%20address%20provided%20by%20the%20deployer%20as%20the%20initial%20owner.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20constructor%28address%20initialOwner%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28initialOwner%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20OwnableInvalidOwner%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_transferOwnership%28initialOwner%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Throws%20if%20called%20by%20any%20account%20other%20than%20the%20owner.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20modifier%20onlyOwner%28%29%20%7B%5Cn%20%20%20%20%20%20%20%20_checkOwner%28%29%3B%5Cn%20%20%20%20%20%20%20%20_%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20address%20of%20the%20current%20owner.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20owner%28%29%20public%20view%20virtual%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_owner%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Throws%20if%20the%20sender%20is%20not%20the%20owner.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_checkOwner%28%29%20internal%20view%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28owner%28%29%20%21%3D%20_msgSender%28%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20OwnableUnauthorizedAccount%28_msgSender%28%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Leaves%20the%20contract%20without%20owner.%20It%20will%20not%20be%20possible%20to%20call%5Cn%20%20%20%20%20%2A%20%60onlyOwner%60%20functions.%20Can%20only%20be%20called%20by%20the%20current%20owner.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20Renouncing%20ownership%20will%20leave%20the%20contract%20without%20an%20owner%2C%5Cn%20%20%20%20%20%2A%20thereby%20disabling%20any%20functionality%20that%20is%20only%20available%20to%20the%20owner.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20renounceOwnership%28%29%20public%20virtual%20onlyOwner%20%7B%5Cn%20%20%20%20%20%20%20%20_transferOwnership%28address%280%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Transfers%20ownership%20of%20the%20contract%20to%20a%20new%20account%20%28%60newOwner%60%29.%5Cn%20%20%20%20%20%2A%20Can%20only%20be%20called%20by%20the%20current%20owner.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20transferOwnership%28address%20newOwner%29%20public%20virtual%20onlyOwner%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28newOwner%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20OwnableInvalidOwner%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_transferOwnership%28newOwner%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Transfers%20ownership%20of%20the%20contract%20to%20a%20new%20account%20%28%60newOwner%60%29.%5Cn%20%20%20%20%20%2A%20Internal%20function%20without%20access%20restriction.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_transferOwnership%28address%20newOwner%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20address%20oldOwner%20%3D%20_owner%3B%5Cn%20%20%20%20%20%20%20%20_owner%20%3D%20newOwner%3B%5Cn%20%20%20%20%20%20%20%20emit%20OwnershipTransferred%28oldOwner%2C%20newOwner%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Fgovernance%2Futils%2FIVotes.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.0.0%29%20%28governance%2Futils%2FIVotes.sol%29%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Common%20interface%20for%20%7BERC20Votes%7D%2C%20%7BERC721Votes%7D%2C%20and%20other%20%7BVotes%7D-enabled%20contracts.%5Cn%20%2A%2F%5Cninterface%20IVotes%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20signature%20used%20has%20expired.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20VotesExpiredSignature%28uint256%20expiry%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Emitted%20when%20an%20account%20changes%20their%20delegate.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20event%20DelegateChanged%28address%20indexed%20delegator%2C%20address%20indexed%20fromDelegate%2C%20address%20indexed%20toDelegate%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Emitted%20when%20a%20token%20transfer%20or%20delegate%20change%20results%20in%20changes%20to%20a%20delegate%27s%20number%20of%20voting%20units.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20event%20DelegateVotesChanged%28address%20indexed%20delegate%2C%20uint256%20previousVotes%2C%20uint256%20newVotes%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20current%20amount%20of%20votes%20that%20%60account%60%20has.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getVotes%28address%20account%29%20external%20view%20returns%20%28uint256%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20amount%20of%20votes%20that%20%60account%60%20had%20at%20a%20specific%20moment%20in%20the%20past.%20If%20the%20%60clock%28%29%60%20is%5Cn%20%20%20%20%20%2A%20configured%20to%20use%20block%20numbers%2C%20this%20will%20return%20the%20value%20at%20the%20end%20of%20the%20corresponding%20block.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getPastVotes%28address%20account%2C%20uint256%20timepoint%29%20external%20view%20returns%20%28uint256%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20total%20supply%20of%20votes%20available%20at%20a%20specific%20moment%20in%20the%20past.%20If%20the%20%60clock%28%29%60%20is%5Cn%20%20%20%20%20%2A%20configured%20to%20use%20block%20numbers%2C%20this%20will%20return%20the%20value%20at%20the%20end%20of%20the%20corresponding%20block.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20This%20value%20is%20the%20sum%20of%20all%20available%20votes%2C%20which%20is%20not%20necessarily%20the%20sum%20of%20all%20delegated%20votes.%5Cn%20%20%20%20%20%2A%20Votes%20that%20have%20not%20been%20delegated%20are%20still%20part%20of%20total%20supply%2C%20even%20though%20they%20would%20not%20participate%20in%20a%5Cn%20%20%20%20%20%2A%20vote.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getPastTotalSupply%28uint256%20timepoint%29%20external%20view%20returns%20%28uint256%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20delegate%20that%20%60account%60%20has%20chosen.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20delegates%28address%20account%29%20external%20view%20returns%20%28address%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Delegates%20votes%20from%20the%20sender%20to%20%60delegatee%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20delegate%28address%20delegatee%29%20external%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Delegates%20votes%20from%20signer%20to%20%60delegatee%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20delegateBySig%28address%20delegatee%2C%20uint256%20nonce%2C%20uint256%20expiry%2C%20uint8%20v%2C%20bytes32%20r%2C%20bytes32%20s%29%20external%3B%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Fgovernance%2Futils%2FVotes.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.2.0%29%20%28governance%2Futils%2FVotes.sol%29%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BIERC5805%7D%20from%20%5C%22..%2F..%2Finterfaces%2FIERC5805.sol%5C%22%3B%5Cnimport%20%7BContext%7D%20from%20%5C%22..%2F..%2Futils%2FContext.sol%5C%22%3B%5Cnimport%20%7BNonces%7D%20from%20%5C%22..%2F..%2Futils%2FNonces.sol%5C%22%3B%5Cnimport%20%7BEIP712%7D%20from%20%5C%22..%2F..%2Futils%2Fcryptography%2FEIP712.sol%5C%22%3B%5Cnimport%20%7BCheckpoints%7D%20from%20%5C%22..%2F..%2Futils%2Fstructs%2FCheckpoints.sol%5C%22%3B%5Cnimport%20%7BSafeCast%7D%20from%20%5C%22..%2F..%2Futils%2Fmath%2FSafeCast.sol%5C%22%3B%5Cnimport%20%7BECDSA%7D%20from%20%5C%22..%2F..%2Futils%2Fcryptography%2FECDSA.sol%5C%22%3B%5Cnimport%20%7BTime%7D%20from%20%5C%22..%2F..%2Futils%2Ftypes%2FTime.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20This%20is%20a%20base%20abstract%20contract%20that%20tracks%20voting%20units%2C%20which%20are%20a%20measure%20of%20voting%20power%20that%20can%20be%5Cn%20%2A%20transferred%2C%20and%20provides%20a%20system%20of%20vote%20delegation%2C%20where%20an%20account%20can%20delegate%20its%20voting%20units%20to%20a%20sort%20of%5Cn%20%2A%20%5C%22representative%5C%22%20that%20will%20pool%20delegated%20voting%20units%20from%20different%20accounts%20and%20can%20then%20use%20it%20to%20vote%20in%5Cn%20%2A%20decisions.%20In%20fact%2C%20voting%20units%20_must_%20be%20delegated%20in%20order%20to%20count%20as%20actual%20votes%2C%20and%20an%20account%20has%20to%5Cn%20%2A%20delegate%20those%20votes%20to%20itself%20if%20it%20wishes%20to%20participate%20in%20decisions%20and%20does%20not%20have%20a%20trusted%20representative.%5Cn%20%2A%5Cn%20%2A%20This%20contract%20is%20often%20combined%20with%20a%20token%20contract%20such%20that%20voting%20units%20correspond%20to%20token%20units.%20For%20an%5Cn%20%2A%20example%2C%20see%20%7BERC721Votes%7D.%5Cn%20%2A%5Cn%20%2A%20The%20full%20history%20of%20delegate%20votes%20is%20tracked%20on-chain%20so%20that%20governance%20protocols%20can%20consider%20votes%20as%20distributed%5Cn%20%2A%20at%20a%20particular%20block%20number%20to%20protect%20against%20flash%20loans%20and%20double%20voting.%20The%20opt-in%20delegate%20system%20makes%20the%5Cn%20%2A%20cost%20of%20this%20history%20tracking%20optional.%5Cn%20%2A%5Cn%20%2A%20When%20using%20this%20module%20the%20derived%20contract%20must%20implement%20%7B_getVotingUnits%7D%20%28for%20example%2C%20make%20it%20return%5Cn%20%2A%20%7BERC721-balanceOf%7D%29%2C%20and%20can%20use%20%7B_transferVotingUnits%7D%20to%20track%20a%20change%20in%20the%20distribution%20of%20those%20units%20%28in%20the%5Cn%20%2A%20previous%20example%2C%20it%20would%20be%20included%20in%20%7BERC721-_update%7D%29.%5Cn%20%2A%2F%5Cnabstract%20contract%20Votes%20is%20Context%2C%20EIP712%2C%20Nonces%2C%20IERC5805%20%7B%5Cn%20%20%20%20using%20Checkpoints%20for%20Checkpoints.Trace208%3B%5Cn%5Cn%20%20%20%20bytes32%20private%20constant%20DELEGATION_TYPEHASH%20%3D%5Cn%20%20%20%20%20%20%20%20keccak256%28%5C%22Delegation%28address%20delegatee%2Cuint256%20nonce%2Cuint256%20expiry%29%5C%22%29%3B%5Cn%5Cn%20%20%20%20mapping%28address%20account%20%3D%3E%20address%29%20private%20_delegatee%3B%5Cn%5Cn%20%20%20%20mapping%28address%20delegatee%20%3D%3E%20Checkpoints.Trace208%29%20private%20_delegateCheckpoints%3B%5Cn%5Cn%20%20%20%20Checkpoints.Trace208%20private%20_totalCheckpoints%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20clock%20was%20incorrectly%20modified.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC6372InconsistentClock%28%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Lookup%20to%20future%20votes%20is%20not%20available.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC5805FutureLookup%28uint256%20timepoint%2C%20uint48%20clock%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Clock%20used%20for%20flagging%20checkpoints.%20Can%20be%20overridden%20to%20implement%20timestamp%20based%5Cn%20%20%20%20%20%2A%20checkpoints%20%28and%20voting%29%2C%20in%20which%20case%20%7BCLOCK_MODE%7D%20should%20be%20overridden%20as%20well%20to%20match.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20clock%28%29%20public%20view%20virtual%20returns%20%28uint48%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20Time.blockNumber%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Machine-readable%20description%20of%20the%20clock%20as%20specified%20in%20ERC-6372.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20%2F%2F%20solhint-disable-next-line%20func-name-mixedcase%5Cn%20%20%20%20function%20CLOCK_MODE%28%29%20public%20view%20virtual%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Check%20that%20the%20clock%20was%20not%20modified%5Cn%20%20%20%20%20%20%20%20if%20%28clock%28%29%20%21%3D%20Time.blockNumber%28%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC6372InconsistentClock%28%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20%5C%22mode%3Dblocknumber%26from%3Ddefault%5C%22%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Validate%20that%20a%20timepoint%20is%20in%20the%20past%2C%20and%20return%20it%20as%20a%20uint48.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_validateTimepoint%28uint256%20timepoint%29%20internal%20view%20returns%20%28uint48%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint48%20currentTimepoint%20%3D%20clock%28%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28timepoint%20%3E%3D%20currentTimepoint%29%20revert%20ERC5805FutureLookup%28timepoint%2C%20currentTimepoint%29%3B%5Cn%20%20%20%20%20%20%20%20return%20SafeCast.toUint48%28timepoint%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20current%20amount%20of%20votes%20that%20%60account%60%20has.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getVotes%28address%20account%29%20public%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_delegateCheckpoints%5Baccount%5D.latest%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20amount%20of%20votes%20that%20%60account%60%20had%20at%20a%20specific%20moment%20in%20the%20past.%20If%20the%20%60clock%28%29%60%20is%5Cn%20%20%20%20%20%2A%20configured%20to%20use%20block%20numbers%2C%20this%20will%20return%20the%20value%20at%20the%20end%20of%20the%20corresponding%20block.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60timepoint%60%20must%20be%20in%20the%20past.%20If%20operating%20using%20block%20numbers%2C%20the%20block%20must%20be%20already%20mined.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getPastVotes%28address%20account%2C%20uint256%20timepoint%29%20public%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_delegateCheckpoints%5Baccount%5D.upperLookupRecent%28_validateTimepoint%28timepoint%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20total%20supply%20of%20votes%20available%20at%20a%20specific%20moment%20in%20the%20past.%20If%20the%20%60clock%28%29%60%20is%5Cn%20%20%20%20%20%2A%20configured%20to%20use%20block%20numbers%2C%20this%20will%20return%20the%20value%20at%20the%20end%20of%20the%20corresponding%20block.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20This%20value%20is%20the%20sum%20of%20all%20available%20votes%2C%20which%20is%20not%20necessarily%20the%20sum%20of%20all%20delegated%20votes.%5Cn%20%20%20%20%20%2A%20Votes%20that%20have%20not%20been%20delegated%20are%20still%20part%20of%20total%20supply%2C%20even%20though%20they%20would%20not%20participate%20in%20a%5Cn%20%20%20%20%20%2A%20vote.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60timepoint%60%20must%20be%20in%20the%20past.%20If%20operating%20using%20block%20numbers%2C%20the%20block%20must%20be%20already%20mined.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getPastTotalSupply%28uint256%20timepoint%29%20public%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_totalCheckpoints.upperLookupRecent%28_validateTimepoint%28timepoint%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20current%20total%20supply%20of%20votes.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_getTotalSupply%28%29%20internal%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_totalCheckpoints.latest%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20delegate%20that%20%60account%60%20has%20chosen.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20delegates%28address%20account%29%20public%20view%20virtual%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_delegatee%5Baccount%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Delegates%20votes%20from%20the%20sender%20to%20%60delegatee%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20delegate%28address%20delegatee%29%20public%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20address%20account%20%3D%20_msgSender%28%29%3B%5Cn%20%20%20%20%20%20%20%20_delegate%28account%2C%20delegatee%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Delegates%20votes%20from%20signer%20to%20%60delegatee%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20delegateBySig%28%5Cn%20%20%20%20%20%20%20%20address%20delegatee%2C%5Cn%20%20%20%20%20%20%20%20uint256%20nonce%2C%5Cn%20%20%20%20%20%20%20%20uint256%20expiry%2C%5Cn%20%20%20%20%20%20%20%20uint8%20v%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20r%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20s%5Cn%20%20%20%20%29%20public%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28block.timestamp%20%3E%20expiry%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20VotesExpiredSignature%28expiry%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20address%20signer%20%3D%20ECDSA.recover%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_hashTypedDataV4%28keccak256%28abi.encode%28DELEGATION_TYPEHASH%2C%20delegatee%2C%20nonce%2C%20expiry%29%29%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20v%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20r%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20s%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20_useCheckedNonce%28signer%2C%20nonce%29%3B%5Cn%20%20%20%20%20%20%20%20_delegate%28signer%2C%20delegatee%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Delegate%20all%20of%20%60account%60%27s%20voting%20units%20to%20%60delegatee%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20events%20%7BIVotes-DelegateChanged%7D%20and%20%7BIVotes-DelegateVotesChanged%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_delegate%28address%20account%2C%20address%20delegatee%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20address%20oldDelegate%20%3D%20delegates%28account%29%3B%5Cn%20%20%20%20%20%20%20%20_delegatee%5Baccount%5D%20%3D%20delegatee%3B%5Cn%5Cn%20%20%20%20%20%20%20%20emit%20DelegateChanged%28account%2C%20oldDelegate%2C%20delegatee%29%3B%5Cn%20%20%20%20%20%20%20%20_moveDelegateVotes%28oldDelegate%2C%20delegatee%2C%20_getVotingUnits%28account%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Transfers%2C%20mints%2C%20or%20burns%20voting%20units.%20To%20register%20a%20mint%2C%20%60from%60%20should%20be%20zero.%20To%20register%20a%20burn%2C%20%60to%60%5Cn%20%20%20%20%20%2A%20should%20be%20zero.%20Total%20supply%20of%20voting%20units%20will%20be%20adjusted%20with%20mints%20and%20burns.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_transferVotingUnits%28address%20from%2C%20address%20to%2C%20uint256%20amount%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28from%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_push%28_totalCheckpoints%2C%20_add%2C%20SafeCast.toUint208%28amount%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20%28to%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_push%28_totalCheckpoints%2C%20_subtract%2C%20SafeCast.toUint208%28amount%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_moveDelegateVotes%28delegates%28from%29%2C%20delegates%28to%29%2C%20amount%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Moves%20delegated%20votes%20from%20one%20delegate%20to%20another.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_moveDelegateVotes%28address%20from%2C%20address%20to%2C%20uint256%20amount%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28from%20%21%3D%20to%20%26%26%20amount%20%3E%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28from%20%21%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28uint256%20oldValue%2C%20uint256%20newValue%29%20%3D%20_push%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_delegateCheckpoints%5Bfrom%5D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_subtract%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20SafeCast.toUint208%28amount%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20emit%20DelegateVotesChanged%28from%2C%20oldValue%2C%20newValue%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28to%20%21%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28uint256%20oldValue%2C%20uint256%20newValue%29%20%3D%20_push%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_delegateCheckpoints%5Bto%5D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_add%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20SafeCast.toUint208%28amount%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20emit%20DelegateVotesChanged%28to%2C%20oldValue%2C%20newValue%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Get%20number%20of%20checkpoints%20for%20%60account%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_numCheckpoints%28address%20account%29%20internal%20view%20virtual%20returns%20%28uint32%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20SafeCast.toUint32%28_delegateCheckpoints%5Baccount%5D.length%28%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Get%20the%20%60pos%60-th%20checkpoint%20for%20%60account%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_checkpoints%28%5Cn%20%20%20%20%20%20%20%20address%20account%2C%5Cn%20%20%20%20%20%20%20%20uint32%20pos%5Cn%20%20%20%20%29%20internal%20view%20virtual%20returns%20%28Checkpoints.Checkpoint208%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_delegateCheckpoints%5Baccount%5D.at%28pos%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_push%28%5Cn%20%20%20%20%20%20%20%20Checkpoints.Trace208%20storage%20store%2C%5Cn%20%20%20%20%20%20%20%20function%28uint208%2C%20uint208%29%20view%20returns%20%28uint208%29%20op%2C%5Cn%20%20%20%20%20%20%20%20uint208%20delta%5Cn%20%20%20%20%29%20private%20returns%20%28uint208%20oldValue%2C%20uint208%20newValue%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20store.push%28clock%28%29%2C%20op%28store.latest%28%29%2C%20delta%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_add%28uint208%20a%2C%20uint208%20b%29%20private%20pure%20returns%20%28uint208%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20a%20%2B%20b%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_subtract%28uint208%20a%2C%20uint208%20b%29%20private%20pure%20returns%20%28uint208%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20a%20-%20b%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Must%20return%20the%20voting%20units%20held%20by%20an%20account.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_getVotingUnits%28address%29%20internal%20view%20virtual%20returns%20%28uint256%29%3B%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Finterfaces%2Fdraft-IERC6093.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28interfaces%2Fdraft-IERC6093.sol%29%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Standard%20ERC-20%20Errors%5Cn%20%2A%20Interface%20of%20the%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-6093%5BERC-6093%5D%20custom%20errors%20for%20ERC-20%20tokens.%5Cn%20%2A%2F%5Cninterface%20IERC20Errors%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Indicates%20an%20error%20related%20to%20the%20current%20%60balance%60%20of%20a%20%60sender%60.%20Used%20in%20transfers.%5Cn%20%20%20%20%20%2A%20%40param%20sender%20Address%20whose%20tokens%20are%20being%20transferred.%5Cn%20%20%20%20%20%2A%20%40param%20balance%20Current%20balance%20for%20the%20interacting%20account.%5Cn%20%20%20%20%20%2A%20%40param%20needed%20Minimum%20amount%20required%20to%20perform%20a%20transfer.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC20InsufficientBalance%28address%20sender%2C%20uint256%20balance%2C%20uint256%20needed%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Indicates%20a%20failure%20with%20the%20token%20%60sender%60.%20Used%20in%20transfers.%5Cn%20%20%20%20%20%2A%20%40param%20sender%20Address%20whose%20tokens%20are%20being%20transferred.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC20InvalidSender%28address%20sender%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Indicates%20a%20failure%20with%20the%20token%20%60receiver%60.%20Used%20in%20transfers.%5Cn%20%20%20%20%20%2A%20%40param%20receiver%20Address%20to%20which%20tokens%20are%20being%20transferred.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC20InvalidReceiver%28address%20receiver%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Indicates%20a%20failure%20with%20the%20%60spender%60%E2%80%99s%20%60allowance%60.%20Used%20in%20transfers.%5Cn%20%20%20%20%20%2A%20%40param%20spender%20Address%20that%20may%20be%20allowed%20to%20operate%20on%20tokens%20without%20being%20their%20owner.%5Cn%20%20%20%20%20%2A%20%40param%20allowance%20Amount%20of%20tokens%20a%20%60spender%60%20is%20allowed%20to%20operate%20with.%5Cn%20%20%20%20%20%2A%20%40param%20needed%20Minimum%20amount%20required%20to%20perform%20a%20transfer.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC20InsufficientAllowance%28address%20spender%2C%20uint256%20allowance%2C%20uint256%20needed%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Indicates%20a%20failure%20with%20the%20%60approver%60%20of%20a%20token%20to%20be%20approved.%20Used%20in%20approvals.%5Cn%20%20%20%20%20%2A%20%40param%20approver%20Address%20initiating%20an%20approval%20operation.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC20InvalidApprover%28address%20approver%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Indicates%20a%20failure%20with%20the%20%60spender%60%20to%20be%20approved.%20Used%20in%20approvals.%5Cn%20%20%20%20%20%2A%20%40param%20spender%20Address%20that%20may%20be%20allowed%20to%20operate%20on%20tokens%20without%20being%20their%20owner.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC20InvalidSpender%28address%20spender%29%3B%5Cn%7D%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Standard%20ERC-721%20Errors%5Cn%20%2A%20Interface%20of%20the%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-6093%5BERC-6093%5D%20custom%20errors%20for%20ERC-721%20tokens.%5Cn%20%2A%2F%5Cninterface%20IERC721Errors%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Indicates%20that%20an%20address%20can%27t%20be%20an%20owner.%20For%20example%2C%20%60address%280%29%60%20is%20a%20forbidden%20owner%20in%20ERC-20.%5Cn%20%20%20%20%20%2A%20Used%20in%20balance%20queries.%5Cn%20%20%20%20%20%2A%20%40param%20owner%20Address%20of%20the%20current%20owner%20of%20a%20token.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC721InvalidOwner%28address%20owner%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Indicates%20a%20%60tokenId%60%20whose%20%60owner%60%20is%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20%40param%20tokenId%20Identifier%20number%20of%20a%20token.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC721NonexistentToken%28uint256%20tokenId%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Indicates%20an%20error%20related%20to%20the%20ownership%20over%20a%20particular%20token.%20Used%20in%20transfers.%5Cn%20%20%20%20%20%2A%20%40param%20sender%20Address%20whose%20tokens%20are%20being%20transferred.%5Cn%20%20%20%20%20%2A%20%40param%20tokenId%20Identifier%20number%20of%20a%20token.%5Cn%20%20%20%20%20%2A%20%40param%20owner%20Address%20of%20the%20current%20owner%20of%20a%20token.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC721IncorrectOwner%28address%20sender%2C%20uint256%20tokenId%2C%20address%20owner%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Indicates%20a%20failure%20with%20the%20token%20%60sender%60.%20Used%20in%20transfers.%5Cn%20%20%20%20%20%2A%20%40param%20sender%20Address%20whose%20tokens%20are%20being%20transferred.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC721InvalidSender%28address%20sender%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Indicates%20a%20failure%20with%20the%20token%20%60receiver%60.%20Used%20in%20transfers.%5Cn%20%20%20%20%20%2A%20%40param%20receiver%20Address%20to%20which%20tokens%20are%20being%20transferred.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC721InvalidReceiver%28address%20receiver%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Indicates%20a%20failure%20with%20the%20%60operator%60%E2%80%99s%20approval.%20Used%20in%20transfers.%5Cn%20%20%20%20%20%2A%20%40param%20operator%20Address%20that%20may%20be%20allowed%20to%20operate%20on%20tokens%20without%20being%20their%20owner.%5Cn%20%20%20%20%20%2A%20%40param%20tokenId%20Identifier%20number%20of%20a%20token.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC721InsufficientApproval%28address%20operator%2C%20uint256%20tokenId%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Indicates%20a%20failure%20with%20the%20%60approver%60%20of%20a%20token%20to%20be%20approved.%20Used%20in%20approvals.%5Cn%20%20%20%20%20%2A%20%40param%20approver%20Address%20initiating%20an%20approval%20operation.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC721InvalidApprover%28address%20approver%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Indicates%20a%20failure%20with%20the%20%60operator%60%20to%20be%20approved.%20Used%20in%20approvals.%5Cn%20%20%20%20%20%2A%20%40param%20operator%20Address%20that%20may%20be%20allowed%20to%20operate%20on%20tokens%20without%20being%20their%20owner.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC721InvalidOperator%28address%20operator%29%3B%5Cn%7D%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Standard%20ERC-1155%20Errors%5Cn%20%2A%20Interface%20of%20the%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-6093%5BERC-6093%5D%20custom%20errors%20for%20ERC-1155%20tokens.%5Cn%20%2A%2F%5Cninterface%20IERC1155Errors%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Indicates%20an%20error%20related%20to%20the%20current%20%60balance%60%20of%20a%20%60sender%60.%20Used%20in%20transfers.%5Cn%20%20%20%20%20%2A%20%40param%20sender%20Address%20whose%20tokens%20are%20being%20transferred.%5Cn%20%20%20%20%20%2A%20%40param%20balance%20Current%20balance%20for%20the%20interacting%20account.%5Cn%20%20%20%20%20%2A%20%40param%20needed%20Minimum%20amount%20required%20to%20perform%20a%20transfer.%5Cn%20%20%20%20%20%2A%20%40param%20tokenId%20Identifier%20number%20of%20a%20token.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC1155InsufficientBalance%28address%20sender%2C%20uint256%20balance%2C%20uint256%20needed%2C%20uint256%20tokenId%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Indicates%20a%20failure%20with%20the%20token%20%60sender%60.%20Used%20in%20transfers.%5Cn%20%20%20%20%20%2A%20%40param%20sender%20Address%20whose%20tokens%20are%20being%20transferred.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC1155InvalidSender%28address%20sender%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Indicates%20a%20failure%20with%20the%20token%20%60receiver%60.%20Used%20in%20transfers.%5Cn%20%20%20%20%20%2A%20%40param%20receiver%20Address%20to%20which%20tokens%20are%20being%20transferred.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC1155InvalidReceiver%28address%20receiver%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Indicates%20a%20failure%20with%20the%20%60operator%60%E2%80%99s%20approval.%20Used%20in%20transfers.%5Cn%20%20%20%20%20%2A%20%40param%20operator%20Address%20that%20may%20be%20allowed%20to%20operate%20on%20tokens%20without%20being%20their%20owner.%5Cn%20%20%20%20%20%2A%20%40param%20owner%20Address%20of%20the%20current%20owner%20of%20a%20token.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC1155MissingApprovalForAll%28address%20operator%2C%20address%20owner%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Indicates%20a%20failure%20with%20the%20%60approver%60%20of%20a%20token%20to%20be%20approved.%20Used%20in%20approvals.%5Cn%20%20%20%20%20%2A%20%40param%20approver%20Address%20initiating%20an%20approval%20operation.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC1155InvalidApprover%28address%20approver%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Indicates%20a%20failure%20with%20the%20%60operator%60%20to%20be%20approved.%20Used%20in%20approvals.%5Cn%20%20%20%20%20%2A%20%40param%20operator%20Address%20that%20may%20be%20allowed%20to%20operate%20on%20tokens%20without%20being%20their%20owner.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC1155InvalidOperator%28address%20operator%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Indicates%20an%20array%20length%20mismatch%20between%20ids%20and%20values%20in%20a%20safeBatchTransferFrom%20operation.%5Cn%20%20%20%20%20%2A%20Used%20in%20batch%20transfers.%5Cn%20%20%20%20%20%2A%20%40param%20idsLength%20Length%20of%20the%20array%20of%20token%20identifiers%5Cn%20%20%20%20%20%2A%20%40param%20valuesLength%20Length%20of%20the%20array%20of%20token%20amounts%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC1155InvalidArrayLength%28uint256%20idsLength%2C%20uint256%20valuesLength%29%3B%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Finterfaces%2FIERC1155.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.0.0%29%20%28interfaces%2FIERC1155.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BIERC1155%7D%20from%20%5C%22..%2Ftoken%2FERC1155%2FIERC1155.sol%5C%22%3B%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Finterfaces%2FIERC1271.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28interfaces%2FIERC1271.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Interface%20of%20the%20ERC-1271%20standard%20signature%20validation%20method%20for%5Cn%20%2A%20contracts%20as%20defined%20in%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-1271%5BERC-1271%5D.%5Cn%20%2A%2F%5Cninterface%20IERC1271%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Should%20return%20whether%20the%20signature%20provided%20is%20valid%20for%20the%20provided%20data%5Cn%20%20%20%20%20%2A%20%40param%20hash%20%20%20%20%20%20Hash%20of%20the%20data%20to%20be%20signed%5Cn%20%20%20%20%20%2A%20%40param%20signature%20Signature%20byte%20array%20associated%20with%20_data%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isValidSignature%28bytes32%20hash%2C%20bytes%20memory%20signature%29%20external%20view%20returns%20%28bytes4%20magicValue%29%3B%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Finterfaces%2FIERC20.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.0.0%29%20%28interfaces%2FIERC20.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BIERC20%7D%20from%20%5C%22..%2Ftoken%2FERC20%2FIERC20.sol%5C%22%3B%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Finterfaces%2FIERC5267.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.0.0%29%20%28interfaces%2FIERC5267.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cninterface%20IERC5267%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20MAY%20be%20emitted%20to%20signal%20that%20the%20domain%20could%20have%20changed.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20event%20EIP712DomainChanged%28%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20returns%20the%20fields%20and%20values%20that%20describe%20the%20domain%20separator%20used%20by%20this%20contract%20for%20EIP-712%5Cn%20%20%20%20%20%2A%20signature.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20eip712Domain%28%29%5Cn%20%20%20%20%20%20%20%20external%5Cn%20%20%20%20%20%20%20%20view%5Cn%20%20%20%20%20%20%20%20returns%20%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes1%20fields%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20string%20memory%20name%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20string%20memory%20version%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20chainId%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20address%20verifyingContract%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes32%20salt%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20extensions%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Finterfaces%2FIERC5805.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.0.0%29%20%28interfaces%2FIERC5805.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BIVotes%7D%20from%20%5C%22..%2Fgovernance%2Futils%2FIVotes.sol%5C%22%3B%5Cnimport%20%7BIERC6372%7D%20from%20%5C%22.%2FIERC6372.sol%5C%22%3B%5Cn%5Cninterface%20IERC5805%20is%20IERC6372%2C%20IVotes%20%7B%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Finterfaces%2FIERC6372.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.0.0%29%20%28interfaces%2FIERC6372.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cninterface%20IERC6372%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Clock%20used%20for%20flagging%20checkpoints.%20Can%20be%20overridden%20to%20implement%20timestamp%20based%20checkpoints%20%28and%20voting%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20clock%28%29%20external%20view%20returns%20%28uint48%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Description%20of%20the%20clock%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20%2F%2F%20solhint-disable-next-line%20func-name-mixedcase%5Cn%20%20%20%20function%20CLOCK_MODE%28%29%20external%20view%20returns%20%28string%20memory%29%3B%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Fproxy%2FClones.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.2.0%29%20%28proxy%2FClones.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BCreate2%7D%20from%20%5C%22..%2Futils%2FCreate2.sol%5C%22%3B%5Cnimport%20%7BErrors%7D%20from%20%5C%22..%2Futils%2FErrors.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-1167%5BERC-1167%5D%20is%20a%20standard%20for%5Cn%20%2A%20deploying%20minimal%20proxy%20contracts%2C%20also%20known%20as%20%5C%22clones%5C%22.%5Cn%20%2A%5Cn%20%2A%20%3E%20To%20simply%20and%20cheaply%20clone%20contract%20functionality%20in%20an%20immutable%20way%2C%20this%20standard%20specifies%5Cn%20%2A%20%3E%20a%20minimal%20bytecode%20implementation%20that%20delegates%20all%20calls%20to%20a%20known%2C%20fixed%20address.%5Cn%20%2A%5Cn%20%2A%20The%20library%20includes%20functions%20to%20deploy%20a%20proxy%20using%20either%20%60create%60%20%28traditional%20deployment%29%20or%20%60create2%60%5Cn%20%2A%20%28salted%20deterministic%20deployment%29.%20It%20also%20includes%20functions%20to%20predict%20the%20addresses%20of%20clones%20deployed%20using%20the%5Cn%20%2A%20deterministic%20method.%5Cn%20%2A%2F%5Cnlibrary%20Clones%20%7B%5Cn%20%20%20%20error%20CloneArgumentsTooLong%28%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Deploys%20and%20returns%20the%20address%20of%20a%20clone%20that%20mimics%20the%20behaviour%20of%20%60implementation%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20function%20uses%20the%20create%20opcode%2C%20which%20should%20never%20revert.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20clone%28address%20implementation%29%20internal%20returns%20%28address%20instance%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20clone%28implementation%2C%200%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Same%20as%20%7Bxref-Clones-clone-address-%7D%5Bclone%5D%2C%20but%20with%20a%20%60value%60%20parameter%20to%20send%20native%20currency%5Cn%20%20%20%20%20%2A%20to%20the%20new%20contract.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20Using%20a%20non-zero%20value%20at%20creation%20will%20require%20the%20contract%20using%20this%20function%20%28e.g.%20a%20factory%29%5Cn%20%20%20%20%20%2A%20to%20always%20have%20enough%20balance%20for%20new%20deployments.%20Consider%20exposing%20this%20function%20under%20a%20payable%20method.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20clone%28address%20implementation%2C%20uint256%20value%29%20internal%20returns%20%28address%20instance%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28address%28this%29.balance%20%3C%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20Errors.InsufficientBalance%28address%28this%29.balance%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Cleans%20the%20upper%2096%20bits%20of%20the%20%60implementation%60%20word%2C%20then%20packs%20the%20first%203%20bytes%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20of%20the%20%60implementation%60%20address%20with%20the%20bytecode%20before%20the%20address.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280x00%2C%20or%28shr%280xe8%2C%20shl%280x60%2C%20implementation%29%29%2C%200x3d602d80600a3d3981f3363d3d373d3d3d363d73000000%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Packs%20the%20remaining%2017%20bytes%20of%20%60implementation%60%20with%20the%20bytecode%20after%20the%20address.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280x20%2C%20or%28shl%280x78%2C%20implementation%29%2C%200x5af43d82803e903d91602b57fd5bf3%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20instance%20%3A%3D%20create%28value%2C%200x09%2C%200x37%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20%28instance%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20Errors.FailedDeployment%28%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Deploys%20and%20returns%20the%20address%20of%20a%20clone%20that%20mimics%20the%20behaviour%20of%20%60implementation%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20function%20uses%20the%20create2%20opcode%20and%20a%20%60salt%60%20to%20deterministically%20deploy%5Cn%20%20%20%20%20%2A%20the%20clone.%20Using%20the%20same%20%60implementation%60%20and%20%60salt%60%20multiple%20times%20will%20revert%2C%20since%5Cn%20%20%20%20%20%2A%20the%20clones%20cannot%20be%20deployed%20twice%20at%20the%20same%20address.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20cloneDeterministic%28address%20implementation%2C%20bytes32%20salt%29%20internal%20returns%20%28address%20instance%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20cloneDeterministic%28implementation%2C%20salt%2C%200%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Same%20as%20%7Bxref-Clones-cloneDeterministic-address-bytes32-%7D%5BcloneDeterministic%5D%2C%20but%20with%5Cn%20%20%20%20%20%2A%20a%20%60value%60%20parameter%20to%20send%20native%20currency%20to%20the%20new%20contract.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20Using%20a%20non-zero%20value%20at%20creation%20will%20require%20the%20contract%20using%20this%20function%20%28e.g.%20a%20factory%29%5Cn%20%20%20%20%20%2A%20to%20always%20have%20enough%20balance%20for%20new%20deployments.%20Consider%20exposing%20this%20function%20under%20a%20payable%20method.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20cloneDeterministic%28%5Cn%20%20%20%20%20%20%20%20address%20implementation%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20salt%2C%5Cn%20%20%20%20%20%20%20%20uint256%20value%5Cn%20%20%20%20%29%20internal%20returns%20%28address%20instance%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28address%28this%29.balance%20%3C%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20Errors.InsufficientBalance%28address%28this%29.balance%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Cleans%20the%20upper%2096%20bits%20of%20the%20%60implementation%60%20word%2C%20then%20packs%20the%20first%203%20bytes%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20of%20the%20%60implementation%60%20address%20with%20the%20bytecode%20before%20the%20address.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280x00%2C%20or%28shr%280xe8%2C%20shl%280x60%2C%20implementation%29%29%2C%200x3d602d80600a3d3981f3363d3d373d3d3d363d73000000%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Packs%20the%20remaining%2017%20bytes%20of%20%60implementation%60%20with%20the%20bytecode%20after%20the%20address.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280x20%2C%20or%28shl%280x78%2C%20implementation%29%2C%200x5af43d82803e903d91602b57fd5bf3%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20instance%20%3A%3D%20create2%28value%2C%200x09%2C%200x37%2C%20salt%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20%28instance%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20Errors.FailedDeployment%28%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Computes%20the%20address%20of%20a%20clone%20deployed%20using%20%7BClones-cloneDeterministic%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20predictDeterministicAddress%28%5Cn%20%20%20%20%20%20%20%20address%20implementation%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20salt%2C%5Cn%20%20%20%20%20%20%20%20address%20deployer%5Cn%20%20%20%20%29%20internal%20pure%20returns%20%28address%20predicted%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20let%20ptr%20%3A%3D%20mload%280x40%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28ptr%2C%200x38%29%2C%20deployer%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28ptr%2C%200x24%29%2C%200x5af43d82803e903d91602b57fd5bf3ff%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28ptr%2C%200x14%29%2C%20implementation%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28ptr%2C%200x3d602d80600a3d3981f3363d3d373d3d3d363d73%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28ptr%2C%200x58%29%2C%20salt%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28ptr%2C%200x78%29%2C%20keccak256%28add%28ptr%2C%200x0c%29%2C%200x37%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20predicted%20%3A%3D%20and%28keccak256%28add%28ptr%2C%200x43%29%2C%200x55%29%2C%200xffffffffffffffffffffffffffffffffffffffff%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Computes%20the%20address%20of%20a%20clone%20deployed%20using%20%7BClones-cloneDeterministic%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20predictDeterministicAddress%28%5Cn%20%20%20%20%20%20%20%20address%20implementation%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20salt%5Cn%20%20%20%20%29%20internal%20view%20returns%20%28address%20predicted%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20predictDeterministicAddress%28implementation%2C%20salt%2C%20address%28this%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Deploys%20and%20returns%20the%20address%20of%20a%20clone%20that%20mimics%20the%20behavior%20of%20%60implementation%60%20with%20custom%5Cn%20%20%20%20%20%2A%20immutable%20arguments.%20These%20are%20provided%20through%20%60args%60%20and%20cannot%20be%20changed%20after%20deployment.%20To%5Cn%20%20%20%20%20%2A%20access%20the%20arguments%20within%20the%20implementation%2C%20use%20%7BfetchCloneArgs%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20function%20uses%20the%20create%20opcode%2C%20which%20should%20never%20revert.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20cloneWithImmutableArgs%28address%20implementation%2C%20bytes%20memory%20args%29%20internal%20returns%20%28address%20instance%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20cloneWithImmutableArgs%28implementation%2C%20args%2C%200%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Same%20as%20%7Bxref-Clones-cloneWithImmutableArgs-address-bytes-%7D%5BcloneWithImmutableArgs%5D%2C%20but%20with%20a%20%60value%60%5Cn%20%20%20%20%20%2A%20parameter%20to%20send%20native%20currency%20to%20the%20new%20contract.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20Using%20a%20non-zero%20value%20at%20creation%20will%20require%20the%20contract%20using%20this%20function%20%28e.g.%20a%20factory%29%5Cn%20%20%20%20%20%2A%20to%20always%20have%20enough%20balance%20for%20new%20deployments.%20Consider%20exposing%20this%20function%20under%20a%20payable%20method.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20cloneWithImmutableArgs%28%5Cn%20%20%20%20%20%20%20%20address%20implementation%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20args%2C%5Cn%20%20%20%20%20%20%20%20uint256%20value%5Cn%20%20%20%20%29%20internal%20returns%20%28address%20instance%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28address%28this%29.balance%20%3C%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20Errors.InsufficientBalance%28address%28this%29.balance%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20bytecode%20%3D%20_cloneCodeWithImmutableArgs%28implementation%2C%20args%29%3B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20instance%20%3A%3D%20create%28value%2C%20add%28bytecode%2C%200x20%29%2C%20mload%28bytecode%29%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20%28instance%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20Errors.FailedDeployment%28%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Deploys%20and%20returns%20the%20address%20of%20a%20clone%20that%20mimics%20the%20behaviour%20of%20%60implementation%60%20with%20custom%5Cn%20%20%20%20%20%2A%20immutable%20arguments.%20These%20are%20provided%20through%20%60args%60%20and%20cannot%20be%20changed%20after%20deployment.%20To%5Cn%20%20%20%20%20%2A%20access%20the%20arguments%20within%20the%20implementation%2C%20use%20%7BfetchCloneArgs%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20function%20uses%20the%20create2%20opcode%20and%20a%20%60salt%60%20to%20deterministically%20deploy%20the%20clone.%20Using%20the%20same%5Cn%20%20%20%20%20%2A%20%60implementation%60%2C%20%60args%60%20and%20%60salt%60%20multiple%20times%20will%20revert%2C%20since%20the%20clones%20cannot%20be%20deployed%20twice%5Cn%20%20%20%20%20%2A%20at%20the%20same%20address.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20cloneDeterministicWithImmutableArgs%28%5Cn%20%20%20%20%20%20%20%20address%20implementation%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20args%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20salt%5Cn%20%20%20%20%29%20internal%20returns%20%28address%20instance%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20cloneDeterministicWithImmutableArgs%28implementation%2C%20args%2C%20salt%2C%200%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Same%20as%20%7Bxref-Clones-cloneDeterministicWithImmutableArgs-address-bytes-bytes32-%7D%5BcloneDeterministicWithImmutableArgs%5D%2C%5Cn%20%20%20%20%20%2A%20but%20with%20a%20%60value%60%20parameter%20to%20send%20native%20currency%20to%20the%20new%20contract.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20Using%20a%20non-zero%20value%20at%20creation%20will%20require%20the%20contract%20using%20this%20function%20%28e.g.%20a%20factory%29%5Cn%20%20%20%20%20%2A%20to%20always%20have%20enough%20balance%20for%20new%20deployments.%20Consider%20exposing%20this%20function%20under%20a%20payable%20method.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20cloneDeterministicWithImmutableArgs%28%5Cn%20%20%20%20%20%20%20%20address%20implementation%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20args%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20salt%2C%5Cn%20%20%20%20%20%20%20%20uint256%20value%5Cn%20%20%20%20%29%20internal%20returns%20%28address%20instance%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20bytecode%20%3D%20_cloneCodeWithImmutableArgs%28implementation%2C%20args%29%3B%5Cn%20%20%20%20%20%20%20%20return%20Create2.deploy%28value%2C%20salt%2C%20bytecode%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Computes%20the%20address%20of%20a%20clone%20deployed%20using%20%7BClones-cloneDeterministicWithImmutableArgs%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20predictDeterministicAddressWithImmutableArgs%28%5Cn%20%20%20%20%20%20%20%20address%20implementation%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20args%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20salt%2C%5Cn%20%20%20%20%20%20%20%20address%20deployer%5Cn%20%20%20%20%29%20internal%20pure%20returns%20%28address%20predicted%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20bytecode%20%3D%20_cloneCodeWithImmutableArgs%28implementation%2C%20args%29%3B%5Cn%20%20%20%20%20%20%20%20return%20Create2.computeAddress%28salt%2C%20keccak256%28bytecode%29%2C%20deployer%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Computes%20the%20address%20of%20a%20clone%20deployed%20using%20%7BClones-cloneDeterministicWithImmutableArgs%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20predictDeterministicAddressWithImmutableArgs%28%5Cn%20%20%20%20%20%20%20%20address%20implementation%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20args%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20salt%5Cn%20%20%20%20%29%20internal%20view%20returns%20%28address%20predicted%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20predictDeterministicAddressWithImmutableArgs%28implementation%2C%20args%2C%20salt%2C%20address%28this%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Get%20the%20immutable%20args%20attached%20to%20a%20clone.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20If%20%60instance%60%20is%20a%20clone%20that%20was%20deployed%20using%20%60clone%60%20or%20%60cloneDeterministic%60%2C%20this%5Cn%20%20%20%20%20%2A%20%20%20function%20will%20return%20an%20empty%20array.%5Cn%20%20%20%20%20%2A%20-%20If%20%60instance%60%20is%20a%20clone%20that%20was%20deployed%20using%20%60cloneWithImmutableArgs%60%20or%5Cn%20%20%20%20%20%2A%20%20%20%60cloneDeterministicWithImmutableArgs%60%2C%20this%20function%20will%20return%20the%20args%20array%20used%20at%5Cn%20%20%20%20%20%2A%20%20%20creation.%5Cn%20%20%20%20%20%2A%20-%20If%20%60instance%60%20is%20NOT%20a%20clone%20deployed%20using%20this%20library%2C%20the%20behavior%20is%20undefined.%20This%5Cn%20%20%20%20%20%2A%20%20%20function%20should%20only%20be%20used%20to%20check%20addresses%20that%20are%20known%20to%20be%20clones.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20fetchCloneArgs%28address%20instance%29%20internal%20view%20returns%20%28bytes%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20result%20%3D%20new%20bytes%28instance.code.length%20-%2045%29%3B%20%2F%2F%20revert%20if%20length%20is%20too%20short%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20extcodecopy%28instance%2C%20add%28result%2C%2032%29%2C%2045%2C%20mload%28result%29%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20result%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Helper%20that%20prepares%20the%20initcode%20of%20the%20proxy%20with%20immutable%20args.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20An%20assembly%20variant%20of%20this%20function%20requires%20copying%20the%20%60args%60%20array%2C%20which%20can%20be%20efficiently%20done%20using%5Cn%20%20%20%20%20%2A%20%60mcopy%60.%20Unfortunately%2C%20that%20opcode%20is%20not%20available%20before%20cancun.%20A%20pure%20solidity%20implementation%20using%5Cn%20%20%20%20%20%2A%20abi.encodePacked%20is%20more%20expensive%20but%20also%20more%20portable%20and%20easier%20to%20review.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-170%5BEIP-170%5D%20limits%20the%20length%20of%20the%20contract%20code%20to%2024576%20bytes.%5Cn%20%20%20%20%20%2A%20With%20the%20proxy%20code%20taking%2045%20bytes%2C%20that%20limits%20the%20length%20of%20the%20immutable%20args%20to%2024531%20bytes.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_cloneCodeWithImmutableArgs%28%5Cn%20%20%20%20%20%20%20%20address%20implementation%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20args%5Cn%20%20%20%20%29%20private%20pure%20returns%20%28bytes%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28args.length%20%3E%2024531%29%20revert%20CloneArgumentsTooLong%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%5Cn%20%20%20%20%20%20%20%20%20%20%20%20abi.encodePacked%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20hex%5C%2261%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uint16%28args.length%20%2B%2045%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20hex%5C%223d81600a3d39f3363d3d373d3d3d363d73%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20implementation%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20hex%5C%225af43d82803e903d91602b57fd5bf3%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC1155%2FERC1155.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28token%2FERC1155%2FERC1155.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BIERC1155%7D%20from%20%5C%22.%2FIERC1155.sol%5C%22%3B%5Cnimport%20%7BIERC1155MetadataURI%7D%20from%20%5C%22.%2Fextensions%2FIERC1155MetadataURI.sol%5C%22%3B%5Cnimport%20%7BERC1155Utils%7D%20from%20%5C%22.%2Futils%2FERC1155Utils.sol%5C%22%3B%5Cnimport%20%7BContext%7D%20from%20%5C%22..%2F..%2Futils%2FContext.sol%5C%22%3B%5Cnimport%20%7BIERC165%2C%20ERC165%7D%20from%20%5C%22..%2F..%2Futils%2Fintrospection%2FERC165.sol%5C%22%3B%5Cnimport%20%7BArrays%7D%20from%20%5C%22..%2F..%2Futils%2FArrays.sol%5C%22%3B%5Cnimport%20%7BIERC1155Errors%7D%20from%20%5C%22..%2F..%2Finterfaces%2Fdraft-IERC6093.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Implementation%20of%20the%20basic%20standard%20multi-token.%5Cn%20%2A%20See%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-1155%5Cn%20%2A%20Originally%20based%20on%20code%20by%20Enjin%3A%20https%3A%2F%2Fgithub.com%2Fenjin%2Ferc-1155%5Cn%20%2A%2F%5Cnabstract%20contract%20ERC1155%20is%20Context%2C%20ERC165%2C%20IERC1155%2C%20IERC1155MetadataURI%2C%20IERC1155Errors%20%7B%5Cn%20%20%20%20using%20Arrays%20for%20uint256%5B%5D%3B%5Cn%20%20%20%20using%20Arrays%20for%20address%5B%5D%3B%5Cn%5Cn%20%20%20%20mapping%28uint256%20id%20%3D%3E%20mapping%28address%20account%20%3D%3E%20uint256%29%29%20private%20_balances%3B%5Cn%5Cn%20%20%20%20mapping%28address%20account%20%3D%3E%20mapping%28address%20operator%20%3D%3E%20bool%29%29%20private%20_operatorApprovals%3B%5Cn%5Cn%20%20%20%20%2F%2F%20Used%20as%20the%20URI%20for%20all%20token%20types%20by%20relying%20on%20ID%20substitution%2C%20e.g.%20https%3A%2F%2Ftoken-cdn-domain%2F%7Bid%7D.json%5Cn%20%20%20%20string%20private%20_uri%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7B_setURI%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20constructor%28string%20memory%20uri_%29%20%7B%5Cn%20%20%20%20%20%20%20%20_setURI%28uri_%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC165-supportsInterface%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20supportsInterface%28bytes4%20interfaceId%29%20public%20view%20virtual%20override%28ERC165%2C%20IERC165%29%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%5Cn%20%20%20%20%20%20%20%20%20%20%20%20interfaceId%20%3D%3D%20type%28IERC1155%29.interfaceId%20%7C%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20interfaceId%20%3D%3D%20type%28IERC1155MetadataURI%29.interfaceId%20%7C%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20super.supportsInterface%28interfaceId%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC1155MetadataURI-uri%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20implementation%20returns%20the%20same%20URI%20for%20%2Aall%2A%20token%20types.%20It%20relies%5Cn%20%20%20%20%20%2A%20on%20the%20token%20type%20ID%20substitution%20mechanism%5Cn%20%20%20%20%20%2A%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-1155%23metadata%5Bdefined%20in%20the%20ERC%5D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Clients%20calling%20this%20function%20must%20replace%20the%20%60%5C%5C%7Bid%5C%5C%7D%60%20substring%20with%20the%5Cn%20%20%20%20%20%2A%20actual%20token%20type%20ID.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20uri%28uint256%20%2F%2A%20id%20%2A%2F%29%20public%20view%20virtual%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_uri%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC1155-balanceOf%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20balanceOf%28address%20account%2C%20uint256%20id%29%20public%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_balances%5Bid%5D%5Baccount%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC1155-balanceOfBatch%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60accounts%60%20and%20%60ids%60%20must%20have%20the%20same%20length.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20balanceOfBatch%28%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20memory%20accounts%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20ids%5Cn%20%20%20%20%29%20public%20view%20virtual%20returns%20%28uint256%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28accounts.length%20%21%3D%20ids.length%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC1155InvalidArrayLength%28ids.length%2C%20accounts.length%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20batchBalances%20%3D%20new%20uint256%5B%5D%28accounts.length%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20accounts.length%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20batchBalances%5Bi%5D%20%3D%20balanceOf%28accounts.unsafeMemoryAccess%28i%29%2C%20ids.unsafeMemoryAccess%28i%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20return%20batchBalances%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC1155-setApprovalForAll%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20setApprovalForAll%28address%20operator%2C%20bool%20approved%29%20public%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20_setApprovalForAll%28_msgSender%28%29%2C%20operator%2C%20approved%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC1155-isApprovedForAll%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isApprovedForAll%28address%20account%2C%20address%20operator%29%20public%20view%20virtual%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_operatorApprovals%5Baccount%5D%5Boperator%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC1155-safeTransferFrom%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20safeTransferFrom%28address%20from%2C%20address%20to%2C%20uint256%20id%2C%20uint256%20value%2C%20bytes%20memory%20data%29%20public%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20address%20sender%20%3D%20_msgSender%28%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28from%20%21%3D%20sender%20%26%26%20%21isApprovedForAll%28from%2C%20sender%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC1155MissingApprovalForAll%28sender%2C%20from%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_safeTransferFrom%28from%2C%20to%2C%20id%2C%20value%2C%20data%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC1155-safeBatchTransferFrom%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20safeBatchTransferFrom%28%5Cn%20%20%20%20%20%20%20%20address%20from%2C%5Cn%20%20%20%20%20%20%20%20address%20to%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20ids%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20values%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20data%5Cn%20%20%20%20%29%20public%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20address%20sender%20%3D%20_msgSender%28%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28from%20%21%3D%20sender%20%26%26%20%21isApprovedForAll%28from%2C%20sender%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC1155MissingApprovalForAll%28sender%2C%20from%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_safeBatchTransferFrom%28from%2C%20to%2C%20ids%2C%20values%2C%20data%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Transfers%20a%20%60value%60%20amount%20of%20tokens%20of%20type%20%60id%60%20from%20%60from%60%20to%20%60to%60.%20Will%20mint%20%28or%20burn%29%20if%20%60from%60%5Cn%20%20%20%20%20%2A%20%28or%20%60to%60%29%20is%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransferSingle%7D%20event%20if%20the%20arrays%20contain%20one%20element%2C%20and%20%7BTransferBatch%7D%20otherwise.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20If%20%60to%60%20refers%20to%20a%20smart%20contract%2C%20it%20must%20implement%20either%20%7BIERC1155Receiver-onERC1155Received%7D%5Cn%20%20%20%20%20%2A%20%20%20or%20%7BIERC1155Receiver-onERC1155BatchReceived%7D%20and%20return%20the%20acceptance%20magic%20value.%5Cn%20%20%20%20%20%2A%20-%20%60ids%60%20and%20%60values%60%20must%20have%20the%20same%20length.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20The%20ERC-1155%20acceptance%20check%20is%20not%20performed%20in%20this%20function.%20See%20%7B_updateWithAcceptanceCheck%7D%20instead.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_update%28address%20from%2C%20address%20to%2C%20uint256%5B%5D%20memory%20ids%2C%20uint256%5B%5D%20memory%20values%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28ids.length%20%21%3D%20values.length%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC1155InvalidArrayLength%28ids.length%2C%20values.length%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20address%20operator%20%3D%20_msgSender%28%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20ids.length%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20id%20%3D%20ids.unsafeMemoryAccess%28i%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20value%20%3D%20values.unsafeMemoryAccess%28i%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28from%20%21%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uint256%20fromBalance%20%3D%20_balances%5Bid%5D%5Bfrom%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28fromBalance%20%3C%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC1155InsufficientBalance%28from%2C%20fromBalance%2C%20value%2C%20id%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Overflow%20not%20possible%3A%20value%20%3C%3D%20fromBalance%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_balances%5Bid%5D%5Bfrom%5D%20%3D%20fromBalance%20-%20value%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28to%20%21%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_balances%5Bid%5D%5Bto%5D%20%2B%3D%20value%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28ids.length%20%3D%3D%201%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20id%20%3D%20ids.unsafeMemoryAccess%280%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20value%20%3D%20values.unsafeMemoryAccess%280%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20emit%20TransferSingle%28operator%2C%20from%2C%20to%2C%20id%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20emit%20TransferBatch%28operator%2C%20from%2C%20to%2C%20ids%2C%20values%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Version%20of%20%7B_update%7D%20that%20performs%20the%20token%20acceptance%20check%20by%20calling%5Cn%20%20%20%20%20%2A%20%7BIERC1155Receiver-onERC1155Received%7D%20or%20%7BIERC1155Receiver-onERC1155BatchReceived%7D%20on%20the%20receiver%20address%20if%20it%5Cn%20%20%20%20%20%2A%20contains%20code%20%28eg.%20is%20a%20smart%20contract%20at%20the%20moment%20of%20execution%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20IMPORTANT%3A%20Overriding%20this%20function%20is%20discouraged%20because%20it%20poses%20a%20reentrancy%20risk%20from%20the%20receiver.%20So%20any%5Cn%20%20%20%20%20%2A%20update%20to%20the%20contract%20state%20after%20this%20function%20would%20break%20the%20check-effect-interaction%20pattern.%20Consider%5Cn%20%20%20%20%20%2A%20overriding%20%7B_update%7D%20instead.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_updateWithAcceptanceCheck%28%5Cn%20%20%20%20%20%20%20%20address%20from%2C%5Cn%20%20%20%20%20%20%20%20address%20to%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20ids%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20values%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20data%5Cn%20%20%20%20%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20_update%28from%2C%20to%2C%20ids%2C%20values%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28to%20%21%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20address%20operator%20%3D%20_msgSender%28%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28ids.length%20%3D%3D%201%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uint256%20id%20%3D%20ids.unsafeMemoryAccess%280%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uint256%20value%20%3D%20values.unsafeMemoryAccess%280%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ERC1155Utils.checkOnERC1155Received%28operator%2C%20from%2C%20to%2C%20id%2C%20value%2C%20data%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ERC1155Utils.checkOnERC1155BatchReceived%28operator%2C%20from%2C%20to%2C%20ids%2C%20values%2C%20data%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Transfers%20a%20%60value%60%20tokens%20of%20token%20type%20%60id%60%20from%20%60from%60%20to%20%60to%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransferSingle%7D%20event.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60to%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20-%20%60from%60%20must%20have%20a%20balance%20of%20tokens%20of%20type%20%60id%60%20of%20at%20least%20%60value%60%20amount.%5Cn%20%20%20%20%20%2A%20-%20If%20%60to%60%20refers%20to%20a%20smart%20contract%2C%20it%20must%20implement%20%7BIERC1155Receiver-onERC1155Received%7D%20and%20return%20the%5Cn%20%20%20%20%20%2A%20acceptance%20magic%20value.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_safeTransferFrom%28address%20from%2C%20address%20to%2C%20uint256%20id%2C%20uint256%20value%2C%20bytes%20memory%20data%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28to%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC1155InvalidReceiver%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20%28from%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC1155InvalidSender%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%28uint256%5B%5D%20memory%20ids%2C%20uint256%5B%5D%20memory%20values%29%20%3D%20_asSingletonArrays%28id%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20_updateWithAcceptanceCheck%28from%2C%20to%2C%20ids%2C%20values%2C%20data%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20xref%3AROOT%3Aerc1155.adoc%23batch-operations%5BBatched%5D%20version%20of%20%7B_safeTransferFrom%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransferBatch%7D%20event.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20If%20%60to%60%20refers%20to%20a%20smart%20contract%2C%20it%20must%20implement%20%7BIERC1155Receiver-onERC1155BatchReceived%7D%20and%20return%20the%5Cn%20%20%20%20%20%2A%20acceptance%20magic%20value.%5Cn%20%20%20%20%20%2A%20-%20%60ids%60%20and%20%60values%60%20must%20have%20the%20same%20length.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_safeBatchTransferFrom%28%5Cn%20%20%20%20%20%20%20%20address%20from%2C%5Cn%20%20%20%20%20%20%20%20address%20to%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20ids%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20values%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20data%5Cn%20%20%20%20%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28to%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC1155InvalidReceiver%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20%28from%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC1155InvalidSender%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_updateWithAcceptanceCheck%28from%2C%20to%2C%20ids%2C%20values%2C%20data%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Sets%20a%20new%20URI%20for%20all%20token%20types%2C%20by%20relying%20on%20the%20token%20type%20ID%5Cn%20%20%20%20%20%2A%20substitution%20mechanism%5Cn%20%20%20%20%20%2A%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-1155%23metadata%5Bdefined%20in%20the%20ERC%5D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20By%20this%20mechanism%2C%20any%20occurrence%20of%20the%20%60%5C%5C%7Bid%5C%5C%7D%60%20substring%20in%20either%20the%5Cn%20%20%20%20%20%2A%20URI%20or%20any%20of%20the%20values%20in%20the%20JSON%20file%20at%20said%20URI%20will%20be%20replaced%20by%5Cn%20%20%20%20%20%2A%20clients%20with%20the%20token%20type%20ID.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20For%20example%2C%20the%20%60https%3A%2F%2Ftoken-cdn-domain%2F%5C%5C%7Bid%5C%5C%7D.json%60%20URI%20would%20be%5Cn%20%20%20%20%20%2A%20interpreted%20by%20clients%20as%5Cn%20%20%20%20%20%2A%20%60https%3A%2F%2Ftoken-cdn-domain%2F000000000000000000000000000000000000000000000000000000000004cce0.json%60%5Cn%20%20%20%20%20%2A%20for%20token%20type%20ID%200x4cce0.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20See%20%7Buri%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Because%20these%20URIs%20cannot%20be%20meaningfully%20represented%20by%20the%20%7BURI%7D%20event%2C%5Cn%20%20%20%20%20%2A%20this%20function%20emits%20no%20events.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_setURI%28string%20memory%20newuri%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20_uri%20%3D%20newuri%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Creates%20a%20%60value%60%20amount%20of%20tokens%20of%20type%20%60id%60%2C%20and%20assigns%20them%20to%20%60to%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransferSingle%7D%20event.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60to%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20-%20If%20%60to%60%20refers%20to%20a%20smart%20contract%2C%20it%20must%20implement%20%7BIERC1155Receiver-onERC1155Received%7D%20and%20return%20the%5Cn%20%20%20%20%20%2A%20acceptance%20magic%20value.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_mint%28address%20to%2C%20uint256%20id%2C%20uint256%20value%2C%20bytes%20memory%20data%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28to%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC1155InvalidReceiver%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%28uint256%5B%5D%20memory%20ids%2C%20uint256%5B%5D%20memory%20values%29%20%3D%20_asSingletonArrays%28id%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20_updateWithAcceptanceCheck%28address%280%29%2C%20to%2C%20ids%2C%20values%2C%20data%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20xref%3AROOT%3Aerc1155.adoc%23batch-operations%5BBatched%5D%20version%20of%20%7B_mint%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransferBatch%7D%20event.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60ids%60%20and%20%60values%60%20must%20have%20the%20same%20length.%5Cn%20%20%20%20%20%2A%20-%20%60to%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20-%20If%20%60to%60%20refers%20to%20a%20smart%20contract%2C%20it%20must%20implement%20%7BIERC1155Receiver-onERC1155BatchReceived%7D%20and%20return%20the%5Cn%20%20%20%20%20%2A%20acceptance%20magic%20value.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_mintBatch%28address%20to%2C%20uint256%5B%5D%20memory%20ids%2C%20uint256%5B%5D%20memory%20values%2C%20bytes%20memory%20data%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28to%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC1155InvalidReceiver%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_updateWithAcceptanceCheck%28address%280%29%2C%20to%2C%20ids%2C%20values%2C%20data%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Destroys%20a%20%60value%60%20amount%20of%20tokens%20of%20type%20%60id%60%20from%20%60from%60%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransferSingle%7D%20event.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60from%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20-%20%60from%60%20must%20have%20at%20least%20%60value%60%20amount%20of%20tokens%20of%20type%20%60id%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_burn%28address%20from%2C%20uint256%20id%2C%20uint256%20value%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28from%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC1155InvalidSender%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%28uint256%5B%5D%20memory%20ids%2C%20uint256%5B%5D%20memory%20values%29%20%3D%20_asSingletonArrays%28id%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20_updateWithAcceptanceCheck%28from%2C%20address%280%29%2C%20ids%2C%20values%2C%20%5C%22%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20xref%3AROOT%3Aerc1155.adoc%23batch-operations%5BBatched%5D%20version%20of%20%7B_burn%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransferBatch%7D%20event.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60from%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20-%20%60from%60%20must%20have%20at%20least%20%60value%60%20amount%20of%20tokens%20of%20type%20%60id%60.%5Cn%20%20%20%20%20%2A%20-%20%60ids%60%20and%20%60values%60%20must%20have%20the%20same%20length.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_burnBatch%28address%20from%2C%20uint256%5B%5D%20memory%20ids%2C%20uint256%5B%5D%20memory%20values%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28from%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC1155InvalidSender%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_updateWithAcceptanceCheck%28from%2C%20address%280%29%2C%20ids%2C%20values%2C%20%5C%22%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Approve%20%60operator%60%20to%20operate%20on%20all%20of%20%60owner%60%20tokens%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20an%20%7BApprovalForAll%7D%20event.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60operator%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_setApprovalForAll%28address%20owner%2C%20address%20operator%2C%20bool%20approved%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28operator%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC1155InvalidOperator%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_operatorApprovals%5Bowner%5D%5Boperator%5D%20%3D%20approved%3B%5Cn%20%20%20%20%20%20%20%20emit%20ApprovalForAll%28owner%2C%20operator%2C%20approved%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Creates%20an%20array%20in%20memory%20with%20only%20one%20value%20for%20each%20of%20the%20elements%20provided.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_asSingletonArrays%28%5Cn%20%20%20%20%20%20%20%20uint256%20element1%2C%5Cn%20%20%20%20%20%20%20%20uint256%20element2%5Cn%20%20%20%20%29%20private%20pure%20returns%20%28uint256%5B%5D%20memory%20array1%2C%20uint256%5B%5D%20memory%20array2%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Load%20the%20free%20memory%20pointer%5Cn%20%20%20%20%20%20%20%20%20%20%20%20array1%20%3A%3D%20mload%280x40%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Set%20array%20length%20to%201%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28array1%2C%201%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Store%20the%20single%20element%20at%20the%20next%20word%20after%20the%20length%20%28where%20content%20starts%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28array1%2C%200x20%29%2C%20element1%29%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Repeat%20for%20next%20array%20locating%20it%20right%20after%20the%20first%20array%5Cn%20%20%20%20%20%20%20%20%20%20%20%20array2%20%3A%3D%20add%28array1%2C%200x40%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28array2%2C%201%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28array2%2C%200x20%29%2C%20element2%29%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Update%20the%20free%20memory%20pointer%20by%20pointing%20after%20the%20second%20array%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280x40%2C%20add%28array2%2C%200x40%29%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC1155%2Fextensions%2FERC1155Burnable.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.0.0%29%20%28token%2FERC1155%2Fextensions%2FERC1155Burnable.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BERC1155%7D%20from%20%5C%22..%2FERC1155.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Extension%20of%20%7BERC1155%7D%20that%20allows%20token%20holders%20to%20destroy%20both%20their%5Cn%20%2A%20own%20tokens%20and%20those%20that%20they%20have%20been%20approved%20to%20use.%5Cn%20%2A%2F%5Cnabstract%20contract%20ERC1155Burnable%20is%20ERC1155%20%7B%5Cn%20%20%20%20function%20burn%28address%20account%2C%20uint256%20id%2C%20uint256%20value%29%20public%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28account%20%21%3D%20_msgSender%28%29%20%26%26%20%21isApprovedForAll%28account%2C%20_msgSender%28%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC1155MissingApprovalForAll%28_msgSender%28%29%2C%20account%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20_burn%28account%2C%20id%2C%20value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20burnBatch%28address%20account%2C%20uint256%5B%5D%20memory%20ids%2C%20uint256%5B%5D%20memory%20values%29%20public%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28account%20%21%3D%20_msgSender%28%29%20%26%26%20%21isApprovedForAll%28account%2C%20_msgSender%28%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC1155MissingApprovalForAll%28_msgSender%28%29%2C%20account%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20_burnBatch%28account%2C%20ids%2C%20values%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC1155%2Fextensions%2FIERC1155MetadataURI.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28token%2FERC1155%2Fextensions%2FIERC1155MetadataURI.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BIERC1155%7D%20from%20%5C%22..%2FIERC1155.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Interface%20of%20the%20optional%20ERC1155MetadataExtension%20interface%2C%20as%20defined%5Cn%20%2A%20in%20the%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-1155%23metadata-extensions%5BERC%5D.%5Cn%20%2A%2F%5Cninterface%20IERC1155MetadataURI%20is%20IERC1155%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20URI%20for%20token%20type%20%60id%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20If%20the%20%60%5C%5C%7Bid%5C%5C%7D%60%20substring%20is%20present%20in%20the%20URI%2C%20it%20must%20be%20replaced%20by%5Cn%20%20%20%20%20%2A%20clients%20with%20the%20actual%20token%20type%20ID.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20uri%28uint256%20id%29%20external%20view%20returns%20%28string%20memory%29%3B%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC1155%2FIERC1155.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28token%2FERC1155%2FIERC1155.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BIERC165%7D%20from%20%5C%22..%2F..%2Futils%2Fintrospection%2FIERC165.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Required%20interface%20of%20an%20ERC-1155%20compliant%20contract%2C%20as%20defined%20in%20the%5Cn%20%2A%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-1155%5BERC%5D.%5Cn%20%2A%2F%5Cninterface%20IERC1155%20is%20IERC165%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Emitted%20when%20%60value%60%20amount%20of%20tokens%20of%20type%20%60id%60%20are%20transferred%20from%20%60from%60%20to%20%60to%60%20by%20%60operator%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20event%20TransferSingle%28address%20indexed%20operator%2C%20address%20indexed%20from%2C%20address%20indexed%20to%2C%20uint256%20id%2C%20uint256%20value%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Equivalent%20to%20multiple%20%7BTransferSingle%7D%20events%2C%20where%20%60operator%60%2C%20%60from%60%20and%20%60to%60%20are%20the%20same%20for%20all%5Cn%20%20%20%20%20%2A%20transfers.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20event%20TransferBatch%28%5Cn%20%20%20%20%20%20%20%20address%20indexed%20operator%2C%5Cn%20%20%20%20%20%20%20%20address%20indexed%20from%2C%5Cn%20%20%20%20%20%20%20%20address%20indexed%20to%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20ids%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20values%5Cn%20%20%20%20%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Emitted%20when%20%60account%60%20grants%20or%20revokes%20permission%20to%20%60operator%60%20to%20transfer%20their%20tokens%2C%20according%20to%5Cn%20%20%20%20%20%2A%20%60approved%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20event%20ApprovalForAll%28address%20indexed%20account%2C%20address%20indexed%20operator%2C%20bool%20approved%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Emitted%20when%20the%20URI%20for%20token%20type%20%60id%60%20changes%20to%20%60value%60%2C%20if%20it%20is%20a%20non-programmatic%20URI.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20If%20an%20%7BURI%7D%20event%20was%20emitted%20for%20%60id%60%2C%20the%20standard%5Cn%20%20%20%20%20%2A%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-1155%23metadata-extensions%5Bguarantees%5D%20that%20%60value%60%20will%20equal%20the%20value%5Cn%20%20%20%20%20%2A%20returned%20by%20%7BIERC1155MetadataURI-uri%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20event%20URI%28string%20value%2C%20uint256%20indexed%20id%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20value%20of%20tokens%20of%20token%20type%20%60id%60%20owned%20by%20%60account%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20balanceOf%28address%20account%2C%20uint256%20id%29%20external%20view%20returns%20%28uint256%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20xref%3AROOT%3Aerc1155.adoc%23batch-operations%5BBatched%5D%20version%20of%20%7BbalanceOf%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60accounts%60%20and%20%60ids%60%20must%20have%20the%20same%20length.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20balanceOfBatch%28%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20calldata%20accounts%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20calldata%20ids%5Cn%20%20%20%20%29%20external%20view%20returns%20%28uint256%5B%5D%20memory%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Grants%20or%20revokes%20permission%20to%20%60operator%60%20to%20transfer%20the%20caller%27s%20tokens%2C%20according%20to%20%60approved%60%2C%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20an%20%7BApprovalForAll%7D%20event.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60operator%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20setApprovalForAll%28address%20operator%2C%20bool%20approved%29%20external%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20true%20if%20%60operator%60%20is%20approved%20to%20transfer%20%60%60account%60%60%27s%20tokens.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20See%20%7BsetApprovalForAll%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isApprovedForAll%28address%20account%2C%20address%20operator%29%20external%20view%20returns%20%28bool%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Transfers%20a%20%60value%60%20amount%20of%20tokens%20of%20type%20%60id%60%20from%20%60from%60%20to%20%60to%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20This%20function%20can%20potentially%20allow%20a%20reentrancy%20attack%20when%20transferring%20tokens%5Cn%20%20%20%20%20%2A%20to%20an%20untrusted%20contract%2C%20when%20invoking%20%7BonERC1155Received%7D%20on%20the%20receiver.%5Cn%20%20%20%20%20%2A%20Ensure%20to%20follow%20the%20checks-effects-interactions%20pattern%20and%20consider%20employing%5Cn%20%20%20%20%20%2A%20reentrancy%20guards%20when%20interacting%20with%20untrusted%20contracts.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransferSingle%7D%20event.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60to%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20-%20If%20the%20caller%20is%20not%20%60from%60%2C%20it%20must%20have%20been%20approved%20to%20spend%20%60%60from%60%60%27s%20tokens%20via%20%7BsetApprovalForAll%7D.%5Cn%20%20%20%20%20%2A%20-%20%60from%60%20must%20have%20a%20balance%20of%20tokens%20of%20type%20%60id%60%20of%20at%20least%20%60value%60%20amount.%5Cn%20%20%20%20%20%2A%20-%20If%20%60to%60%20refers%20to%20a%20smart%20contract%2C%20it%20must%20implement%20%7BIERC1155Receiver-onERC1155Received%7D%20and%20return%20the%5Cn%20%20%20%20%20%2A%20acceptance%20magic%20value.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20safeTransferFrom%28address%20from%2C%20address%20to%2C%20uint256%20id%2C%20uint256%20value%2C%20bytes%20calldata%20data%29%20external%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20xref%3AROOT%3Aerc1155.adoc%23batch-operations%5BBatched%5D%20version%20of%20%7BsafeTransferFrom%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20This%20function%20can%20potentially%20allow%20a%20reentrancy%20attack%20when%20transferring%20tokens%5Cn%20%20%20%20%20%2A%20to%20an%20untrusted%20contract%2C%20when%20invoking%20%7BonERC1155BatchReceived%7D%20on%20the%20receiver.%5Cn%20%20%20%20%20%2A%20Ensure%20to%20follow%20the%20checks-effects-interactions%20pattern%20and%20consider%20employing%5Cn%20%20%20%20%20%2A%20reentrancy%20guards%20when%20interacting%20with%20untrusted%20contracts.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20either%20a%20%7BTransferSingle%7D%20or%20a%20%7BTransferBatch%7D%20event%2C%20depending%20on%20the%20length%20of%20the%20array%20arguments.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60ids%60%20and%20%60values%60%20must%20have%20the%20same%20length.%5Cn%20%20%20%20%20%2A%20-%20If%20%60to%60%20refers%20to%20a%20smart%20contract%2C%20it%20must%20implement%20%7BIERC1155Receiver-onERC1155BatchReceived%7D%20and%20return%20the%5Cn%20%20%20%20%20%2A%20acceptance%20magic%20value.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20safeBatchTransferFrom%28%5Cn%20%20%20%20%20%20%20%20address%20from%2C%5Cn%20%20%20%20%20%20%20%20address%20to%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20calldata%20ids%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20calldata%20values%2C%5Cn%20%20%20%20%20%20%20%20bytes%20calldata%20data%5Cn%20%20%20%20%29%20external%3B%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC1155%2FIERC1155Receiver.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28token%2FERC1155%2FIERC1155Receiver.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BIERC165%7D%20from%20%5C%22..%2F..%2Futils%2Fintrospection%2FIERC165.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Interface%20that%20must%20be%20implemented%20by%20smart%20contracts%20in%20order%20to%20receive%5Cn%20%2A%20ERC-1155%20token%20transfers.%5Cn%20%2A%2F%5Cninterface%20IERC1155Receiver%20is%20IERC165%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Handles%20the%20receipt%20of%20a%20single%20ERC-1155%20token%20type.%20This%20function%20is%5Cn%20%20%20%20%20%2A%20called%20at%20the%20end%20of%20a%20%60safeTransferFrom%60%20after%20the%20balance%20has%20been%20updated.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20To%20accept%20the%20transfer%2C%20this%20must%20return%5Cn%20%20%20%20%20%2A%20%60bytes4%28keccak256%28%5C%22onERC1155Received%28address%2Caddress%2Cuint256%2Cuint256%2Cbytes%29%5C%22%29%29%60%5Cn%20%20%20%20%20%2A%20%28i.e.%200xf23a6e61%2C%20or%20its%20own%20function%20selector%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20%40param%20operator%20The%20address%20which%20initiated%20the%20transfer%20%28i.e.%20msg.sender%29%5Cn%20%20%20%20%20%2A%20%40param%20from%20The%20address%20which%20previously%20owned%20the%20token%5Cn%20%20%20%20%20%2A%20%40param%20id%20The%20ID%20of%20the%20token%20being%20transferred%5Cn%20%20%20%20%20%2A%20%40param%20value%20The%20amount%20of%20tokens%20being%20transferred%5Cn%20%20%20%20%20%2A%20%40param%20data%20Additional%20data%20with%20no%20specified%20format%5Cn%20%20%20%20%20%2A%20%40return%20%60bytes4%28keccak256%28%5C%22onERC1155Received%28address%2Caddress%2Cuint256%2Cuint256%2Cbytes%29%5C%22%29%29%60%20if%20transfer%20is%20allowed%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20onERC1155Received%28%5Cn%20%20%20%20%20%20%20%20address%20operator%2C%5Cn%20%20%20%20%20%20%20%20address%20from%2C%5Cn%20%20%20%20%20%20%20%20uint256%20id%2C%5Cn%20%20%20%20%20%20%20%20uint256%20value%2C%5Cn%20%20%20%20%20%20%20%20bytes%20calldata%20data%5Cn%20%20%20%20%29%20external%20returns%20%28bytes4%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Handles%20the%20receipt%20of%20a%20multiple%20ERC-1155%20token%20types.%20This%20function%5Cn%20%20%20%20%20%2A%20is%20called%20at%20the%20end%20of%20a%20%60safeBatchTransferFrom%60%20after%20the%20balances%20have%5Cn%20%20%20%20%20%2A%20been%20updated.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20To%20accept%20the%20transfer%28s%29%2C%20this%20must%20return%5Cn%20%20%20%20%20%2A%20%60bytes4%28keccak256%28%5C%22onERC1155BatchReceived%28address%2Caddress%2Cuint256%5B%5D%2Cuint256%5B%5D%2Cbytes%29%5C%22%29%29%60%5Cn%20%20%20%20%20%2A%20%28i.e.%200xbc197c81%2C%20or%20its%20own%20function%20selector%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20%40param%20operator%20The%20address%20which%20initiated%20the%20batch%20transfer%20%28i.e.%20msg.sender%29%5Cn%20%20%20%20%20%2A%20%40param%20from%20The%20address%20which%20previously%20owned%20the%20token%5Cn%20%20%20%20%20%2A%20%40param%20ids%20An%20array%20containing%20ids%20of%20each%20token%20being%20transferred%20%28order%20and%20length%20must%20match%20values%20array%29%5Cn%20%20%20%20%20%2A%20%40param%20values%20An%20array%20containing%20amounts%20of%20each%20token%20being%20transferred%20%28order%20and%20length%20must%20match%20ids%20array%29%5Cn%20%20%20%20%20%2A%20%40param%20data%20Additional%20data%20with%20no%20specified%20format%5Cn%20%20%20%20%20%2A%20%40return%20%60bytes4%28keccak256%28%5C%22onERC1155BatchReceived%28address%2Caddress%2Cuint256%5B%5D%2Cuint256%5B%5D%2Cbytes%29%5C%22%29%29%60%20if%20transfer%20is%20allowed%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20onERC1155BatchReceived%28%5Cn%20%20%20%20%20%20%20%20address%20operator%2C%5Cn%20%20%20%20%20%20%20%20address%20from%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20calldata%20ids%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20calldata%20values%2C%5Cn%20%20%20%20%20%20%20%20bytes%20calldata%20data%5Cn%20%20%20%20%29%20external%20returns%20%28bytes4%29%3B%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC1155%2Futils%2FERC1155Utils.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28token%2FERC1155%2Futils%2FERC1155Utils.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BIERC1155Receiver%7D%20from%20%5C%22..%2FIERC1155Receiver.sol%5C%22%3B%5Cnimport%20%7BIERC1155Errors%7D%20from%20%5C%22..%2F..%2F..%2Finterfaces%2Fdraft-IERC6093.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Library%20that%20provide%20common%20ERC-1155%20utility%20functions.%5Cn%20%2A%5Cn%20%2A%20See%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-1155%5BERC-1155%5D.%5Cn%20%2A%5Cn%20%2A%20_Available%20since%20v5.1._%5Cn%20%2A%2F%5Cnlibrary%20ERC1155Utils%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Performs%20an%20acceptance%20check%20for%20the%20provided%20%60operator%60%20by%20calling%20%7BIERC1155-onERC1155Received%7D%5Cn%20%20%20%20%20%2A%20on%20the%20%60to%60%20address.%20The%20%60operator%60%20is%20generally%20the%20address%20that%20initiated%20the%20token%20transfer%20%28i.e.%20%60msg.sender%60%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20The%20acceptance%20call%20is%20not%20executed%20and%20treated%20as%20a%20no-op%20if%20the%20target%20address%20doesn%27t%20contain%20code%20%28i.e.%20an%20EOA%29.%5Cn%20%20%20%20%20%2A%20Otherwise%2C%20the%20recipient%20must%20implement%20%7BIERC1155Receiver-onERC1155Received%7D%20and%20return%20the%20acceptance%20magic%20value%20to%20accept%5Cn%20%20%20%20%20%2A%20the%20transfer.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20checkOnERC1155Received%28%5Cn%20%20%20%20%20%20%20%20address%20operator%2C%5Cn%20%20%20%20%20%20%20%20address%20from%2C%5Cn%20%20%20%20%20%20%20%20address%20to%2C%5Cn%20%20%20%20%20%20%20%20uint256%20id%2C%5Cn%20%20%20%20%20%20%20%20uint256%20value%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20data%5Cn%20%20%20%20%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28to.code.length%20%3E%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20try%20IERC1155Receiver%28to%29.onERC1155Received%28operator%2C%20from%2C%20id%2C%20value%2C%20data%29%20returns%20%28bytes4%20response%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28response%20%21%3D%20IERC1155Receiver.onERC1155Received.selector%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Tokens%20rejected%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20IERC1155Errors.ERC1155InvalidReceiver%28to%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%28bytes%20memory%20reason%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28reason.length%20%3D%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20non-IERC1155Receiver%20implementer%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20IERC1155Errors.ERC1155InvalidReceiver%28to%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%28add%2832%2C%20reason%29%2C%20mload%28reason%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Performs%20a%20batch%20acceptance%20check%20for%20the%20provided%20%60operator%60%20by%20calling%20%7BIERC1155-onERC1155BatchReceived%7D%5Cn%20%20%20%20%20%2A%20on%20the%20%60to%60%20address.%20The%20%60operator%60%20is%20generally%20the%20address%20that%20initiated%20the%20token%20transfer%20%28i.e.%20%60msg.sender%60%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20The%20acceptance%20call%20is%20not%20executed%20and%20treated%20as%20a%20no-op%20if%20the%20target%20address%20doesn%27t%20contain%20code%20%28i.e.%20an%20EOA%29.%5Cn%20%20%20%20%20%2A%20Otherwise%2C%20the%20recipient%20must%20implement%20%7BIERC1155Receiver-onERC1155Received%7D%20and%20return%20the%20acceptance%20magic%20value%20to%20accept%5Cn%20%20%20%20%20%2A%20the%20transfer.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20checkOnERC1155BatchReceived%28%5Cn%20%20%20%20%20%20%20%20address%20operator%2C%5Cn%20%20%20%20%20%20%20%20address%20from%2C%5Cn%20%20%20%20%20%20%20%20address%20to%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20ids%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20values%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20data%5Cn%20%20%20%20%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28to.code.length%20%3E%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20try%20IERC1155Receiver%28to%29.onERC1155BatchReceived%28operator%2C%20from%2C%20ids%2C%20values%2C%20data%29%20returns%20%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytes4%20response%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28response%20%21%3D%20IERC1155Receiver.onERC1155BatchReceived.selector%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Tokens%20rejected%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20IERC1155Errors.ERC1155InvalidReceiver%28to%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%28bytes%20memory%20reason%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28reason.length%20%3D%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20non-IERC1155Receiver%20implementer%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20IERC1155Errors.ERC1155InvalidReceiver%28to%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%28add%2832%2C%20reason%29%2C%20mload%28reason%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC20%2FERC20.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.2.0%29%20%28token%2FERC20%2FERC20.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BIERC20%7D%20from%20%5C%22.%2FIERC20.sol%5C%22%3B%5Cnimport%20%7BIERC20Metadata%7D%20from%20%5C%22.%2Fextensions%2FIERC20Metadata.sol%5C%22%3B%5Cnimport%20%7BContext%7D%20from%20%5C%22..%2F..%2Futils%2FContext.sol%5C%22%3B%5Cnimport%20%7BIERC20Errors%7D%20from%20%5C%22..%2F..%2Finterfaces%2Fdraft-IERC6093.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Implementation%20of%20the%20%7BIERC20%7D%20interface.%5Cn%20%2A%5Cn%20%2A%20This%20implementation%20is%20agnostic%20to%20the%20way%20tokens%20are%20created.%20This%20means%5Cn%20%2A%20that%20a%20supply%20mechanism%20has%20to%20be%20added%20in%20a%20derived%20contract%20using%20%7B_mint%7D.%5Cn%20%2A%5Cn%20%2A%20TIP%3A%20For%20a%20detailed%20writeup%20see%20our%20guide%5Cn%20%2A%20https%3A%2F%2Fforum.openzeppelin.com%2Ft%2Fhow-to-implement-erc20-supply-mechanisms%2F226%5BHow%5Cn%20%2A%20to%20implement%20supply%20mechanisms%5D.%5Cn%20%2A%5Cn%20%2A%20The%20default%20value%20of%20%7Bdecimals%7D%20is%2018.%20To%20change%20this%2C%20you%20should%20override%5Cn%20%2A%20this%20function%20so%20it%20returns%20a%20different%20value.%5Cn%20%2A%5Cn%20%2A%20We%20have%20followed%20general%20OpenZeppelin%20Contracts%20guidelines%3A%20functions%20revert%5Cn%20%2A%20instead%20returning%20%60false%60%20on%20failure.%20This%20behavior%20is%20nonetheless%5Cn%20%2A%20conventional%20and%20does%20not%20conflict%20with%20the%20expectations%20of%20ERC-20%5Cn%20%2A%20applications.%5Cn%20%2A%2F%5Cnabstract%20contract%20ERC20%20is%20Context%2C%20IERC20%2C%20IERC20Metadata%2C%20IERC20Errors%20%7B%5Cn%20%20%20%20mapping%28address%20account%20%3D%3E%20uint256%29%20private%20_balances%3B%5Cn%5Cn%20%20%20%20mapping%28address%20account%20%3D%3E%20mapping%28address%20spender%20%3D%3E%20uint256%29%29%20private%20_allowances%3B%5Cn%5Cn%20%20%20%20uint256%20private%20_totalSupply%3B%5Cn%5Cn%20%20%20%20string%20private%20_name%3B%5Cn%20%20%20%20string%20private%20_symbol%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Sets%20the%20values%20for%20%7Bname%7D%20and%20%7Bsymbol%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20All%20two%20of%20these%20values%20are%20immutable%3A%20they%20can%20only%20be%20set%20once%20during%5Cn%20%20%20%20%20%2A%20construction.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20constructor%28string%20memory%20name_%2C%20string%20memory%20symbol_%29%20%7B%5Cn%20%20%20%20%20%20%20%20_name%20%3D%20name_%3B%5Cn%20%20%20%20%20%20%20%20_symbol%20%3D%20symbol_%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20name%20of%20the%20token.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20name%28%29%20public%20view%20virtual%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_name%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20symbol%20of%20the%20token%2C%20usually%20a%20shorter%20version%20of%20the%5Cn%20%20%20%20%20%2A%20name.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20symbol%28%29%20public%20view%20virtual%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_symbol%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20number%20of%20decimals%20used%20to%20get%20its%20user%20representation.%5Cn%20%20%20%20%20%2A%20For%20example%2C%20if%20%60decimals%60%20equals%20%602%60%2C%20a%20balance%20of%20%60505%60%20tokens%20should%5Cn%20%20%20%20%20%2A%20be%20displayed%20to%20a%20user%20as%20%605.05%60%20%28%60505%20%2F%2010%20%2A%2A%202%60%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Tokens%20usually%20opt%20for%20a%20value%20of%2018%2C%20imitating%20the%20relationship%20between%5Cn%20%20%20%20%20%2A%20Ether%20and%20Wei.%20This%20is%20the%20default%20value%20returned%20by%20this%20function%2C%20unless%5Cn%20%20%20%20%20%2A%20it%27s%20overridden.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20This%20information%20is%20only%20used%20for%20_display_%20purposes%3A%20it%20in%5Cn%20%20%20%20%20%2A%20no%20way%20affects%20any%20of%20the%20arithmetic%20of%20the%20contract%2C%20including%5Cn%20%20%20%20%20%2A%20%7BIERC20-balanceOf%7D%20and%20%7BIERC20-transfer%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20decimals%28%29%20public%20view%20virtual%20returns%20%28uint8%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%2018%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC20-totalSupply%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20totalSupply%28%29%20public%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_totalSupply%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC20-balanceOf%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20balanceOf%28address%20account%29%20public%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_balances%5Baccount%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC20-transfer%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60to%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20-%20the%20caller%20must%20have%20a%20balance%20of%20at%20least%20%60value%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20transfer%28address%20to%2C%20uint256%20value%29%20public%20virtual%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20address%20owner%20%3D%20_msgSender%28%29%3B%5Cn%20%20%20%20%20%20%20%20_transfer%28owner%2C%20to%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20return%20true%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC20-allowance%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20allowance%28address%20owner%2C%20address%20spender%29%20public%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_allowances%5Bowner%5D%5Bspender%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC20-approve%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20If%20%60value%60%20is%20the%20maximum%20%60uint256%60%2C%20the%20allowance%20is%20not%20updated%20on%5Cn%20%20%20%20%20%2A%20%60transferFrom%60.%20This%20is%20semantically%20equivalent%20to%20an%20infinite%20approval.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60spender%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20approve%28address%20spender%2C%20uint256%20value%29%20public%20virtual%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20address%20owner%20%3D%20_msgSender%28%29%3B%5Cn%20%20%20%20%20%20%20%20_approve%28owner%2C%20spender%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20return%20true%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC20-transferFrom%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Skips%20emitting%20an%20%7BApproval%7D%20event%20indicating%20an%20allowance%20update.%20This%20is%20not%5Cn%20%20%20%20%20%2A%20required%20by%20the%20ERC.%20See%20%7Bxref-ERC20-_approve-address-address-uint256-bool-%7D%5B_approve%5D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20Does%20not%20update%20the%20allowance%20if%20the%20current%20allowance%5Cn%20%20%20%20%20%2A%20is%20the%20maximum%20%60uint256%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60from%60%20and%20%60to%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20-%20%60from%60%20must%20have%20a%20balance%20of%20at%20least%20%60value%60.%5Cn%20%20%20%20%20%2A%20-%20the%20caller%20must%20have%20allowance%20for%20%60%60from%60%60%27s%20tokens%20of%20at%20least%5Cn%20%20%20%20%20%2A%20%60value%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20transferFrom%28address%20from%2C%20address%20to%2C%20uint256%20value%29%20public%20virtual%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20address%20spender%20%3D%20_msgSender%28%29%3B%5Cn%20%20%20%20%20%20%20%20_spendAllowance%28from%2C%20spender%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20_transfer%28from%2C%20to%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20return%20true%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Moves%20a%20%60value%60%20amount%20of%20tokens%20from%20%60from%60%20to%20%60to%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20internal%20function%20is%20equivalent%20to%20%7Btransfer%7D%2C%20and%20can%20be%20used%20to%5Cn%20%20%20%20%20%2A%20e.g.%20implement%20automatic%20token%20fees%2C%20slashing%20mechanisms%2C%20etc.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransfer%7D%20event.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20This%20function%20is%20not%20virtual%2C%20%7B_update%7D%20should%20be%20overridden%20instead.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_transfer%28address%20from%2C%20address%20to%2C%20uint256%20value%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28from%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC20InvalidSender%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20%28to%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC20InvalidReceiver%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_update%28from%2C%20to%2C%20value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Transfers%20a%20%60value%60%20amount%20of%20tokens%20from%20%60from%60%20to%20%60to%60%2C%20or%20alternatively%20mints%20%28or%20burns%29%20if%20%60from%60%5Cn%20%20%20%20%20%2A%20%28or%20%60to%60%29%20is%20the%20zero%20address.%20All%20customizations%20to%20transfers%2C%20mints%2C%20and%20burns%20should%20be%20done%20by%20overriding%5Cn%20%20%20%20%20%2A%20this%20function.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransfer%7D%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_update%28address%20from%2C%20address%20to%2C%20uint256%20value%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28from%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Overflow%20check%20required%3A%20The%20rest%20of%20the%20code%20assumes%20that%20totalSupply%20never%20overflows%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_totalSupply%20%2B%3D%20value%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20fromBalance%20%3D%20_balances%5Bfrom%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28fromBalance%20%3C%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC20InsufficientBalance%28from%2C%20fromBalance%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Overflow%20not%20possible%3A%20value%20%3C%3D%20fromBalance%20%3C%3D%20totalSupply.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_balances%5Bfrom%5D%20%3D%20fromBalance%20-%20value%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28to%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Overflow%20not%20possible%3A%20value%20%3C%3D%20totalSupply%20or%20value%20%3C%3D%20fromBalance%20%3C%3D%20totalSupply.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_totalSupply%20-%3D%20value%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Overflow%20not%20possible%3A%20balance%20%2B%20value%20is%20at%20most%20totalSupply%2C%20which%20we%20know%20fits%20into%20a%20uint256.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_balances%5Bto%5D%20%2B%3D%20value%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20emit%20Transfer%28from%2C%20to%2C%20value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Creates%20a%20%60value%60%20amount%20of%20tokens%20and%20assigns%20them%20to%20%60account%60%2C%20by%20transferring%20it%20from%20address%280%29.%5Cn%20%20%20%20%20%2A%20Relies%20on%20the%20%60_update%60%20mechanism%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransfer%7D%20event%20with%20%60from%60%20set%20to%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20This%20function%20is%20not%20virtual%2C%20%7B_update%7D%20should%20be%20overridden%20instead.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_mint%28address%20account%2C%20uint256%20value%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28account%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC20InvalidReceiver%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_update%28address%280%29%2C%20account%2C%20value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Destroys%20a%20%60value%60%20amount%20of%20tokens%20from%20%60account%60%2C%20lowering%20the%20total%20supply.%5Cn%20%20%20%20%20%2A%20Relies%20on%20the%20%60_update%60%20mechanism.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransfer%7D%20event%20with%20%60to%60%20set%20to%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20This%20function%20is%20not%20virtual%2C%20%7B_update%7D%20should%20be%20overridden%20instead%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_burn%28address%20account%2C%20uint256%20value%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28account%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC20InvalidSender%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_update%28account%2C%20address%280%29%2C%20value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Sets%20%60value%60%20as%20the%20allowance%20of%20%60spender%60%20over%20the%20%60owner%60%20s%20tokens.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20internal%20function%20is%20equivalent%20to%20%60approve%60%2C%20and%20can%20be%20used%20to%5Cn%20%20%20%20%20%2A%20e.g.%20set%20automatic%20allowances%20for%20certain%20subsystems%2C%20etc.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20an%20%7BApproval%7D%20event.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60owner%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20-%20%60spender%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Overrides%20to%20this%20logic%20should%20be%20done%20to%20the%20variant%20with%20an%20additional%20%60bool%20emitEvent%60%20argument.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_approve%28address%20owner%2C%20address%20spender%2C%20uint256%20value%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20_approve%28owner%2C%20spender%2C%20value%2C%20true%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Variant%20of%20%7B_approve%7D%20with%20an%20optional%20flag%20to%20enable%20or%20disable%20the%20%7BApproval%7D%20event.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20By%20default%20%28when%20calling%20%7B_approve%7D%29%20the%20flag%20is%20set%20to%20true.%20On%20the%20other%20hand%2C%20approval%20changes%20made%20by%5Cn%20%20%20%20%20%2A%20%60_spendAllowance%60%20during%20the%20%60transferFrom%60%20operation%20set%20the%20flag%20to%20false.%20This%20saves%20gas%20by%20not%20emitting%20any%5Cn%20%20%20%20%20%2A%20%60Approval%60%20event%20during%20%60transferFrom%60%20operations.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Anyone%20who%20wishes%20to%20continue%20emitting%20%60Approval%60%20events%20on%20the%60transferFrom%60%20operation%20can%20force%20the%20flag%20to%5Cn%20%20%20%20%20%2A%20true%20using%20the%20following%20override%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20%60%60%60solidity%5Cn%20%20%20%20%20%2A%20function%20_approve%28address%20owner%2C%20address%20spender%2C%20uint256%20value%2C%20bool%29%20internal%20virtual%20override%20%7B%5Cn%20%20%20%20%20%2A%20%20%20%20%20super._approve%28owner%2C%20spender%2C%20value%2C%20true%29%3B%5Cn%20%20%20%20%20%2A%20%7D%5Cn%20%20%20%20%20%2A%20%60%60%60%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%20are%20the%20same%20as%20%7B_approve%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_approve%28address%20owner%2C%20address%20spender%2C%20uint256%20value%2C%20bool%20emitEvent%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28owner%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC20InvalidApprover%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20%28spender%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC20InvalidSpender%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_allowances%5Bowner%5D%5Bspender%5D%20%3D%20value%3B%5Cn%20%20%20%20%20%20%20%20if%20%28emitEvent%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20emit%20Approval%28owner%2C%20spender%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Updates%20%60owner%60%20s%20allowance%20for%20%60spender%60%20based%20on%20spent%20%60value%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Does%20not%20update%20the%20allowance%20value%20in%20case%20of%20infinite%20allowance.%5Cn%20%20%20%20%20%2A%20Revert%20if%20not%20enough%20allowance%20is%20available.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Does%20not%20emit%20an%20%7BApproval%7D%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_spendAllowance%28address%20owner%2C%20address%20spender%2C%20uint256%20value%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20currentAllowance%20%3D%20allowance%28owner%2C%20spender%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28currentAllowance%20%3C%20type%28uint256%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28currentAllowance%20%3C%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC20InsufficientAllowance%28spender%2C%20currentAllowance%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_approve%28owner%2C%20spender%2C%20currentAllowance%20-%20value%2C%20false%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC20%2Fextensions%2FERC20Capped.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.0.0%29%20%28token%2FERC20%2Fextensions%2FERC20Capped.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BERC20%7D%20from%20%5C%22..%2FERC20.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Extension%20of%20%7BERC20%7D%20that%20adds%20a%20cap%20to%20the%20supply%20of%20tokens.%5Cn%20%2A%2F%5Cnabstract%20contract%20ERC20Capped%20is%20ERC20%20%7B%5Cn%20%20%20%20uint256%20private%20immutable%20_cap%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Total%20supply%20cap%20has%20been%20exceeded.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC20ExceededCap%28uint256%20increasedSupply%2C%20uint256%20cap%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20supplied%20cap%20is%20not%20a%20valid%20cap.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC20InvalidCap%28uint256%20cap%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Sets%20the%20value%20of%20the%20%60cap%60.%20This%20value%20is%20immutable%2C%20it%20can%20only%20be%5Cn%20%20%20%20%20%2A%20set%20once%20during%20construction.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20constructor%28uint256%20cap_%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28cap_%20%3D%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC20InvalidCap%280%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_cap%20%3D%20cap_%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20cap%20on%20the%20token%27s%20total%20supply.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20cap%28%29%20public%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_cap%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BERC20-_update%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_update%28address%20from%2C%20address%20to%2C%20uint256%20value%29%20internal%20virtual%20override%20%7B%5Cn%20%20%20%20%20%20%20%20super._update%28from%2C%20to%2C%20value%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28from%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20maxSupply%20%3D%20cap%28%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20supply%20%3D%20totalSupply%28%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28supply%20%3E%20maxSupply%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC20ExceededCap%28supply%2C%20maxSupply%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC20%2Fextensions%2FERC20Votes.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28token%2FERC20%2Fextensions%2FERC20Votes.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BERC20%7D%20from%20%5C%22..%2FERC20.sol%5C%22%3B%5Cnimport%20%7BVotes%7D%20from%20%5C%22..%2F..%2F..%2Fgovernance%2Futils%2FVotes.sol%5C%22%3B%5Cnimport%20%7BCheckpoints%7D%20from%20%5C%22..%2F..%2F..%2Futils%2Fstructs%2FCheckpoints.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Extension%20of%20ERC-20%20to%20support%20Compound-like%20voting%20and%20delegation.%20This%20version%20is%20more%20generic%20than%20Compound%27s%2C%5Cn%20%2A%20and%20supports%20token%20supply%20up%20to%202%5E208%5E%20-%201%2C%20while%20COMP%20is%20limited%20to%202%5E96%5E%20-%201.%5Cn%20%2A%5Cn%20%2A%20NOTE%3A%20This%20contract%20does%20not%20provide%20interface%20compatibility%20with%20Compound%27s%20COMP%20token.%5Cn%20%2A%5Cn%20%2A%20This%20extension%20keeps%20a%20history%20%28checkpoints%29%20of%20each%20account%27s%20vote%20power.%20Vote%20power%20can%20be%20delegated%20either%5Cn%20%2A%20by%20calling%20the%20%7BVotes-delegate%7D%20function%20directly%2C%20or%20by%20providing%20a%20signature%20to%20be%20used%20with%20%7BVotes-delegateBySig%7D.%20Voting%5Cn%20%2A%20power%20can%20be%20queried%20through%20the%20public%20accessors%20%7BVotes-getVotes%7D%20and%20%7BVotes-getPastVotes%7D.%5Cn%20%2A%5Cn%20%2A%20By%20default%2C%20token%20balance%20does%20not%20account%20for%20voting%20power.%20This%20makes%20transfers%20cheaper.%20The%20downside%20is%20that%20it%5Cn%20%2A%20requires%20users%20to%20delegate%20to%20themselves%20in%20order%20to%20activate%20checkpoints%20and%20have%20their%20voting%20power%20tracked.%5Cn%20%2A%2F%5Cnabstract%20contract%20ERC20Votes%20is%20ERC20%2C%20Votes%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Total%20supply%20cap%20has%20been%20exceeded%2C%20introducing%20a%20risk%20of%20votes%20overflowing.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC20ExceededSafeSupply%28uint256%20increasedSupply%2C%20uint256%20cap%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Maximum%20token%20supply.%20Defaults%20to%20%60type%28uint208%29.max%60%20%282%5E208%5E%20-%201%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20maximum%20is%20enforced%20in%20%7B_update%7D.%20It%20limits%20the%20total%20supply%20of%20the%20token%2C%20which%20is%20otherwise%20a%20uint256%2C%5Cn%20%20%20%20%20%2A%20so%20that%20checkpoints%20can%20be%20stored%20in%20the%20Trace208%20structure%20used%20by%20%7BVotes%7D.%20Increasing%20this%20value%20will%20not%5Cn%20%20%20%20%20%2A%20remove%20the%20underlying%20limitation%2C%20and%20will%20cause%20%7B_update%7D%20to%20fail%20because%20of%20a%20math%20overflow%20in%5Cn%20%20%20%20%20%2A%20%7BVotes-_transferVotingUnits%7D.%20An%20override%20could%20be%20used%20to%20further%20restrict%20the%20total%20supply%20%28to%20a%20lower%20value%29%20if%5Cn%20%20%20%20%20%2A%20additional%20logic%20requires%20it.%20When%20resolving%20override%20conflicts%20on%20this%20function%2C%20the%20minimum%20should%20be%5Cn%20%20%20%20%20%2A%20returned.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_maxSupply%28%29%20internal%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20type%28uint208%29.max%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Move%20voting%20power%20when%20tokens%20are%20transferred.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BIVotes-DelegateVotesChanged%7D%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_update%28address%20from%2C%20address%20to%2C%20uint256%20value%29%20internal%20virtual%20override%20%7B%5Cn%20%20%20%20%20%20%20%20super._update%28from%2C%20to%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28from%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20supply%20%3D%20totalSupply%28%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20cap%20%3D%20_maxSupply%28%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28supply%20%3E%20cap%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC20ExceededSafeSupply%28supply%2C%20cap%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_transferVotingUnits%28from%2C%20to%2C%20value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20voting%20units%20of%20an%20%60account%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20Overriding%20this%20function%20may%20compromise%20the%20internal%20vote%20accounting.%5Cn%20%20%20%20%20%2A%20%60ERC20Votes%60%20assumes%20tokens%20map%20to%20voting%20units%201%3A1%20and%20this%20is%20not%20easy%20to%20change.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_getVotingUnits%28address%20account%29%20internal%20view%20virtual%20override%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20balanceOf%28account%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Get%20number%20of%20checkpoints%20for%20%60account%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20numCheckpoints%28address%20account%29%20public%20view%20virtual%20returns%20%28uint32%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_numCheckpoints%28account%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Get%20the%20%60pos%60-th%20checkpoint%20for%20%60account%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20checkpoints%28address%20account%2C%20uint32%20pos%29%20public%20view%20virtual%20returns%20%28Checkpoints.Checkpoint208%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_checkpoints%28account%2C%20pos%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC20%2Fextensions%2FIERC20Metadata.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28token%2FERC20%2Fextensions%2FIERC20Metadata.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BIERC20%7D%20from%20%5C%22..%2FIERC20.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Interface%20for%20the%20optional%20metadata%20functions%20from%20the%20ERC-20%20standard.%5Cn%20%2A%2F%5Cninterface%20IERC20Metadata%20is%20IERC20%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20name%20of%20the%20token.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20name%28%29%20external%20view%20returns%20%28string%20memory%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20symbol%20of%20the%20token.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20symbol%28%29%20external%20view%20returns%20%28string%20memory%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20decimals%20places%20of%20the%20token.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20decimals%28%29%20external%20view%20returns%20%28uint8%29%3B%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC20%2FIERC20.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28token%2FERC20%2FIERC20.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Interface%20of%20the%20ERC-20%20standard%20as%20defined%20in%20the%20ERC.%5Cn%20%2A%2F%5Cninterface%20IERC20%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Emitted%20when%20%60value%60%20tokens%20are%20moved%20from%20one%20account%20%28%60from%60%29%20to%5Cn%20%20%20%20%20%2A%20another%20%28%60to%60%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Note%20that%20%60value%60%20may%20be%20zero.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20event%20Transfer%28address%20indexed%20from%2C%20address%20indexed%20to%2C%20uint256%20value%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Emitted%20when%20the%20allowance%20of%20a%20%60spender%60%20for%20an%20%60owner%60%20is%20set%20by%5Cn%20%20%20%20%20%2A%20a%20call%20to%20%7Bapprove%7D.%20%60value%60%20is%20the%20new%20allowance.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20event%20Approval%28address%20indexed%20owner%2C%20address%20indexed%20spender%2C%20uint256%20value%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20value%20of%20tokens%20in%20existence.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20totalSupply%28%29%20external%20view%20returns%20%28uint256%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20value%20of%20tokens%20owned%20by%20%60account%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20balanceOf%28address%20account%29%20external%20view%20returns%20%28uint256%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Moves%20a%20%60value%60%20amount%20of%20tokens%20from%20the%20caller%27s%20account%20to%20%60to%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%20a%20boolean%20value%20indicating%20whether%20the%20operation%20succeeded.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransfer%7D%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20transfer%28address%20to%2C%20uint256%20value%29%20external%20returns%20%28bool%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20remaining%20number%20of%20tokens%20that%20%60spender%60%20will%20be%5Cn%20%20%20%20%20%2A%20allowed%20to%20spend%20on%20behalf%20of%20%60owner%60%20through%20%7BtransferFrom%7D.%20This%20is%5Cn%20%20%20%20%20%2A%20zero%20by%20default.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20value%20changes%20when%20%7Bapprove%7D%20or%20%7BtransferFrom%7D%20are%20called.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20allowance%28address%20owner%2C%20address%20spender%29%20external%20view%20returns%20%28uint256%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Sets%20a%20%60value%60%20amount%20of%20tokens%20as%20the%20allowance%20of%20%60spender%60%20over%20the%5Cn%20%20%20%20%20%2A%20caller%27s%20tokens.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%20a%20boolean%20value%20indicating%20whether%20the%20operation%20succeeded.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20IMPORTANT%3A%20Beware%20that%20changing%20an%20allowance%20with%20this%20method%20brings%20the%20risk%5Cn%20%20%20%20%20%2A%20that%20someone%20may%20use%20both%20the%20old%20and%20the%20new%20allowance%20by%20unfortunate%5Cn%20%20%20%20%20%2A%20transaction%20ordering.%20One%20possible%20solution%20to%20mitigate%20this%20race%5Cn%20%20%20%20%20%2A%20condition%20is%20to%20first%20reduce%20the%20spender%27s%20allowance%20to%200%20and%20set%20the%5Cn%20%20%20%20%20%2A%20desired%20value%20afterwards%3A%5Cn%20%20%20%20%20%2A%20https%3A%2F%2Fgithub.com%2Fethereum%2FEIPs%2Fissues%2F20%23issuecomment-263524729%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20an%20%7BApproval%7D%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20approve%28address%20spender%2C%20uint256%20value%29%20external%20returns%20%28bool%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Moves%20a%20%60value%60%20amount%20of%20tokens%20from%20%60from%60%20to%20%60to%60%20using%20the%5Cn%20%20%20%20%20%2A%20allowance%20mechanism.%20%60value%60%20is%20then%20deducted%20from%20the%20caller%27s%5Cn%20%20%20%20%20%2A%20allowance.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%20a%20boolean%20value%20indicating%20whether%20the%20operation%20succeeded.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransfer%7D%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20transferFrom%28address%20from%2C%20address%20to%2C%20uint256%20value%29%20external%20returns%20%28bool%29%3B%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC721%2FERC721.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28token%2FERC721%2FERC721.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BIERC721%7D%20from%20%5C%22.%2FIERC721.sol%5C%22%3B%5Cnimport%20%7BIERC721Metadata%7D%20from%20%5C%22.%2Fextensions%2FIERC721Metadata.sol%5C%22%3B%5Cnimport%20%7BERC721Utils%7D%20from%20%5C%22.%2Futils%2FERC721Utils.sol%5C%22%3B%5Cnimport%20%7BContext%7D%20from%20%5C%22..%2F..%2Futils%2FContext.sol%5C%22%3B%5Cnimport%20%7BStrings%7D%20from%20%5C%22..%2F..%2Futils%2FStrings.sol%5C%22%3B%5Cnimport%20%7BIERC165%2C%20ERC165%7D%20from%20%5C%22..%2F..%2Futils%2Fintrospection%2FERC165.sol%5C%22%3B%5Cnimport%20%7BIERC721Errors%7D%20from%20%5C%22..%2F..%2Finterfaces%2Fdraft-IERC6093.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Implementation%20of%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-721%5BERC-721%5D%20Non-Fungible%20Token%20Standard%2C%20including%5Cn%20%2A%20the%20Metadata%20extension%2C%20but%20not%20including%20the%20Enumerable%20extension%2C%20which%20is%20available%20separately%20as%5Cn%20%2A%20%7BERC721Enumerable%7D.%5Cn%20%2A%2F%5Cnabstract%20contract%20ERC721%20is%20Context%2C%20ERC165%2C%20IERC721%2C%20IERC721Metadata%2C%20IERC721Errors%20%7B%5Cn%20%20%20%20using%20Strings%20for%20uint256%3B%5Cn%5Cn%20%20%20%20%2F%2F%20Token%20name%5Cn%20%20%20%20string%20private%20_name%3B%5Cn%5Cn%20%20%20%20%2F%2F%20Token%20symbol%5Cn%20%20%20%20string%20private%20_symbol%3B%5Cn%5Cn%20%20%20%20mapping%28uint256%20tokenId%20%3D%3E%20address%29%20private%20_owners%3B%5Cn%5Cn%20%20%20%20mapping%28address%20owner%20%3D%3E%20uint256%29%20private%20_balances%3B%5Cn%5Cn%20%20%20%20mapping%28uint256%20tokenId%20%3D%3E%20address%29%20private%20_tokenApprovals%3B%5Cn%5Cn%20%20%20%20mapping%28address%20owner%20%3D%3E%20mapping%28address%20operator%20%3D%3E%20bool%29%29%20private%20_operatorApprovals%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Initializes%20the%20contract%20by%20setting%20a%20%60name%60%20and%20a%20%60symbol%60%20to%20the%20token%20collection.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20constructor%28string%20memory%20name_%2C%20string%20memory%20symbol_%29%20%7B%5Cn%20%20%20%20%20%20%20%20_name%20%3D%20name_%3B%5Cn%20%20%20%20%20%20%20%20_symbol%20%3D%20symbol_%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC165-supportsInterface%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20supportsInterface%28bytes4%20interfaceId%29%20public%20view%20virtual%20override%28ERC165%2C%20IERC165%29%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%5Cn%20%20%20%20%20%20%20%20%20%20%20%20interfaceId%20%3D%3D%20type%28IERC721%29.interfaceId%20%7C%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20interfaceId%20%3D%3D%20type%28IERC721Metadata%29.interfaceId%20%7C%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20super.supportsInterface%28interfaceId%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC721-balanceOf%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20balanceOf%28address%20owner%29%20public%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28owner%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC721InvalidOwner%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20_balances%5Bowner%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC721-ownerOf%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20ownerOf%28uint256%20tokenId%29%20public%20view%20virtual%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_requireOwned%28tokenId%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC721Metadata-name%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20name%28%29%20public%20view%20virtual%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_name%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC721Metadata-symbol%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20symbol%28%29%20public%20view%20virtual%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_symbol%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC721Metadata-tokenURI%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20tokenURI%28uint256%20tokenId%29%20public%20view%20virtual%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20_requireOwned%28tokenId%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20string%20memory%20baseURI%20%3D%20_baseURI%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20bytes%28baseURI%29.length%20%3E%200%20%3F%20string.concat%28baseURI%2C%20tokenId.toString%28%29%29%20%3A%20%5C%22%5C%22%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Base%20URI%20for%20computing%20%7BtokenURI%7D.%20If%20set%2C%20the%20resulting%20URI%20for%20each%5Cn%20%20%20%20%20%2A%20token%20will%20be%20the%20concatenation%20of%20the%20%60baseURI%60%20and%20the%20%60tokenId%60.%20Empty%5Cn%20%20%20%20%20%2A%20by%20default%2C%20can%20be%20overridden%20in%20child%20contracts.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_baseURI%28%29%20internal%20view%20virtual%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20%5C%22%5C%22%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC721-approve%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20approve%28address%20to%2C%20uint256%20tokenId%29%20public%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20_approve%28to%2C%20tokenId%2C%20_msgSender%28%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC721-getApproved%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getApproved%28uint256%20tokenId%29%20public%20view%20virtual%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20_requireOwned%28tokenId%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20return%20_getApproved%28tokenId%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC721-setApprovalForAll%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20setApprovalForAll%28address%20operator%2C%20bool%20approved%29%20public%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20_setApprovalForAll%28_msgSender%28%29%2C%20operator%2C%20approved%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC721-isApprovedForAll%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isApprovedForAll%28address%20owner%2C%20address%20operator%29%20public%20view%20virtual%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_operatorApprovals%5Bowner%5D%5Boperator%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC721-transferFrom%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20transferFrom%28address%20from%2C%20address%20to%2C%20uint256%20tokenId%29%20public%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28to%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC721InvalidReceiver%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Setting%20an%20%5C%22auth%5C%22%20arguments%20enables%20the%20%60_isAuthorized%60%20check%20which%20verifies%20that%20the%20token%20exists%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%28from%20%21%3D%200%29.%20Therefore%2C%20it%20is%20not%20needed%20to%20verify%20that%20the%20return%20value%20is%20not%200%20here.%5Cn%20%20%20%20%20%20%20%20address%20previousOwner%20%3D%20_update%28to%2C%20tokenId%2C%20_msgSender%28%29%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28previousOwner%20%21%3D%20from%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC721IncorrectOwner%28from%2C%20tokenId%2C%20previousOwner%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC721-safeTransferFrom%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20safeTransferFrom%28address%20from%2C%20address%20to%2C%20uint256%20tokenId%29%20public%20%7B%5Cn%20%20%20%20%20%20%20%20safeTransferFrom%28from%2C%20to%2C%20tokenId%2C%20%5C%22%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC721-safeTransferFrom%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20safeTransferFrom%28address%20from%2C%20address%20to%2C%20uint256%20tokenId%2C%20bytes%20memory%20data%29%20public%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20transferFrom%28from%2C%20to%2C%20tokenId%29%3B%5Cn%20%20%20%20%20%20%20%20ERC721Utils.checkOnERC721Received%28_msgSender%28%29%2C%20from%2C%20to%2C%20tokenId%2C%20data%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20owner%20of%20the%20%60tokenId%60.%20Does%20NOT%20revert%20if%20token%20doesn%27t%20exist%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20IMPORTANT%3A%20Any%20overrides%20to%20this%20function%20that%20add%20ownership%20of%20tokens%20not%20tracked%20by%20the%5Cn%20%20%20%20%20%2A%20core%20ERC-721%20logic%20MUST%20be%20matched%20with%20the%20use%20of%20%7B_increaseBalance%7D%20to%20keep%20balances%5Cn%20%20%20%20%20%2A%20consistent%20with%20ownership.%20The%20invariant%20to%20preserve%20is%20that%20for%20any%20address%20%60a%60%20the%20value%20returned%20by%5Cn%20%20%20%20%20%2A%20%60balanceOf%28a%29%60%20must%20be%20equal%20to%20the%20number%20of%20tokens%20such%20that%20%60_ownerOf%28tokenId%29%60%20is%20%60a%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_ownerOf%28uint256%20tokenId%29%20internal%20view%20virtual%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_owners%5BtokenId%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20approved%20address%20for%20%60tokenId%60.%20Returns%200%20if%20%60tokenId%60%20is%20not%20minted.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_getApproved%28uint256%20tokenId%29%20internal%20view%20virtual%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_tokenApprovals%5BtokenId%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20whether%20%60spender%60%20is%20allowed%20to%20manage%20%60owner%60%27s%20tokens%2C%20or%20%60tokenId%60%20in%5Cn%20%20%20%20%20%2A%20particular%20%28ignoring%20whether%20it%20is%20owned%20by%20%60owner%60%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20This%20function%20assumes%20that%20%60owner%60%20is%20the%20actual%20owner%20of%20%60tokenId%60%20and%20does%20not%20verify%20this%5Cn%20%20%20%20%20%2A%20assumption.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_isAuthorized%28address%20owner%2C%20address%20spender%2C%20uint256%20tokenId%29%20internal%20view%20virtual%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%5Cn%20%20%20%20%20%20%20%20%20%20%20%20spender%20%21%3D%20address%280%29%20%26%26%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%28owner%20%3D%3D%20spender%20%7C%7C%20isApprovedForAll%28owner%2C%20spender%29%20%7C%7C%20_getApproved%28tokenId%29%20%3D%3D%20spender%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Checks%20if%20%60spender%60%20can%20operate%20on%20%60tokenId%60%2C%20assuming%20the%20provided%20%60owner%60%20is%20the%20actual%20owner.%5Cn%20%20%20%20%20%2A%20Reverts%20if%3A%5Cn%20%20%20%20%20%2A%20-%20%60spender%60%20does%20not%20have%20approval%20from%20%60owner%60%20for%20%60tokenId%60.%5Cn%20%20%20%20%20%2A%20-%20%60spender%60%20does%20not%20have%20approval%20to%20manage%20all%20of%20%60owner%60%27s%20assets.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20This%20function%20assumes%20that%20%60owner%60%20is%20the%20actual%20owner%20of%20%60tokenId%60%20and%20does%20not%20verify%20this%5Cn%20%20%20%20%20%2A%20assumption.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_checkAuthorized%28address%20owner%2C%20address%20spender%2C%20uint256%20tokenId%29%20internal%20view%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28%21_isAuthorized%28owner%2C%20spender%2C%20tokenId%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28owner%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC721NonexistentToken%28tokenId%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC721InsufficientApproval%28spender%2C%20tokenId%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Unsafe%20write%20access%20to%20the%20balances%2C%20used%20by%20extensions%20that%20%5C%22mint%5C%22%20tokens%20using%20an%20%7BownerOf%7D%20override.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20the%20value%20is%20limited%20to%20type%28uint128%29.max.%20This%20protect%20against%20_balance%20overflow.%20It%20is%20unrealistic%20that%5Cn%20%20%20%20%20%2A%20a%20uint256%20would%20ever%20overflow%20from%20increments%20when%20these%20increments%20are%20bounded%20to%20uint128%20values.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20Increasing%20an%20account%27s%20balance%20using%20this%20function%20tends%20to%20be%20paired%20with%20an%20override%20of%20the%5Cn%20%20%20%20%20%2A%20%7B_ownerOf%7D%20function%20to%20resolve%20the%20ownership%20of%20the%20corresponding%20tokens%20so%20that%20balances%20and%20ownership%5Cn%20%20%20%20%20%2A%20remain%20consistent%20with%20one%20another.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_increaseBalance%28address%20account%2C%20uint128%20value%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_balances%5Baccount%5D%20%2B%3D%20value%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Transfers%20%60tokenId%60%20from%20its%20current%20owner%20to%20%60to%60%2C%20or%20alternatively%20mints%20%28or%20burns%29%20if%20the%20current%20owner%5Cn%20%20%20%20%20%2A%20%28or%20%60to%60%29%20is%20the%20zero%20address.%20Returns%20the%20owner%20of%20the%20%60tokenId%60%20before%20the%20update.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20The%20%60auth%60%20argument%20is%20optional.%20If%20the%20value%20passed%20is%20non%200%2C%20then%20this%20function%20will%20check%20that%5Cn%20%20%20%20%20%2A%20%60auth%60%20is%20either%20the%20owner%20of%20the%20token%2C%20or%20approved%20to%20operate%20on%20the%20token%20%28by%20the%20owner%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransfer%7D%20event.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20If%20overriding%20this%20function%20in%20a%20way%20that%20tracks%20balances%2C%20see%20also%20%7B_increaseBalance%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_update%28address%20to%2C%20uint256%20tokenId%2C%20address%20auth%29%20internal%20virtual%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20address%20from%20%3D%20_ownerOf%28tokenId%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Perform%20%28optional%29%20operator%20check%5Cn%20%20%20%20%20%20%20%20if%20%28auth%20%21%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_checkAuthorized%28from%2C%20auth%2C%20tokenId%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Execute%20the%20update%5Cn%20%20%20%20%20%20%20%20if%20%28from%20%21%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Clear%20approval.%20No%20need%20to%20re-authorize%20or%20emit%20the%20Approval%20event%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_approve%28address%280%29%2C%20tokenId%2C%20address%280%29%2C%20false%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_balances%5Bfrom%5D%20-%3D%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28to%20%21%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_balances%5Bto%5D%20%2B%3D%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20_owners%5BtokenId%5D%20%3D%20to%3B%5Cn%5Cn%20%20%20%20%20%20%20%20emit%20Transfer%28from%2C%20to%2C%20tokenId%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20return%20from%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Mints%20%60tokenId%60%20and%20transfers%20it%20to%20%60to%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20Usage%20of%20this%20method%20is%20discouraged%2C%20use%20%7B_safeMint%7D%20whenever%20possible%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60tokenId%60%20must%20not%20exist.%5Cn%20%20%20%20%20%2A%20-%20%60to%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransfer%7D%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_mint%28address%20to%2C%20uint256%20tokenId%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28to%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC721InvalidReceiver%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20address%20previousOwner%20%3D%20_update%28to%2C%20tokenId%2C%20address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28previousOwner%20%21%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC721InvalidSender%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Mints%20%60tokenId%60%2C%20transfers%20it%20to%20%60to%60%20and%20checks%20for%20%60to%60%20acceptance.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60tokenId%60%20must%20not%20exist.%5Cn%20%20%20%20%20%2A%20-%20If%20%60to%60%20refers%20to%20a%20smart%20contract%2C%20it%20must%20implement%20%7BIERC721Receiver-onERC721Received%7D%2C%20which%20is%20called%20upon%20a%20safe%20transfer.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransfer%7D%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_safeMint%28address%20to%2C%20uint256%20tokenId%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20_safeMint%28to%2C%20tokenId%2C%20%5C%22%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Same%20as%20%7Bxref-ERC721-_safeMint-address-uint256-%7D%5B%60_safeMint%60%5D%2C%20with%20an%20additional%20%60data%60%20parameter%20which%20is%5Cn%20%20%20%20%20%2A%20forwarded%20in%20%7BIERC721Receiver-onERC721Received%7D%20to%20contract%20recipients.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_safeMint%28address%20to%2C%20uint256%20tokenId%2C%20bytes%20memory%20data%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20_mint%28to%2C%20tokenId%29%3B%5Cn%20%20%20%20%20%20%20%20ERC721Utils.checkOnERC721Received%28_msgSender%28%29%2C%20address%280%29%2C%20to%2C%20tokenId%2C%20data%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Destroys%20%60tokenId%60.%5Cn%20%20%20%20%20%2A%20The%20approval%20is%20cleared%20when%20the%20token%20is%20burned.%5Cn%20%20%20%20%20%2A%20This%20is%20an%20internal%20function%20that%20does%20not%20check%20if%20the%20sender%20is%20authorized%20to%20operate%20on%20the%20token.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60tokenId%60%20must%20exist.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransfer%7D%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_burn%28uint256%20tokenId%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20address%20previousOwner%20%3D%20_update%28address%280%29%2C%20tokenId%2C%20address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28previousOwner%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC721NonexistentToken%28tokenId%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Transfers%20%60tokenId%60%20from%20%60from%60%20to%20%60to%60.%5Cn%20%20%20%20%20%2A%20%20As%20opposed%20to%20%7BtransferFrom%7D%2C%20this%20imposes%20no%20restrictions%20on%20msg.sender.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60to%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20-%20%60tokenId%60%20token%20must%20be%20owned%20by%20%60from%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransfer%7D%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_transfer%28address%20from%2C%20address%20to%2C%20uint256%20tokenId%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28to%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC721InvalidReceiver%28address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20address%20previousOwner%20%3D%20_update%28to%2C%20tokenId%2C%20address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28previousOwner%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC721NonexistentToken%28tokenId%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20if%20%28previousOwner%20%21%3D%20from%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC721IncorrectOwner%28from%2C%20tokenId%2C%20previousOwner%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Safely%20transfers%20%60tokenId%60%20token%20from%20%60from%60%20to%20%60to%60%2C%20checking%20that%20contract%20recipients%5Cn%20%20%20%20%20%2A%20are%20aware%20of%20the%20ERC-721%20standard%20to%20prevent%20tokens%20from%20being%20forever%20locked.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20%60data%60%20is%20additional%20data%2C%20it%20has%20no%20specified%20format%20and%20it%20is%20sent%20in%20call%20to%20%60to%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20internal%20function%20is%20like%20%7BsafeTransferFrom%7D%20in%20the%20sense%20that%20it%20invokes%5Cn%20%20%20%20%20%2A%20%7BIERC721Receiver-onERC721Received%7D%20on%20the%20receiver%2C%20and%20can%20be%20used%20to%20e.g.%5Cn%20%20%20%20%20%2A%20implement%20alternative%20mechanisms%20to%20perform%20token%20transfer%2C%20such%20as%20signature-based.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60tokenId%60%20token%20must%20exist%20and%20be%20owned%20by%20%60from%60.%5Cn%20%20%20%20%20%2A%20-%20%60to%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20-%20%60from%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20-%20If%20%60to%60%20refers%20to%20a%20smart%20contract%2C%20it%20must%20implement%20%7BIERC721Receiver-onERC721Received%7D%2C%20which%20is%20called%20upon%20a%20safe%20transfer.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransfer%7D%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_safeTransfer%28address%20from%2C%20address%20to%2C%20uint256%20tokenId%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20_safeTransfer%28from%2C%20to%2C%20tokenId%2C%20%5C%22%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Same%20as%20%7Bxref-ERC721-_safeTransfer-address-address-uint256-%7D%5B%60_safeTransfer%60%5D%2C%20with%20an%20additional%20%60data%60%20parameter%20which%20is%5Cn%20%20%20%20%20%2A%20forwarded%20in%20%7BIERC721Receiver-onERC721Received%7D%20to%20contract%20recipients.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_safeTransfer%28address%20from%2C%20address%20to%2C%20uint256%20tokenId%2C%20bytes%20memory%20data%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20_transfer%28from%2C%20to%2C%20tokenId%29%3B%5Cn%20%20%20%20%20%20%20%20ERC721Utils.checkOnERC721Received%28_msgSender%28%29%2C%20from%2C%20to%2C%20tokenId%2C%20data%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Approve%20%60to%60%20to%20operate%20on%20%60tokenId%60%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20The%20%60auth%60%20argument%20is%20optional.%20If%20the%20value%20passed%20is%20non%200%2C%20then%20this%20function%20will%20check%20that%20%60auth%60%20is%5Cn%20%20%20%20%20%2A%20either%20the%20owner%20of%20the%20token%2C%20or%20approved%20to%20operate%20on%20all%20tokens%20held%20by%20this%20owner.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20an%20%7BApproval%7D%20event.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Overrides%20to%20this%20logic%20should%20be%20done%20to%20the%20variant%20with%20an%20additional%20%60bool%20emitEvent%60%20argument.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_approve%28address%20to%2C%20uint256%20tokenId%2C%20address%20auth%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20_approve%28to%2C%20tokenId%2C%20auth%2C%20true%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Variant%20of%20%60_approve%60%20with%20an%20optional%20flag%20to%20enable%20or%20disable%20the%20%7BApproval%7D%20event.%20The%20event%20is%20not%5Cn%20%20%20%20%20%2A%20emitted%20in%20the%20context%20of%20transfers.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_approve%28address%20to%2C%20uint256%20tokenId%2C%20address%20auth%2C%20bool%20emitEvent%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Avoid%20reading%20the%20owner%20unless%20necessary%5Cn%20%20%20%20%20%20%20%20if%20%28emitEvent%20%7C%7C%20auth%20%21%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20address%20owner%20%3D%20_requireOwned%28tokenId%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20We%20do%20not%20use%20_isAuthorized%20because%20single-token%20approvals%20should%20not%20be%20able%20to%20call%20approve%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28auth%20%21%3D%20address%280%29%20%26%26%20owner%20%21%3D%20auth%20%26%26%20%21isApprovedForAll%28owner%2C%20auth%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC721InvalidApprover%28auth%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28emitEvent%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20emit%20Approval%28owner%2C%20to%2C%20tokenId%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20_tokenApprovals%5BtokenId%5D%20%3D%20to%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Approve%20%60operator%60%20to%20operate%20on%20all%20of%20%60owner%60%20tokens%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%20-%20operator%20can%27t%20be%20the%20address%20zero.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20an%20%7BApprovalForAll%7D%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_setApprovalForAll%28address%20owner%2C%20address%20operator%2C%20bool%20approved%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28operator%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC721InvalidOperator%28operator%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_operatorApprovals%5Bowner%5D%5Boperator%5D%20%3D%20approved%3B%5Cn%20%20%20%20%20%20%20%20emit%20ApprovalForAll%28owner%2C%20operator%2C%20approved%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Reverts%20if%20the%20%60tokenId%60%20doesn%27t%20have%20a%20current%20owner%20%28it%20hasn%27t%20been%20minted%2C%20or%20it%20has%20been%20burned%29.%5Cn%20%20%20%20%20%2A%20Returns%20the%20owner.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Overrides%20to%20ownership%20logic%20should%20be%20done%20to%20%7B_ownerOf%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_requireOwned%28uint256%20tokenId%29%20internal%20view%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20address%20owner%20%3D%20_ownerOf%28tokenId%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28owner%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC721NonexistentToken%28tokenId%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20owner%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC721%2Fextensions%2FERC721Burnable.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28token%2FERC721%2Fextensions%2FERC721Burnable.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BERC721%7D%20from%20%5C%22..%2FERC721.sol%5C%22%3B%5Cnimport%20%7BContext%7D%20from%20%5C%22..%2F..%2F..%2Futils%2FContext.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40title%20ERC-721%20Burnable%20Token%5Cn%20%2A%20%40dev%20ERC-721%20Token%20that%20can%20be%20burned%20%28destroyed%29.%5Cn%20%2A%2F%5Cnabstract%20contract%20ERC721Burnable%20is%20Context%2C%20ERC721%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Burns%20%60tokenId%60.%20See%20%7BERC721-_burn%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20caller%20must%20own%20%60tokenId%60%20or%20be%20an%20approved%20operator.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20burn%28uint256%20tokenId%29%20public%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Setting%20an%20%5C%22auth%5C%22%20arguments%20enables%20the%20%60_isAuthorized%60%20check%20which%20verifies%20that%20the%20token%20exists%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%28from%20%21%3D%200%29.%20Therefore%2C%20it%20is%20not%20needed%20to%20verify%20that%20the%20return%20value%20is%20not%200%20here.%5Cn%20%20%20%20%20%20%20%20_update%28address%280%29%2C%20tokenId%2C%20_msgSender%28%29%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC721%2Fextensions%2FIERC721Metadata.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.0.0%29%20%28token%2FERC721%2Fextensions%2FIERC721Metadata.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BIERC721%7D%20from%20%5C%22..%2FIERC721.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40title%20ERC-721%20Non-Fungible%20Token%20Standard%2C%20optional%20metadata%20extension%5Cn%20%2A%20%40dev%20See%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-721%5Cn%20%2A%2F%5Cninterface%20IERC721Metadata%20is%20IERC721%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20token%20collection%20name.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20name%28%29%20external%20view%20returns%20%28string%20memory%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20token%20collection%20symbol.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20symbol%28%29%20external%20view%20returns%20%28string%20memory%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20Uniform%20Resource%20Identifier%20%28URI%29%20for%20%60tokenId%60%20token.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20tokenURI%28uint256%20tokenId%29%20external%20view%20returns%20%28string%20memory%29%3B%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC721%2FIERC721.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28token%2FERC721%2FIERC721.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BIERC165%7D%20from%20%5C%22..%2F..%2Futils%2Fintrospection%2FIERC165.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Required%20interface%20of%20an%20ERC-721%20compliant%20contract.%5Cn%20%2A%2F%5Cninterface%20IERC721%20is%20IERC165%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Emitted%20when%20%60tokenId%60%20token%20is%20transferred%20from%20%60from%60%20to%20%60to%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20event%20Transfer%28address%20indexed%20from%2C%20address%20indexed%20to%2C%20uint256%20indexed%20tokenId%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Emitted%20when%20%60owner%60%20enables%20%60approved%60%20to%20manage%20the%20%60tokenId%60%20token.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20event%20Approval%28address%20indexed%20owner%2C%20address%20indexed%20approved%2C%20uint256%20indexed%20tokenId%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Emitted%20when%20%60owner%60%20enables%20or%20disables%20%28%60approved%60%29%20%60operator%60%20to%20manage%20all%20of%20its%20assets.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20event%20ApprovalForAll%28address%20indexed%20owner%2C%20address%20indexed%20operator%2C%20bool%20approved%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20number%20of%20tokens%20in%20%60%60owner%60%60%27s%20account.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20balanceOf%28address%20owner%29%20external%20view%20returns%20%28uint256%20balance%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20owner%20of%20the%20%60tokenId%60%20token.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60tokenId%60%20must%20exist.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20ownerOf%28uint256%20tokenId%29%20external%20view%20returns%20%28address%20owner%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Safely%20transfers%20%60tokenId%60%20token%20from%20%60from%60%20to%20%60to%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60from%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20-%20%60to%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20-%20%60tokenId%60%20token%20must%20exist%20and%20be%20owned%20by%20%60from%60.%5Cn%20%20%20%20%20%2A%20-%20If%20the%20caller%20is%20not%20%60from%60%2C%20it%20must%20be%20approved%20to%20move%20this%20token%20by%20either%20%7Bapprove%7D%20or%20%7BsetApprovalForAll%7D.%5Cn%20%20%20%20%20%2A%20-%20If%20%60to%60%20refers%20to%20a%20smart%20contract%2C%20it%20must%20implement%20%7BIERC721Receiver-onERC721Received%7D%2C%20which%20is%20called%20upon%5Cn%20%20%20%20%20%2A%20%20%20a%20safe%20transfer.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransfer%7D%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20safeTransferFrom%28address%20from%2C%20address%20to%2C%20uint256%20tokenId%2C%20bytes%20calldata%20data%29%20external%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Safely%20transfers%20%60tokenId%60%20token%20from%20%60from%60%20to%20%60to%60%2C%20checking%20first%20that%20contract%20recipients%5Cn%20%20%20%20%20%2A%20are%20aware%20of%20the%20ERC-721%20protocol%20to%20prevent%20tokens%20from%20being%20forever%20locked.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60from%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20-%20%60to%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20-%20%60tokenId%60%20token%20must%20exist%20and%20be%20owned%20by%20%60from%60.%5Cn%20%20%20%20%20%2A%20-%20If%20the%20caller%20is%20not%20%60from%60%2C%20it%20must%20have%20been%20allowed%20to%20move%20this%20token%20by%20either%20%7Bapprove%7D%20or%5Cn%20%20%20%20%20%2A%20%20%20%7BsetApprovalForAll%7D.%5Cn%20%20%20%20%20%2A%20-%20If%20%60to%60%20refers%20to%20a%20smart%20contract%2C%20it%20must%20implement%20%7BIERC721Receiver-onERC721Received%7D%2C%20which%20is%20called%20upon%5Cn%20%20%20%20%20%2A%20%20%20a%20safe%20transfer.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransfer%7D%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20safeTransferFrom%28address%20from%2C%20address%20to%2C%20uint256%20tokenId%29%20external%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Transfers%20%60tokenId%60%20token%20from%20%60from%60%20to%20%60to%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20Note%20that%20the%20caller%20is%20responsible%20to%20confirm%20that%20the%20recipient%20is%20capable%20of%20receiving%20ERC-721%5Cn%20%20%20%20%20%2A%20or%20else%20they%20may%20be%20permanently%20lost.%20Usage%20of%20%7BsafeTransferFrom%7D%20prevents%20loss%2C%20though%20the%20caller%20must%5Cn%20%20%20%20%20%2A%20understand%20this%20adds%20an%20external%20call%20which%20potentially%20creates%20a%20reentrancy%20vulnerability.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60from%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20-%20%60to%60%20cannot%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20-%20%60tokenId%60%20token%20must%20be%20owned%20by%20%60from%60.%5Cn%20%20%20%20%20%2A%20-%20If%20the%20caller%20is%20not%20%60from%60%2C%20it%20must%20be%20approved%20to%20move%20this%20token%20by%20either%20%7Bapprove%7D%20or%20%7BsetApprovalForAll%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20%7BTransfer%7D%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20transferFrom%28address%20from%2C%20address%20to%2C%20uint256%20tokenId%29%20external%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Gives%20permission%20to%20%60to%60%20to%20transfer%20%60tokenId%60%20token%20to%20another%20account.%5Cn%20%20%20%20%20%2A%20The%20approval%20is%20cleared%20when%20the%20token%20is%20transferred.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Only%20a%20single%20account%20can%20be%20approved%20at%20a%20time%2C%20so%20approving%20the%20zero%20address%20clears%20previous%20approvals.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20caller%20must%20own%20the%20token%20or%20be%20an%20approved%20operator.%5Cn%20%20%20%20%20%2A%20-%20%60tokenId%60%20must%20exist.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20an%20%7BApproval%7D%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20approve%28address%20to%2C%20uint256%20tokenId%29%20external%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Approve%20or%20remove%20%60operator%60%20as%20an%20operator%20for%20the%20caller.%5Cn%20%20%20%20%20%2A%20Operators%20can%20call%20%7BtransferFrom%7D%20or%20%7BsafeTransferFrom%7D%20for%20any%20token%20owned%20by%20the%20caller.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20%60operator%60%20cannot%20be%20the%20address%20zero.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20an%20%7BApprovalForAll%7D%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20setApprovalForAll%28address%20operator%2C%20bool%20approved%29%20external%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20account%20approved%20for%20%60tokenId%60%20token.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60tokenId%60%20must%20exist.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getApproved%28uint256%20tokenId%29%20external%20view%20returns%20%28address%20operator%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20if%20the%20%60operator%60%20is%20allowed%20to%20manage%20all%20of%20the%20assets%20of%20%60owner%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20See%20%7BsetApprovalForAll%7D%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isApprovedForAll%28address%20owner%2C%20address%20operator%29%20external%20view%20returns%20%28bool%29%3B%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC721%2FIERC721Receiver.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28token%2FERC721%2FIERC721Receiver.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40title%20ERC-721%20token%20receiver%20interface%5Cn%20%2A%20%40dev%20Interface%20for%20any%20contract%20that%20wants%20to%20support%20safeTransfers%5Cn%20%2A%20from%20ERC-721%20asset%20contracts.%5Cn%20%2A%2F%5Cninterface%20IERC721Receiver%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Whenever%20an%20%7BIERC721%7D%20%60tokenId%60%20token%20is%20transferred%20to%20this%20contract%20via%20%7BIERC721-safeTransferFrom%7D%5Cn%20%20%20%20%20%2A%20by%20%60operator%60%20from%20%60from%60%2C%20this%20function%20is%20called.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20It%20must%20return%20its%20Solidity%20selector%20to%20confirm%20the%20token%20transfer.%5Cn%20%20%20%20%20%2A%20If%20any%20other%20value%20is%20returned%20or%20the%20interface%20is%20not%20implemented%20by%20the%20recipient%2C%20the%20transfer%20will%20be%5Cn%20%20%20%20%20%2A%20reverted.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20The%20selector%20can%20be%20obtained%20in%20Solidity%20with%20%60IERC721Receiver.onERC721Received.selector%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20onERC721Received%28%5Cn%20%20%20%20%20%20%20%20address%20operator%2C%5Cn%20%20%20%20%20%20%20%20address%20from%2C%5Cn%20%20%20%20%20%20%20%20uint256%20tokenId%2C%5Cn%20%20%20%20%20%20%20%20bytes%20calldata%20data%5Cn%20%20%20%20%29%20external%20returns%20%28bytes4%29%3B%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC721%2Futils%2FERC721Utils.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28token%2FERC721%2Futils%2FERC721Utils.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BIERC721Receiver%7D%20from%20%5C%22..%2FIERC721Receiver.sol%5C%22%3B%5Cnimport%20%7BIERC721Errors%7D%20from%20%5C%22..%2F..%2F..%2Finterfaces%2Fdraft-IERC6093.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Library%20that%20provide%20common%20ERC-721%20utility%20functions.%5Cn%20%2A%5Cn%20%2A%20See%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-721%5BERC-721%5D.%5Cn%20%2A%5Cn%20%2A%20_Available%20since%20v5.1._%5Cn%20%2A%2F%5Cnlibrary%20ERC721Utils%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Performs%20an%20acceptance%20check%20for%20the%20provided%20%60operator%60%20by%20calling%20%7BIERC721-onERC721Received%7D%5Cn%20%20%20%20%20%2A%20on%20the%20%60to%60%20address.%20The%20%60operator%60%20is%20generally%20the%20address%20that%20initiated%20the%20token%20transfer%20%28i.e.%20%60msg.sender%60%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20The%20acceptance%20call%20is%20not%20executed%20and%20treated%20as%20a%20no-op%20if%20the%20target%20address%20doesn%27t%20contain%20code%20%28i.e.%20an%20EOA%29.%5Cn%20%20%20%20%20%2A%20Otherwise%2C%20the%20recipient%20must%20implement%20%7BIERC721Receiver-onERC721Received%7D%20and%20return%20the%20acceptance%20magic%20value%20to%20accept%5Cn%20%20%20%20%20%2A%20the%20transfer.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20checkOnERC721Received%28%5Cn%20%20%20%20%20%20%20%20address%20operator%2C%5Cn%20%20%20%20%20%20%20%20address%20from%2C%5Cn%20%20%20%20%20%20%20%20address%20to%2C%5Cn%20%20%20%20%20%20%20%20uint256%20tokenId%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20data%5Cn%20%20%20%20%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28to.code.length%20%3E%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20try%20IERC721Receiver%28to%29.onERC721Received%28operator%2C%20from%2C%20tokenId%2C%20data%29%20returns%20%28bytes4%20retval%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28retval%20%21%3D%20IERC721Receiver.onERC721Received.selector%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Token%20rejected%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20IERC721Errors.ERC721InvalidReceiver%28to%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%28bytes%20memory%20reason%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28reason.length%20%3D%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20non-IERC721Receiver%20implementer%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20IERC721Errors.ERC721InvalidReceiver%28to%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%28add%2832%2C%20reason%29%2C%20mload%28reason%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2FAddress.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.2.0%29%20%28utils%2FAddress.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BErrors%7D%20from%20%5C%22.%2FErrors.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Collection%20of%20functions%20related%20to%20the%20address%20type%5Cn%20%2A%2F%5Cnlibrary%20Address%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20There%27s%20no%20code%20at%20%60target%60%20%28it%20is%20not%20a%20contract%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20AddressEmptyCode%28address%20target%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Replacement%20for%20Solidity%27s%20%60transfer%60%3A%20sends%20%60amount%60%20wei%20to%5Cn%20%20%20%20%20%2A%20%60recipient%60%2C%20forwarding%20all%20available%20gas%20and%20reverting%20on%20errors.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-1884%5BEIP1884%5D%20increases%20the%20gas%20cost%5Cn%20%20%20%20%20%2A%20of%20certain%20opcodes%2C%20possibly%20making%20contracts%20go%20over%20the%202300%20gas%20limit%5Cn%20%20%20%20%20%2A%20imposed%20by%20%60transfer%60%2C%20making%20them%20unable%20to%20receive%20funds%20via%5Cn%20%20%20%20%20%2A%20%60transfer%60.%20%7BsendValue%7D%20removes%20this%20limitation.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20https%3A%2F%2Fconsensys.net%2Fdiligence%2Fblog%2F2019%2F09%2Fstop-using-soliditys-transfer-now%2F%5BLearn%20more%5D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20IMPORTANT%3A%20because%20control%20is%20transferred%20to%20%60recipient%60%2C%20care%20must%20be%5Cn%20%20%20%20%20%2A%20taken%20to%20not%20create%20reentrancy%20vulnerabilities.%20Consider%20using%5Cn%20%20%20%20%20%2A%20%7BReentrancyGuard%7D%20or%20the%5Cn%20%20%20%20%20%2A%20https%3A%2F%2Fsolidity.readthedocs.io%2Fen%2Fv0.8.20%2Fsecurity-considerations.html%23use-the-checks-effects-interactions-pattern%5Bchecks-effects-interactions%20pattern%5D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20sendValue%28address%20payable%20recipient%2C%20uint256%20amount%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28address%28this%29.balance%20%3C%20amount%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20Errors.InsufficientBalance%28address%28this%29.balance%2C%20amount%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%28bool%20success%2C%20bytes%20memory%20returndata%29%20%3D%20recipient.call%7Bvalue%3A%20amount%7D%28%5C%22%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28%21success%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_revert%28returndata%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Performs%20a%20Solidity%20function%20call%20using%20a%20low%20level%20%60call%60.%20A%5Cn%20%20%20%20%20%2A%20plain%20%60call%60%20is%20an%20unsafe%20replacement%20for%20a%20function%20call%3A%20use%20this%5Cn%20%20%20%20%20%2A%20function%20instead.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20If%20%60target%60%20reverts%20with%20a%20revert%20reason%20or%20custom%20error%2C%20it%20is%20bubbled%5Cn%20%20%20%20%20%2A%20up%20by%20this%20function%20%28like%20regular%20Solidity%20function%20calls%29.%20However%2C%20if%5Cn%20%20%20%20%20%2A%20the%20call%20reverted%20with%20no%20returned%20reason%2C%20this%20function%20reverts%20with%20a%5Cn%20%20%20%20%20%2A%20%7BErrors.FailedCall%7D%20error.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%20the%20raw%20returned%20data.%20To%20convert%20to%20the%20expected%20return%20value%2C%5Cn%20%20%20%20%20%2A%20use%20https%3A%2F%2Fsolidity.readthedocs.io%2Fen%2Flatest%2Funits-and-global-variables.html%3Fhighlight%3Dabi.decode%23abi-encoding-and-decoding-functions%5B%60abi.decode%60%5D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60target%60%20must%20be%20a%20contract.%5Cn%20%20%20%20%20%2A%20-%20calling%20%60target%60%20with%20%60data%60%20must%20not%20revert.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20functionCall%28address%20target%2C%20bytes%20memory%20data%29%20internal%20returns%20%28bytes%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20functionCallWithValue%28target%2C%20data%2C%200%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Same%20as%20%7Bxref-Address-functionCall-address-bytes-%7D%5B%60functionCall%60%5D%2C%5Cn%20%20%20%20%20%2A%20but%20also%20transferring%20%60value%60%20wei%20to%20%60target%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20the%20calling%20contract%20must%20have%20an%20ETH%20balance%20of%20at%20least%20%60value%60.%5Cn%20%20%20%20%20%2A%20-%20the%20called%20Solidity%20function%20must%20be%20%60payable%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20functionCallWithValue%28address%20target%2C%20bytes%20memory%20data%2C%20uint256%20value%29%20internal%20returns%20%28bytes%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28address%28this%29.balance%20%3C%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20Errors.InsufficientBalance%28address%28this%29.balance%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%28bool%20success%2C%20bytes%20memory%20returndata%29%20%3D%20target.call%7Bvalue%3A%20value%7D%28data%29%3B%5Cn%20%20%20%20%20%20%20%20return%20verifyCallResultFromTarget%28target%2C%20success%2C%20returndata%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Same%20as%20%7Bxref-Address-functionCall-address-bytes-%7D%5B%60functionCall%60%5D%2C%5Cn%20%20%20%20%20%2A%20but%20performing%20a%20static%20call.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20functionStaticCall%28address%20target%2C%20bytes%20memory%20data%29%20internal%20view%20returns%20%28bytes%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20%28bool%20success%2C%20bytes%20memory%20returndata%29%20%3D%20target.staticcall%28data%29%3B%5Cn%20%20%20%20%20%20%20%20return%20verifyCallResultFromTarget%28target%2C%20success%2C%20returndata%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Same%20as%20%7Bxref-Address-functionCall-address-bytes-%7D%5B%60functionCall%60%5D%2C%5Cn%20%20%20%20%20%2A%20but%20performing%20a%20delegate%20call.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20functionDelegateCall%28address%20target%2C%20bytes%20memory%20data%29%20internal%20returns%20%28bytes%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20%28bool%20success%2C%20bytes%20memory%20returndata%29%20%3D%20target.delegatecall%28data%29%3B%5Cn%20%20%20%20%20%20%20%20return%20verifyCallResultFromTarget%28target%2C%20success%2C%20returndata%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Tool%20to%20verify%20that%20a%20low%20level%20call%20to%20smart-contract%20was%20successful%2C%20and%20reverts%20if%20the%20target%5Cn%20%20%20%20%20%2A%20was%20not%20a%20contract%20or%20bubbling%20up%20the%20revert%20reason%20%28falling%20back%20to%20%7BErrors.FailedCall%7D%29%20in%20case%5Cn%20%20%20%20%20%2A%20of%20an%20unsuccessful%20call.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20verifyCallResultFromTarget%28%5Cn%20%20%20%20%20%20%20%20address%20target%2C%5Cn%20%20%20%20%20%20%20%20bool%20success%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20returndata%5Cn%20%20%20%20%29%20internal%20view%20returns%20%28bytes%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28%21success%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_revert%28returndata%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20only%20check%20if%20target%20is%20a%20contract%20if%20the%20call%20was%20successful%20and%20the%20return%20data%20is%20empty%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20otherwise%20we%20already%20know%20that%20it%20was%20a%20contract%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28returndata.length%20%3D%3D%200%20%26%26%20target.code.length%20%3D%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20AddressEmptyCode%28target%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20returndata%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Tool%20to%20verify%20that%20a%20low%20level%20call%20was%20successful%2C%20and%20reverts%20if%20it%20wasn%27t%2C%20either%20by%20bubbling%20the%5Cn%20%20%20%20%20%2A%20revert%20reason%20or%20with%20a%20default%20%7BErrors.FailedCall%7D%20error.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20verifyCallResult%28bool%20success%2C%20bytes%20memory%20returndata%29%20internal%20pure%20returns%20%28bytes%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28%21success%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_revert%28returndata%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20returndata%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Reverts%20with%20returndata%20if%20present.%20Otherwise%20reverts%20with%20%7BErrors.FailedCall%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_revert%28bytes%20memory%20returndata%29%20private%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Look%20for%20revert%20reason%20and%20bubble%20it%20up%20if%20present%5Cn%20%20%20%20%20%20%20%20if%20%28returndata.length%20%3E%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20The%20easiest%20way%20to%20bubble%20the%20revert%20reason%20is%20using%20memory%20via%20assembly%5Cn%20%20%20%20%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20returndata_size%20%3A%3D%20mload%28returndata%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%28add%2832%2C%20returndata%29%2C%20returndata_size%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20Errors.FailedCall%28%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2FArrays.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2FArrays.sol%29%5Cn%2F%2F%20This%20file%20was%20procedurally%20generated%20from%20scripts%2Fgenerate%2Ftemplates%2FArrays.js.%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BComparators%7D%20from%20%5C%22.%2FComparators.sol%5C%22%3B%5Cnimport%20%7BSlotDerivation%7D%20from%20%5C%22.%2FSlotDerivation.sol%5C%22%3B%5Cnimport%20%7BStorageSlot%7D%20from%20%5C%22.%2FStorageSlot.sol%5C%22%3B%5Cnimport%20%7BMath%7D%20from%20%5C%22.%2Fmath%2FMath.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Collection%20of%20functions%20related%20to%20array%20types.%5Cn%20%2A%2F%5Cnlibrary%20Arrays%20%7B%5Cn%20%20%20%20using%20SlotDerivation%20for%20bytes32%3B%5Cn%20%20%20%20using%20StorageSlot%20for%20bytes32%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Sort%20an%20array%20of%20uint256%20%28in%20memory%29%20following%20the%20provided%20comparator%20function.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20function%20does%20the%20sorting%20%5C%22in%20place%5C%22%2C%20meaning%20that%20it%20overrides%20the%20input.%20The%20object%20is%20returned%20for%5Cn%20%20%20%20%20%2A%20convenience%2C%20but%20that%20returned%20value%20can%20be%20discarded%20safely%20if%20the%20caller%20has%20a%20memory%20pointer%20to%20the%20array.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20this%20function%27s%20cost%20is%20%60O%28n%20%C2%B7%20log%28n%29%29%60%20in%20average%20and%20%60O%28n%C2%B2%29%60%20in%20the%20worst%20case%2C%20with%20n%20the%20length%20of%20the%5Cn%20%20%20%20%20%2A%20array.%20Using%20it%20in%20view%20functions%20that%20are%20executed%20through%20%60eth_call%60%20is%20safe%2C%20but%20one%20should%20be%20very%20careful%5Cn%20%20%20%20%20%2A%20when%20executing%20this%20as%20part%20of%20a%20transaction.%20If%20the%20array%20being%20sorted%20is%20too%20large%2C%20the%20sort%20operation%20may%5Cn%20%20%20%20%20%2A%20consume%20more%20gas%20than%20is%20available%20in%20a%20block%2C%20leading%20to%20potential%20DoS.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20IMPORTANT%3A%20Consider%20memory%20side-effects%20when%20using%20custom%20comparator%20functions%20that%20access%20memory%20in%20an%20unsafe%20way.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20sort%28%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20array%2C%5Cn%20%20%20%20%20%20%20%20function%28uint256%2C%20uint256%29%20pure%20returns%20%28bool%29%20comp%5Cn%20%20%20%20%29%20internal%20pure%20returns%20%28uint256%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20_quickSort%28_begin%28array%29%2C%20_end%28array%29%2C%20comp%29%3B%5Cn%20%20%20%20%20%20%20%20return%20array%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Variant%20of%20%7Bsort%7D%20that%20sorts%20an%20array%20of%20uint256%20in%20increasing%20order.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20sort%28uint256%5B%5D%20memory%20array%29%20internal%20pure%20returns%20%28uint256%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20sort%28array%2C%20Comparators.lt%29%3B%5Cn%20%20%20%20%20%20%20%20return%20array%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Sort%20an%20array%20of%20address%20%28in%20memory%29%20following%20the%20provided%20comparator%20function.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20function%20does%20the%20sorting%20%5C%22in%20place%5C%22%2C%20meaning%20that%20it%20overrides%20the%20input.%20The%20object%20is%20returned%20for%5Cn%20%20%20%20%20%2A%20convenience%2C%20but%20that%20returned%20value%20can%20be%20discarded%20safely%20if%20the%20caller%20has%20a%20memory%20pointer%20to%20the%20array.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20this%20function%27s%20cost%20is%20%60O%28n%20%C2%B7%20log%28n%29%29%60%20in%20average%20and%20%60O%28n%C2%B2%29%60%20in%20the%20worst%20case%2C%20with%20n%20the%20length%20of%20the%5Cn%20%20%20%20%20%2A%20array.%20Using%20it%20in%20view%20functions%20that%20are%20executed%20through%20%60eth_call%60%20is%20safe%2C%20but%20one%20should%20be%20very%20careful%5Cn%20%20%20%20%20%2A%20when%20executing%20this%20as%20part%20of%20a%20transaction.%20If%20the%20array%20being%20sorted%20is%20too%20large%2C%20the%20sort%20operation%20may%5Cn%20%20%20%20%20%2A%20consume%20more%20gas%20than%20is%20available%20in%20a%20block%2C%20leading%20to%20potential%20DoS.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20IMPORTANT%3A%20Consider%20memory%20side-effects%20when%20using%20custom%20comparator%20functions%20that%20access%20memory%20in%20an%20unsafe%20way.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20sort%28%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20memory%20array%2C%5Cn%20%20%20%20%20%20%20%20function%28address%2C%20address%29%20pure%20returns%20%28bool%29%20comp%5Cn%20%20%20%20%29%20internal%20pure%20returns%20%28address%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20sort%28_castToUint256Array%28array%29%2C%20_castToUint256Comp%28comp%29%29%3B%5Cn%20%20%20%20%20%20%20%20return%20array%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Variant%20of%20%7Bsort%7D%20that%20sorts%20an%20array%20of%20address%20in%20increasing%20order.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20sort%28address%5B%5D%20memory%20array%29%20internal%20pure%20returns%20%28address%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20sort%28_castToUint256Array%28array%29%2C%20Comparators.lt%29%3B%5Cn%20%20%20%20%20%20%20%20return%20array%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Sort%20an%20array%20of%20bytes32%20%28in%20memory%29%20following%20the%20provided%20comparator%20function.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20function%20does%20the%20sorting%20%5C%22in%20place%5C%22%2C%20meaning%20that%20it%20overrides%20the%20input.%20The%20object%20is%20returned%20for%5Cn%20%20%20%20%20%2A%20convenience%2C%20but%20that%20returned%20value%20can%20be%20discarded%20safely%20if%20the%20caller%20has%20a%20memory%20pointer%20to%20the%20array.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20this%20function%27s%20cost%20is%20%60O%28n%20%C2%B7%20log%28n%29%29%60%20in%20average%20and%20%60O%28n%C2%B2%29%60%20in%20the%20worst%20case%2C%20with%20n%20the%20length%20of%20the%5Cn%20%20%20%20%20%2A%20array.%20Using%20it%20in%20view%20functions%20that%20are%20executed%20through%20%60eth_call%60%20is%20safe%2C%20but%20one%20should%20be%20very%20careful%5Cn%20%20%20%20%20%2A%20when%20executing%20this%20as%20part%20of%20a%20transaction.%20If%20the%20array%20being%20sorted%20is%20too%20large%2C%20the%20sort%20operation%20may%5Cn%20%20%20%20%20%2A%20consume%20more%20gas%20than%20is%20available%20in%20a%20block%2C%20leading%20to%20potential%20DoS.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20IMPORTANT%3A%20Consider%20memory%20side-effects%20when%20using%20custom%20comparator%20functions%20that%20access%20memory%20in%20an%20unsafe%20way.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20sort%28%5Cn%20%20%20%20%20%20%20%20bytes32%5B%5D%20memory%20array%2C%5Cn%20%20%20%20%20%20%20%20function%28bytes32%2C%20bytes32%29%20pure%20returns%20%28bool%29%20comp%5Cn%20%20%20%20%29%20internal%20pure%20returns%20%28bytes32%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20sort%28_castToUint256Array%28array%29%2C%20_castToUint256Comp%28comp%29%29%3B%5Cn%20%20%20%20%20%20%20%20return%20array%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Variant%20of%20%7Bsort%7D%20that%20sorts%20an%20array%20of%20bytes32%20in%20increasing%20order.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20sort%28bytes32%5B%5D%20memory%20array%29%20internal%20pure%20returns%20%28bytes32%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20sort%28_castToUint256Array%28array%29%2C%20Comparators.lt%29%3B%5Cn%20%20%20%20%20%20%20%20return%20array%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Performs%20a%20quick%20sort%20of%20a%20segment%20of%20memory.%20The%20segment%20sorted%20starts%20at%20%60begin%60%20%28inclusive%29%2C%20and%20stops%5Cn%20%20%20%20%20%2A%20at%20end%20%28exclusive%29.%20Sorting%20follows%20the%20%60comp%60%20comparator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Invariant%3A%20%60begin%20%3C%3D%20end%60.%20This%20is%20the%20case%20when%20initially%20called%20by%20%7Bsort%7D%20and%20is%20preserved%20in%20subcalls.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20IMPORTANT%3A%20Memory%20locations%20between%20%60begin%60%20and%20%60end%60%20are%20not%20validated%2Fzeroed.%20This%20function%20should%5Cn%20%20%20%20%20%2A%20be%20used%20only%20if%20the%20limits%20are%20within%20a%20memory%20array.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_quickSort%28uint256%20begin%2C%20uint256%20end%2C%20function%28uint256%2C%20uint256%29%20pure%20returns%20%28bool%29%20comp%29%20private%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28end%20-%20begin%20%3C%200x40%29%20return%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Use%20first%20element%20as%20pivot%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20pivot%20%3D%20_mload%28begin%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Position%20where%20the%20pivot%20should%20be%20at%20the%20end%20of%20the%20loop%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20pos%20%3D%20begin%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20for%20%28uint256%20it%20%3D%20begin%20%2B%200x20%3B%20it%20%3C%20end%3B%20it%20%2B%3D%200x20%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28comp%28_mload%28it%29%2C%20pivot%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20the%20value%20stored%20at%20the%20iterator%27s%20position%20comes%20before%20the%20pivot%2C%20we%20increment%20the%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20position%20of%20the%20pivot%20and%20move%20the%20value%20there.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pos%20%2B%3D%200x20%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_swap%28pos%2C%20it%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_swap%28begin%2C%20pos%29%3B%20%2F%2F%20Swap%20pivot%20into%20place%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_quickSort%28begin%2C%20pos%2C%20comp%29%3B%20%2F%2F%20Sort%20the%20left%20side%20of%20the%20pivot%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_quickSort%28pos%20%2B%200x20%2C%20end%2C%20comp%29%3B%20%2F%2F%20Sort%20the%20right%20side%20of%20the%20pivot%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Pointer%20to%20the%20memory%20location%20of%20the%20first%20element%20of%20%60array%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_begin%28uint256%5B%5D%20memory%20array%29%20private%20pure%20returns%20%28uint256%20ptr%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20ptr%20%3A%3D%20add%28array%2C%200x20%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Pointer%20to%20the%20memory%20location%20of%20the%20first%20memory%20word%20%2832bytes%29%20after%20%60array%60.%20This%20is%20the%20memory%20word%5Cn%20%20%20%20%20%2A%20that%20comes%20just%20after%20the%20last%20element%20of%20the%20array.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_end%28uint256%5B%5D%20memory%20array%29%20private%20pure%20returns%20%28uint256%20ptr%29%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20_begin%28array%29%20%2B%20array.length%20%2A%200x20%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Load%20memory%20word%20%28as%20a%20uint256%29%20at%20location%20%60ptr%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_mload%28uint256%20ptr%29%20private%20pure%20returns%20%28uint256%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20value%20%3A%3D%20mload%28ptr%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Swaps%20the%20elements%20memory%20location%20%60ptr1%60%20and%20%60ptr2%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_swap%28uint256%20ptr1%2C%20uint256%20ptr2%29%20private%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20let%20value1%20%3A%3D%20mload%28ptr1%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20let%20value2%20%3A%3D%20mload%28ptr2%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28ptr1%2C%20value2%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28ptr2%2C%20value1%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20Helper%3A%20low%20level%20cast%20address%20memory%20array%20to%20uint256%20memory%20array%5Cn%20%20%20%20function%20_castToUint256Array%28address%5B%5D%20memory%20input%29%20private%20pure%20returns%20%28uint256%5B%5D%20memory%20output%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20output%20%3A%3D%20input%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20Helper%3A%20low%20level%20cast%20bytes32%20memory%20array%20to%20uint256%20memory%20array%5Cn%20%20%20%20function%20_castToUint256Array%28bytes32%5B%5D%20memory%20input%29%20private%20pure%20returns%20%28uint256%5B%5D%20memory%20output%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20output%20%3A%3D%20input%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20Helper%3A%20low%20level%20cast%20address%20comp%20function%20to%20uint256%20comp%20function%5Cn%20%20%20%20function%20_castToUint256Comp%28%5Cn%20%20%20%20%20%20%20%20function%28address%2C%20address%29%20pure%20returns%20%28bool%29%20input%5Cn%20%20%20%20%29%20private%20pure%20returns%20%28function%28uint256%2C%20uint256%29%20pure%20returns%20%28bool%29%20output%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20output%20%3A%3D%20input%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20Helper%3A%20low%20level%20cast%20bytes32%20comp%20function%20to%20uint256%20comp%20function%5Cn%20%20%20%20function%20_castToUint256Comp%28%5Cn%20%20%20%20%20%20%20%20function%28bytes32%2C%20bytes32%29%20pure%20returns%20%28bool%29%20input%5Cn%20%20%20%20%29%20private%20pure%20returns%20%28function%28uint256%2C%20uint256%29%20pure%20returns%20%28bool%29%20output%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20output%20%3A%3D%20input%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Searches%20a%20sorted%20%60array%60%20and%20returns%20the%20first%20index%20that%20contains%5Cn%20%20%20%20%20%2A%20a%20value%20greater%20or%20equal%20to%20%60element%60.%20If%20no%20such%20index%20exists%20%28i.e.%20all%5Cn%20%20%20%20%20%2A%20values%20in%20the%20array%20are%20strictly%20less%20than%20%60element%60%29%2C%20the%20array%20length%20is%5Cn%20%20%20%20%20%2A%20returned.%20Time%20complexity%20O%28log%20n%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20The%20%60array%60%20is%20expected%20to%20be%20sorted%20in%20ascending%20order%2C%20and%20to%5Cn%20%20%20%20%20%2A%20contain%20no%20repeated%20elements.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20IMPORTANT%3A%20Deprecated.%20This%20implementation%20behaves%20as%20%7BlowerBound%7D%20but%20lacks%5Cn%20%20%20%20%20%2A%20support%20for%20repeated%20elements%20in%20the%20array.%20The%20%7BlowerBound%7D%20function%20should%5Cn%20%20%20%20%20%2A%20be%20used%20instead.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20findUpperBound%28uint256%5B%5D%20storage%20array%2C%20uint256%20element%29%20internal%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20low%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20uint256%20high%20%3D%20array.length%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28high%20%3D%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20while%20%28low%20%3C%20high%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20mid%20%3D%20Math.average%28low%2C%20high%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Note%20that%20mid%20will%20always%20be%20strictly%20less%20than%20high%20%28i.e.%20it%20will%20be%20a%20valid%20array%20index%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20because%20Math.average%20rounds%20towards%20zero%20%28it%20does%20integer%20division%20with%20truncation%29.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28unsafeAccess%28array%2C%20mid%29.value%20%3E%20element%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20high%20%3D%20mid%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20low%20%3D%20mid%20%2B%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20At%20this%20point%20%60low%60%20is%20the%20exclusive%20upper%20bound.%20We%20will%20return%20the%20inclusive%20upper%20bound.%5Cn%20%20%20%20%20%20%20%20if%20%28low%20%3E%200%20%26%26%20unsafeAccess%28array%2C%20low%20-%201%29.value%20%3D%3D%20element%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20low%20-%201%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20low%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Searches%20an%20%60array%60%20sorted%20in%20ascending%20order%20and%20returns%20the%20first%5Cn%20%20%20%20%20%2A%20index%20that%20contains%20a%20value%20greater%20or%20equal%20than%20%60element%60.%20If%20no%20such%20index%5Cn%20%20%20%20%20%2A%20exists%20%28i.e.%20all%20values%20in%20the%20array%20are%20strictly%20less%20than%20%60element%60%29%2C%20the%20array%5Cn%20%20%20%20%20%2A%20length%20is%20returned.%20Time%20complexity%20O%28log%20n%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20See%20C%2B%2B%27s%20https%3A%2F%2Fen.cppreference.com%2Fw%2Fcpp%2Falgorithm%2Flower_bound%5Blower_bound%5D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20lowerBound%28uint256%5B%5D%20storage%20array%2C%20uint256%20element%29%20internal%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20low%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20uint256%20high%20%3D%20array.length%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28high%20%3D%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20while%20%28low%20%3C%20high%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20mid%20%3D%20Math.average%28low%2C%20high%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Note%20that%20mid%20will%20always%20be%20strictly%20less%20than%20high%20%28i.e.%20it%20will%20be%20a%20valid%20array%20index%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20because%20Math.average%20rounds%20towards%20zero%20%28it%20does%20integer%20division%20with%20truncation%29.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28unsafeAccess%28array%2C%20mid%29.value%20%3C%20element%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20this%20cannot%20overflow%20because%20mid%20%3C%20high%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20low%20%3D%20mid%20%2B%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20high%20%3D%20mid%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20return%20low%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Searches%20an%20%60array%60%20sorted%20in%20ascending%20order%20and%20returns%20the%20first%5Cn%20%20%20%20%20%2A%20index%20that%20contains%20a%20value%20strictly%20greater%20than%20%60element%60.%20If%20no%20such%20index%5Cn%20%20%20%20%20%2A%20exists%20%28i.e.%20all%20values%20in%20the%20array%20are%20strictly%20less%20than%20%60element%60%29%2C%20the%20array%5Cn%20%20%20%20%20%2A%20length%20is%20returned.%20Time%20complexity%20O%28log%20n%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20See%20C%2B%2B%27s%20https%3A%2F%2Fen.cppreference.com%2Fw%2Fcpp%2Falgorithm%2Fupper_bound%5Bupper_bound%5D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20upperBound%28uint256%5B%5D%20storage%20array%2C%20uint256%20element%29%20internal%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20low%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20uint256%20high%20%3D%20array.length%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28high%20%3D%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20while%20%28low%20%3C%20high%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20mid%20%3D%20Math.average%28low%2C%20high%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Note%20that%20mid%20will%20always%20be%20strictly%20less%20than%20high%20%28i.e.%20it%20will%20be%20a%20valid%20array%20index%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20because%20Math.average%20rounds%20towards%20zero%20%28it%20does%20integer%20division%20with%20truncation%29.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28unsafeAccess%28array%2C%20mid%29.value%20%3E%20element%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20high%20%3D%20mid%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20this%20cannot%20overflow%20because%20mid%20%3C%20high%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20low%20%3D%20mid%20%2B%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20return%20low%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Same%20as%20%7BlowerBound%7D%2C%20but%20with%20an%20array%20in%20memory.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20lowerBoundMemory%28uint256%5B%5D%20memory%20array%2C%20uint256%20element%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20low%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20uint256%20high%20%3D%20array.length%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28high%20%3D%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20while%20%28low%20%3C%20high%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20mid%20%3D%20Math.average%28low%2C%20high%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Note%20that%20mid%20will%20always%20be%20strictly%20less%20than%20high%20%28i.e.%20it%20will%20be%20a%20valid%20array%20index%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20because%20Math.average%20rounds%20towards%20zero%20%28it%20does%20integer%20division%20with%20truncation%29.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28unsafeMemoryAccess%28array%2C%20mid%29%20%3C%20element%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20this%20cannot%20overflow%20because%20mid%20%3C%20high%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20low%20%3D%20mid%20%2B%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20high%20%3D%20mid%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20return%20low%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Same%20as%20%7BupperBound%7D%2C%20but%20with%20an%20array%20in%20memory.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20upperBoundMemory%28uint256%5B%5D%20memory%20array%2C%20uint256%20element%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20low%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20uint256%20high%20%3D%20array.length%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28high%20%3D%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20while%20%28low%20%3C%20high%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20mid%20%3D%20Math.average%28low%2C%20high%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Note%20that%20mid%20will%20always%20be%20strictly%20less%20than%20high%20%28i.e.%20it%20will%20be%20a%20valid%20array%20index%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20because%20Math.average%20rounds%20towards%20zero%20%28it%20does%20integer%20division%20with%20truncation%29.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28unsafeMemoryAccess%28array%2C%20mid%29%20%3E%20element%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20high%20%3D%20mid%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20this%20cannot%20overflow%20because%20mid%20%3C%20high%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20low%20%3D%20mid%20%2B%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20return%20low%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Access%20an%20array%20in%20an%20%5C%22unsafe%5C%22%20way.%20Skips%20solidity%20%5C%22index-out-of-range%5C%22%20check.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20Only%20use%20if%20you%20are%20certain%20%60pos%60%20is%20lower%20than%20the%20array%20length.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20unsafeAccess%28address%5B%5D%20storage%20arr%2C%20uint256%20pos%29%20internal%20pure%20returns%20%28StorageSlot.AddressSlot%20storage%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes32%20slot%3B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20slot%20%3A%3D%20arr.slot%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20slot.deriveArray%28%29.offset%28pos%29.getAddressSlot%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Access%20an%20array%20in%20an%20%5C%22unsafe%5C%22%20way.%20Skips%20solidity%20%5C%22index-out-of-range%5C%22%20check.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20Only%20use%20if%20you%20are%20certain%20%60pos%60%20is%20lower%20than%20the%20array%20length.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20unsafeAccess%28bytes32%5B%5D%20storage%20arr%2C%20uint256%20pos%29%20internal%20pure%20returns%20%28StorageSlot.Bytes32Slot%20storage%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes32%20slot%3B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20slot%20%3A%3D%20arr.slot%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20slot.deriveArray%28%29.offset%28pos%29.getBytes32Slot%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Access%20an%20array%20in%20an%20%5C%22unsafe%5C%22%20way.%20Skips%20solidity%20%5C%22index-out-of-range%5C%22%20check.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20Only%20use%20if%20you%20are%20certain%20%60pos%60%20is%20lower%20than%20the%20array%20length.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20unsafeAccess%28uint256%5B%5D%20storage%20arr%2C%20uint256%20pos%29%20internal%20pure%20returns%20%28StorageSlot.Uint256Slot%20storage%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes32%20slot%3B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20slot%20%3A%3D%20arr.slot%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20slot.deriveArray%28%29.offset%28pos%29.getUint256Slot%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Access%20an%20array%20in%20an%20%5C%22unsafe%5C%22%20way.%20Skips%20solidity%20%5C%22index-out-of-range%5C%22%20check.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20Only%20use%20if%20you%20are%20certain%20%60pos%60%20is%20lower%20than%20the%20array%20length.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20unsafeMemoryAccess%28address%5B%5D%20memory%20arr%2C%20uint256%20pos%29%20internal%20pure%20returns%20%28address%20res%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20res%20%3A%3D%20mload%28add%28add%28arr%2C%200x20%29%2C%20mul%28pos%2C%200x20%29%29%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Access%20an%20array%20in%20an%20%5C%22unsafe%5C%22%20way.%20Skips%20solidity%20%5C%22index-out-of-range%5C%22%20check.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20Only%20use%20if%20you%20are%20certain%20%60pos%60%20is%20lower%20than%20the%20array%20length.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20unsafeMemoryAccess%28bytes32%5B%5D%20memory%20arr%2C%20uint256%20pos%29%20internal%20pure%20returns%20%28bytes32%20res%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20res%20%3A%3D%20mload%28add%28add%28arr%2C%200x20%29%2C%20mul%28pos%2C%200x20%29%29%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Access%20an%20array%20in%20an%20%5C%22unsafe%5C%22%20way.%20Skips%20solidity%20%5C%22index-out-of-range%5C%22%20check.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20Only%20use%20if%20you%20are%20certain%20%60pos%60%20is%20lower%20than%20the%20array%20length.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20unsafeMemoryAccess%28uint256%5B%5D%20memory%20arr%2C%20uint256%20pos%29%20internal%20pure%20returns%20%28uint256%20res%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20res%20%3A%3D%20mload%28add%28add%28arr%2C%200x20%29%2C%20mul%28pos%2C%200x20%29%29%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Helper%20to%20set%20the%20length%20of%20an%20dynamic%20array.%20Directly%20writing%20to%20%60.length%60%20is%20forbidden.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20this%20does%20not%20clear%20elements%20if%20length%20is%20reduced%2C%20of%20initialize%20elements%20if%20length%20is%20increased.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20unsafeSetLength%28address%5B%5D%20storage%20array%2C%20uint256%20len%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20sstore%28array.slot%2C%20len%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Helper%20to%20set%20the%20length%20of%20an%20dynamic%20array.%20Directly%20writing%20to%20%60.length%60%20is%20forbidden.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20this%20does%20not%20clear%20elements%20if%20length%20is%20reduced%2C%20of%20initialize%20elements%20if%20length%20is%20increased.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20unsafeSetLength%28bytes32%5B%5D%20storage%20array%2C%20uint256%20len%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20sstore%28array.slot%2C%20len%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Helper%20to%20set%20the%20length%20of%20an%20dynamic%20array.%20Directly%20writing%20to%20%60.length%60%20is%20forbidden.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20this%20does%20not%20clear%20elements%20if%20length%20is%20reduced%2C%20of%20initialize%20elements%20if%20length%20is%20increased.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20unsafeSetLength%28uint256%5B%5D%20storage%20array%2C%20uint256%20len%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20sstore%28array.slot%2C%20len%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2FComparators.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2FComparators.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Provides%20a%20set%20of%20functions%20to%20compare%20values.%5Cn%20%2A%5Cn%20%2A%20_Available%20since%20v5.1._%5Cn%20%2A%2F%5Cnlibrary%20Comparators%20%7B%5Cn%20%20%20%20function%20lt%28uint256%20a%2C%20uint256%20b%29%20internal%20pure%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20a%20%3C%20b%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20gt%28uint256%20a%2C%20uint256%20b%29%20internal%20pure%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20a%20%3E%20b%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2FContext.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.0.1%29%20%28utils%2FContext.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Provides%20information%20about%20the%20current%20execution%20context%2C%20including%20the%5Cn%20%2A%20sender%20of%20the%20transaction%20and%20its%20data.%20While%20these%20are%20generally%20available%5Cn%20%2A%20via%20msg.sender%20and%20msg.data%2C%20they%20should%20not%20be%20accessed%20in%20such%20a%20direct%5Cn%20%2A%20manner%2C%20since%20when%20dealing%20with%20meta-transactions%20the%20account%20sending%20and%5Cn%20%2A%20paying%20for%20execution%20may%20not%20be%20the%20actual%20sender%20%28as%20far%20as%20an%20application%5Cn%20%2A%20is%20concerned%29.%5Cn%20%2A%5Cn%20%2A%20This%20contract%20is%20only%20required%20for%20intermediate%2C%20library-like%20contracts.%5Cn%20%2A%2F%5Cnabstract%20contract%20Context%20%7B%5Cn%20%20%20%20function%20_msgSender%28%29%20internal%20view%20virtual%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20msg.sender%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_msgData%28%29%20internal%20view%20virtual%20returns%20%28bytes%20calldata%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20msg.data%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_contextSuffixLength%28%29%20internal%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%200%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2FCreate2.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2FCreate2.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BErrors%7D%20from%20%5C%22.%2FErrors.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Helper%20to%20make%20usage%20of%20the%20%60CREATE2%60%20EVM%20opcode%20easier%20and%20safer.%5Cn%20%2A%20%60CREATE2%60%20can%20be%20used%20to%20compute%20in%20advance%20the%20address%20where%20a%20smart%5Cn%20%2A%20contract%20will%20be%20deployed%2C%20which%20allows%20for%20interesting%20new%20mechanisms%20known%5Cn%20%2A%20as%20%27counterfactual%20interactions%27.%5Cn%20%2A%5Cn%20%2A%20See%20the%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-1014%23motivation%5BEIP%5D%20for%20more%5Cn%20%2A%20information.%5Cn%20%2A%2F%5Cnlibrary%20Create2%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20There%27s%20no%20code%20to%20deploy.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20Create2EmptyBytecode%28%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Deploys%20a%20contract%20using%20%60CREATE2%60.%20The%20address%20where%20the%20contract%5Cn%20%20%20%20%20%2A%20will%20be%20deployed%20can%20be%20known%20in%20advance%20via%20%7BcomputeAddress%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20The%20bytecode%20for%20a%20contract%20can%20be%20obtained%20from%20Solidity%20with%5Cn%20%20%20%20%20%2A%20%60type%28contractName%29.creationCode%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60bytecode%60%20must%20not%20be%20empty.%5Cn%20%20%20%20%20%2A%20-%20%60salt%60%20must%20have%20not%20been%20used%20for%20%60bytecode%60%20already.%5Cn%20%20%20%20%20%2A%20-%20the%20factory%20must%20have%20a%20balance%20of%20at%20least%20%60amount%60.%5Cn%20%20%20%20%20%2A%20-%20if%20%60amount%60%20is%20non-zero%2C%20%60bytecode%60%20must%20have%20a%20%60payable%60%20constructor.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20deploy%28uint256%20amount%2C%20bytes32%20salt%2C%20bytes%20memory%20bytecode%29%20internal%20returns%20%28address%20addr%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28address%28this%29.balance%20%3C%20amount%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20Errors.InsufficientBalance%28address%28this%29.balance%2C%20amount%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20%28bytecode.length%20%3D%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20Create2EmptyBytecode%28%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20addr%20%3A%3D%20create2%28amount%2C%20add%28bytecode%2C%200x20%29%2C%20mload%28bytecode%29%2C%20salt%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20if%20no%20address%20was%20created%2C%20and%20returndata%20is%20not%20empty%2C%20bubble%20revert%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20and%28iszero%28addr%29%2C%20not%28iszero%28returndatasize%28%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20p%20%3A%3D%20mload%280x40%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20returndatacopy%28p%2C%200%2C%20returndatasize%28%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%28p%2C%20returndatasize%28%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20%28addr%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20Errors.FailedDeployment%28%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20address%20where%20a%20contract%20will%20be%20stored%20if%20deployed%20via%20%7Bdeploy%7D.%20Any%20change%20in%20the%5Cn%20%20%20%20%20%2A%20%60bytecodeHash%60%20or%20%60salt%60%20will%20result%20in%20a%20new%20destination%20address.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20computeAddress%28bytes32%20salt%2C%20bytes32%20bytecodeHash%29%20internal%20view%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20computeAddress%28salt%2C%20bytecodeHash%2C%20address%28this%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20address%20where%20a%20contract%20will%20be%20stored%20if%20deployed%20via%20%7Bdeploy%7D%20from%20a%20contract%20located%20at%5Cn%20%20%20%20%20%2A%20%60deployer%60.%20If%20%60deployer%60%20is%20this%20contract%27s%20address%2C%20returns%20the%20same%20value%20as%20%7BcomputeAddress%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20computeAddress%28bytes32%20salt%2C%20bytes32%20bytecodeHash%2C%20address%20deployer%29%20internal%20pure%20returns%20%28address%20addr%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20let%20ptr%20%3A%3D%20mload%280x40%29%20%2F%2F%20Get%20free%20memory%20pointer%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20%E2%86%93%20ptr%20...%20%20%E2%86%93%20ptr%20%2B%200x0B%20%28start%29%20...%20%20%E2%86%93%20ptr%20%2B%200x20%20...%20%20%E2%86%93%20ptr%20%2B%200x40%20...%20%20%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7C-------------------%7C---------------------------------------------------------------------------%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7C%20bytecodeHash%20%20%20%20%20%20%7C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20CCCCCCCCCCCCC...CC%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7C%20salt%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20BBBBBBBBBBBBB...BB%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7C%20deployer%20%20%20%20%20%20%20%20%20%20%7C%20000000...0000AAAAAAAAAAAAAAAAAAA...AA%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7C%200xFF%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20%20%20%20%20%20%20%20%20%20%20%20FF%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7C-------------------%7C---------------------------------------------------------------------------%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7C%20memory%20%20%20%20%20%20%20%20%20%20%20%20%7C%20000000...00FFAAAAAAAAAAAAAAAAAAA...AABBBBBBBBBBBBB...BBCCCCCCCCCCCCC...CC%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7C%20keccak%28start%2C%2085%29%20%7C%20%20%20%20%20%20%20%20%20%20%20%20%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%20%7C%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28ptr%2C%200x40%29%2C%20bytecodeHash%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28ptr%2C%200x20%29%2C%20salt%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28ptr%2C%20deployer%29%20%2F%2F%20Right-aligned%20with%2012%20preceding%20garbage%20bytes%5Cn%20%20%20%20%20%20%20%20%20%20%20%20let%20start%20%3A%3D%20add%28ptr%2C%200x0b%29%20%2F%2F%20The%20hashed%20data%20starts%20at%20the%20final%20garbage%20byte%20which%20we%20will%20set%20to%200xff%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore8%28start%2C%200xff%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20addr%20%3A%3D%20and%28keccak256%28start%2C%2085%29%2C%200xffffffffffffffffffffffffffffffffffffffff%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2Fcryptography%2FECDSA.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2Fcryptography%2FECDSA.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Elliptic%20Curve%20Digital%20Signature%20Algorithm%20%28ECDSA%29%20operations.%5Cn%20%2A%5Cn%20%2A%20These%20functions%20can%20be%20used%20to%20verify%20that%20a%20message%20was%20signed%20by%20the%20holder%5Cn%20%2A%20of%20the%20private%20keys%20of%20a%20given%20address.%5Cn%20%2A%2F%5Cnlibrary%20ECDSA%20%7B%5Cn%20%20%20%20enum%20RecoverError%20%7B%5Cn%20%20%20%20%20%20%20%20NoError%2C%5Cn%20%20%20%20%20%20%20%20InvalidSignature%2C%5Cn%20%20%20%20%20%20%20%20InvalidSignatureLength%2C%5Cn%20%20%20%20%20%20%20%20InvalidSignatureS%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20signature%20derives%20the%20%60address%280%29%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ECDSAInvalidSignature%28%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20signature%20has%20an%20invalid%20length.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ECDSAInvalidSignatureLength%28uint256%20length%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20signature%20has%20an%20S%20value%20that%20is%20in%20the%20upper%20half%20order.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ECDSAInvalidSignatureS%28bytes32%20s%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20address%20that%20signed%20a%20hashed%20message%20%28%60hash%60%29%20with%20%60signature%60%20or%20an%20error.%20This%20will%20not%5Cn%20%20%20%20%20%2A%20return%20address%280%29%20without%20also%20returning%20an%20error%20description.%20Errors%20are%20documented%20using%20an%20enum%20%28error%20type%29%5Cn%20%20%20%20%20%2A%20and%20a%20bytes32%20providing%20additional%20information%20about%20the%20error.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20If%20no%20error%20is%20returned%2C%20then%20the%20address%20can%20be%20used%20for%20verification%20purposes.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20The%20%60ecrecover%60%20EVM%20precompile%20allows%20for%20malleable%20%28non-unique%29%20signatures%3A%5Cn%20%20%20%20%20%2A%20this%20function%20rejects%20them%20by%20requiring%20the%20%60s%60%20value%20to%20be%20in%20the%20lower%5Cn%20%20%20%20%20%2A%20half%20order%2C%20and%20the%20%60v%60%20value%20to%20be%20either%2027%20or%2028.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20IMPORTANT%3A%20%60hash%60%20_must_%20be%20the%20result%20of%20a%20hash%20operation%20for%20the%5Cn%20%20%20%20%20%2A%20verification%20to%20be%20secure%3A%20it%20is%20possible%20to%20craft%20signatures%20that%5Cn%20%20%20%20%20%2A%20recover%20to%20arbitrary%20addresses%20for%20non-hashed%20data.%20A%20safe%20way%20to%20ensure%5Cn%20%20%20%20%20%2A%20this%20is%20by%20receiving%20a%20hash%20of%20the%20original%20message%20%28which%20may%20otherwise%5Cn%20%20%20%20%20%2A%20be%20too%20long%29%2C%20and%20then%20calling%20%7BMessageHashUtils-toEthSignedMessageHash%7D%20on%20it.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Documentation%20for%20signature%20generation%3A%5Cn%20%20%20%20%20%2A%20-%20with%20https%3A%2F%2Fweb3js.readthedocs.io%2Fen%2Fv1.3.4%2Fweb3-eth-accounts.html%23sign%5BWeb3.js%5D%5Cn%20%20%20%20%20%2A%20-%20with%20https%3A%2F%2Fdocs.ethers.io%2Fv5%2Fapi%2Fsigner%2F%23Signer-signMessage%5Bethers%5D%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20tryRecover%28%5Cn%20%20%20%20%20%20%20%20bytes32%20hash%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20signature%5Cn%20%20%20%20%29%20internal%20pure%20returns%20%28address%20recovered%2C%20RecoverError%20err%2C%20bytes32%20errArg%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28signature.length%20%3D%3D%2065%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes32%20r%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes32%20s%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint8%20v%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20ecrecover%20takes%20the%20signature%20parameters%2C%20and%20the%20only%20way%20to%20get%20them%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20currently%20is%20to%20use%20assembly.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20r%20%3A%3D%20mload%28add%28signature%2C%200x20%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20s%20%3A%3D%20mload%28add%28signature%2C%200x40%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20%3A%3D%20byte%280%2C%20mload%28add%28signature%2C%200x60%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20tryRecover%28hash%2C%20v%2C%20r%2C%20s%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28address%280%29%2C%20RecoverError.InvalidSignatureLength%2C%20bytes32%28signature.length%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20address%20that%20signed%20a%20hashed%20message%20%28%60hash%60%29%20with%5Cn%20%20%20%20%20%2A%20%60signature%60.%20This%20address%20can%20then%20be%20used%20for%20verification%20purposes.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20The%20%60ecrecover%60%20EVM%20precompile%20allows%20for%20malleable%20%28non-unique%29%20signatures%3A%5Cn%20%20%20%20%20%2A%20this%20function%20rejects%20them%20by%20requiring%20the%20%60s%60%20value%20to%20be%20in%20the%20lower%5Cn%20%20%20%20%20%2A%20half%20order%2C%20and%20the%20%60v%60%20value%20to%20be%20either%2027%20or%2028.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20IMPORTANT%3A%20%60hash%60%20_must_%20be%20the%20result%20of%20a%20hash%20operation%20for%20the%5Cn%20%20%20%20%20%2A%20verification%20to%20be%20secure%3A%20it%20is%20possible%20to%20craft%20signatures%20that%5Cn%20%20%20%20%20%2A%20recover%20to%20arbitrary%20addresses%20for%20non-hashed%20data.%20A%20safe%20way%20to%20ensure%5Cn%20%20%20%20%20%2A%20this%20is%20by%20receiving%20a%20hash%20of%20the%20original%20message%20%28which%20may%20otherwise%5Cn%20%20%20%20%20%2A%20be%20too%20long%29%2C%20and%20then%20calling%20%7BMessageHashUtils-toEthSignedMessageHash%7D%20on%20it.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20recover%28bytes32%20hash%2C%20bytes%20memory%20signature%29%20internal%20pure%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20%28address%20recovered%2C%20RecoverError%20error%2C%20bytes32%20errorArg%29%20%3D%20tryRecover%28hash%2C%20signature%29%3B%5Cn%20%20%20%20%20%20%20%20_throwError%28error%2C%20errorArg%29%3B%5Cn%20%20%20%20%20%20%20%20return%20recovered%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Overload%20of%20%7BECDSA-tryRecover%7D%20that%20receives%20the%20%60r%60%20and%20%60vs%60%20short-signature%20fields%20separately.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20See%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-2098%5BERC-2098%20short%20signatures%5D%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20tryRecover%28%5Cn%20%20%20%20%20%20%20%20bytes32%20hash%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20r%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20vs%5Cn%20%20%20%20%29%20internal%20pure%20returns%20%28address%20recovered%2C%20RecoverError%20err%2C%20bytes32%20errArg%29%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes32%20s%20%3D%20vs%20%26%20bytes32%280x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20We%20do%20not%20check%20for%20an%20overflow%20here%20since%20the%20shift%20operation%20results%20in%200%20or%201.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint8%20v%20%3D%20uint8%28%28uint256%28vs%29%20%3E%3E%20255%29%20%2B%2027%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20tryRecover%28hash%2C%20v%2C%20r%2C%20s%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Overload%20of%20%7BECDSA-recover%7D%20that%20receives%20the%20%60r%20and%20%60vs%60%20short-signature%20fields%20separately.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20recover%28bytes32%20hash%2C%20bytes32%20r%2C%20bytes32%20vs%29%20internal%20pure%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20%28address%20recovered%2C%20RecoverError%20error%2C%20bytes32%20errorArg%29%20%3D%20tryRecover%28hash%2C%20r%2C%20vs%29%3B%5Cn%20%20%20%20%20%20%20%20_throwError%28error%2C%20errorArg%29%3B%5Cn%20%20%20%20%20%20%20%20return%20recovered%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Overload%20of%20%7BECDSA-tryRecover%7D%20that%20receives%20the%20%60v%60%2C%5Cn%20%20%20%20%20%2A%20%60r%60%20and%20%60s%60%20signature%20fields%20separately.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20tryRecover%28%5Cn%20%20%20%20%20%20%20%20bytes32%20hash%2C%5Cn%20%20%20%20%20%20%20%20uint8%20v%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20r%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20s%5Cn%20%20%20%20%29%20internal%20pure%20returns%20%28address%20recovered%2C%20RecoverError%20err%2C%20bytes32%20errArg%29%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20EIP-2%20still%20allows%20signature%20malleability%20for%20ecrecover%28%29.%20Remove%20this%20possibility%20and%20make%20the%20signature%5Cn%20%20%20%20%20%20%20%20%2F%2F%20unique.%20Appendix%20F%20in%20the%20Ethereum%20Yellow%20paper%20%28https%3A%2F%2Fethereum.github.io%2Fyellowpaper%2Fpaper.pdf%29%2C%20defines%5Cn%20%20%20%20%20%20%20%20%2F%2F%20the%20valid%20range%20for%20s%20in%20%28301%29%3A%200%20%3C%20s%20%3C%20secp256k1n%20%C3%B7%202%20%2B%201%2C%20and%20for%20v%20in%20%28302%29%3A%20v%20%E2%88%88%20%7B27%2C%2028%7D.%20Most%5Cn%20%20%20%20%20%20%20%20%2F%2F%20signatures%20from%20current%20libraries%20generate%20a%20unique%20signature%20with%20an%20s-value%20in%20the%20lower%20half%20order.%5Cn%20%20%20%20%20%20%20%20%2F%2F%5Cn%20%20%20%20%20%20%20%20%2F%2F%20If%20your%20library%20generates%20malleable%20signatures%2C%20such%20as%20s-values%20in%20the%20upper%20range%2C%20calculate%20a%20new%20s-value%5Cn%20%20%20%20%20%20%20%20%2F%2F%20with%200xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141%20-%20s1%20and%20flip%20v%20from%2027%20to%2028%20or%5Cn%20%20%20%20%20%20%20%20%2F%2F%20vice%20versa.%20If%20your%20library%20also%20generates%20signatures%20with%200%2F1%20for%20v%20instead%2027%2F28%2C%20add%2027%20to%20v%20to%20accept%5Cn%20%20%20%20%20%20%20%20%2F%2F%20these%20malleable%20signatures%20as%20well.%5Cn%20%20%20%20%20%20%20%20if%20%28uint256%28s%29%20%3E%200x7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28address%280%29%2C%20RecoverError.InvalidSignatureS%2C%20s%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20If%20the%20signature%20is%20valid%20%28and%20not%20malleable%29%2C%20return%20the%20signer%20address%5Cn%20%20%20%20%20%20%20%20address%20signer%20%3D%20ecrecover%28hash%2C%20v%2C%20r%2C%20s%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28signer%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28address%280%29%2C%20RecoverError.InvalidSignature%2C%20bytes32%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20return%20%28signer%2C%20RecoverError.NoError%2C%20bytes32%280%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Overload%20of%20%7BECDSA-recover%7D%20that%20receives%20the%20%60v%60%2C%5Cn%20%20%20%20%20%2A%20%60r%60%20and%20%60s%60%20signature%20fields%20separately.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20recover%28bytes32%20hash%2C%20uint8%20v%2C%20bytes32%20r%2C%20bytes32%20s%29%20internal%20pure%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20%28address%20recovered%2C%20RecoverError%20error%2C%20bytes32%20errorArg%29%20%3D%20tryRecover%28hash%2C%20v%2C%20r%2C%20s%29%3B%5Cn%20%20%20%20%20%20%20%20_throwError%28error%2C%20errorArg%29%3B%5Cn%20%20%20%20%20%20%20%20return%20recovered%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Optionally%20reverts%20with%20the%20corresponding%20custom%20error%20according%20to%20the%20%60error%60%20argument%20provided.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_throwError%28RecoverError%20error%2C%20bytes32%20errorArg%29%20private%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28error%20%3D%3D%20RecoverError.NoError%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%3B%20%2F%2F%20no%20error%3A%20do%20nothing%5Cn%20%20%20%20%20%20%20%20%7D%20else%20if%20%28error%20%3D%3D%20RecoverError.InvalidSignature%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ECDSAInvalidSignature%28%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20if%20%28error%20%3D%3D%20RecoverError.InvalidSignatureLength%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ECDSAInvalidSignatureLength%28uint256%28errorArg%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20if%20%28error%20%3D%3D%20RecoverError.InvalidSignatureS%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ECDSAInvalidSignatureS%28errorArg%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2Fcryptography%2FEIP712.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2Fcryptography%2FEIP712.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BMessageHashUtils%7D%20from%20%5C%22.%2FMessageHashUtils.sol%5C%22%3B%5Cnimport%20%7BShortStrings%2C%20ShortString%7D%20from%20%5C%22..%2FShortStrings.sol%5C%22%3B%5Cnimport%20%7BIERC5267%7D%20from%20%5C%22..%2F..%2Finterfaces%2FIERC5267.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-712%5BEIP-712%5D%20is%20a%20standard%20for%20hashing%20and%20signing%20of%20typed%20structured%20data.%5Cn%20%2A%5Cn%20%2A%20The%20encoding%20scheme%20specified%20in%20the%20EIP%20requires%20a%20domain%20separator%20and%20a%20hash%20of%20the%20typed%20structured%20data%2C%20whose%5Cn%20%2A%20encoding%20is%20very%20generic%20and%20therefore%20its%20implementation%20in%20Solidity%20is%20not%20feasible%2C%20thus%20this%20contract%5Cn%20%2A%20does%20not%20implement%20the%20encoding%20itself.%20Protocols%20need%20to%20implement%20the%20type-specific%20encoding%20they%20need%20in%20order%20to%5Cn%20%2A%20produce%20the%20hash%20of%20their%20typed%20data%20using%20a%20combination%20of%20%60abi.encode%60%20and%20%60keccak256%60.%5Cn%20%2A%5Cn%20%2A%20This%20contract%20implements%20the%20EIP-712%20domain%20separator%20%28%7B_domainSeparatorV4%7D%29%20that%20is%20used%20as%20part%20of%20the%20encoding%5Cn%20%2A%20scheme%2C%20and%20the%20final%20step%20of%20the%20encoding%20to%20obtain%20the%20message%20digest%20that%20is%20then%20signed%20via%20ECDSA%5Cn%20%2A%20%28%7B_hashTypedDataV4%7D%29.%5Cn%20%2A%5Cn%20%2A%20The%20implementation%20of%20the%20domain%20separator%20was%20designed%20to%20be%20as%20efficient%20as%20possible%20while%20still%20properly%20updating%5Cn%20%2A%20the%20chain%20id%20to%20protect%20against%20replay%20attacks%20on%20an%20eventual%20fork%20of%20the%20chain.%5Cn%20%2A%5Cn%20%2A%20NOTE%3A%20This%20contract%20implements%20the%20version%20of%20the%20encoding%20known%20as%20%5C%22v4%5C%22%2C%20as%20implemented%20by%20the%20JSON%20RPC%20method%5Cn%20%2A%20https%3A%2F%2Fdocs.metamask.io%2Fguide%2Fsigning-data.html%5B%60eth_signTypedDataV4%60%20in%20MetaMask%5D.%5Cn%20%2A%5Cn%20%2A%20NOTE%3A%20In%20the%20upgradeable%20version%20of%20this%20contract%2C%20the%20cached%20values%20will%20correspond%20to%20the%20address%2C%20and%20the%20domain%5Cn%20%2A%20separator%20of%20the%20implementation%20contract.%20This%20will%20cause%20the%20%7B_domainSeparatorV4%7D%20function%20to%20always%20rebuild%20the%5Cn%20%2A%20separator%20from%20the%20immutable%20values%2C%20which%20is%20cheaper%20than%20accessing%20a%20cached%20version%20in%20cold%20storage.%5Cn%20%2A%5Cn%20%2A%20%40custom%3Aoz-upgrades-unsafe-allow%20state-variable-immutable%5Cn%20%2A%2F%5Cnabstract%20contract%20EIP712%20is%20IERC5267%20%7B%5Cn%20%20%20%20using%20ShortStrings%20for%20%2A%3B%5Cn%5Cn%20%20%20%20bytes32%20private%20constant%20TYPE_HASH%20%3D%5Cn%20%20%20%20%20%20%20%20keccak256%28%5C%22EIP712Domain%28string%20name%2Cstring%20version%2Cuint256%20chainId%2Caddress%20verifyingContract%29%5C%22%29%3B%5Cn%5Cn%20%20%20%20%2F%2F%20Cache%20the%20domain%20separator%20as%20an%20immutable%20value%2C%20but%20also%20store%20the%20chain%20id%20that%20it%20corresponds%20to%2C%20in%20order%20to%5Cn%20%20%20%20%2F%2F%20invalidate%20the%20cached%20domain%20separator%20if%20the%20chain%20id%20changes.%5Cn%20%20%20%20bytes32%20private%20immutable%20_cachedDomainSeparator%3B%5Cn%20%20%20%20uint256%20private%20immutable%20_cachedChainId%3B%5Cn%20%20%20%20address%20private%20immutable%20_cachedThis%3B%5Cn%5Cn%20%20%20%20bytes32%20private%20immutable%20_hashedName%3B%5Cn%20%20%20%20bytes32%20private%20immutable%20_hashedVersion%3B%5Cn%5Cn%20%20%20%20ShortString%20private%20immutable%20_name%3B%5Cn%20%20%20%20ShortString%20private%20immutable%20_version%3B%5Cn%20%20%20%20string%20private%20_nameFallback%3B%5Cn%20%20%20%20string%20private%20_versionFallback%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Initializes%20the%20domain%20separator%20and%20parameter%20caches.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20The%20meaning%20of%20%60name%60%20and%20%60version%60%20is%20specified%20in%5Cn%20%20%20%20%20%2A%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-712%23definition-of-domainseparator%5BEIP-712%5D%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60name%60%3A%20the%20user%20readable%20name%20of%20the%20signing%20domain%2C%20i.e.%20the%20name%20of%20the%20DApp%20or%20the%20protocol.%5Cn%20%20%20%20%20%2A%20-%20%60version%60%3A%20the%20current%20major%20version%20of%20the%20signing%20domain.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20These%20parameters%20cannot%20be%20changed%20except%20through%20a%20xref%3Alearn%3A%3Aupgrading-smart-contracts.adoc%5Bsmart%5Cn%20%20%20%20%20%2A%20contract%20upgrade%5D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20constructor%28string%20memory%20name%2C%20string%20memory%20version%29%20%7B%5Cn%20%20%20%20%20%20%20%20_name%20%3D%20name.toShortStringWithFallback%28_nameFallback%29%3B%5Cn%20%20%20%20%20%20%20%20_version%20%3D%20version.toShortStringWithFallback%28_versionFallback%29%3B%5Cn%20%20%20%20%20%20%20%20_hashedName%20%3D%20keccak256%28bytes%28name%29%29%3B%5Cn%20%20%20%20%20%20%20%20_hashedVersion%20%3D%20keccak256%28bytes%28version%29%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20_cachedChainId%20%3D%20block.chainid%3B%5Cn%20%20%20%20%20%20%20%20_cachedDomainSeparator%20%3D%20_buildDomainSeparator%28%29%3B%5Cn%20%20%20%20%20%20%20%20_cachedThis%20%3D%20address%28this%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20domain%20separator%20for%20the%20current%20chain.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_domainSeparatorV4%28%29%20internal%20view%20returns%20%28bytes32%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28address%28this%29%20%3D%3D%20_cachedThis%20%26%26%20block.chainid%20%3D%3D%20_cachedChainId%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20_cachedDomainSeparator%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20_buildDomainSeparator%28%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_buildDomainSeparator%28%29%20private%20view%20returns%20%28bytes32%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20keccak256%28abi.encode%28TYPE_HASH%2C%20_hashedName%2C%20_hashedVersion%2C%20block.chainid%2C%20address%28this%29%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Given%20an%20already%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-712%23definition-of-hashstruct%5Bhashed%20struct%5D%2C%20this%5Cn%20%20%20%20%20%2A%20function%20returns%20the%20hash%20of%20the%20fully%20encoded%20EIP712%20message%20for%20this%20domain.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20hash%20can%20be%20used%20together%20with%20%7BECDSA-recover%7D%20to%20obtain%20the%20signer%20of%20a%20message.%20For%20example%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20%60%60%60solidity%5Cn%20%20%20%20%20%2A%20bytes32%20digest%20%3D%20_hashTypedDataV4%28keccak256%28abi.encode%28%5Cn%20%20%20%20%20%2A%20%20%20%20%20keccak256%28%5C%22Mail%28address%20to%2Cstring%20contents%29%5C%22%29%2C%5Cn%20%20%20%20%20%2A%20%20%20%20%20mailTo%2C%5Cn%20%20%20%20%20%2A%20%20%20%20%20keccak256%28bytes%28mailContents%29%29%5Cn%20%20%20%20%20%2A%20%29%29%29%3B%5Cn%20%20%20%20%20%2A%20address%20signer%20%3D%20ECDSA.recover%28digest%2C%20signature%29%3B%5Cn%20%20%20%20%20%2A%20%60%60%60%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_hashTypedDataV4%28bytes32%20structHash%29%20internal%20view%20virtual%20returns%20%28bytes32%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20MessageHashUtils.toTypedDataHash%28_domainSeparatorV4%28%29%2C%20structHash%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC-5267%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20eip712Domain%28%29%5Cn%20%20%20%20%20%20%20%20public%5Cn%20%20%20%20%20%20%20%20view%5Cn%20%20%20%20%20%20%20%20virtual%5Cn%20%20%20%20%20%20%20%20returns%20%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes1%20fields%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20string%20memory%20name%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20string%20memory%20version%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20chainId%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20address%20verifyingContract%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes32%20salt%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20extensions%5Cn%20%20%20%20%20%20%20%20%29%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20return%20%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20hex%5C%220f%5C%22%2C%20%2F%2F%2001111%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_EIP712Name%28%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_EIP712Version%28%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20block.chainid%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20address%28this%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes32%280%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20new%20uint256%5B%5D%280%29%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20name%20parameter%20for%20the%20EIP712%20domain.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20By%20default%20this%20function%20reads%20_name%20which%20is%20an%20immutable%20value.%5Cn%20%20%20%20%20%2A%20It%20only%20reads%20from%20storage%20if%20necessary%20%28in%20case%20the%20value%20is%20too%20large%20to%20fit%20in%20a%20ShortString%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20%2F%2F%20solhint-disable-next-line%20func-name-mixedcase%5Cn%20%20%20%20function%20_EIP712Name%28%29%20internal%20view%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_name.toStringWithFallback%28_nameFallback%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20version%20parameter%20for%20the%20EIP712%20domain.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20By%20default%20this%20function%20reads%20_version%20which%20is%20an%20immutable%20value.%5Cn%20%20%20%20%20%2A%20It%20only%20reads%20from%20storage%20if%20necessary%20%28in%20case%20the%20value%20is%20too%20large%20to%20fit%20in%20a%20ShortString%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20%2F%2F%20solhint-disable-next-line%20func-name-mixedcase%5Cn%20%20%20%20function%20_EIP712Version%28%29%20internal%20view%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_version.toStringWithFallback%28_versionFallback%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2Fcryptography%2FMessageHashUtils.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2Fcryptography%2FMessageHashUtils.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BStrings%7D%20from%20%5C%22..%2FStrings.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Signature%20message%20hash%20utilities%20for%20producing%20digests%20to%20be%20consumed%20by%20%7BECDSA%7D%20recovery%20or%20signing.%5Cn%20%2A%5Cn%20%2A%20The%20library%20provides%20methods%20for%20generating%20a%20hash%20of%20a%20message%20that%20conforms%20to%20the%5Cn%20%2A%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-191%5BERC-191%5D%20and%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-712%5BEIP%20712%5D%5Cn%20%2A%20specifications.%5Cn%20%2A%2F%5Cnlibrary%20MessageHashUtils%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20keccak256%20digest%20of%20an%20ERC-191%20signed%20data%20with%20version%5Cn%20%20%20%20%20%2A%20%600x45%60%20%28%60personal_sign%60%20messages%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20The%20digest%20is%20calculated%20by%20prefixing%20a%20bytes32%20%60messageHash%60%20with%5Cn%20%20%20%20%20%2A%20%60%5C%22%5C%5Cx19Ethereum%20Signed%20Message%3A%5C%5Cn32%5C%22%60%20and%20hashing%20the%20result.%20It%20corresponds%20with%20the%5Cn%20%20%20%20%20%2A%20hash%20signed%20when%20using%20the%20https%3A%2F%2Feth.wiki%2Fjson-rpc%2FAPI%23eth_sign%5B%60eth_sign%60%5D%20JSON-RPC%20method.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20The%20%60messageHash%60%20parameter%20is%20intended%20to%20be%20the%20result%20of%20hashing%20a%20raw%20message%20with%5Cn%20%20%20%20%20%2A%20keccak256%2C%20although%20any%20bytes32%20value%20can%20be%20safely%20used%20because%20the%20final%20digest%20will%5Cn%20%20%20%20%20%2A%20be%20re-hashed.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20See%20%7BECDSA-recover%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toEthSignedMessageHash%28bytes32%20messageHash%29%20internal%20pure%20returns%20%28bytes32%20digest%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280x00%2C%20%5C%22%5C%5Cx19Ethereum%20Signed%20Message%3A%5C%5Cn32%5C%22%29%20%2F%2F%2032%20is%20the%20bytes-length%20of%20messageHash%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280x1c%2C%20messageHash%29%20%2F%2F%200x1c%20%2828%29%20is%20the%20length%20of%20the%20prefix%5Cn%20%20%20%20%20%20%20%20%20%20%20%20digest%20%3A%3D%20keccak256%280x00%2C%200x3c%29%20%2F%2F%200x3c%20is%20the%20length%20of%20the%20prefix%20%280x1c%29%20%2B%20messageHash%20%280x20%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20keccak256%20digest%20of%20an%20ERC-191%20signed%20data%20with%20version%5Cn%20%20%20%20%20%2A%20%600x45%60%20%28%60personal_sign%60%20messages%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20The%20digest%20is%20calculated%20by%20prefixing%20an%20arbitrary%20%60message%60%20with%5Cn%20%20%20%20%20%2A%20%60%5C%22%5C%5Cx19Ethereum%20Signed%20Message%3A%5C%5Cn%5C%22%20%2B%20len%28message%29%60%20and%20hashing%20the%20result.%20It%20corresponds%20with%20the%5Cn%20%20%20%20%20%2A%20hash%20signed%20when%20using%20the%20https%3A%2F%2Feth.wiki%2Fjson-rpc%2FAPI%23eth_sign%5B%60eth_sign%60%5D%20JSON-RPC%20method.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20See%20%7BECDSA-recover%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toEthSignedMessageHash%28bytes%20memory%20message%29%20internal%20pure%20returns%20%28bytes32%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%5Cn%20%20%20%20%20%20%20%20%20%20%20%20keccak256%28bytes.concat%28%5C%22%5C%5Cx19Ethereum%20Signed%20Message%3A%5C%5Cn%5C%22%2C%20bytes%28Strings.toString%28message.length%29%29%2C%20message%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20keccak256%20digest%20of%20an%20ERC-191%20signed%20data%20with%20version%5Cn%20%20%20%20%20%2A%20%600x00%60%20%28data%20with%20intended%20validator%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20The%20digest%20is%20calculated%20by%20prefixing%20an%20arbitrary%20%60data%60%20with%20%60%5C%22%5C%5Cx19%5C%5Cx00%5C%22%60%20and%20the%20intended%5Cn%20%20%20%20%20%2A%20%60validator%60%20address.%20Then%20hashing%20the%20result.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20See%20%7BECDSA-recover%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toDataWithIntendedValidatorHash%28address%20validator%2C%20bytes%20memory%20data%29%20internal%20pure%20returns%20%28bytes32%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20keccak256%28abi.encodePacked%28hex%5C%2219_00%5C%22%2C%20validator%2C%20data%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20keccak256%20digest%20of%20an%20EIP-712%20typed%20data%20%28ERC-191%20version%20%600x01%60%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20The%20digest%20is%20calculated%20from%20a%20%60domainSeparator%60%20and%20a%20%60structHash%60%2C%20by%20prefixing%20them%20with%5Cn%20%20%20%20%20%2A%20%60%5C%5Cx19%5C%5Cx01%60%20and%20hashing%20the%20result.%20It%20corresponds%20to%20the%20hash%20signed%20by%20the%5Cn%20%20%20%20%20%2A%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-712%5B%60eth_signTypedData%60%5D%20JSON-RPC%20method%20as%20part%20of%20EIP-712.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20See%20%7BECDSA-recover%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toTypedDataHash%28bytes32%20domainSeparator%2C%20bytes32%20structHash%29%20internal%20pure%20returns%20%28bytes32%20digest%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20let%20ptr%20%3A%3D%20mload%280x40%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28ptr%2C%20hex%5C%2219_01%5C%22%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28ptr%2C%200x02%29%2C%20domainSeparator%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28ptr%2C%200x22%29%2C%20structHash%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20digest%20%3A%3D%20keccak256%28ptr%2C%200x42%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2Fcryptography%2FSignatureChecker.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2Fcryptography%2FSignatureChecker.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BECDSA%7D%20from%20%5C%22.%2FECDSA.sol%5C%22%3B%5Cnimport%20%7BIERC1271%7D%20from%20%5C%22..%2F..%2Finterfaces%2FIERC1271.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Signature%20verification%20helper%20that%20can%20be%20used%20instead%20of%20%60ECDSA.recover%60%20to%20seamlessly%20support%20both%20ECDSA%5Cn%20%2A%20signatures%20from%20externally%20owned%20accounts%20%28EOAs%29%20as%20well%20as%20ERC-1271%20signatures%20from%20smart%20contract%20wallets%20like%5Cn%20%2A%20Argent%20and%20Safe%20Wallet%20%28previously%20Gnosis%20Safe%29.%5Cn%20%2A%2F%5Cnlibrary%20SignatureChecker%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Checks%20if%20a%20signature%20is%20valid%20for%20a%20given%20signer%20and%20data%20hash.%20If%20the%20signer%20is%20a%20smart%20contract%2C%20the%5Cn%20%20%20%20%20%2A%20signature%20is%20validated%20against%20that%20smart%20contract%20using%20ERC-1271%2C%20otherwise%20it%27s%20validated%20using%20%60ECDSA.recover%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20Unlike%20ECDSA%20signatures%2C%20contract%20signatures%20are%20revocable%2C%20and%20the%20outcome%20of%20this%20function%20can%20thus%5Cn%20%20%20%20%20%2A%20change%20through%20time.%20It%20could%20return%20true%20at%20block%20N%20and%20false%20at%20block%20N%2B1%20%28or%20the%20opposite%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isValidSignatureNow%28address%20signer%2C%20bytes32%20hash%2C%20bytes%20memory%20signature%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28signer.code.length%20%3D%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%28address%20recovered%2C%20ECDSA.RecoverError%20err%2C%20%29%20%3D%20ECDSA.tryRecover%28hash%2C%20signature%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20err%20%3D%3D%20ECDSA.RecoverError.NoError%20%26%26%20recovered%20%3D%3D%20signer%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20isValidERC1271SignatureNow%28signer%2C%20hash%2C%20signature%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Checks%20if%20a%20signature%20is%20valid%20for%20a%20given%20signer%20and%20data%20hash.%20The%20signature%20is%20validated%5Cn%20%20%20%20%20%2A%20against%20the%20signer%20smart%20contract%20using%20ERC-1271.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20Unlike%20ECDSA%20signatures%2C%20contract%20signatures%20are%20revocable%2C%20and%20the%20outcome%20of%20this%20function%20can%20thus%5Cn%20%20%20%20%20%2A%20change%20through%20time.%20It%20could%20return%20true%20at%20block%20N%20and%20false%20at%20block%20N%2B1%20%28or%20the%20opposite%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isValidERC1271SignatureNow%28%5Cn%20%20%20%20%20%20%20%20address%20signer%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20hash%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20signature%5Cn%20%20%20%20%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20%28bool%20success%2C%20bytes%20memory%20result%29%20%3D%20signer.staticcall%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20abi.encodeCall%28IERC1271.isValidSignature%2C%20%28hash%2C%20signature%29%29%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20return%20%28success%20%26%26%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result.length%20%3E%3D%2032%20%26%26%5Cn%20%20%20%20%20%20%20%20%20%20%20%20abi.decode%28result%2C%20%28bytes32%29%29%20%3D%3D%20bytes32%28IERC1271.isValidSignature.selector%29%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2FErrors.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2FErrors.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Collection%20of%20common%20custom%20errors%20used%20in%20multiple%20contracts%5Cn%20%2A%5Cn%20%2A%20IMPORTANT%3A%20Backwards%20compatibility%20is%20not%20guaranteed%20in%20future%20versions%20of%20the%20library.%5Cn%20%2A%20It%20is%20recommended%20to%20avoid%20relying%20on%20the%20error%20API%20for%20critical%20functionality.%5Cn%20%2A%5Cn%20%2A%20_Available%20since%20v5.1._%5Cn%20%2A%2F%5Cnlibrary%20Errors%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20ETH%20balance%20of%20the%20account%20is%20not%20enough%20to%20perform%20the%20operation.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20InsufficientBalance%28uint256%20balance%2C%20uint256%20needed%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20A%20call%20to%20an%20address%20target%20failed.%20The%20target%20may%20have%20reverted.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20FailedCall%28%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20deployment%20failed.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20FailedDeployment%28%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20A%20necessary%20precompile%20is%20missing.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20MissingPrecompile%28address%29%3B%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2Fintrospection%2FERC165.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2Fintrospection%2FERC165.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BIERC165%7D%20from%20%5C%22.%2FIERC165.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Implementation%20of%20the%20%7BIERC165%7D%20interface.%5Cn%20%2A%5Cn%20%2A%20Contracts%20that%20want%20to%20implement%20ERC-165%20should%20inherit%20from%20this%20contract%20and%20override%20%7BsupportsInterface%7D%20to%20check%5Cn%20%2A%20for%20the%20additional%20interface%20id%20that%20will%20be%20supported.%20For%20example%3A%5Cn%20%2A%5Cn%20%2A%20%60%60%60solidity%5Cn%20%2A%20function%20supportsInterface%28bytes4%20interfaceId%29%20public%20view%20virtual%20override%20returns%20%28bool%29%20%7B%5Cn%20%2A%20%20%20%20%20return%20interfaceId%20%3D%3D%20type%28MyInterface%29.interfaceId%20%7C%7C%20super.supportsInterface%28interfaceId%29%3B%5Cn%20%2A%20%7D%5Cn%20%2A%20%60%60%60%5Cn%20%2A%2F%5Cnabstract%20contract%20ERC165%20is%20IERC165%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BIERC165-supportsInterface%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20supportsInterface%28bytes4%20interfaceId%29%20public%20view%20virtual%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20interfaceId%20%3D%3D%20type%28IERC165%29.interfaceId%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2Fintrospection%2FIERC165.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2Fintrospection%2FIERC165.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Interface%20of%20the%20ERC-165%20standard%2C%20as%20defined%20in%20the%5Cn%20%2A%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-165%5BERC%5D.%5Cn%20%2A%5Cn%20%2A%20Implementers%20can%20declare%20support%20of%20contract%20interfaces%2C%20which%20can%20then%20be%5Cn%20%2A%20queried%20by%20others%20%28%7BERC165Checker%7D%29.%5Cn%20%2A%5Cn%20%2A%20For%20an%20implementation%2C%20see%20%7BERC165%7D.%5Cn%20%2A%2F%5Cninterface%20IERC165%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20true%20if%20this%20contract%20implements%20the%20interface%20defined%20by%5Cn%20%20%20%20%20%2A%20%60interfaceId%60.%20See%20the%20corresponding%5Cn%20%20%20%20%20%2A%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-165%23how-interfaces-are-identified%5BERC%20section%5D%5Cn%20%20%20%20%20%2A%20to%20learn%20more%20about%20how%20these%20ids%20are%20created.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20function%20call%20must%20use%20less%20than%2030%20000%20gas.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20supportsInterface%28bytes4%20interfaceId%29%20external%20view%20returns%20%28bool%29%3B%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2Fmath%2FMath.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2Fmath%2FMath.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BPanic%7D%20from%20%5C%22..%2FPanic.sol%5C%22%3B%5Cnimport%20%7BSafeCast%7D%20from%20%5C%22.%2FSafeCast.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Standard%20math%20utilities%20missing%20in%20the%20Solidity%20language.%5Cn%20%2A%2F%5Cnlibrary%20Math%20%7B%5Cn%20%20%20%20enum%20Rounding%20%7B%5Cn%20%20%20%20%20%20%20%20Floor%2C%20%2F%2F%20Toward%20negative%20infinity%5Cn%20%20%20%20%20%20%20%20Ceil%2C%20%2F%2F%20Toward%20positive%20infinity%5Cn%20%20%20%20%20%20%20%20Trunc%2C%20%2F%2F%20Toward%20zero%5Cn%20%20%20%20%20%20%20%20Expand%20%2F%2F%20Away%20from%20zero%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20addition%20of%20two%20unsigned%20integers%2C%20with%20an%20success%20flag%20%28no%20overflow%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20tryAdd%28uint256%20a%2C%20uint256%20b%29%20internal%20pure%20returns%20%28bool%20success%2C%20uint256%20result%29%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20c%20%3D%20a%20%2B%20b%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28c%20%3C%20a%29%20return%20%28false%2C%200%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28true%2C%20c%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20subtraction%20of%20two%20unsigned%20integers%2C%20with%20an%20success%20flag%20%28no%20overflow%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20trySub%28uint256%20a%2C%20uint256%20b%29%20internal%20pure%20returns%20%28bool%20success%2C%20uint256%20result%29%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28b%20%3E%20a%29%20return%20%28false%2C%200%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28true%2C%20a%20-%20b%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20multiplication%20of%20two%20unsigned%20integers%2C%20with%20an%20success%20flag%20%28no%20overflow%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20tryMul%28uint256%20a%2C%20uint256%20b%29%20internal%20pure%20returns%20%28bool%20success%2C%20uint256%20result%29%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Gas%20optimization%3A%20this%20is%20cheaper%20than%20requiring%20%27a%27%20not%20being%20zero%2C%20but%20the%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20benefit%20is%20lost%20if%20%27b%27%20is%20also%20tested.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20See%3A%20https%3A%2F%2Fgithub.com%2FOpenZeppelin%2Fopenzeppelin-contracts%2Fpull%2F522%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28a%20%3D%3D%200%29%20return%20%28true%2C%200%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20c%20%3D%20a%20%2A%20b%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28c%20%2F%20a%20%21%3D%20b%29%20return%20%28false%2C%200%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28true%2C%20c%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20division%20of%20two%20unsigned%20integers%2C%20with%20a%20success%20flag%20%28no%20division%20by%20zero%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20tryDiv%28uint256%20a%2C%20uint256%20b%29%20internal%20pure%20returns%20%28bool%20success%2C%20uint256%20result%29%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28b%20%3D%3D%200%29%20return%20%28false%2C%200%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28true%2C%20a%20%2F%20b%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20remainder%20of%20dividing%20two%20unsigned%20integers%2C%20with%20a%20success%20flag%20%28no%20division%20by%20zero%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20tryMod%28uint256%20a%2C%20uint256%20b%29%20internal%20pure%20returns%20%28bool%20success%2C%20uint256%20result%29%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28b%20%3D%3D%200%29%20return%20%28false%2C%200%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28true%2C%20a%20%25%20b%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Branchless%20ternary%20evaluation%20for%20%60a%20%3F%20b%20%3A%20c%60.%20Gas%20costs%20are%20constant.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20IMPORTANT%3A%20This%20function%20may%20reduce%20bytecode%20size%20and%20consume%20less%20gas%20when%20used%20standalone.%5Cn%20%20%20%20%20%2A%20However%2C%20the%20compiler%20may%20optimize%20Solidity%20ternary%20operations%20%28i.e.%20%60a%20%3F%20b%20%3A%20c%60%29%20to%20only%20compute%5Cn%20%20%20%20%20%2A%20one%20branch%20when%20needed%2C%20making%20this%20function%20more%20expensive.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20ternary%28bool%20condition%2C%20uint256%20a%2C%20uint256%20b%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20branchless%20ternary%20works%20because%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20b%20%5E%20%28a%20%5E%20b%29%20%3D%3D%20a%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20b%20%5E%200%20%3D%3D%20b%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20b%20%5E%20%28%28a%20%5E%20b%29%20%2A%20SafeCast.toUint%28condition%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20largest%20of%20two%20numbers.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20max%28uint256%20a%2C%20uint256%20b%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20ternary%28a%20%3E%20b%2C%20a%2C%20b%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20smallest%20of%20two%20numbers.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20min%28uint256%20a%2C%20uint256%20b%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20ternary%28a%20%3C%20b%2C%20a%2C%20b%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20average%20of%20two%20numbers.%20The%20result%20is%20rounded%20towards%5Cn%20%20%20%20%20%2A%20zero.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20average%28uint256%20a%2C%20uint256%20b%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%28a%20%2B%20b%29%20%2F%202%20can%20overflow.%5Cn%20%20%20%20%20%20%20%20return%20%28a%20%26%20b%29%20%2B%20%28a%20%5E%20b%29%20%2F%202%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20ceiling%20of%20the%20division%20of%20two%20numbers.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20differs%20from%20standard%20division%20with%20%60%2F%60%20in%20that%20it%20rounds%20towards%20infinity%20instead%5Cn%20%20%20%20%20%2A%20of%20rounding%20towards%20zero.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20ceilDiv%28uint256%20a%2C%20uint256%20b%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28b%20%3D%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Guarantee%20the%20same%20behavior%20as%20in%20a%20regular%20Solidity%20division.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20Panic.panic%28Panic.DIVISION_BY_ZERO%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20The%20following%20calculation%20ensures%20accurate%20ceiling%20division%20without%20overflow.%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Since%20a%20is%20non-zero%2C%20%28a%20-%201%29%20%2F%20b%20will%20not%20overflow.%5Cn%20%20%20%20%20%20%20%20%2F%2F%20The%20largest%20possible%20result%20occurs%20when%20%28a%20-%201%29%20%2F%20b%20is%20type%28uint256%29.max%2C%5Cn%20%20%20%20%20%20%20%20%2F%2F%20but%20the%20largest%20value%20we%20can%20obtain%20is%20type%28uint256%29.max%20-%201%2C%20which%20happens%5Cn%20%20%20%20%20%20%20%20%2F%2F%20when%20a%20%3D%20type%28uint256%29.max%20and%20b%20%3D%201.%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20SafeCast.toUint%28a%20%3E%200%29%20%2A%20%28%28a%20-%201%29%20%2F%20b%20%2B%201%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Calculates%20floor%28x%20%2A%20y%20%2F%20denominator%29%20with%20full%20precision.%20Throws%20if%20result%20overflows%20a%20uint256%20or%5Cn%20%20%20%20%20%2A%20denominator%20%3D%3D%200.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Original%20credit%20to%20Remco%20Bloemen%20under%20MIT%20license%20%28https%3A%2F%2Fxn--2-umb.com%2F21%2Fmuldiv%29%20with%20further%20edits%20by%5Cn%20%20%20%20%20%2A%20Uniswap%20Labs%20also%20under%20MIT%20license.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20mulDiv%28uint256%20x%2C%20uint256%20y%2C%20uint256%20denominator%29%20internal%20pure%20returns%20%28uint256%20result%29%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20512-bit%20multiply%20%5Bprod1%20prod0%5D%20%3D%20x%20%2A%20y.%20Compute%20the%20product%20mod%202%C2%B2%E2%81%B5%E2%81%B6%20and%20mod%202%C2%B2%E2%81%B5%E2%81%B6%20-%201%2C%20then%20use%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20the%20Chinese%20Remainder%20Theorem%20to%20reconstruct%20the%20512%20bit%20result.%20The%20result%20is%20stored%20in%20two%20256%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20variables%20such%20that%20product%20%3D%20prod1%20%2A%202%C2%B2%E2%81%B5%E2%81%B6%20%2B%20prod0.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20prod0%20%3D%20x%20%2A%20y%3B%20%2F%2F%20Least%20significant%20256%20bits%20of%20the%20product%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20prod1%3B%20%2F%2F%20Most%20significant%20256%20bits%20of%20the%20product%5Cn%20%20%20%20%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20mm%20%3A%3D%20mulmod%28x%2C%20y%2C%20not%280%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20prod1%20%3A%3D%20sub%28sub%28mm%2C%20prod0%29%2C%20lt%28mm%2C%20prod0%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Handle%20non-overflow%20cases%2C%20256%20by%20256%20division.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28prod1%20%3D%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Solidity%20will%20revert%20if%20denominator%20%3D%3D%200%2C%20unlike%20the%20div%20opcode%20on%20its%20own.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20The%20surrounding%20unchecked%20block%20does%20not%20change%20this%20fact.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20See%20https%3A%2F%2Fdocs.soliditylang.org%2Fen%2Flatest%2Fcontrol-structures.html%23checked-or-unchecked-arithmetic.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20prod0%20%2F%20denominator%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Make%20sure%20the%20result%20is%20less%20than%202%C2%B2%E2%81%B5%E2%81%B6.%20Also%20prevents%20denominator%20%3D%3D%200.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28denominator%20%3C%3D%20prod1%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Panic.panic%28ternary%28denominator%20%3D%3D%200%2C%20Panic.DIVISION_BY_ZERO%2C%20Panic.UNDER_OVERFLOW%29%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20512%20by%20256%20division.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Make%20division%20exact%20by%20subtracting%20the%20remainder%20from%20%5Bprod1%20prod0%5D.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20remainder%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Compute%20remainder%20using%20mulmod.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remainder%20%3A%3D%20mulmod%28x%2C%20y%2C%20denominator%29%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Subtract%20256%20bit%20number%20from%20512%20bit%20number.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20prod1%20%3A%3D%20sub%28prod1%2C%20gt%28remainder%2C%20prod0%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20prod0%20%3A%3D%20sub%28prod0%2C%20remainder%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Factor%20powers%20of%20two%20out%20of%20denominator%20and%20compute%20largest%20power%20of%20two%20divisor%20of%20denominator.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Always%20%3E%3D%201.%20See%20https%3A%2F%2Fcs.stackexchange.com%2Fq%2F138556%2F92363.%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20twos%20%3D%20denominator%20%26%20%280%20-%20denominator%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Divide%20denominator%20by%20twos.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20denominator%20%3A%3D%20div%28denominator%2C%20twos%29%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Divide%20%5Bprod1%20prod0%5D%20by%20twos.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20prod0%20%3A%3D%20div%28prod0%2C%20twos%29%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Flip%20twos%20such%20that%20it%20is%202%C2%B2%E2%81%B5%E2%81%B6%20%2F%20twos.%20If%20twos%20is%20zero%2C%20then%20it%20becomes%20one.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20twos%20%3A%3D%20add%28div%28sub%280%2C%20twos%29%2C%20twos%29%2C%201%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Shift%20in%20bits%20from%20prod1%20into%20prod0.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20prod0%20%7C%3D%20prod1%20%2A%20twos%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Invert%20denominator%20mod%202%C2%B2%E2%81%B5%E2%81%B6.%20Now%20that%20denominator%20is%20an%20odd%20number%2C%20it%20has%20an%20inverse%20modulo%202%C2%B2%E2%81%B5%E2%81%B6%20such%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20that%20denominator%20%2A%20inv%20%E2%89%A1%201%20mod%202%C2%B2%E2%81%B5%E2%81%B6.%20Compute%20the%20inverse%20by%20starting%20with%20a%20seed%20that%20is%20correct%20for%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20four%20bits.%20That%20is%2C%20denominator%20%2A%20inv%20%E2%89%A1%201%20mod%202%E2%81%B4.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20inverse%20%3D%20%283%20%2A%20denominator%29%20%5E%202%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Use%20the%20Newton-Raphson%20iteration%20to%20improve%20the%20precision.%20Thanks%20to%20Hensel%27s%20lifting%20lemma%2C%20this%20also%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20works%20in%20modular%20arithmetic%2C%20doubling%20the%20correct%20bits%20in%20each%20step.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20inverse%20%2A%3D%202%20-%20denominator%20%2A%20inverse%3B%20%2F%2F%20inverse%20mod%202%E2%81%B8%5Cn%20%20%20%20%20%20%20%20%20%20%20%20inverse%20%2A%3D%202%20-%20denominator%20%2A%20inverse%3B%20%2F%2F%20inverse%20mod%202%C2%B9%E2%81%B6%5Cn%20%20%20%20%20%20%20%20%20%20%20%20inverse%20%2A%3D%202%20-%20denominator%20%2A%20inverse%3B%20%2F%2F%20inverse%20mod%202%C2%B3%C2%B2%5Cn%20%20%20%20%20%20%20%20%20%20%20%20inverse%20%2A%3D%202%20-%20denominator%20%2A%20inverse%3B%20%2F%2F%20inverse%20mod%202%E2%81%B6%E2%81%B4%5Cn%20%20%20%20%20%20%20%20%20%20%20%20inverse%20%2A%3D%202%20-%20denominator%20%2A%20inverse%3B%20%2F%2F%20inverse%20mod%202%C2%B9%C2%B2%E2%81%B8%5Cn%20%20%20%20%20%20%20%20%20%20%20%20inverse%20%2A%3D%202%20-%20denominator%20%2A%20inverse%3B%20%2F%2F%20inverse%20mod%202%C2%B2%E2%81%B5%E2%81%B6%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Because%20the%20division%20is%20now%20exact%20we%20can%20divide%20by%20multiplying%20with%20the%20modular%20inverse%20of%20denominator.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20This%20will%20give%20us%20the%20correct%20result%20modulo%202%C2%B2%E2%81%B5%E2%81%B6.%20Since%20the%20preconditions%20guarantee%20that%20the%20outcome%20is%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20less%20than%202%C2%B2%E2%81%B5%E2%81%B6%2C%20this%20is%20the%20final%20result.%20We%20don%27t%20need%20to%20compute%20the%20high%20bits%20of%20the%20result%20and%20prod1%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20is%20no%20longer%20required.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20prod0%20%2A%20inverse%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20result%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Calculates%20x%20%2A%20y%20%2F%20denominator%20with%20full%20precision%2C%20following%20the%20selected%20rounding%20direction.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20mulDiv%28uint256%20x%2C%20uint256%20y%2C%20uint256%20denominator%2C%20Rounding%20rounding%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20mulDiv%28x%2C%20y%2C%20denominator%29%20%2B%20SafeCast.toUint%28unsignedRoundsUp%28rounding%29%20%26%26%20mulmod%28x%2C%20y%2C%20denominator%29%20%3E%200%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Calculate%20the%20modular%20multiplicative%20inverse%20of%20a%20number%20in%20Z%2FnZ.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20If%20n%20is%20a%20prime%2C%20then%20Z%2FnZ%20is%20a%20field.%20In%20that%20case%20all%20elements%20are%20inversible%2C%20except%200.%5Cn%20%20%20%20%20%2A%20If%20n%20is%20not%20a%20prime%2C%20then%20Z%2FnZ%20is%20not%20a%20field%2C%20and%20some%20elements%20might%20not%20be%20inversible.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20If%20the%20input%20value%20is%20not%20inversible%2C%200%20is%20returned.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20If%20you%20know%20for%20sure%20that%20n%20is%20%28big%29%20a%20prime%2C%20it%20may%20be%20cheaper%20to%20use%20Fermat%27s%20little%20theorem%20and%20get%20the%5Cn%20%20%20%20%20%2A%20inverse%20using%20%60Math.modExp%28a%2C%20n%20-%202%2C%20n%29%60.%20See%20%7BinvModPrime%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20invMod%28uint256%20a%2C%20uint256%20n%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28n%20%3D%3D%200%29%20return%200%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20The%20inverse%20modulo%20is%20calculated%20using%20the%20Extended%20Euclidean%20Algorithm%20%28iterative%20version%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Used%20to%20compute%20integers%20x%20and%20y%20such%20that%3A%20ax%20%2B%20ny%20%3D%20gcd%28a%2C%20n%29.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20When%20the%20gcd%20is%201%2C%20then%20the%20inverse%20of%20a%20modulo%20n%20exists%20and%20it%27s%20x.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20ax%20%2B%20ny%20%3D%201%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20ax%20%3D%201%20%2B%20%28-y%29n%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20ax%20%E2%89%A1%201%20%28mod%20n%29%20%23%20x%20is%20the%20inverse%20of%20a%20modulo%20n%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20the%20remainder%20is%200%20the%20gcd%20is%20n%20right%20away.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20remainder%20%3D%20a%20%25%20n%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20gcd%20%3D%20n%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Therefore%20the%20initial%20coefficients%20are%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20ax%20%2B%20ny%20%3D%20gcd%28a%2C%20n%29%20%3D%20n%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%200a%20%2B%201n%20%3D%20n%5Cn%20%20%20%20%20%20%20%20%20%20%20%20int256%20x%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20int256%20y%20%3D%201%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20while%20%28remainder%20%21%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uint256%20quotient%20%3D%20gcd%20%2F%20remainder%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28gcd%2C%20remainder%29%20%3D%20%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20The%20old%20remainder%20is%20the%20next%20gcd%20to%20try.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remainder%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Compute%20the%20next%20remainder.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Can%27t%20overflow%20given%20that%20%28a%20%25%20gcd%29%20%2A%20%28gcd%20%2F%2F%20%28a%20%25%20gcd%29%29%20%3C%3D%20gcd%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20where%20gcd%20is%20at%20most%20n%20%28capped%20to%20type%28uint256%29.max%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gcd%20-%20remainder%20%2A%20quotient%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28x%2C%20y%29%20%3D%20%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Increment%20the%20coefficient%20of%20a.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Decrement%20the%20coefficient%20of%20n.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Can%20overflow%2C%20but%20the%20result%20is%20casted%20to%20uint256%20so%20that%20the%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20next%20value%20of%20y%20is%20%5C%22wrapped%20around%5C%22%20to%20a%20value%20between%200%20and%20n%20-%201.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%20-%20y%20%2A%20int256%28quotient%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28gcd%20%21%3D%201%29%20return%200%3B%20%2F%2F%20No%20inverse%20exists.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20ternary%28x%20%3C%200%2C%20n%20-%20uint256%28-x%29%2C%20uint256%28x%29%29%3B%20%2F%2F%20Wrap%20the%20result%20if%20it%27s%20negative.%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Variant%20of%20%7BinvMod%7D.%20More%20efficient%2C%20but%20only%20works%20if%20%60p%60%20is%20known%20to%20be%20a%20prime%20greater%20than%20%602%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20From%20https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FFermat%2527s_little_theorem%5BFermat%27s%20little%20theorem%5D%2C%20we%20know%20that%20if%20p%20is%5Cn%20%20%20%20%20%2A%20prime%2C%20then%20%60a%2A%2A%28p-1%29%20%E2%89%A1%201%20mod%20p%60.%20As%20a%20consequence%2C%20we%20have%20%60a%20%2A%20a%2A%2A%28p-2%29%20%E2%89%A1%201%20mod%20p%60%2C%20which%20means%20that%5Cn%20%20%20%20%20%2A%20%60a%2A%2A%28p-2%29%60%20is%20the%20modular%20multiplicative%20inverse%20of%20a%20in%20Fp.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20this%20function%20does%20NOT%20check%20that%20%60p%60%20is%20a%20prime%20greater%20than%20%602%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20invModPrime%28uint256%20a%2C%20uint256%20p%29%20internal%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20Math.modExp%28a%2C%20p%20-%202%2C%20p%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20modular%20exponentiation%20of%20the%20specified%20base%2C%20exponent%20and%20modulus%20%28b%20%2A%2A%20e%20%25%20m%29%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%20-%20modulus%20can%27t%20be%20zero%5Cn%20%20%20%20%20%2A%20-%20underlying%20staticcall%20to%20precompile%20must%20succeed%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20IMPORTANT%3A%20The%20result%20is%20only%20valid%20if%20the%20underlying%20call%20succeeds.%20When%20using%20this%20function%2C%20make%5Cn%20%20%20%20%20%2A%20sure%20the%20chain%20you%27re%20using%20it%20on%20supports%20the%20precompiled%20contract%20for%20modular%20exponentiation%5Cn%20%20%20%20%20%2A%20at%20address%200x05%20as%20specified%20in%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-198%5BEIP-198%5D.%20Otherwise%2C%5Cn%20%20%20%20%20%2A%20the%20underlying%20function%20will%20succeed%20given%20the%20lack%20of%20a%20revert%2C%20but%20the%20result%20may%20be%20incorrectly%5Cn%20%20%20%20%20%2A%20interpreted%20as%200.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20modExp%28uint256%20b%2C%20uint256%20e%2C%20uint256%20m%29%20internal%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20%28bool%20success%2C%20uint256%20result%29%20%3D%20tryModExp%28b%2C%20e%2C%20m%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28%21success%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20Panic.panic%28Panic.DIVISION_BY_ZERO%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20result%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20modular%20exponentiation%20of%20the%20specified%20base%2C%20exponent%20and%20modulus%20%28b%20%2A%2A%20e%20%25%20m%29.%5Cn%20%20%20%20%20%2A%20It%20includes%20a%20success%20flag%20indicating%20if%20the%20operation%20succeeded.%20Operation%20will%20be%20marked%20as%20failed%20if%20trying%5Cn%20%20%20%20%20%2A%20to%20operate%20modulo%200%20or%20if%20the%20underlying%20precompile%20reverted.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20IMPORTANT%3A%20The%20result%20is%20only%20valid%20if%20the%20success%20flag%20is%20true.%20When%20using%20this%20function%2C%20make%20sure%20the%20chain%5Cn%20%20%20%20%20%2A%20you%27re%20using%20it%20on%20supports%20the%20precompiled%20contract%20for%20modular%20exponentiation%20at%20address%200x05%20as%20specified%20in%5Cn%20%20%20%20%20%2A%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-198%5BEIP-198%5D.%20Otherwise%2C%20the%20underlying%20function%20will%20succeed%20given%20the%20lack%5Cn%20%20%20%20%20%2A%20of%20a%20revert%2C%20but%20the%20result%20may%20be%20incorrectly%20interpreted%20as%200.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20tryModExp%28uint256%20b%2C%20uint256%20e%2C%20uint256%20m%29%20internal%20view%20returns%20%28bool%20success%2C%20uint256%20result%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28m%20%3D%3D%200%29%20return%20%28false%2C%200%29%3B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20let%20ptr%20%3A%3D%20mload%280x40%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7C%20Offset%20%20%20%20%7C%20Content%20%20%20%20%7C%20Content%20%28Hex%29%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7C-----------%7C------------%7C--------------------------------------------------------------------%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7C%200x00%3A0x1f%20%7C%20size%20of%20b%20%20%7C%200x0000000000000000000000000000000000000000000000000000000000000020%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7C%200x20%3A0x3f%20%7C%20size%20of%20e%20%20%7C%200x0000000000000000000000000000000000000000000000000000000000000020%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7C%200x40%3A0x5f%20%7C%20size%20of%20m%20%20%7C%200x0000000000000000000000000000000000000000000000000000000000000020%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7C%200x60%3A0x7f%20%7C%20value%20of%20b%20%7C%200x%3C.............................................................b%3E%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7C%200x80%3A0x9f%20%7C%20value%20of%20e%20%7C%200x%3C.............................................................e%3E%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7C%200xa0%3A0xbf%20%7C%20value%20of%20m%20%7C%200x%3C.............................................................m%3E%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28ptr%2C%200x20%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28ptr%2C%200x20%29%2C%200x20%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28ptr%2C%200x40%29%2C%200x20%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28ptr%2C%200x60%29%2C%20b%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28ptr%2C%200x80%29%2C%20e%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28ptr%2C%200xa0%29%2C%20m%29%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Given%20the%20result%20%3C%20m%2C%20it%27s%20guaranteed%20to%20fit%20in%2032%20bytes%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20so%20we%20can%20use%20the%20memory%20scratch%20space%20located%20at%20offset%200.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20success%20%3A%3D%20staticcall%28gas%28%29%2C%200x05%2C%20ptr%2C%200xc0%2C%200x00%2C%200x20%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20mload%280x00%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Variant%20of%20%7BmodExp%7D%20that%20supports%20inputs%20of%20arbitrary%20length.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20modExp%28bytes%20memory%20b%2C%20bytes%20memory%20e%2C%20bytes%20memory%20m%29%20internal%20view%20returns%20%28bytes%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20%28bool%20success%2C%20bytes%20memory%20result%29%20%3D%20tryModExp%28b%2C%20e%2C%20m%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28%21success%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20Panic.panic%28Panic.DIVISION_BY_ZERO%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20result%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Variant%20of%20%7BtryModExp%7D%20that%20supports%20inputs%20of%20arbitrary%20length.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20tryModExp%28%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20b%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20e%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20m%5Cn%20%20%20%20%29%20internal%20view%20returns%20%28bool%20success%2C%20bytes%20memory%20result%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28_zeroBytes%28m%29%29%20return%20%28false%2C%20new%20bytes%280%29%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20uint256%20mLen%20%3D%20m.length%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Encode%20call%20args%20in%20result%20and%20move%20the%20free%20memory%20pointer%5Cn%20%20%20%20%20%20%20%20result%20%3D%20abi.encodePacked%28b.length%2C%20e.length%2C%20mLen%2C%20b%2C%20e%2C%20m%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20let%20dataPtr%20%3A%3D%20add%28result%2C%200x20%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Write%20result%20on%20top%20of%20args%20to%20avoid%20allocating%20extra%20memory.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20success%20%3A%3D%20staticcall%28gas%28%29%2C%200x05%2C%20dataPtr%2C%20mload%28result%29%2C%20dataPtr%2C%20mLen%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Overwrite%20the%20length.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20result.length%20%3E%20returndatasize%28%29%20is%20guaranteed%20because%20returndatasize%28%29%20%3D%3D%20m.length%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28result%2C%20mLen%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Set%20the%20memory%20pointer%20after%20the%20returned%20data.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280x40%2C%20add%28dataPtr%2C%20mLen%29%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20whether%20the%20provided%20byte%20array%20is%20zero.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_zeroBytes%28bytes%20memory%20byteArray%29%20private%20pure%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20byteArray.length%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28byteArray%5Bi%5D%20%21%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20true%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20square%20root%20of%20a%20number.%20If%20the%20number%20is%20not%20a%20perfect%20square%2C%20the%20value%20is%20rounded%5Cn%20%20%20%20%20%2A%20towards%20zero.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20method%20is%20based%20on%20Newton%27s%20method%20for%20computing%20square%20roots%3B%20the%20algorithm%20is%20restricted%20to%20only%5Cn%20%20%20%20%20%2A%20using%20integer%20operations.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20sqrt%28uint256%20a%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Take%20care%20of%20easy%20edge%20cases%20when%20a%20%3D%3D%200%20or%20a%20%3D%3D%201%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28a%20%3C%3D%201%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20a%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20In%20this%20function%2C%20we%20use%20Newton%27s%20method%20to%20get%20a%20root%20of%20%60f%28x%29%20%3A%3D%20x%C2%B2%20-%20a%60.%20It%20involves%20building%20a%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20sequence%20x_n%20that%20converges%20toward%20sqrt%28a%29.%20For%20each%20iteration%20x_n%2C%20we%20also%20define%20the%20error%20between%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20the%20current%20value%20as%20%60%CE%B5_n%20%3D%20%7C%20x_n%20-%20sqrt%28a%29%20%7C%60.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20For%20our%20first%20estimation%2C%20we%20consider%20%60e%60%20the%20smallest%20power%20of%202%20which%20is%20bigger%20than%20the%20square%20root%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20of%20the%20target.%20%28i.e.%20%602%2A%2A%28e-1%29%20%E2%89%A4%20sqrt%28a%29%20%3C%202%2A%2Ae%60%29.%20We%20know%20that%20%60e%20%E2%89%A4%20128%60%20because%20%60%282%C2%B9%C2%B2%E2%81%B8%29%C2%B2%20%3D%202%C2%B2%E2%81%B5%E2%81%B6%60%20is%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20bigger%20than%20any%20uint256.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20By%20noticing%20that%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%602%2A%2A%28e-1%29%20%E2%89%A4%20sqrt%28a%29%20%3C%202%2A%2Ae%20%E2%86%92%20%282%2A%2A%28e-1%29%29%C2%B2%20%E2%89%A4%20a%20%3C%20%282%2A%2Ae%29%C2%B2%20%E2%86%92%202%2A%2A%282%2Ae-2%29%20%E2%89%A4%20a%20%3C%202%2A%2A%282%2Ae%29%60%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20we%20can%20deduce%20that%20%60e%20-%201%60%20is%20%60log2%28a%29%20%2F%202%60.%20We%20can%20thus%20compute%20%60x_n%20%3D%202%2A%2A%28e-1%29%60%20using%20a%20method%20similar%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20to%20the%20msb%20function.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20aa%20%3D%20a%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20xn%20%3D%201%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28aa%20%3E%3D%20%281%20%3C%3C%20128%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20aa%20%3E%3E%3D%20128%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xn%20%3C%3C%3D%2064%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28aa%20%3E%3D%20%281%20%3C%3C%2064%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20aa%20%3E%3E%3D%2064%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xn%20%3C%3C%3D%2032%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28aa%20%3E%3D%20%281%20%3C%3C%2032%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20aa%20%3E%3E%3D%2032%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xn%20%3C%3C%3D%2016%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28aa%20%3E%3D%20%281%20%3C%3C%2016%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20aa%20%3E%3E%3D%2016%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xn%20%3C%3C%3D%208%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28aa%20%3E%3D%20%281%20%3C%3C%208%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20aa%20%3E%3E%3D%208%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xn%20%3C%3C%3D%204%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28aa%20%3E%3D%20%281%20%3C%3C%204%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20aa%20%3E%3E%3D%204%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xn%20%3C%3C%3D%202%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28aa%20%3E%3D%20%281%20%3C%3C%202%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xn%20%3C%3C%3D%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20We%20now%20have%20x_n%20such%20that%20%60x_n%20%3D%202%2A%2A%28e-1%29%20%E2%89%A4%20sqrt%28a%29%20%3C%202%2A%2Ae%20%3D%202%20%2A%20x_n%60.%20This%20implies%20%CE%B5_n%20%E2%89%A4%202%2A%2A%28e-1%29.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20We%20can%20refine%20our%20estimation%20by%20noticing%20that%20the%20middle%20of%20that%20interval%20minimizes%20the%20error.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20we%20move%20x_n%20to%20equal%202%2A%2A%28e-1%29%20%2B%202%2A%2A%28e-2%29%2C%20then%20we%20reduce%20the%20error%20to%20%CE%B5_n%20%E2%89%A4%202%2A%2A%28e-2%29.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20This%20is%20going%20to%20be%20our%20x_0%20%28and%20%CE%B5_0%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20xn%20%3D%20%283%20%2A%20xn%29%20%3E%3E%201%3B%20%2F%2F%20%CE%B5_0%20%3A%3D%20%7C%20x_0%20-%20sqrt%28a%29%20%7C%20%E2%89%A4%202%2A%2A%28e-2%29%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20From%20here%2C%20Newton%27s%20method%20give%20us%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20x_%7Bn%2B1%7D%20%3D%20%28x_n%20%2B%20a%20%2F%20x_n%29%20%2F%202%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20One%20should%20note%20that%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20x_%7Bn%2B1%7D%C2%B2%20-%20a%20%3D%20%28%28x_n%20%2B%20a%20%2F%20x_n%29%20%2F%202%29%C2%B2%20-%20a%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3D%20%28%28x_n%C2%B2%20%2B%20a%29%20%2F%20%282%20%2A%20x_n%29%29%C2%B2%20-%20a%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3D%20%28x_n%E2%81%B4%20%2B%202%20%2A%20a%20%2A%20x_n%C2%B2%20%2B%20a%C2%B2%29%20%2F%20%284%20%2A%20x_n%C2%B2%29%20-%20a%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3D%20%28x_n%E2%81%B4%20%2B%202%20%2A%20a%20%2A%20x_n%C2%B2%20%2B%20a%C2%B2%20-%204%20%2A%20a%20%2A%20x_n%C2%B2%29%20%2F%20%284%20%2A%20x_n%C2%B2%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3D%20%28x_n%E2%81%B4%20-%202%20%2A%20a%20%2A%20x_n%C2%B2%20%2B%20a%C2%B2%29%20%2F%20%284%20%2A%20x_n%C2%B2%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3D%20%28x_n%C2%B2%20-%20a%29%C2%B2%20%2F%20%282%20%2A%20x_n%29%C2%B2%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3D%20%28%28x_n%C2%B2%20-%20a%29%20%2F%20%282%20%2A%20x_n%29%29%C2%B2%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%E2%89%A5%200%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Which%20proves%20that%20for%20all%20n%20%E2%89%A5%201%2C%20sqrt%28a%29%20%E2%89%A4%20x_n%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20This%20gives%20us%20the%20proof%20of%20quadratic%20convergence%20of%20the%20sequence%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%CE%B5_%7Bn%2B1%7D%20%3D%20%7C%20x_%7Bn%2B1%7D%20-%20sqrt%28a%29%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%3D%20%7C%20%28x_n%20%2B%20a%20%2F%20x_n%29%20%2F%202%20-%20sqrt%28a%29%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%3D%20%7C%20%28x_n%C2%B2%20%2B%20a%20-%202%2Ax_n%2Asqrt%28a%29%29%20%2F%20%282%20%2A%20x_n%29%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%3D%20%7C%20%28x_n%20-%20sqrt%28a%29%29%C2%B2%20%2F%20%282%20%2A%20x_n%29%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%3D%20%7C%20%CE%B5_n%C2%B2%20%2F%20%282%20%2A%20x_n%29%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%3D%20%CE%B5_n%C2%B2%20%2F%20%7C%20%282%20%2A%20x_n%29%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20For%20the%20first%20iteration%2C%20we%20have%20a%20special%20case%20where%20x_0%20is%20known%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%CE%B5_1%20%3D%20%CE%B5_0%C2%B2%20%2F%20%7C%20%282%20%2A%20x_0%29%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%E2%89%A4%20%282%2A%2A%28e-2%29%29%C2%B2%20%2F%20%282%20%2A%20%282%2A%2A%28e-1%29%20%2B%202%2A%2A%28e-2%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%E2%89%A4%202%2A%2A%282%2Ae-4%29%20%2F%20%283%20%2A%202%2A%2A%28e-1%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%E2%89%A4%202%2A%2A%28e-3%29%20%2F%203%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%E2%89%A4%202%2A%2A%28e-3-log2%283%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%E2%89%A4%202%2A%2A%28e-4.5%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20For%20the%20following%20iterations%2C%20we%20use%20the%20fact%20that%2C%202%2A%2A%28e-1%29%20%E2%89%A4%20sqrt%28a%29%20%E2%89%A4%20x_n%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%CE%B5_%7Bn%2B1%7D%20%3D%20%CE%B5_n%C2%B2%20%2F%20%7C%20%282%20%2A%20x_n%29%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%E2%89%A4%20%282%2A%2A%28e-k%29%29%C2%B2%20%2F%20%282%20%2A%202%2A%2A%28e-1%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%E2%89%A4%202%2A%2A%282%2Ae-2%2Ak%29%20%2F%202%2A%2Ae%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%E2%89%A4%202%2A%2A%28e-2%2Ak%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20xn%20%3D%20%28xn%20%2B%20a%20%2F%20xn%29%20%3E%3E%201%3B%20%2F%2F%20%CE%B5_1%20%3A%3D%20%7C%20x_1%20-%20sqrt%28a%29%20%7C%20%E2%89%A4%202%2A%2A%28e-4.5%29%20%20--%20special%20case%2C%20see%20above%5Cn%20%20%20%20%20%20%20%20%20%20%20%20xn%20%3D%20%28xn%20%2B%20a%20%2F%20xn%29%20%3E%3E%201%3B%20%2F%2F%20%CE%B5_2%20%3A%3D%20%7C%20x_2%20-%20sqrt%28a%29%20%7C%20%E2%89%A4%202%2A%2A%28e-9%29%20%20%20%20--%20general%20case%20with%20k%20%3D%204.5%5Cn%20%20%20%20%20%20%20%20%20%20%20%20xn%20%3D%20%28xn%20%2B%20a%20%2F%20xn%29%20%3E%3E%201%3B%20%2F%2F%20%CE%B5_3%20%3A%3D%20%7C%20x_3%20-%20sqrt%28a%29%20%7C%20%E2%89%A4%202%2A%2A%28e-18%29%20%20%20--%20general%20case%20with%20k%20%3D%209%5Cn%20%20%20%20%20%20%20%20%20%20%20%20xn%20%3D%20%28xn%20%2B%20a%20%2F%20xn%29%20%3E%3E%201%3B%20%2F%2F%20%CE%B5_4%20%3A%3D%20%7C%20x_4%20-%20sqrt%28a%29%20%7C%20%E2%89%A4%202%2A%2A%28e-36%29%20%20%20--%20general%20case%20with%20k%20%3D%2018%5Cn%20%20%20%20%20%20%20%20%20%20%20%20xn%20%3D%20%28xn%20%2B%20a%20%2F%20xn%29%20%3E%3E%201%3B%20%2F%2F%20%CE%B5_5%20%3A%3D%20%7C%20x_5%20-%20sqrt%28a%29%20%7C%20%E2%89%A4%202%2A%2A%28e-72%29%20%20%20--%20general%20case%20with%20k%20%3D%2036%5Cn%20%20%20%20%20%20%20%20%20%20%20%20xn%20%3D%20%28xn%20%2B%20a%20%2F%20xn%29%20%3E%3E%201%3B%20%2F%2F%20%CE%B5_6%20%3A%3D%20%7C%20x_6%20-%20sqrt%28a%29%20%7C%20%E2%89%A4%202%2A%2A%28e-144%29%20%20--%20general%20case%20with%20k%20%3D%2072%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Because%20e%20%E2%89%A4%20128%20%28as%20discussed%20during%20the%20first%20estimation%20phase%29%2C%20we%20know%20have%20reached%20a%20precision%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%CE%B5_6%20%E2%89%A4%202%2A%2A%28e-144%29%20%3C%201.%20Given%20we%27re%20operating%20on%20integers%2C%20then%20we%20can%20ensure%20that%20xn%20is%20now%20either%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20sqrt%28a%29%20or%20sqrt%28a%29%20%2B%201.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20xn%20-%20SafeCast.toUint%28xn%20%3E%20a%20%2F%20xn%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Calculates%20sqrt%28a%29%2C%20following%20the%20selected%20rounding%20direction.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20sqrt%28uint256%20a%2C%20Rounding%20rounding%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20result%20%3D%20sqrt%28a%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20result%20%2B%20SafeCast.toUint%28unsignedRoundsUp%28rounding%29%20%26%26%20result%20%2A%20result%20%3C%20a%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Return%20the%20log%20in%20base%202%20of%20a%20positive%20value%20rounded%20towards%20zero.%5Cn%20%20%20%20%20%2A%20Returns%200%20if%20given%200.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20log2%28uint256%20value%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20result%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20uint256%20exp%3B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20exp%20%3D%20128%20%2A%20SafeCast.toUint%28value%20%3E%20%281%20%3C%3C%20128%29%20-%201%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20value%20%3E%3E%3D%20exp%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%20exp%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20exp%20%3D%2064%20%2A%20SafeCast.toUint%28value%20%3E%20%281%20%3C%3C%2064%29%20-%201%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20value%20%3E%3E%3D%20exp%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%20exp%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20exp%20%3D%2032%20%2A%20SafeCast.toUint%28value%20%3E%20%281%20%3C%3C%2032%29%20-%201%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20value%20%3E%3E%3D%20exp%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%20exp%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20exp%20%3D%2016%20%2A%20SafeCast.toUint%28value%20%3E%20%281%20%3C%3C%2016%29%20-%201%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20value%20%3E%3E%3D%20exp%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%20exp%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20exp%20%3D%208%20%2A%20SafeCast.toUint%28value%20%3E%20%281%20%3C%3C%208%29%20-%201%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20value%20%3E%3E%3D%20exp%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%20exp%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20exp%20%3D%204%20%2A%20SafeCast.toUint%28value%20%3E%20%281%20%3C%3C%204%29%20-%201%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20value%20%3E%3E%3D%20exp%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%20exp%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20exp%20%3D%202%20%2A%20SafeCast.toUint%28value%20%3E%20%281%20%3C%3C%202%29%20-%201%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20value%20%3E%3E%3D%20exp%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%20exp%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%20SafeCast.toUint%28value%20%3E%201%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20result%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Return%20the%20log%20in%20base%202%2C%20following%20the%20selected%20rounding%20direction%2C%20of%20a%20positive%20value.%5Cn%20%20%20%20%20%2A%20Returns%200%20if%20given%200.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20log2%28uint256%20value%2C%20Rounding%20rounding%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20result%20%3D%20log2%28value%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20result%20%2B%20SafeCast.toUint%28unsignedRoundsUp%28rounding%29%20%26%26%201%20%3C%3C%20result%20%3C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Return%20the%20log%20in%20base%2010%20of%20a%20positive%20value%20rounded%20towards%20zero.%5Cn%20%20%20%20%20%2A%20Returns%200%20if%20given%200.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20log10%28uint256%20value%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20result%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28value%20%3E%3D%2010%20%2A%2A%2064%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%20%2F%3D%2010%20%2A%2A%2064%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%2064%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28value%20%3E%3D%2010%20%2A%2A%2032%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%20%2F%3D%2010%20%2A%2A%2032%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%2032%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28value%20%3E%3D%2010%20%2A%2A%2016%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%20%2F%3D%2010%20%2A%2A%2016%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%2016%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28value%20%3E%3D%2010%20%2A%2A%208%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%20%2F%3D%2010%20%2A%2A%208%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%208%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28value%20%3E%3D%2010%20%2A%2A%204%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%20%2F%3D%2010%20%2A%2A%204%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%204%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28value%20%3E%3D%2010%20%2A%2A%202%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%20%2F%3D%2010%20%2A%2A%202%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%202%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28value%20%3E%3D%2010%20%2A%2A%201%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20result%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Return%20the%20log%20in%20base%2010%2C%20following%20the%20selected%20rounding%20direction%2C%20of%20a%20positive%20value.%5Cn%20%20%20%20%20%2A%20Returns%200%20if%20given%200.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20log10%28uint256%20value%2C%20Rounding%20rounding%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20result%20%3D%20log10%28value%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20result%20%2B%20SafeCast.toUint%28unsignedRoundsUp%28rounding%29%20%26%26%2010%20%2A%2A%20result%20%3C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Return%20the%20log%20in%20base%20256%20of%20a%20positive%20value%20rounded%20towards%20zero.%5Cn%20%20%20%20%20%2A%20Returns%200%20if%20given%200.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Adding%20one%20to%20the%20result%20gives%20the%20number%20of%20pairs%20of%20hex%20symbols%20needed%20to%20represent%20%60value%60%20as%20a%20hex%20string.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20log256%28uint256%20value%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20result%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20uint256%20isGt%3B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20isGt%20%3D%20SafeCast.toUint%28value%20%3E%20%281%20%3C%3C%20128%29%20-%201%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20value%20%3E%3E%3D%20isGt%20%2A%20128%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%20isGt%20%2A%2016%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20isGt%20%3D%20SafeCast.toUint%28value%20%3E%20%281%20%3C%3C%2064%29%20-%201%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20value%20%3E%3E%3D%20isGt%20%2A%2064%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%20isGt%20%2A%208%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20isGt%20%3D%20SafeCast.toUint%28value%20%3E%20%281%20%3C%3C%2032%29%20-%201%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20value%20%3E%3E%3D%20isGt%20%2A%2032%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%20isGt%20%2A%204%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20isGt%20%3D%20SafeCast.toUint%28value%20%3E%20%281%20%3C%3C%2016%29%20-%201%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20value%20%3E%3E%3D%20isGt%20%2A%2016%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%20isGt%20%2A%202%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%20SafeCast.toUint%28value%20%3E%20%281%20%3C%3C%208%29%20-%201%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20result%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Return%20the%20log%20in%20base%20256%2C%20following%20the%20selected%20rounding%20direction%2C%20of%20a%20positive%20value.%5Cn%20%20%20%20%20%2A%20Returns%200%20if%20given%200.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20log256%28uint256%20value%2C%20Rounding%20rounding%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20result%20%3D%20log256%28value%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20result%20%2B%20SafeCast.toUint%28unsignedRoundsUp%28rounding%29%20%26%26%201%20%3C%3C%20%28result%20%3C%3C%203%29%20%3C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20whether%20a%20provided%20rounding%20mode%20is%20considered%20rounding%20up%20for%20unsigned%20integers.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20unsignedRoundsUp%28Rounding%20rounding%29%20internal%20pure%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20uint8%28rounding%29%20%25%202%20%3D%3D%201%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2Fmath%2FSafeCast.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2Fmath%2FSafeCast.sol%29%5Cn%2F%2F%20This%20file%20was%20procedurally%20generated%20from%20scripts%2Fgenerate%2Ftemplates%2FSafeCast.js.%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Wrappers%20over%20Solidity%27s%20uintXX%2FintXX%2Fbool%20casting%20operators%20with%20added%20overflow%5Cn%20%2A%20checks.%5Cn%20%2A%5Cn%20%2A%20Downcasting%20from%20uint256%2Fint256%20in%20Solidity%20does%20not%20revert%20on%20overflow.%20This%20can%5Cn%20%2A%20easily%20result%20in%20undesired%20exploitation%20or%20bugs%2C%20since%20developers%20usually%5Cn%20%2A%20assume%20that%20overflows%20raise%20errors.%20%60SafeCast%60%20restores%20this%20intuition%20by%5Cn%20%2A%20reverting%20the%20transaction%20when%20such%20an%20operation%20overflows.%5Cn%20%2A%5Cn%20%2A%20Using%20this%20library%20instead%20of%20the%20unchecked%20operations%20eliminates%20an%20entire%5Cn%20%2A%20class%20of%20bugs%2C%20so%20it%27s%20recommended%20to%20use%20it%20always.%5Cn%20%2A%2F%5Cnlibrary%20SafeCast%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Value%20doesn%27t%20fit%20in%20an%20uint%20of%20%60bits%60%20size.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20SafeCastOverflowedUintDowncast%28uint8%20bits%2C%20uint256%20value%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20An%20int%20value%20doesn%27t%20fit%20in%20an%20uint%20of%20%60bits%60%20size.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20SafeCastOverflowedIntToUint%28int256%20value%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Value%20doesn%27t%20fit%20in%20an%20int%20of%20%60bits%60%20size.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20SafeCastOverflowedIntDowncast%28uint8%20bits%2C%20int256%20value%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20An%20uint%20value%20doesn%27t%20fit%20in%20an%20int%20of%20%60bits%60%20size.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20SafeCastOverflowedUintToInt%28uint256%20value%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint248%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint248%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint248%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20248%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint248%28uint256%20value%29%20internal%20pure%20returns%20%28uint248%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint248%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%28248%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint248%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint240%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint240%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint240%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20240%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint240%28uint256%20value%29%20internal%20pure%20returns%20%28uint240%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint240%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%28240%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint240%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint232%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint232%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint232%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20232%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint232%28uint256%20value%29%20internal%20pure%20returns%20%28uint232%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint232%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%28232%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint232%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint224%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint224%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint224%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20224%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint224%28uint256%20value%29%20internal%20pure%20returns%20%28uint224%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint224%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%28224%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint224%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint216%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint216%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint216%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20216%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint216%28uint256%20value%29%20internal%20pure%20returns%20%28uint216%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint216%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%28216%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint216%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint208%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint208%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint208%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20208%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint208%28uint256%20value%29%20internal%20pure%20returns%20%28uint208%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint208%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%28208%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint208%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint200%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint200%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint200%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20200%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint200%28uint256%20value%29%20internal%20pure%20returns%20%28uint200%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint200%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%28200%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint200%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint192%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint192%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint192%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20192%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint192%28uint256%20value%29%20internal%20pure%20returns%20%28uint192%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint192%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%28192%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint192%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint184%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint184%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint184%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20184%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint184%28uint256%20value%29%20internal%20pure%20returns%20%28uint184%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint184%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%28184%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint184%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint176%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint176%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint176%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20176%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint176%28uint256%20value%29%20internal%20pure%20returns%20%28uint176%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint176%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%28176%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint176%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint168%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint168%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint168%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20168%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint168%28uint256%20value%29%20internal%20pure%20returns%20%28uint168%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint168%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%28168%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint168%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint160%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint160%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint160%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20160%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint160%28uint256%20value%29%20internal%20pure%20returns%20%28uint160%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint160%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%28160%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint160%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint152%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint152%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint152%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20152%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint152%28uint256%20value%29%20internal%20pure%20returns%20%28uint152%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint152%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%28152%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint152%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint144%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint144%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint144%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20144%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint144%28uint256%20value%29%20internal%20pure%20returns%20%28uint144%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint144%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%28144%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint144%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint136%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint136%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint136%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20136%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint136%28uint256%20value%29%20internal%20pure%20returns%20%28uint136%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint136%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%28136%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint136%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint128%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint128%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint128%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20128%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint128%28uint256%20value%29%20internal%20pure%20returns%20%28uint128%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint128%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%28128%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint128%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint120%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint120%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint120%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20120%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint120%28uint256%20value%29%20internal%20pure%20returns%20%28uint120%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint120%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%28120%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint120%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint112%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint112%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint112%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20112%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint112%28uint256%20value%29%20internal%20pure%20returns%20%28uint112%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint112%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%28112%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint112%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint104%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint104%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint104%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20104%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint104%28uint256%20value%29%20internal%20pure%20returns%20%28uint104%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint104%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%28104%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint104%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint96%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint96%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint96%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%2096%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint96%28uint256%20value%29%20internal%20pure%20returns%20%28uint96%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint96%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%2896%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint96%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint88%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint88%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint88%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%2088%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint88%28uint256%20value%29%20internal%20pure%20returns%20%28uint88%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint88%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%2888%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint88%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint80%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint80%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint80%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%2080%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint80%28uint256%20value%29%20internal%20pure%20returns%20%28uint80%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint80%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%2880%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint80%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint72%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint72%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint72%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%2072%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint72%28uint256%20value%29%20internal%20pure%20returns%20%28uint72%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint72%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%2872%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint72%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint64%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint64%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint64%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%2064%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint64%28uint256%20value%29%20internal%20pure%20returns%20%28uint64%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint64%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%2864%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint64%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint56%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint56%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint56%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%2056%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint56%28uint256%20value%29%20internal%20pure%20returns%20%28uint56%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint56%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%2856%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint56%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint48%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint48%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint48%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%2048%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint48%28uint256%20value%29%20internal%20pure%20returns%20%28uint48%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint48%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%2848%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint48%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint40%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint40%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint40%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%2040%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint40%28uint256%20value%29%20internal%20pure%20returns%20%28uint40%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint40%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%2840%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint40%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint32%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint32%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint32%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%2032%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint32%28uint256%20value%29%20internal%20pure%20returns%20%28uint32%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint32%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%2832%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint32%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint24%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint24%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint24%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%2024%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint24%28uint256%20value%29%20internal%20pure%20returns%20%28uint24%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint24%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%2824%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint24%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint16%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint16%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint16%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%2016%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint16%28uint256%20value%29%20internal%20pure%20returns%20%28uint16%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint16%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%2816%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint16%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20uint8%20from%20uint256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20greater%20than%20largest%20uint8%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60uint8%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%208%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint8%28uint256%20value%29%20internal%20pure%20returns%20%28uint8%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20type%28uint8%29.max%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintDowncast%288%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint8%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Converts%20a%20signed%20int256%20into%20an%20unsigned%20uint256.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20be%20greater%20than%20or%20equal%20to%200.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint256%28int256%20value%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3C%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntToUint%28value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20uint256%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int248%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int248%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int248%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int248%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20248%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt248%28int256%20value%29%20internal%20pure%20returns%20%28int248%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int248%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%28248%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int240%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int240%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int240%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int240%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20240%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt240%28int256%20value%29%20internal%20pure%20returns%20%28int240%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int240%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%28240%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int232%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int232%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int232%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int232%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20232%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt232%28int256%20value%29%20internal%20pure%20returns%20%28int232%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int232%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%28232%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int224%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int224%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int224%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int224%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20224%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt224%28int256%20value%29%20internal%20pure%20returns%20%28int224%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int224%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%28224%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int216%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int216%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int216%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int216%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20216%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt216%28int256%20value%29%20internal%20pure%20returns%20%28int216%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int216%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%28216%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int208%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int208%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int208%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int208%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20208%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt208%28int256%20value%29%20internal%20pure%20returns%20%28int208%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int208%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%28208%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int200%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int200%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int200%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int200%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20200%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt200%28int256%20value%29%20internal%20pure%20returns%20%28int200%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int200%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%28200%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int192%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int192%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int192%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int192%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20192%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt192%28int256%20value%29%20internal%20pure%20returns%20%28int192%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int192%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%28192%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int184%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int184%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int184%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int184%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20184%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt184%28int256%20value%29%20internal%20pure%20returns%20%28int184%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int184%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%28184%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int176%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int176%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int176%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int176%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20176%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt176%28int256%20value%29%20internal%20pure%20returns%20%28int176%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int176%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%28176%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int168%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int168%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int168%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int168%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20168%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt168%28int256%20value%29%20internal%20pure%20returns%20%28int168%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int168%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%28168%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int160%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int160%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int160%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int160%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20160%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt160%28int256%20value%29%20internal%20pure%20returns%20%28int160%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int160%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%28160%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int152%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int152%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int152%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int152%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20152%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt152%28int256%20value%29%20internal%20pure%20returns%20%28int152%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int152%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%28152%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int144%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int144%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int144%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int144%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20144%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt144%28int256%20value%29%20internal%20pure%20returns%20%28int144%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int144%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%28144%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int136%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int136%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int136%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int136%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20136%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt136%28int256%20value%29%20internal%20pure%20returns%20%28int136%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int136%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%28136%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int128%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int128%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int128%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int128%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20128%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt128%28int256%20value%29%20internal%20pure%20returns%20%28int128%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int128%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%28128%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int120%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int120%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int120%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int120%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20120%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt120%28int256%20value%29%20internal%20pure%20returns%20%28int120%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int120%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%28120%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int112%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int112%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int112%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int112%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20112%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt112%28int256%20value%29%20internal%20pure%20returns%20%28int112%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int112%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%28112%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int104%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int104%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int104%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int104%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%20104%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt104%28int256%20value%29%20internal%20pure%20returns%20%28int104%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int104%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%28104%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int96%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int96%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int96%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int96%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%2096%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt96%28int256%20value%29%20internal%20pure%20returns%20%28int96%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int96%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%2896%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int88%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int88%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int88%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int88%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%2088%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt88%28int256%20value%29%20internal%20pure%20returns%20%28int88%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int88%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%2888%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int80%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int80%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int80%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int80%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%2080%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt80%28int256%20value%29%20internal%20pure%20returns%20%28int80%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int80%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%2880%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int72%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int72%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int72%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int72%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%2072%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt72%28int256%20value%29%20internal%20pure%20returns%20%28int72%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int72%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%2872%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int64%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int64%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int64%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int64%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%2064%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt64%28int256%20value%29%20internal%20pure%20returns%20%28int64%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int64%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%2864%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int56%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int56%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int56%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int56%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%2056%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt56%28int256%20value%29%20internal%20pure%20returns%20%28int56%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int56%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%2856%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int48%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int48%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int48%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int48%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%2048%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt48%28int256%20value%29%20internal%20pure%20returns%20%28int48%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int48%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%2848%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int40%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int40%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int40%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int40%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%2040%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt40%28int256%20value%29%20internal%20pure%20returns%20%28int40%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int40%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%2840%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int32%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int32%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int32%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int32%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%2032%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt32%28int256%20value%29%20internal%20pure%20returns%20%28int32%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int32%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%2832%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int24%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int24%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int24%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int24%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%2024%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt24%28int256%20value%29%20internal%20pure%20returns%20%28int24%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int24%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%2824%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int16%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int16%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int16%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int16%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%2016%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt16%28int256%20value%29%20internal%20pure%20returns%20%28int16%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int16%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%2816%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20downcasted%20int8%20from%20int256%2C%20reverting%20on%5Cn%20%20%20%20%20%2A%20overflow%20%28when%20the%20input%20is%20less%20than%20smallest%20int8%20or%5Cn%20%20%20%20%20%2A%20greater%20than%20largest%20int8%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Counterpart%20to%20Solidity%27s%20%60int8%60%20operator.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20fit%20into%208%20bits%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt8%28int256%20value%29%20internal%20pure%20returns%20%28int8%20downcasted%29%20%7B%5Cn%20%20%20%20%20%20%20%20downcasted%20%3D%20int8%28value%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28downcasted%20%21%3D%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedIntDowncast%288%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Converts%20an%20unsigned%20uint256%20into%20a%20signed%20int256.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20input%20must%20be%20less%20than%20or%20equal%20to%20maxInt256.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toInt256%28uint256%20value%29%20internal%20pure%20returns%20%28int256%29%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Note%3A%20Unsafe%20cast%20below%20is%20okay%20because%20%60type%28int256%29.max%60%20is%20guaranteed%20to%20be%20positive%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%3E%20uint256%28type%28int256%29.max%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20SafeCastOverflowedUintToInt%28value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20int256%28value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Cast%20a%20boolean%20%28false%20or%20true%29%20to%20a%20uint256%20%280%20or%201%29%20with%20no%20jump.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toUint%28bool%20b%29%20internal%20pure%20returns%20%28uint256%20u%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20u%20%3A%3D%20iszero%28iszero%28b%29%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2Fmath%2FSignedMath.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2Fmath%2FSignedMath.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BSafeCast%7D%20from%20%5C%22.%2FSafeCast.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Standard%20signed%20math%20utilities%20missing%20in%20the%20Solidity%20language.%5Cn%20%2A%2F%5Cnlibrary%20SignedMath%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Branchless%20ternary%20evaluation%20for%20%60a%20%3F%20b%20%3A%20c%60.%20Gas%20costs%20are%20constant.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20IMPORTANT%3A%20This%20function%20may%20reduce%20bytecode%20size%20and%20consume%20less%20gas%20when%20used%20standalone.%5Cn%20%20%20%20%20%2A%20However%2C%20the%20compiler%20may%20optimize%20Solidity%20ternary%20operations%20%28i.e.%20%60a%20%3F%20b%20%3A%20c%60%29%20to%20only%20compute%5Cn%20%20%20%20%20%2A%20one%20branch%20when%20needed%2C%20making%20this%20function%20more%20expensive.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20ternary%28bool%20condition%2C%20int256%20a%2C%20int256%20b%29%20internal%20pure%20returns%20%28int256%29%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20branchless%20ternary%20works%20because%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20b%20%5E%20%28a%20%5E%20b%29%20%3D%3D%20a%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20b%20%5E%200%20%3D%3D%20b%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20b%20%5E%20%28%28a%20%5E%20b%29%20%2A%20int256%28SafeCast.toUint%28condition%29%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20largest%20of%20two%20signed%20numbers.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20max%28int256%20a%2C%20int256%20b%29%20internal%20pure%20returns%20%28int256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20ternary%28a%20%3E%20b%2C%20a%2C%20b%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20smallest%20of%20two%20signed%20numbers.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20min%28int256%20a%2C%20int256%20b%29%20internal%20pure%20returns%20%28int256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20ternary%28a%20%3C%20b%2C%20a%2C%20b%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20average%20of%20two%20signed%20numbers%20without%20overflow.%5Cn%20%20%20%20%20%2A%20The%20result%20is%20rounded%20towards%20zero.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20average%28int256%20a%2C%20int256%20b%29%20internal%20pure%20returns%20%28int256%29%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Formula%20from%20the%20book%20%5C%22Hacker%27s%20Delight%5C%22%5Cn%20%20%20%20%20%20%20%20int256%20x%20%3D%20%28a%20%26%20b%29%20%2B%20%28%28a%20%5E%20b%29%20%3E%3E%201%29%3B%5Cn%20%20%20%20%20%20%20%20return%20x%20%2B%20%28int256%28uint256%28x%29%20%3E%3E%20255%29%20%26%20%28a%20%5E%20b%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20absolute%20unsigned%20value%20of%20a%20signed%20value.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20abs%28int256%20n%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Formula%20from%20the%20%5C%22Bit%20Twiddling%20Hacks%5C%22%20by%20Sean%20Eron%20Anderson.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Since%20%60n%60%20is%20a%20signed%20integer%2C%20the%20generated%20bytecode%20will%20use%20the%20SAR%20opcode%20to%20perform%20the%20right%20shift%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20taking%20advantage%20of%20the%20most%20significant%20%28or%20%5C%22sign%5C%22%20bit%29%20in%20two%27s%20complement%20representation.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20This%20opcode%20adds%20new%20most%20significant%20bits%20set%20to%20the%20value%20of%20the%20previous%20most%20significant%20bit.%20As%20a%20result%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20the%20mask%20will%20either%20be%20%60bytes32%280%29%60%20%28if%20n%20is%20positive%29%20or%20%60~bytes32%280%29%60%20%28if%20n%20is%20negative%29.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20int256%20mask%20%3D%20n%20%3E%3E%20255%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20A%20%60bytes32%280%29%60%20mask%20leaves%20the%20input%20unchanged%2C%20while%20a%20%60~bytes32%280%29%60%20mask%20complements%20it.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20uint256%28%28n%20%2B%20mask%29%20%5E%20mask%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2FNonces.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.0.0%29%20%28utils%2FNonces.sol%29%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Provides%20tracking%20nonces%20for%20addresses.%20Nonces%20will%20only%20increment.%5Cn%20%2A%2F%5Cnabstract%20contract%20Nonces%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20nonce%20used%20for%20an%20%60account%60%20is%20not%20the%20expected%20current%20nonce.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20InvalidAccountNonce%28address%20account%2C%20uint256%20currentNonce%29%3B%5Cn%5Cn%20%20%20%20mapping%28address%20account%20%3D%3E%20uint256%29%20private%20_nonces%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20next%20unused%20nonce%20for%20an%20address.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20nonces%28address%20owner%29%20public%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_nonces%5Bowner%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Consumes%20a%20nonce.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%20the%20current%20value%20and%20increments%20nonce.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_useNonce%28address%20owner%29%20internal%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20For%20each%20account%2C%20the%20nonce%20has%20an%20initial%20value%20of%200%2C%20can%20only%20be%20incremented%20by%20one%2C%20and%20cannot%20be%5Cn%20%20%20%20%20%20%20%20%2F%2F%20decremented%20or%20reset.%20This%20guarantees%20that%20the%20nonce%20never%20overflows.%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20It%20is%20important%20to%20do%20x%2B%2B%20and%20not%20%2B%2Bx%20here.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20_nonces%5Bowner%5D%2B%2B%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Same%20as%20%7B_useNonce%7D%20but%20checking%20that%20%60nonce%60%20is%20the%20next%20valid%20for%20%60owner%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_useCheckedNonce%28address%20owner%2C%20uint256%20nonce%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20current%20%3D%20_useNonce%28owner%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28nonce%20%21%3D%20current%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20InvalidAccountNonce%28owner%2C%20current%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2FPanic.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2FPanic.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Helper%20library%20for%20emitting%20standardized%20panic%20codes.%5Cn%20%2A%5Cn%20%2A%20%60%60%60solidity%5Cn%20%2A%20contract%20Example%20%7B%5Cn%20%2A%20%20%20%20%20%20using%20Panic%20for%20uint256%3B%5Cn%20%2A%5Cn%20%2A%20%20%20%20%20%20%2F%2F%20Use%20any%20of%20the%20declared%20internal%20constants%5Cn%20%2A%20%20%20%20%20%20function%20foo%28%29%20%7B%20Panic.GENERIC.panic%28%29%3B%20%7D%5Cn%20%2A%5Cn%20%2A%20%20%20%20%20%20%2F%2F%20Alternatively%5Cn%20%2A%20%20%20%20%20%20function%20foo%28%29%20%7B%20Panic.panic%28Panic.GENERIC%29%3B%20%7D%5Cn%20%2A%20%7D%5Cn%20%2A%20%60%60%60%5Cn%20%2A%5Cn%20%2A%20Follows%20the%20list%20from%20https%3A%2F%2Fgithub.com%2Fethereum%2Fsolidity%2Fblob%2Fv0.8.24%2Flibsolutil%2FErrorCodes.h%5Blibsolutil%5D.%5Cn%20%2A%5Cn%20%2A%20_Available%20since%20v5.1._%5Cn%20%2A%2F%5Cn%2F%2F%20slither-disable-next-line%20unused-state%5Cnlibrary%20Panic%20%7B%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20generic%20%2F%20unspecified%20error%5Cn%20%20%20%20uint256%20internal%20constant%20GENERIC%20%3D%200x00%3B%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20used%20by%20the%20assert%28%29%20builtin%5Cn%20%20%20%20uint256%20internal%20constant%20ASSERT%20%3D%200x01%3B%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20arithmetic%20underflow%20or%20overflow%5Cn%20%20%20%20uint256%20internal%20constant%20UNDER_OVERFLOW%20%3D%200x11%3B%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20division%20or%20modulo%20by%20zero%5Cn%20%20%20%20uint256%20internal%20constant%20DIVISION_BY_ZERO%20%3D%200x12%3B%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20enum%20conversion%20error%5Cn%20%20%20%20uint256%20internal%20constant%20ENUM_CONVERSION_ERROR%20%3D%200x21%3B%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20invalid%20encoding%20in%20storage%5Cn%20%20%20%20uint256%20internal%20constant%20STORAGE_ENCODING_ERROR%20%3D%200x22%3B%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20empty%20array%20pop%5Cn%20%20%20%20uint256%20internal%20constant%20EMPTY_ARRAY_POP%20%3D%200x31%3B%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20array%20out%20of%20bounds%20access%5Cn%20%20%20%20uint256%20internal%20constant%20ARRAY_OUT_OF_BOUNDS%20%3D%200x32%3B%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20resource%20error%20%28too%20large%20allocation%20or%20too%20large%20array%29%5Cn%20%20%20%20uint256%20internal%20constant%20RESOURCE_ERROR%20%3D%200x41%3B%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20calling%20invalid%20internal%20function%5Cn%20%20%20%20uint256%20internal%20constant%20INVALID_INTERNAL_FUNCTION%20%3D%200x51%3B%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20Reverts%20with%20a%20panic%20code.%20Recommended%20to%20use%20with%5Cn%20%20%20%20%2F%2F%2F%20the%20internal%20constants%20with%20predefined%20codes.%5Cn%20%20%20%20function%20panic%28uint256%20code%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280x00%2C%200x4e487b71%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280x20%2C%20code%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%280x1c%2C%200x24%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2FReentrancyGuard.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2FReentrancyGuard.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Contract%20module%20that%20helps%20prevent%20reentrant%20calls%20to%20a%20function.%5Cn%20%2A%5Cn%20%2A%20Inheriting%20from%20%60ReentrancyGuard%60%20will%20make%20the%20%7BnonReentrant%7D%20modifier%5Cn%20%2A%20available%2C%20which%20can%20be%20applied%20to%20functions%20to%20make%20sure%20there%20are%20no%20nested%5Cn%20%2A%20%28reentrant%29%20calls%20to%20them.%5Cn%20%2A%5Cn%20%2A%20Note%20that%20because%20there%20is%20a%20single%20%60nonReentrant%60%20guard%2C%20functions%20marked%20as%5Cn%20%2A%20%60nonReentrant%60%20may%20not%20call%20one%20another.%20This%20can%20be%20worked%20around%20by%20making%5Cn%20%2A%20those%20functions%20%60private%60%2C%20and%20then%20adding%20%60external%60%20%60nonReentrant%60%20entry%5Cn%20%2A%20points%20to%20them.%5Cn%20%2A%5Cn%20%2A%20TIP%3A%20If%20EIP-1153%20%28transient%20storage%29%20is%20available%20on%20the%20chain%20you%27re%20deploying%20at%2C%5Cn%20%2A%20consider%20using%20%7BReentrancyGuardTransient%7D%20instead.%5Cn%20%2A%5Cn%20%2A%20TIP%3A%20If%20you%20would%20like%20to%20learn%20more%20about%20reentrancy%20and%20alternative%20ways%5Cn%20%2A%20to%20protect%20against%20it%2C%20check%20out%20our%20blog%20post%5Cn%20%2A%20https%3A%2F%2Fblog.openzeppelin.com%2Freentrancy-after-istanbul%2F%5BReentrancy%20After%20Istanbul%5D.%5Cn%20%2A%2F%5Cnabstract%20contract%20ReentrancyGuard%20%7B%5Cn%20%20%20%20%2F%2F%20Booleans%20are%20more%20expensive%20than%20uint256%20or%20any%20type%20that%20takes%20up%20a%20full%5Cn%20%20%20%20%2F%2F%20word%20because%20each%20write%20operation%20emits%20an%20extra%20SLOAD%20to%20first%20read%20the%5Cn%20%20%20%20%2F%2F%20slot%27s%20contents%2C%20replace%20the%20bits%20taken%20up%20by%20the%20boolean%2C%20and%20then%20write%5Cn%20%20%20%20%2F%2F%20back.%20This%20is%20the%20compiler%27s%20defense%20against%20contract%20upgrades%20and%5Cn%20%20%20%20%2F%2F%20pointer%20aliasing%2C%20and%20it%20cannot%20be%20disabled.%5Cn%5Cn%20%20%20%20%2F%2F%20The%20values%20being%20non-zero%20value%20makes%20deployment%20a%20bit%20more%20expensive%2C%5Cn%20%20%20%20%2F%2F%20but%20in%20exchange%20the%20refund%20on%20every%20call%20to%20nonReentrant%20will%20be%20lower%20in%5Cn%20%20%20%20%2F%2F%20amount.%20Since%20refunds%20are%20capped%20to%20a%20percentage%20of%20the%20total%5Cn%20%20%20%20%2F%2F%20transaction%27s%20gas%2C%20it%20is%20best%20to%20keep%20them%20low%20in%20cases%20like%20this%20one%2C%20to%5Cn%20%20%20%20%2F%2F%20increase%20the%20likelihood%20of%20the%20full%20refund%20coming%20into%20effect.%5Cn%20%20%20%20uint256%20private%20constant%20NOT_ENTERED%20%3D%201%3B%5Cn%20%20%20%20uint256%20private%20constant%20ENTERED%20%3D%202%3B%5Cn%5Cn%20%20%20%20uint256%20private%20_status%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Unauthorized%20reentrant%20call.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ReentrancyGuardReentrantCall%28%29%3B%5Cn%5Cn%20%20%20%20constructor%28%29%20%7B%5Cn%20%20%20%20%20%20%20%20_status%20%3D%20NOT_ENTERED%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Prevents%20a%20contract%20from%20calling%20itself%2C%20directly%20or%20indirectly.%5Cn%20%20%20%20%20%2A%20Calling%20a%20%60nonReentrant%60%20function%20from%20another%20%60nonReentrant%60%5Cn%20%20%20%20%20%2A%20function%20is%20not%20supported.%20It%20is%20possible%20to%20prevent%20this%20from%20happening%5Cn%20%20%20%20%20%2A%20by%20making%20the%20%60nonReentrant%60%20function%20external%2C%20and%20making%20it%20call%20a%5Cn%20%20%20%20%20%2A%20%60private%60%20function%20that%20does%20the%20actual%20work.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20modifier%20nonReentrant%28%29%20%7B%5Cn%20%20%20%20%20%20%20%20_nonReentrantBefore%28%29%3B%5Cn%20%20%20%20%20%20%20%20_%3B%5Cn%20%20%20%20%20%20%20%20_nonReentrantAfter%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_nonReentrantBefore%28%29%20private%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20On%20the%20first%20call%20to%20nonReentrant%2C%20_status%20will%20be%20NOT_ENTERED%5Cn%20%20%20%20%20%20%20%20if%20%28_status%20%3D%3D%20ENTERED%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20ReentrancyGuardReentrantCall%28%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Any%20calls%20to%20nonReentrant%20after%20this%20point%20will%20fail%5Cn%20%20%20%20%20%20%20%20_status%20%3D%20ENTERED%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_nonReentrantAfter%28%29%20private%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20By%20storing%20the%20original%20value%20once%20again%2C%20a%20refund%20is%20triggered%20%28see%5Cn%20%20%20%20%20%20%20%20%2F%2F%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-2200%29%5Cn%20%20%20%20%20%20%20%20_status%20%3D%20NOT_ENTERED%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20true%20if%20the%20reentrancy%20guard%20is%20currently%20set%20to%20%5C%22entered%5C%22%2C%20which%20indicates%20there%20is%20a%5Cn%20%20%20%20%20%2A%20%60nonReentrant%60%20function%20in%20the%20call%20stack.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_reentrancyGuardEntered%28%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_status%20%3D%3D%20ENTERED%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2FShortStrings.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2FShortStrings.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BStorageSlot%7D%20from%20%5C%22.%2FStorageSlot.sol%5C%22%3B%5Cn%5Cn%2F%2F%20%7C%20string%20%20%7C%200xAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%20%20%20%7C%5Cn%2F%2F%20%7C%20length%20%20%7C%200x%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20BB%20%7C%5Cntype%20ShortString%20is%20bytes32%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20This%20library%20provides%20functions%20to%20convert%20short%20memory%20strings%5Cn%20%2A%20into%20a%20%60ShortString%60%20type%20that%20can%20be%20used%20as%20an%20immutable%20variable.%5Cn%20%2A%5Cn%20%2A%20Strings%20of%20arbitrary%20length%20can%20be%20optimized%20using%20this%20library%20if%5Cn%20%2A%20they%20are%20short%20enough%20%28up%20to%2031%20bytes%29%20by%20packing%20them%20with%20their%5Cn%20%2A%20length%20%281%20byte%29%20in%20a%20single%20EVM%20word%20%2832%20bytes%29.%20Additionally%2C%20a%5Cn%20%2A%20fallback%20mechanism%20can%20be%20used%20for%20every%20other%20case.%5Cn%20%2A%5Cn%20%2A%20Usage%20example%3A%5Cn%20%2A%5Cn%20%2A%20%60%60%60solidity%5Cn%20%2A%20contract%20Named%20%7B%5Cn%20%2A%20%20%20%20%20using%20ShortStrings%20for%20%2A%3B%5Cn%20%2A%5Cn%20%2A%20%20%20%20%20ShortString%20private%20immutable%20_name%3B%5Cn%20%2A%20%20%20%20%20string%20private%20_nameFallback%3B%5Cn%20%2A%5Cn%20%2A%20%20%20%20%20constructor%28string%20memory%20contractName%29%20%7B%5Cn%20%2A%20%20%20%20%20%20%20%20%20_name%20%3D%20contractName.toShortStringWithFallback%28_nameFallback%29%3B%5Cn%20%2A%20%20%20%20%20%7D%5Cn%20%2A%5Cn%20%2A%20%20%20%20%20function%20name%28%29%20external%20view%20returns%20%28string%20memory%29%20%7B%5Cn%20%2A%20%20%20%20%20%20%20%20%20return%20_name.toStringWithFallback%28_nameFallback%29%3B%5Cn%20%2A%20%20%20%20%20%7D%5Cn%20%2A%20%7D%5Cn%20%2A%20%60%60%60%5Cn%20%2A%2F%5Cnlibrary%20ShortStrings%20%7B%5Cn%20%20%20%20%2F%2F%20Used%20as%20an%20identifier%20for%20strings%20longer%20than%2031%20bytes.%5Cn%20%20%20%20bytes32%20private%20constant%20FALLBACK_SENTINEL%20%3D%200x00000000000000000000000000000000000000000000000000000000000000FF%3B%5Cn%5Cn%20%20%20%20error%20StringTooLong%28string%20str%29%3B%5Cn%20%20%20%20error%20InvalidShortString%28%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Encode%20a%20string%20of%20at%20most%2031%20chars%20into%20a%20%60ShortString%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20will%20trigger%20a%20%60StringTooLong%60%20error%20is%20the%20input%20string%20is%20too%20long.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toShortString%28string%20memory%20str%29%20internal%20pure%20returns%20%28ShortString%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20bstr%20%3D%20bytes%28str%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28bstr.length%20%3E%2031%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20StringTooLong%28str%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20ShortString.wrap%28bytes32%28uint256%28bytes32%28bstr%29%29%20%7C%20bstr.length%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Decode%20a%20%60ShortString%60%20back%20to%20a%20%5C%22normal%5C%22%20string.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toString%28ShortString%20sstr%29%20internal%20pure%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20len%20%3D%20byteLength%28sstr%29%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20using%20%60new%20string%28len%29%60%20would%20work%20locally%20but%20is%20not%20memory%20safe.%5Cn%20%20%20%20%20%20%20%20string%20memory%20str%20%3D%20new%20string%2832%29%3B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28str%2C%20len%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28str%2C%200x20%29%2C%20sstr%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20str%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Return%20the%20length%20of%20a%20%60ShortString%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20byteLength%28ShortString%20sstr%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20result%20%3D%20uint256%28ShortString.unwrap%28sstr%29%29%20%26%200xFF%3B%5Cn%20%20%20%20%20%20%20%20if%20%28result%20%3E%2031%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20InvalidShortString%28%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20result%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Encode%20a%20string%20into%20a%20%60ShortString%60%2C%20or%20write%20it%20to%20storage%20if%20it%20is%20too%20long.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toShortStringWithFallback%28string%20memory%20value%2C%20string%20storage%20store%29%20internal%20returns%20%28ShortString%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28bytes%28value%29.length%20%3C%2032%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20toShortString%28value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20StorageSlot.getStringSlot%28store%29.value%20%3D%20value%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20ShortString.wrap%28FALLBACK_SENTINEL%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Decode%20a%20string%20that%20was%20encoded%20to%20%60ShortString%60%20or%20written%20to%20storage%20using%20%7BsetWithFallback%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toStringWithFallback%28ShortString%20value%2C%20string%20storage%20store%29%20internal%20pure%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28ShortString.unwrap%28value%29%20%21%3D%20FALLBACK_SENTINEL%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20toString%28value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20store%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Return%20the%20length%20of%20a%20string%20that%20was%20encoded%20to%20%60ShortString%60%20or%20written%20to%20storage%20using%5Cn%20%20%20%20%20%2A%20%7BsetWithFallback%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20This%20will%20return%20the%20%5C%22byte%20length%5C%22%20of%20the%20string.%20This%20may%20not%20reflect%20the%20actual%20length%20in%20terms%20of%5Cn%20%20%20%20%20%2A%20actual%20characters%20as%20the%20UTF-8%20encoding%20of%20a%20single%20character%20can%20span%20over%20multiple%20bytes.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20byteLengthWithFallback%28ShortString%20value%2C%20string%20storage%20store%29%20internal%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28ShortString.unwrap%28value%29%20%21%3D%20FALLBACK_SENTINEL%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20byteLength%28value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20bytes%28store%29.length%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2FSlotDerivation.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2FSlotDerivation.sol%29%5Cn%2F%2F%20This%20file%20was%20procedurally%20generated%20from%20scripts%2Fgenerate%2Ftemplates%2FSlotDerivation.js.%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Library%20for%20computing%20storage%20%28and%20transient%20storage%29%20locations%20from%20namespaces%20and%20deriving%20slots%5Cn%20%2A%20corresponding%20to%20standard%20patterns.%20The%20derivation%20method%20for%20array%20and%20mapping%20matches%20the%20storage%20layout%20used%20by%5Cn%20%2A%20the%20solidity%20language%20%2F%20compiler.%5Cn%20%2A%5Cn%20%2A%20See%20https%3A%2F%2Fdocs.soliditylang.org%2Fen%2Fv0.8.20%2Finternals%2Flayout_in_storage.html%23mappings-and-dynamic-arrays%5BSolidity%20docs%20for%20mappings%20and%20dynamic%20arrays.%5D.%5Cn%20%2A%5Cn%20%2A%20Example%20usage%3A%5Cn%20%2A%20%60%60%60solidity%5Cn%20%2A%20contract%20Example%20%7B%5Cn%20%2A%20%20%20%20%20%2F%2F%20Add%20the%20library%20methods%5Cn%20%2A%20%20%20%20%20using%20StorageSlot%20for%20bytes32%3B%5Cn%20%2A%20%20%20%20%20using%20SlotDerivation%20for%20bytes32%3B%5Cn%20%2A%5Cn%20%2A%20%20%20%20%20%2F%2F%20Declare%20a%20namespace%5Cn%20%2A%20%20%20%20%20string%20private%20constant%20_NAMESPACE%20%3D%20%5C%22%3Cnamespace%3E%5C%22%20%2F%2F%20eg.%20OpenZeppelin.Slot%5Cn%20%2A%5Cn%20%2A%20%20%20%20%20function%20setValueInNamespace%28uint256%20key%2C%20address%20newValue%29%20internal%20%7B%5Cn%20%2A%20%20%20%20%20%20%20%20%20_NAMESPACE.erc7201Slot%28%29.deriveMapping%28key%29.getAddressSlot%28%29.value%20%3D%20newValue%3B%5Cn%20%2A%20%20%20%20%20%7D%5Cn%20%2A%5Cn%20%2A%20%20%20%20%20function%20getValueInNamespace%28uint256%20key%29%20internal%20view%20returns%20%28address%29%20%7B%5Cn%20%2A%20%20%20%20%20%20%20%20%20return%20_NAMESPACE.erc7201Slot%28%29.deriveMapping%28key%29.getAddressSlot%28%29.value%3B%5Cn%20%2A%20%20%20%20%20%7D%5Cn%20%2A%20%7D%5Cn%20%2A%20%60%60%60%5Cn%20%2A%5Cn%20%2A%20TIP%3A%20Consider%20using%20this%20library%20along%20with%20%7BStorageSlot%7D.%5Cn%20%2A%5Cn%20%2A%20NOTE%3A%20This%20library%20provides%20a%20way%20to%20manipulate%20storage%20locations%20in%20a%20non-standard%20way.%20Tooling%20for%20checking%5Cn%20%2A%20upgrade%20safety%20will%20ignore%20the%20slots%20accessed%20through%20this%20library.%5Cn%20%2A%5Cn%20%2A%20_Available%20since%20v5.1._%5Cn%20%2A%2F%5Cnlibrary%20SlotDerivation%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Derive%20an%20ERC-7201%20slot%20from%20a%20string%20%28namespace%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20erc7201Slot%28string%20memory%20namespace%29%20internal%20pure%20returns%20%28bytes32%20slot%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280x00%2C%20sub%28keccak256%28add%28namespace%2C%200x20%29%2C%20mload%28namespace%29%29%2C%201%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20slot%20%3A%3D%20and%28keccak256%280x00%2C%200x20%29%2C%20not%280xff%29%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Add%20an%20offset%20to%20a%20slot%20to%20get%20the%20n-th%20element%20of%20a%20structure%20or%20an%20array.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20offset%28bytes32%20slot%2C%20uint256%20pos%29%20internal%20pure%20returns%20%28bytes32%20result%29%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20bytes32%28uint256%28slot%29%20%2B%20pos%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Derive%20the%20location%20of%20the%20first%20element%20in%20an%20array%20from%20the%20slot%20where%20the%20length%20is%20stored.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20deriveArray%28bytes32%20slot%29%20internal%20pure%20returns%20%28bytes32%20result%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280x00%2C%20slot%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20keccak256%280x00%2C%200x20%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Derive%20the%20location%20of%20a%20mapping%20element%20from%20the%20key.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20deriveMapping%28bytes32%20slot%2C%20address%20key%29%20internal%20pure%20returns%20%28bytes32%20result%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280x00%2C%20and%28key%2C%20shr%2896%2C%20not%280%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280x20%2C%20slot%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20keccak256%280x00%2C%200x40%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Derive%20the%20location%20of%20a%20mapping%20element%20from%20the%20key.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20deriveMapping%28bytes32%20slot%2C%20bool%20key%29%20internal%20pure%20returns%20%28bytes32%20result%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280x00%2C%20iszero%28iszero%28key%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280x20%2C%20slot%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20keccak256%280x00%2C%200x40%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Derive%20the%20location%20of%20a%20mapping%20element%20from%20the%20key.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20deriveMapping%28bytes32%20slot%2C%20bytes32%20key%29%20internal%20pure%20returns%20%28bytes32%20result%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280x00%2C%20key%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280x20%2C%20slot%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20keccak256%280x00%2C%200x40%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Derive%20the%20location%20of%20a%20mapping%20element%20from%20the%20key.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20deriveMapping%28bytes32%20slot%2C%20uint256%20key%29%20internal%20pure%20returns%20%28bytes32%20result%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280x00%2C%20key%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280x20%2C%20slot%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20keccak256%280x00%2C%200x40%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Derive%20the%20location%20of%20a%20mapping%20element%20from%20the%20key.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20deriveMapping%28bytes32%20slot%2C%20int256%20key%29%20internal%20pure%20returns%20%28bytes32%20result%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280x00%2C%20key%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280x20%2C%20slot%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20keccak256%280x00%2C%200x40%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Derive%20the%20location%20of%20a%20mapping%20element%20from%20the%20key.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20deriveMapping%28bytes32%20slot%2C%20string%20memory%20key%29%20internal%20pure%20returns%20%28bytes32%20result%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20let%20length%20%3A%3D%20mload%28key%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20let%20begin%20%3A%3D%20add%28key%2C%200x20%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20let%20end%20%3A%3D%20add%28begin%2C%20length%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20let%20cache%20%3A%3D%20mload%28end%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28end%2C%20slot%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20keccak256%28begin%2C%20add%28length%2C%200x20%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28end%2C%20cache%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Derive%20the%20location%20of%20a%20mapping%20element%20from%20the%20key.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20deriveMapping%28bytes32%20slot%2C%20bytes%20memory%20key%29%20internal%20pure%20returns%20%28bytes32%20result%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20let%20length%20%3A%3D%20mload%28key%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20let%20begin%20%3A%3D%20add%28key%2C%200x20%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20let%20end%20%3A%3D%20add%28begin%2C%20length%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20let%20cache%20%3A%3D%20mload%28end%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28end%2C%20slot%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20keccak256%28begin%2C%20add%28length%2C%200x20%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28end%2C%20cache%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2FStorageSlot.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2FStorageSlot.sol%29%5Cn%2F%2F%20This%20file%20was%20procedurally%20generated%20from%20scripts%2Fgenerate%2Ftemplates%2FStorageSlot.js.%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Library%20for%20reading%20and%20writing%20primitive%20types%20to%20specific%20storage%20slots.%5Cn%20%2A%5Cn%20%2A%20Storage%20slots%20are%20often%20used%20to%20avoid%20storage%20conflict%20when%20dealing%20with%20upgradeable%20contracts.%5Cn%20%2A%20This%20library%20helps%20with%20reading%20and%20writing%20to%20such%20slots%20without%20the%20need%20for%20inline%20assembly.%5Cn%20%2A%5Cn%20%2A%20The%20functions%20in%20this%20library%20return%20Slot%20structs%20that%20contain%20a%20%60value%60%20member%20that%20can%20be%20used%20to%20read%20or%20write.%5Cn%20%2A%5Cn%20%2A%20Example%20usage%20to%20set%20ERC-1967%20implementation%20slot%3A%5Cn%20%2A%20%60%60%60solidity%5Cn%20%2A%20contract%20ERC1967%20%7B%5Cn%20%2A%20%20%20%20%20%2F%2F%20Define%20the%20slot.%20Alternatively%2C%20use%20the%20SlotDerivation%20library%20to%20derive%20the%20slot.%5Cn%20%2A%20%20%20%20%20bytes32%20internal%20constant%20_IMPLEMENTATION_SLOT%20%3D%200x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc%3B%5Cn%20%2A%5Cn%20%2A%20%20%20%20%20function%20_getImplementation%28%29%20internal%20view%20returns%20%28address%29%20%7B%5Cn%20%2A%20%20%20%20%20%20%20%20%20return%20StorageSlot.getAddressSlot%28_IMPLEMENTATION_SLOT%29.value%3B%5Cn%20%2A%20%20%20%20%20%7D%5Cn%20%2A%5Cn%20%2A%20%20%20%20%20function%20_setImplementation%28address%20newImplementation%29%20internal%20%7B%5Cn%20%2A%20%20%20%20%20%20%20%20%20require%28newImplementation.code.length%20%3E%200%29%3B%5Cn%20%2A%20%20%20%20%20%20%20%20%20StorageSlot.getAddressSlot%28_IMPLEMENTATION_SLOT%29.value%20%3D%20newImplementation%3B%5Cn%20%2A%20%20%20%20%20%7D%5Cn%20%2A%20%7D%5Cn%20%2A%20%60%60%60%5Cn%20%2A%5Cn%20%2A%20TIP%3A%20Consider%20using%20this%20library%20along%20with%20%7BSlotDerivation%7D.%5Cn%20%2A%2F%5Cnlibrary%20StorageSlot%20%7B%5Cn%20%20%20%20struct%20AddressSlot%20%7B%5Cn%20%20%20%20%20%20%20%20address%20value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20BooleanSlot%20%7B%5Cn%20%20%20%20%20%20%20%20bool%20value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20Bytes32Slot%20%7B%5Cn%20%20%20%20%20%20%20%20bytes32%20value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20Uint256Slot%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20Int256Slot%20%7B%5Cn%20%20%20%20%20%20%20%20int256%20value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20StringSlot%20%7B%5Cn%20%20%20%20%20%20%20%20string%20value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20BytesSlot%20%7B%5Cn%20%20%20%20%20%20%20%20bytes%20value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20an%20%60AddressSlot%60%20with%20member%20%60value%60%20located%20at%20%60slot%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getAddressSlot%28bytes32%20slot%29%20internal%20pure%20returns%20%28AddressSlot%20storage%20r%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20r.slot%20%3A%3D%20slot%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20a%20%60BooleanSlot%60%20with%20member%20%60value%60%20located%20at%20%60slot%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getBooleanSlot%28bytes32%20slot%29%20internal%20pure%20returns%20%28BooleanSlot%20storage%20r%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20r.slot%20%3A%3D%20slot%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20a%20%60Bytes32Slot%60%20with%20member%20%60value%60%20located%20at%20%60slot%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getBytes32Slot%28bytes32%20slot%29%20internal%20pure%20returns%20%28Bytes32Slot%20storage%20r%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20r.slot%20%3A%3D%20slot%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20a%20%60Uint256Slot%60%20with%20member%20%60value%60%20located%20at%20%60slot%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getUint256Slot%28bytes32%20slot%29%20internal%20pure%20returns%20%28Uint256Slot%20storage%20r%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20r.slot%20%3A%3D%20slot%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20a%20%60Int256Slot%60%20with%20member%20%60value%60%20located%20at%20%60slot%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getInt256Slot%28bytes32%20slot%29%20internal%20pure%20returns%20%28Int256Slot%20storage%20r%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20r.slot%20%3A%3D%20slot%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20a%20%60StringSlot%60%20with%20member%20%60value%60%20located%20at%20%60slot%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getStringSlot%28bytes32%20slot%29%20internal%20pure%20returns%20%28StringSlot%20storage%20r%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20r.slot%20%3A%3D%20slot%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20an%20%60StringSlot%60%20representation%20of%20the%20string%20storage%20pointer%20%60store%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getStringSlot%28string%20storage%20store%29%20internal%20pure%20returns%20%28StringSlot%20storage%20r%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20r.slot%20%3A%3D%20store.slot%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20a%20%60BytesSlot%60%20with%20member%20%60value%60%20located%20at%20%60slot%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getBytesSlot%28bytes32%20slot%29%20internal%20pure%20returns%20%28BytesSlot%20storage%20r%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20r.slot%20%3A%3D%20slot%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20an%20%60BytesSlot%60%20representation%20of%20the%20bytes%20storage%20pointer%20%60store%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getBytesSlot%28bytes%20storage%20store%29%20internal%20pure%20returns%20%28BytesSlot%20storage%20r%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20r.slot%20%3A%3D%20store.slot%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2FStrings.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.2.0%29%20%28utils%2FStrings.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BMath%7D%20from%20%5C%22.%2Fmath%2FMath.sol%5C%22%3B%5Cnimport%20%7BSafeCast%7D%20from%20%5C%22.%2Fmath%2FSafeCast.sol%5C%22%3B%5Cnimport%20%7BSignedMath%7D%20from%20%5C%22.%2Fmath%2FSignedMath.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20String%20operations.%5Cn%20%2A%2F%5Cnlibrary%20Strings%20%7B%5Cn%20%20%20%20using%20SafeCast%20for%20%2A%3B%5Cn%5Cn%20%20%20%20bytes16%20private%20constant%20HEX_DIGITS%20%3D%20%5C%220123456789abcdef%5C%22%3B%5Cn%20%20%20%20uint8%20private%20constant%20ADDRESS_LENGTH%20%3D%2020%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20%60value%60%20string%20doesn%27t%20fit%20in%20the%20specified%20%60length%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20StringsInsufficientHexLength%28uint256%20value%2C%20uint256%20length%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20string%20being%20parsed%20contains%20characters%20that%20are%20not%20in%20scope%20of%20the%20given%20base.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20StringsInvalidChar%28%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20string%20being%20parsed%20is%20not%20a%20properly%20formatted%20address.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20StringsInvalidAddressFormat%28%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Converts%20a%20%60uint256%60%20to%20its%20ASCII%20%60string%60%20decimal%20representation.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toString%28uint256%20value%29%20internal%20pure%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20length%20%3D%20Math.log10%28value%29%20%2B%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20string%20memory%20buffer%20%3D%20new%20string%28length%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20ptr%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ptr%20%3A%3D%20add%28buffer%2C%20add%2832%2C%20length%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20while%20%28true%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ptr--%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore8%28ptr%2C%20byte%28mod%28value%2C%2010%29%2C%20HEX_DIGITS%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%20%2F%3D%2010%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28value%20%3D%3D%200%29%20break%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20buffer%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Converts%20a%20%60int256%60%20to%20its%20ASCII%20%60string%60%20decimal%20representation.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toStringSigned%28int256%20value%29%20internal%20pure%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20string.concat%28value%20%3C%200%20%3F%20%5C%22-%5C%22%20%3A%20%5C%22%5C%22%2C%20toString%28SignedMath.abs%28value%29%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Converts%20a%20%60uint256%60%20to%20its%20ASCII%20%60string%60%20hexadecimal%20representation.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toHexString%28uint256%20value%29%20internal%20pure%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20toHexString%28value%2C%20Math.log256%28value%29%20%2B%201%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Converts%20a%20%60uint256%60%20to%20its%20ASCII%20%60string%60%20hexadecimal%20representation%20with%20fixed%20length.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toHexString%28uint256%20value%2C%20uint256%20length%29%20internal%20pure%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20localValue%20%3D%20value%3B%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20buffer%20%3D%20new%20bytes%282%20%2A%20length%20%2B%202%29%3B%5Cn%20%20%20%20%20%20%20%20buffer%5B0%5D%20%3D%20%5C%220%5C%22%3B%5Cn%20%20%20%20%20%20%20%20buffer%5B1%5D%20%3D%20%5C%22x%5C%22%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%202%20%2A%20length%20%2B%201%3B%20i%20%3E%201%3B%20--i%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20buffer%5Bi%5D%20%3D%20HEX_DIGITS%5BlocalValue%20%26%200xf%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20localValue%20%3E%3E%3D%204%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20%28localValue%20%21%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20StringsInsufficientHexLength%28value%2C%20length%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20string%28buffer%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Converts%20an%20%60address%60%20with%20fixed%20length%20of%2020%20bytes%20to%20its%20not%20checksummed%20ASCII%20%60string%60%20hexadecimal%5Cn%20%20%20%20%20%2A%20representation.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toHexString%28address%20addr%29%20internal%20pure%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20toHexString%28uint256%28uint160%28addr%29%29%2C%20ADDRESS_LENGTH%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Converts%20an%20%60address%60%20with%20fixed%20length%20of%2020%20bytes%20to%20its%20checksummed%20ASCII%20%60string%60%20hexadecimal%5Cn%20%20%20%20%20%2A%20representation%2C%20according%20to%20EIP-55.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toChecksumHexString%28address%20addr%29%20internal%20pure%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20buffer%20%3D%20bytes%28toHexString%28addr%29%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20hash%20the%20hex%20part%20of%20buffer%20%28skip%20length%20%2B%202%20bytes%2C%20length%2040%29%5Cn%20%20%20%20%20%20%20%20uint256%20hashValue%3B%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20hashValue%20%3A%3D%20shr%2896%2C%20keccak256%28add%28buffer%2C%200x22%29%2C%2040%29%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%2041%3B%20i%20%3E%201%3B%20--i%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20possible%20values%20for%20buffer%5Bi%5D%20are%2048%20%280%29%20to%2057%20%289%29%20and%2097%20%28a%29%20to%20102%20%28f%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28hashValue%20%26%200xf%20%3E%207%20%26%26%20uint8%28buffer%5Bi%5D%29%20%3E%2096%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20case%20shift%20by%20xoring%20with%200x20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20buffer%5Bi%5D%20%5E%3D%200x20%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20hashValue%20%3E%3E%3D%204%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20string%28buffer%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20true%20if%20the%20two%20strings%20are%20equal.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20equal%28string%20memory%20a%2C%20string%20memory%20b%29%20internal%20pure%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20bytes%28a%29.length%20%3D%3D%20bytes%28b%29.length%20%26%26%20keccak256%28bytes%28a%29%29%20%3D%3D%20keccak256%28bytes%28b%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Parse%20a%20decimal%20string%20and%20returns%20the%20value%20as%20a%20%60uint256%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%20-%20The%20string%20must%20be%20formatted%20as%20%60%5B0-9%5D%2A%60%5Cn%20%20%20%20%20%2A%20-%20The%20result%20must%20fit%20into%20an%20%60uint256%60%20type%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20parseUint%28string%20memory%20input%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20parseUint%28input%2C%200%2C%20bytes%28input%29.length%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Variant%20of%20%7BparseUint%7D%20that%20parses%20a%20substring%20of%20%60input%60%20located%20between%20position%20%60begin%60%20%28included%29%20and%5Cn%20%20%20%20%20%2A%20%60end%60%20%28excluded%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%20-%20The%20substring%20must%20be%20formatted%20as%20%60%5B0-9%5D%2A%60%5Cn%20%20%20%20%20%2A%20-%20The%20result%20must%20fit%20into%20an%20%60uint256%60%20type%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20parseUint%28string%20memory%20input%2C%20uint256%20begin%2C%20uint256%20end%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20%28bool%20success%2C%20uint256%20value%29%20%3D%20tryParseUint%28input%2C%20begin%2C%20end%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28%21success%29%20revert%20StringsInvalidChar%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Variant%20of%20%7BparseUint-string%7D%20that%20returns%20false%20if%20the%20parsing%20fails%20because%20of%20an%20invalid%20character.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20This%20function%20will%20revert%20if%20the%20result%20does%20not%20fit%20in%20a%20%60uint256%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20tryParseUint%28string%20memory%20input%29%20internal%20pure%20returns%20%28bool%20success%2C%20uint256%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_tryParseUintUncheckedBounds%28input%2C%200%2C%20bytes%28input%29.length%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Variant%20of%20%7BparseUint-string-uint256-uint256%7D%20that%20returns%20false%20if%20the%20parsing%20fails%20because%20of%20an%20invalid%5Cn%20%20%20%20%20%2A%20character.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20This%20function%20will%20revert%20if%20the%20result%20does%20not%20fit%20in%20a%20%60uint256%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20tryParseUint%28%5Cn%20%20%20%20%20%20%20%20string%20memory%20input%2C%5Cn%20%20%20%20%20%20%20%20uint256%20begin%2C%5Cn%20%20%20%20%20%20%20%20uint256%20end%5Cn%20%20%20%20%29%20internal%20pure%20returns%20%28bool%20success%2C%20uint256%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28end%20%3E%20bytes%28input%29.length%20%7C%7C%20begin%20%3E%20end%29%20return%20%28false%2C%200%29%3B%5Cn%20%20%20%20%20%20%20%20return%20_tryParseUintUncheckedBounds%28input%2C%20begin%2C%20end%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Implementation%20of%20%7BtryParseUint%7D%20that%20does%20not%20check%20bounds.%20Caller%20should%20make%20sure%20that%5Cn%20%20%20%20%20%2A%20%60begin%20%3C%3D%20end%20%3C%3D%20input.length%60.%20Other%20inputs%20would%20result%20in%20undefined%20behavior.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_tryParseUintUncheckedBounds%28%5Cn%20%20%20%20%20%20%20%20string%20memory%20input%2C%5Cn%20%20%20%20%20%20%20%20uint256%20begin%2C%5Cn%20%20%20%20%20%20%20%20uint256%20end%5Cn%20%20%20%20%29%20private%20pure%20returns%20%28bool%20success%2C%20uint256%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20buffer%20%3D%20bytes%28input%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20uint256%20result%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%20begin%3B%20i%20%3C%20end%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint8%20chr%20%3D%20_tryParseChr%28bytes1%28_unsafeReadBytesOffset%28buffer%2C%20i%29%29%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28chr%20%3E%209%29%20return%20%28false%2C%200%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%2A%3D%2010%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%20chr%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20%28true%2C%20result%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Parse%20a%20decimal%20string%20and%20returns%20the%20value%20as%20a%20%60int256%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%20-%20The%20string%20must%20be%20formatted%20as%20%60%5B-%2B%5D%3F%5B0-9%5D%2A%60%5Cn%20%20%20%20%20%2A%20-%20The%20result%20must%20fit%20in%20an%20%60int256%60%20type.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20parseInt%28string%20memory%20input%29%20internal%20pure%20returns%20%28int256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20parseInt%28input%2C%200%2C%20bytes%28input%29.length%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Variant%20of%20%7BparseInt-string%7D%20that%20parses%20a%20substring%20of%20%60input%60%20located%20between%20position%20%60begin%60%20%28included%29%20and%5Cn%20%20%20%20%20%2A%20%60end%60%20%28excluded%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%20-%20The%20substring%20must%20be%20formatted%20as%20%60%5B-%2B%5D%3F%5B0-9%5D%2A%60%5Cn%20%20%20%20%20%2A%20-%20The%20result%20must%20fit%20in%20an%20%60int256%60%20type.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20parseInt%28string%20memory%20input%2C%20uint256%20begin%2C%20uint256%20end%29%20internal%20pure%20returns%20%28int256%29%20%7B%5Cn%20%20%20%20%20%20%20%20%28bool%20success%2C%20int256%20value%29%20%3D%20tryParseInt%28input%2C%20begin%2C%20end%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28%21success%29%20revert%20StringsInvalidChar%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Variant%20of%20%7BparseInt-string%7D%20that%20returns%20false%20if%20the%20parsing%20fails%20because%20of%20an%20invalid%20character%20or%20if%5Cn%20%20%20%20%20%2A%20the%20result%20does%20not%20fit%20in%20a%20%60int256%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20This%20function%20will%20revert%20if%20the%20absolute%20value%20of%20the%20result%20does%20not%20fit%20in%20a%20%60uint256%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20tryParseInt%28string%20memory%20input%29%20internal%20pure%20returns%20%28bool%20success%2C%20int256%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_tryParseIntUncheckedBounds%28input%2C%200%2C%20bytes%28input%29.length%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20uint256%20private%20constant%20ABS_MIN_INT256%20%3D%202%20%2A%2A%20255%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Variant%20of%20%7BparseInt-string-uint256-uint256%7D%20that%20returns%20false%20if%20the%20parsing%20fails%20because%20of%20an%20invalid%5Cn%20%20%20%20%20%2A%20character%20or%20if%20the%20result%20does%20not%20fit%20in%20a%20%60int256%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20This%20function%20will%20revert%20if%20the%20absolute%20value%20of%20the%20result%20does%20not%20fit%20in%20a%20%60uint256%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20tryParseInt%28%5Cn%20%20%20%20%20%20%20%20string%20memory%20input%2C%5Cn%20%20%20%20%20%20%20%20uint256%20begin%2C%5Cn%20%20%20%20%20%20%20%20uint256%20end%5Cn%20%20%20%20%29%20internal%20pure%20returns%20%28bool%20success%2C%20int256%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28end%20%3E%20bytes%28input%29.length%20%7C%7C%20begin%20%3E%20end%29%20return%20%28false%2C%200%29%3B%5Cn%20%20%20%20%20%20%20%20return%20_tryParseIntUncheckedBounds%28input%2C%20begin%2C%20end%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Implementation%20of%20%7BtryParseInt%7D%20that%20does%20not%20check%20bounds.%20Caller%20should%20make%20sure%20that%5Cn%20%20%20%20%20%2A%20%60begin%20%3C%3D%20end%20%3C%3D%20input.length%60.%20Other%20inputs%20would%20result%20in%20undefined%20behavior.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_tryParseIntUncheckedBounds%28%5Cn%20%20%20%20%20%20%20%20string%20memory%20input%2C%5Cn%20%20%20%20%20%20%20%20uint256%20begin%2C%5Cn%20%20%20%20%20%20%20%20uint256%20end%5Cn%20%20%20%20%29%20private%20pure%20returns%20%28bool%20success%2C%20int256%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20buffer%20%3D%20bytes%28input%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Check%20presence%20of%20a%20negative%20sign.%5Cn%20%20%20%20%20%20%20%20bytes1%20sign%20%3D%20begin%20%3D%3D%20end%20%3F%20bytes1%280%29%20%3A%20bytes1%28_unsafeReadBytesOffset%28buffer%2C%20begin%29%29%3B%20%2F%2F%20don%27t%20do%20out-of-bound%20%28possibly%20unsafe%29%20read%20if%20sub-string%20is%20empty%5Cn%20%20%20%20%20%20%20%20bool%20positiveSign%20%3D%20sign%20%3D%3D%20bytes1%28%5C%22%2B%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20bool%20negativeSign%20%3D%20sign%20%3D%3D%20bytes1%28%5C%22-%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20uint256%20offset%20%3D%20%28positiveSign%20%7C%7C%20negativeSign%29.toUint%28%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%28bool%20absSuccess%2C%20uint256%20absValue%29%20%3D%20tryParseUint%28input%2C%20begin%20%2B%20offset%2C%20end%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28absSuccess%20%26%26%20absValue%20%3C%20ABS_MIN_INT256%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28true%2C%20negativeSign%20%3F%20-int256%28absValue%29%20%3A%20int256%28absValue%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20if%20%28absSuccess%20%26%26%20negativeSign%20%26%26%20absValue%20%3D%3D%20ABS_MIN_INT256%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28true%2C%20type%28int256%29.min%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20return%20%28false%2C%200%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Parse%20a%20hexadecimal%20string%20%28with%20or%20without%20%5C%220x%5C%22%20prefix%29%2C%20and%20returns%20the%20value%20as%20a%20%60uint256%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%20-%20The%20string%20must%20be%20formatted%20as%20%60%280x%29%3F%5B0-9a-fA-F%5D%2A%60%5Cn%20%20%20%20%20%2A%20-%20The%20result%20must%20fit%20in%20an%20%60uint256%60%20type.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20parseHexUint%28string%20memory%20input%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20parseHexUint%28input%2C%200%2C%20bytes%28input%29.length%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Variant%20of%20%7BparseHexUint%7D%20that%20parses%20a%20substring%20of%20%60input%60%20located%20between%20position%20%60begin%60%20%28included%29%20and%5Cn%20%20%20%20%20%2A%20%60end%60%20%28excluded%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%20-%20The%20substring%20must%20be%20formatted%20as%20%60%280x%29%3F%5B0-9a-fA-F%5D%2A%60%5Cn%20%20%20%20%20%2A%20-%20The%20result%20must%20fit%20in%20an%20%60uint256%60%20type.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20parseHexUint%28string%20memory%20input%2C%20uint256%20begin%2C%20uint256%20end%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20%28bool%20success%2C%20uint256%20value%29%20%3D%20tryParseHexUint%28input%2C%20begin%2C%20end%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28%21success%29%20revert%20StringsInvalidChar%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Variant%20of%20%7BparseHexUint-string%7D%20that%20returns%20false%20if%20the%20parsing%20fails%20because%20of%20an%20invalid%20character.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20This%20function%20will%20revert%20if%20the%20result%20does%20not%20fit%20in%20a%20%60uint256%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20tryParseHexUint%28string%20memory%20input%29%20internal%20pure%20returns%20%28bool%20success%2C%20uint256%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_tryParseHexUintUncheckedBounds%28input%2C%200%2C%20bytes%28input%29.length%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Variant%20of%20%7BparseHexUint-string-uint256-uint256%7D%20that%20returns%20false%20if%20the%20parsing%20fails%20because%20of%20an%5Cn%20%20%20%20%20%2A%20invalid%20character.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20This%20function%20will%20revert%20if%20the%20result%20does%20not%20fit%20in%20a%20%60uint256%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20tryParseHexUint%28%5Cn%20%20%20%20%20%20%20%20string%20memory%20input%2C%5Cn%20%20%20%20%20%20%20%20uint256%20begin%2C%5Cn%20%20%20%20%20%20%20%20uint256%20end%5Cn%20%20%20%20%29%20internal%20pure%20returns%20%28bool%20success%2C%20uint256%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28end%20%3E%20bytes%28input%29.length%20%7C%7C%20begin%20%3E%20end%29%20return%20%28false%2C%200%29%3B%5Cn%20%20%20%20%20%20%20%20return%20_tryParseHexUintUncheckedBounds%28input%2C%20begin%2C%20end%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Implementation%20of%20%7BtryParseHexUint%7D%20that%20does%20not%20check%20bounds.%20Caller%20should%20make%20sure%20that%5Cn%20%20%20%20%20%2A%20%60begin%20%3C%3D%20end%20%3C%3D%20input.length%60.%20Other%20inputs%20would%20result%20in%20undefined%20behavior.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_tryParseHexUintUncheckedBounds%28%5Cn%20%20%20%20%20%20%20%20string%20memory%20input%2C%5Cn%20%20%20%20%20%20%20%20uint256%20begin%2C%5Cn%20%20%20%20%20%20%20%20uint256%20end%5Cn%20%20%20%20%29%20private%20pure%20returns%20%28bool%20success%2C%20uint256%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20buffer%20%3D%20bytes%28input%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20skip%200x%20prefix%20if%20present%5Cn%20%20%20%20%20%20%20%20bool%20hasPrefix%20%3D%20%28end%20%3E%20begin%20%2B%201%29%20%26%26%20bytes2%28_unsafeReadBytesOffset%28buffer%2C%20begin%29%29%20%3D%3D%20bytes2%28%5C%220x%5C%22%29%3B%20%2F%2F%20don%27t%20do%20out-of-bound%20%28possibly%20unsafe%29%20read%20if%20sub-string%20is%20empty%5Cn%20%20%20%20%20%20%20%20uint256%20offset%20%3D%20hasPrefix.toUint%28%29%20%2A%202%3B%5Cn%5Cn%20%20%20%20%20%20%20%20uint256%20result%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%20begin%20%2B%20offset%3B%20i%20%3C%20end%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint8%20chr%20%3D%20_tryParseChr%28bytes1%28_unsafeReadBytesOffset%28buffer%2C%20i%29%29%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28chr%20%3E%2015%29%20return%20%28false%2C%200%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%2A%3D%2016%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Multiplying%20by%2016%20is%20equivalent%20to%20a%20shift%20of%204%20bits%20%28with%20additional%20overflow%20check%29.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20This%20guaratees%20that%20adding%20a%20value%20%3C%2016%20will%20not%20cause%20an%20overflow%2C%20hence%20the%20unchecked.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%20chr%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20%28true%2C%20result%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Parse%20a%20hexadecimal%20string%20%28with%20or%20without%20%5C%220x%5C%22%20prefix%29%2C%20and%20returns%20the%20value%20as%20an%20%60address%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%20-%20The%20string%20must%20be%20formatted%20as%20%60%280x%29%3F%5B0-9a-fA-F%5D%7B40%7D%60%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20parseAddress%28string%20memory%20input%29%20internal%20pure%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20parseAddress%28input%2C%200%2C%20bytes%28input%29.length%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Variant%20of%20%7BparseAddress%7D%20that%20parses%20a%20substring%20of%20%60input%60%20located%20between%20position%20%60begin%60%20%28included%29%20and%5Cn%20%20%20%20%20%2A%20%60end%60%20%28excluded%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%20-%20The%20substring%20must%20be%20formatted%20as%20%60%280x%29%3F%5B0-9a-fA-F%5D%7B40%7D%60%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20parseAddress%28string%20memory%20input%2C%20uint256%20begin%2C%20uint256%20end%29%20internal%20pure%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20%28bool%20success%2C%20address%20value%29%20%3D%20tryParseAddress%28input%2C%20begin%2C%20end%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28%21success%29%20revert%20StringsInvalidAddressFormat%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Variant%20of%20%7BparseAddress-string%7D%20that%20returns%20false%20if%20the%20parsing%20fails%20because%20the%20input%20is%20not%20a%20properly%5Cn%20%20%20%20%20%2A%20formatted%20address.%20See%20%7BparseAddress%7D%20requirements.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20tryParseAddress%28string%20memory%20input%29%20internal%20pure%20returns%20%28bool%20success%2C%20address%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20tryParseAddress%28input%2C%200%2C%20bytes%28input%29.length%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Variant%20of%20%7BparseAddress-string-uint256-uint256%7D%20that%20returns%20false%20if%20the%20parsing%20fails%20because%20input%20is%20not%20a%20properly%5Cn%20%20%20%20%20%2A%20formatted%20address.%20See%20%7BparseAddress%7D%20requirements.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20tryParseAddress%28%5Cn%20%20%20%20%20%20%20%20string%20memory%20input%2C%5Cn%20%20%20%20%20%20%20%20uint256%20begin%2C%5Cn%20%20%20%20%20%20%20%20uint256%20end%5Cn%20%20%20%20%29%20internal%20pure%20returns%20%28bool%20success%2C%20address%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28end%20%3E%20bytes%28input%29.length%20%7C%7C%20begin%20%3E%20end%29%20return%20%28false%2C%20address%280%29%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20bool%20hasPrefix%20%3D%20%28end%20%3E%20begin%20%2B%201%29%20%26%26%20bytes2%28_unsafeReadBytesOffset%28bytes%28input%29%2C%20begin%29%29%20%3D%3D%20bytes2%28%5C%220x%5C%22%29%3B%20%2F%2F%20don%27t%20do%20out-of-bound%20%28possibly%20unsafe%29%20read%20if%20sub-string%20is%20empty%5Cn%20%20%20%20%20%20%20%20uint256%20expectedLength%20%3D%2040%20%2B%20hasPrefix.toUint%28%29%20%2A%202%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20check%20that%20input%20is%20the%20correct%20length%5Cn%20%20%20%20%20%20%20%20if%20%28end%20-%20begin%20%3D%3D%20expectedLength%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20length%20guarantees%20that%20this%20does%20not%20overflow%2C%20and%20value%20is%20at%20most%20type%28uint160%29.max%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%28bool%20s%2C%20uint256%20v%29%20%3D%20_tryParseHexUintUncheckedBounds%28input%2C%20begin%2C%20end%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28s%2C%20address%28uint160%28v%29%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28false%2C%20address%280%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_tryParseChr%28bytes1%20chr%29%20private%20pure%20returns%20%28uint8%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint8%20value%20%3D%20uint8%28chr%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Try%20to%20parse%20%60chr%60%3A%5Cn%20%20%20%20%20%20%20%20%2F%2F%20-%20Case%201%3A%20%5B0-9%5D%5Cn%20%20%20%20%20%20%20%20%2F%2F%20-%20Case%202%3A%20%5Ba-f%5D%5Cn%20%20%20%20%20%20%20%20%2F%2F%20-%20Case%203%3A%20%5BA-F%5D%5Cn%20%20%20%20%20%20%20%20%2F%2F%20-%20otherwise%20not%20supported%5Cn%20%20%20%20%20%20%20%20unchecked%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28value%20%3E%2047%20%26%26%20value%20%3C%2058%29%20value%20-%3D%2048%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20%28value%20%3E%2096%20%26%26%20value%20%3C%20103%29%20value%20-%3D%2087%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20%28value%20%3E%2064%20%26%26%20value%20%3C%2071%29%20value%20-%3D%2055%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20else%20return%20type%28uint8%29.max%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20return%20value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Reads%20a%20bytes32%20from%20a%20bytes%20array%20without%20bounds%20checking.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20making%20this%20function%20internal%20would%20mean%20it%20could%20be%20used%20with%20memory%20unsafe%20offset%2C%20and%20marking%20the%5Cn%20%20%20%20%20%2A%20assembly%20block%20as%20such%20would%20prevent%20some%20optimizations.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_unsafeReadBytesOffset%28bytes%20memory%20buffer%2C%20uint256%20offset%29%20private%20pure%20returns%20%28bytes32%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20This%20is%20not%20memory%20safe%20in%20the%20general%20case%2C%20but%20all%20calls%20to%20this%20private%20function%20are%20within%20bounds.%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20value%20%3A%3D%20mload%28add%28buffer%2C%20add%280x20%2C%20offset%29%29%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2Fstructs%2FCheckpoints.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2Fstructs%2FCheckpoints.sol%29%5Cn%2F%2F%20This%20file%20was%20procedurally%20generated%20from%20scripts%2Fgenerate%2Ftemplates%2FCheckpoints.js.%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BMath%7D%20from%20%5C%22..%2Fmath%2FMath.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20This%20library%20defines%20the%20%60Trace%2A%60%20struct%2C%20for%20checkpointing%20values%20as%20they%20change%20at%20different%20points%20in%5Cn%20%2A%20time%2C%20and%20later%20looking%20up%20past%20values%20by%20block%20number.%20See%20%7BVotes%7D%20as%20an%20example.%5Cn%20%2A%5Cn%20%2A%20To%20create%20a%20history%20of%20checkpoints%20define%20a%20variable%20type%20%60Checkpoints.Trace%2A%60%20in%20your%20contract%2C%20and%20store%20a%20new%5Cn%20%2A%20checkpoint%20for%20the%20current%20transaction%20block%20using%20the%20%7Bpush%7D%20function.%5Cn%20%2A%2F%5Cnlibrary%20Checkpoints%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20A%20value%20was%20attempted%20to%20be%20inserted%20on%20a%20past%20checkpoint.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20CheckpointUnorderedInsertion%28%29%3B%5Cn%5Cn%20%20%20%20struct%20Trace224%20%7B%5Cn%20%20%20%20%20%20%20%20Checkpoint224%5B%5D%20_checkpoints%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20Checkpoint224%20%7B%5Cn%20%20%20%20%20%20%20%20uint32%20_key%3B%5Cn%20%20%20%20%20%20%20%20uint224%20_value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Pushes%20a%20%28%60key%60%2C%20%60value%60%29%20pair%20into%20a%20Trace224%20so%20that%20it%20is%20stored%20as%20the%20checkpoint.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%20previous%20value%20and%20new%20value.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20IMPORTANT%3A%20Never%20accept%20%60key%60%20as%20a%20user%20input%2C%20since%20an%20arbitrary%20%60type%28uint32%29.max%60%20key%20set%20will%20disable%20the%5Cn%20%20%20%20%20%2A%20library.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20push%28%5Cn%20%20%20%20%20%20%20%20Trace224%20storage%20self%2C%5Cn%20%20%20%20%20%20%20%20uint32%20key%2C%5Cn%20%20%20%20%20%20%20%20uint224%20value%5Cn%20%20%20%20%29%20internal%20returns%20%28uint224%20oldValue%2C%20uint224%20newValue%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_insert%28self._checkpoints%2C%20key%2C%20value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20value%20in%20the%20first%20%28oldest%29%20checkpoint%20with%20key%20greater%20or%20equal%20than%20the%20search%20key%2C%20or%20zero%20if%5Cn%20%20%20%20%20%2A%20there%20is%20none.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20lowerLookup%28Trace224%20storage%20self%2C%20uint32%20key%29%20internal%20view%20returns%20%28uint224%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20len%20%3D%20self._checkpoints.length%3B%5Cn%20%20%20%20%20%20%20%20uint256%20pos%20%3D%20_lowerBinaryLookup%28self._checkpoints%2C%20key%2C%200%2C%20len%29%3B%5Cn%20%20%20%20%20%20%20%20return%20pos%20%3D%3D%20len%20%3F%200%20%3A%20_unsafeAccess%28self._checkpoints%2C%20pos%29._value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20value%20in%20the%20last%20%28most%20recent%29%20checkpoint%20with%20key%20lower%20or%20equal%20than%20the%20search%20key%2C%20or%20zero%5Cn%20%20%20%20%20%2A%20if%20there%20is%20none.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20upperLookup%28Trace224%20storage%20self%2C%20uint32%20key%29%20internal%20view%20returns%20%28uint224%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20len%20%3D%20self._checkpoints.length%3B%5Cn%20%20%20%20%20%20%20%20uint256%20pos%20%3D%20_upperBinaryLookup%28self._checkpoints%2C%20key%2C%200%2C%20len%29%3B%5Cn%20%20%20%20%20%20%20%20return%20pos%20%3D%3D%200%20%3F%200%20%3A%20_unsafeAccess%28self._checkpoints%2C%20pos%20-%201%29._value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20value%20in%20the%20last%20%28most%20recent%29%20checkpoint%20with%20key%20lower%20or%20equal%20than%20the%20search%20key%2C%20or%20zero%5Cn%20%20%20%20%20%2A%20if%20there%20is%20none.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20This%20is%20a%20variant%20of%20%7BupperLookup%7D%20that%20is%20optimised%20to%20find%20%5C%22recent%5C%22%20checkpoint%20%28checkpoints%20with%20high%5Cn%20%20%20%20%20%2A%20keys%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20upperLookupRecent%28Trace224%20storage%20self%2C%20uint32%20key%29%20internal%20view%20returns%20%28uint224%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20len%20%3D%20self._checkpoints.length%3B%5Cn%5Cn%20%20%20%20%20%20%20%20uint256%20low%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20uint256%20high%20%3D%20len%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28len%20%3E%205%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20mid%20%3D%20len%20-%20Math.sqrt%28len%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28key%20%3C%20_unsafeAccess%28self._checkpoints%2C%20mid%29._key%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20high%20%3D%20mid%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20low%20%3D%20mid%20%2B%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20uint256%20pos%20%3D%20_upperBinaryLookup%28self._checkpoints%2C%20key%2C%20low%2C%20high%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20return%20pos%20%3D%3D%200%20%3F%200%20%3A%20_unsafeAccess%28self._checkpoints%2C%20pos%20-%201%29._value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20value%20in%20the%20most%20recent%20checkpoint%2C%20or%20zero%20if%20there%20are%20no%20checkpoints.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20latest%28Trace224%20storage%20self%29%20internal%20view%20returns%20%28uint224%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20pos%20%3D%20self._checkpoints.length%3B%5Cn%20%20%20%20%20%20%20%20return%20pos%20%3D%3D%200%20%3F%200%20%3A%20_unsafeAccess%28self._checkpoints%2C%20pos%20-%201%29._value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20whether%20there%20is%20a%20checkpoint%20in%20the%20structure%20%28i.e.%20it%20is%20not%20empty%29%2C%20and%20if%20so%20the%20key%20and%20value%5Cn%20%20%20%20%20%2A%20in%20the%20most%20recent%20checkpoint.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20latestCheckpoint%28Trace224%20storage%20self%29%20internal%20view%20returns%20%28bool%20exists%2C%20uint32%20_key%2C%20uint224%20_value%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20pos%20%3D%20self._checkpoints.length%3B%5Cn%20%20%20%20%20%20%20%20if%20%28pos%20%3D%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28false%2C%200%2C%200%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20Checkpoint224%20storage%20ckpt%20%3D%20_unsafeAccess%28self._checkpoints%2C%20pos%20-%201%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28true%2C%20ckpt._key%2C%20ckpt._value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20number%20of%20checkpoint.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20length%28Trace224%20storage%20self%29%20internal%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20self._checkpoints.length%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20checkpoint%20at%20given%20position.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20at%28Trace224%20storage%20self%2C%20uint32%20pos%29%20internal%20view%20returns%20%28Checkpoint224%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20self._checkpoints%5Bpos%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Pushes%20a%20%28%60key%60%2C%20%60value%60%29%20pair%20into%20an%20ordered%20list%20of%20checkpoints%2C%20either%20by%20inserting%20a%20new%20checkpoint%2C%5Cn%20%20%20%20%20%2A%20or%20by%20updating%20the%20last%20one.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_insert%28%5Cn%20%20%20%20%20%20%20%20Checkpoint224%5B%5D%20storage%20self%2C%5Cn%20%20%20%20%20%20%20%20uint32%20key%2C%5Cn%20%20%20%20%20%20%20%20uint224%20value%5Cn%20%20%20%20%29%20private%20returns%20%28uint224%20oldValue%2C%20uint224%20newValue%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20pos%20%3D%20self.length%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28pos%20%3E%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20Checkpoint224%20storage%20last%20%3D%20_unsafeAccess%28self%2C%20pos%20-%201%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint32%20lastKey%20%3D%20last._key%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint224%20lastValue%20%3D%20last._value%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Checkpoint%20keys%20must%20be%20non-decreasing.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28lastKey%20%3E%20key%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20CheckpointUnorderedInsertion%28%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Update%20or%20push%20new%20checkpoint%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28lastKey%20%3D%3D%20key%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20last._value%20%3D%20value%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self.push%28Checkpoint224%28%7B_key%3A%20key%2C%20_value%3A%20value%7D%29%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28lastValue%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20self.push%28Checkpoint224%28%7B_key%3A%20key%2C%20_value%3A%20value%7D%29%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%280%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Return%20the%20index%20of%20the%20first%20%28oldest%29%20checkpoint%20with%20key%20strictly%20bigger%20than%20the%20search%20key%2C%20or%20%60high%60%5Cn%20%20%20%20%20%2A%20if%20there%20is%20none.%20%60low%60%20and%20%60high%60%20define%20a%20section%20where%20to%20do%20the%20search%2C%20with%20inclusive%20%60low%60%20and%20exclusive%5Cn%20%20%20%20%20%2A%20%60high%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20%60high%60%20should%20not%20be%20greater%20than%20the%20array%27s%20length.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_upperBinaryLookup%28%5Cn%20%20%20%20%20%20%20%20Checkpoint224%5B%5D%20storage%20self%2C%5Cn%20%20%20%20%20%20%20%20uint32%20key%2C%5Cn%20%20%20%20%20%20%20%20uint256%20low%2C%5Cn%20%20%20%20%20%20%20%20uint256%20high%5Cn%20%20%20%20%29%20private%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20while%20%28low%20%3C%20high%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20mid%20%3D%20Math.average%28low%2C%20high%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28_unsafeAccess%28self%2C%20mid%29._key%20%3E%20key%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20high%20%3D%20mid%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20low%20%3D%20mid%20%2B%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20high%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Return%20the%20index%20of%20the%20first%20%28oldest%29%20checkpoint%20with%20key%20greater%20or%20equal%20than%20the%20search%20key%2C%20or%20%60high%60%5Cn%20%20%20%20%20%2A%20if%20there%20is%20none.%20%60low%60%20and%20%60high%60%20define%20a%20section%20where%20to%20do%20the%20search%2C%20with%20inclusive%20%60low%60%20and%20exclusive%5Cn%20%20%20%20%20%2A%20%60high%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20%60high%60%20should%20not%20be%20greater%20than%20the%20array%27s%20length.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_lowerBinaryLookup%28%5Cn%20%20%20%20%20%20%20%20Checkpoint224%5B%5D%20storage%20self%2C%5Cn%20%20%20%20%20%20%20%20uint32%20key%2C%5Cn%20%20%20%20%20%20%20%20uint256%20low%2C%5Cn%20%20%20%20%20%20%20%20uint256%20high%5Cn%20%20%20%20%29%20private%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20while%20%28low%20%3C%20high%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20mid%20%3D%20Math.average%28low%2C%20high%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28_unsafeAccess%28self%2C%20mid%29._key%20%3C%20key%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20low%20%3D%20mid%20%2B%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20high%20%3D%20mid%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20high%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Access%20an%20element%20of%20the%20array%20without%20performing%20bounds%20check.%20The%20position%20is%20assumed%20to%20be%20within%20bounds.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_unsafeAccess%28%5Cn%20%20%20%20%20%20%20%20Checkpoint224%5B%5D%20storage%20self%2C%5Cn%20%20%20%20%20%20%20%20uint256%20pos%5Cn%20%20%20%20%29%20private%20pure%20returns%20%28Checkpoint224%20storage%20result%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280%2C%20self.slot%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result.slot%20%3A%3D%20add%28keccak256%280%2C%200x20%29%2C%20pos%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20Trace208%20%7B%5Cn%20%20%20%20%20%20%20%20Checkpoint208%5B%5D%20_checkpoints%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20Checkpoint208%20%7B%5Cn%20%20%20%20%20%20%20%20uint48%20_key%3B%5Cn%20%20%20%20%20%20%20%20uint208%20_value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Pushes%20a%20%28%60key%60%2C%20%60value%60%29%20pair%20into%20a%20Trace208%20so%20that%20it%20is%20stored%20as%20the%20checkpoint.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%20previous%20value%20and%20new%20value.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20IMPORTANT%3A%20Never%20accept%20%60key%60%20as%20a%20user%20input%2C%20since%20an%20arbitrary%20%60type%28uint48%29.max%60%20key%20set%20will%20disable%20the%5Cn%20%20%20%20%20%2A%20library.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20push%28%5Cn%20%20%20%20%20%20%20%20Trace208%20storage%20self%2C%5Cn%20%20%20%20%20%20%20%20uint48%20key%2C%5Cn%20%20%20%20%20%20%20%20uint208%20value%5Cn%20%20%20%20%29%20internal%20returns%20%28uint208%20oldValue%2C%20uint208%20newValue%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_insert%28self._checkpoints%2C%20key%2C%20value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20value%20in%20the%20first%20%28oldest%29%20checkpoint%20with%20key%20greater%20or%20equal%20than%20the%20search%20key%2C%20or%20zero%20if%5Cn%20%20%20%20%20%2A%20there%20is%20none.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20lowerLookup%28Trace208%20storage%20self%2C%20uint48%20key%29%20internal%20view%20returns%20%28uint208%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20len%20%3D%20self._checkpoints.length%3B%5Cn%20%20%20%20%20%20%20%20uint256%20pos%20%3D%20_lowerBinaryLookup%28self._checkpoints%2C%20key%2C%200%2C%20len%29%3B%5Cn%20%20%20%20%20%20%20%20return%20pos%20%3D%3D%20len%20%3F%200%20%3A%20_unsafeAccess%28self._checkpoints%2C%20pos%29._value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20value%20in%20the%20last%20%28most%20recent%29%20checkpoint%20with%20key%20lower%20or%20equal%20than%20the%20search%20key%2C%20or%20zero%5Cn%20%20%20%20%20%2A%20if%20there%20is%20none.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20upperLookup%28Trace208%20storage%20self%2C%20uint48%20key%29%20internal%20view%20returns%20%28uint208%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20len%20%3D%20self._checkpoints.length%3B%5Cn%20%20%20%20%20%20%20%20uint256%20pos%20%3D%20_upperBinaryLookup%28self._checkpoints%2C%20key%2C%200%2C%20len%29%3B%5Cn%20%20%20%20%20%20%20%20return%20pos%20%3D%3D%200%20%3F%200%20%3A%20_unsafeAccess%28self._checkpoints%2C%20pos%20-%201%29._value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20value%20in%20the%20last%20%28most%20recent%29%20checkpoint%20with%20key%20lower%20or%20equal%20than%20the%20search%20key%2C%20or%20zero%5Cn%20%20%20%20%20%2A%20if%20there%20is%20none.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20This%20is%20a%20variant%20of%20%7BupperLookup%7D%20that%20is%20optimised%20to%20find%20%5C%22recent%5C%22%20checkpoint%20%28checkpoints%20with%20high%5Cn%20%20%20%20%20%2A%20keys%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20upperLookupRecent%28Trace208%20storage%20self%2C%20uint48%20key%29%20internal%20view%20returns%20%28uint208%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20len%20%3D%20self._checkpoints.length%3B%5Cn%5Cn%20%20%20%20%20%20%20%20uint256%20low%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20uint256%20high%20%3D%20len%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28len%20%3E%205%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20mid%20%3D%20len%20-%20Math.sqrt%28len%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28key%20%3C%20_unsafeAccess%28self._checkpoints%2C%20mid%29._key%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20high%20%3D%20mid%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20low%20%3D%20mid%20%2B%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20uint256%20pos%20%3D%20_upperBinaryLookup%28self._checkpoints%2C%20key%2C%20low%2C%20high%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20return%20pos%20%3D%3D%200%20%3F%200%20%3A%20_unsafeAccess%28self._checkpoints%2C%20pos%20-%201%29._value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20value%20in%20the%20most%20recent%20checkpoint%2C%20or%20zero%20if%20there%20are%20no%20checkpoints.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20latest%28Trace208%20storage%20self%29%20internal%20view%20returns%20%28uint208%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20pos%20%3D%20self._checkpoints.length%3B%5Cn%20%20%20%20%20%20%20%20return%20pos%20%3D%3D%200%20%3F%200%20%3A%20_unsafeAccess%28self._checkpoints%2C%20pos%20-%201%29._value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20whether%20there%20is%20a%20checkpoint%20in%20the%20structure%20%28i.e.%20it%20is%20not%20empty%29%2C%20and%20if%20so%20the%20key%20and%20value%5Cn%20%20%20%20%20%2A%20in%20the%20most%20recent%20checkpoint.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20latestCheckpoint%28Trace208%20storage%20self%29%20internal%20view%20returns%20%28bool%20exists%2C%20uint48%20_key%2C%20uint208%20_value%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20pos%20%3D%20self._checkpoints.length%3B%5Cn%20%20%20%20%20%20%20%20if%20%28pos%20%3D%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28false%2C%200%2C%200%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20Checkpoint208%20storage%20ckpt%20%3D%20_unsafeAccess%28self._checkpoints%2C%20pos%20-%201%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28true%2C%20ckpt._key%2C%20ckpt._value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20number%20of%20checkpoint.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20length%28Trace208%20storage%20self%29%20internal%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20self._checkpoints.length%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20checkpoint%20at%20given%20position.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20at%28Trace208%20storage%20self%2C%20uint32%20pos%29%20internal%20view%20returns%20%28Checkpoint208%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20self._checkpoints%5Bpos%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Pushes%20a%20%28%60key%60%2C%20%60value%60%29%20pair%20into%20an%20ordered%20list%20of%20checkpoints%2C%20either%20by%20inserting%20a%20new%20checkpoint%2C%5Cn%20%20%20%20%20%2A%20or%20by%20updating%20the%20last%20one.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_insert%28%5Cn%20%20%20%20%20%20%20%20Checkpoint208%5B%5D%20storage%20self%2C%5Cn%20%20%20%20%20%20%20%20uint48%20key%2C%5Cn%20%20%20%20%20%20%20%20uint208%20value%5Cn%20%20%20%20%29%20private%20returns%20%28uint208%20oldValue%2C%20uint208%20newValue%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20pos%20%3D%20self.length%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28pos%20%3E%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20Checkpoint208%20storage%20last%20%3D%20_unsafeAccess%28self%2C%20pos%20-%201%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint48%20lastKey%20%3D%20last._key%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint208%20lastValue%20%3D%20last._value%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Checkpoint%20keys%20must%20be%20non-decreasing.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28lastKey%20%3E%20key%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20CheckpointUnorderedInsertion%28%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Update%20or%20push%20new%20checkpoint%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28lastKey%20%3D%3D%20key%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20last._value%20%3D%20value%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self.push%28Checkpoint208%28%7B_key%3A%20key%2C%20_value%3A%20value%7D%29%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28lastValue%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20self.push%28Checkpoint208%28%7B_key%3A%20key%2C%20_value%3A%20value%7D%29%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%280%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Return%20the%20index%20of%20the%20first%20%28oldest%29%20checkpoint%20with%20key%20strictly%20bigger%20than%20the%20search%20key%2C%20or%20%60high%60%5Cn%20%20%20%20%20%2A%20if%20there%20is%20none.%20%60low%60%20and%20%60high%60%20define%20a%20section%20where%20to%20do%20the%20search%2C%20with%20inclusive%20%60low%60%20and%20exclusive%5Cn%20%20%20%20%20%2A%20%60high%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20%60high%60%20should%20not%20be%20greater%20than%20the%20array%27s%20length.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_upperBinaryLookup%28%5Cn%20%20%20%20%20%20%20%20Checkpoint208%5B%5D%20storage%20self%2C%5Cn%20%20%20%20%20%20%20%20uint48%20key%2C%5Cn%20%20%20%20%20%20%20%20uint256%20low%2C%5Cn%20%20%20%20%20%20%20%20uint256%20high%5Cn%20%20%20%20%29%20private%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20while%20%28low%20%3C%20high%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20mid%20%3D%20Math.average%28low%2C%20high%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28_unsafeAccess%28self%2C%20mid%29._key%20%3E%20key%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20high%20%3D%20mid%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20low%20%3D%20mid%20%2B%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20high%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Return%20the%20index%20of%20the%20first%20%28oldest%29%20checkpoint%20with%20key%20greater%20or%20equal%20than%20the%20search%20key%2C%20or%20%60high%60%5Cn%20%20%20%20%20%2A%20if%20there%20is%20none.%20%60low%60%20and%20%60high%60%20define%20a%20section%20where%20to%20do%20the%20search%2C%20with%20inclusive%20%60low%60%20and%20exclusive%5Cn%20%20%20%20%20%2A%20%60high%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20%60high%60%20should%20not%20be%20greater%20than%20the%20array%27s%20length.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_lowerBinaryLookup%28%5Cn%20%20%20%20%20%20%20%20Checkpoint208%5B%5D%20storage%20self%2C%5Cn%20%20%20%20%20%20%20%20uint48%20key%2C%5Cn%20%20%20%20%20%20%20%20uint256%20low%2C%5Cn%20%20%20%20%20%20%20%20uint256%20high%5Cn%20%20%20%20%29%20private%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20while%20%28low%20%3C%20high%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20mid%20%3D%20Math.average%28low%2C%20high%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28_unsafeAccess%28self%2C%20mid%29._key%20%3C%20key%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20low%20%3D%20mid%20%2B%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20high%20%3D%20mid%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20high%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Access%20an%20element%20of%20the%20array%20without%20performing%20bounds%20check.%20The%20position%20is%20assumed%20to%20be%20within%20bounds.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_unsafeAccess%28%5Cn%20%20%20%20%20%20%20%20Checkpoint208%5B%5D%20storage%20self%2C%5Cn%20%20%20%20%20%20%20%20uint256%20pos%5Cn%20%20%20%20%29%20private%20pure%20returns%20%28Checkpoint208%20storage%20result%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280%2C%20self.slot%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result.slot%20%3A%3D%20add%28keccak256%280%2C%200x20%29%2C%20pos%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20Trace160%20%7B%5Cn%20%20%20%20%20%20%20%20Checkpoint160%5B%5D%20_checkpoints%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20Checkpoint160%20%7B%5Cn%20%20%20%20%20%20%20%20uint96%20_key%3B%5Cn%20%20%20%20%20%20%20%20uint160%20_value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Pushes%20a%20%28%60key%60%2C%20%60value%60%29%20pair%20into%20a%20Trace160%20so%20that%20it%20is%20stored%20as%20the%20checkpoint.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%20previous%20value%20and%20new%20value.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20IMPORTANT%3A%20Never%20accept%20%60key%60%20as%20a%20user%20input%2C%20since%20an%20arbitrary%20%60type%28uint96%29.max%60%20key%20set%20will%20disable%20the%5Cn%20%20%20%20%20%2A%20library.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20push%28%5Cn%20%20%20%20%20%20%20%20Trace160%20storage%20self%2C%5Cn%20%20%20%20%20%20%20%20uint96%20key%2C%5Cn%20%20%20%20%20%20%20%20uint160%20value%5Cn%20%20%20%20%29%20internal%20returns%20%28uint160%20oldValue%2C%20uint160%20newValue%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_insert%28self._checkpoints%2C%20key%2C%20value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20value%20in%20the%20first%20%28oldest%29%20checkpoint%20with%20key%20greater%20or%20equal%20than%20the%20search%20key%2C%20or%20zero%20if%5Cn%20%20%20%20%20%2A%20there%20is%20none.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20lowerLookup%28Trace160%20storage%20self%2C%20uint96%20key%29%20internal%20view%20returns%20%28uint160%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20len%20%3D%20self._checkpoints.length%3B%5Cn%20%20%20%20%20%20%20%20uint256%20pos%20%3D%20_lowerBinaryLookup%28self._checkpoints%2C%20key%2C%200%2C%20len%29%3B%5Cn%20%20%20%20%20%20%20%20return%20pos%20%3D%3D%20len%20%3F%200%20%3A%20_unsafeAccess%28self._checkpoints%2C%20pos%29._value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20value%20in%20the%20last%20%28most%20recent%29%20checkpoint%20with%20key%20lower%20or%20equal%20than%20the%20search%20key%2C%20or%20zero%5Cn%20%20%20%20%20%2A%20if%20there%20is%20none.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20upperLookup%28Trace160%20storage%20self%2C%20uint96%20key%29%20internal%20view%20returns%20%28uint160%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20len%20%3D%20self._checkpoints.length%3B%5Cn%20%20%20%20%20%20%20%20uint256%20pos%20%3D%20_upperBinaryLookup%28self._checkpoints%2C%20key%2C%200%2C%20len%29%3B%5Cn%20%20%20%20%20%20%20%20return%20pos%20%3D%3D%200%20%3F%200%20%3A%20_unsafeAccess%28self._checkpoints%2C%20pos%20-%201%29._value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20value%20in%20the%20last%20%28most%20recent%29%20checkpoint%20with%20key%20lower%20or%20equal%20than%20the%20search%20key%2C%20or%20zero%5Cn%20%20%20%20%20%2A%20if%20there%20is%20none.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20This%20is%20a%20variant%20of%20%7BupperLookup%7D%20that%20is%20optimised%20to%20find%20%5C%22recent%5C%22%20checkpoint%20%28checkpoints%20with%20high%5Cn%20%20%20%20%20%2A%20keys%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20upperLookupRecent%28Trace160%20storage%20self%2C%20uint96%20key%29%20internal%20view%20returns%20%28uint160%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20len%20%3D%20self._checkpoints.length%3B%5Cn%5Cn%20%20%20%20%20%20%20%20uint256%20low%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20uint256%20high%20%3D%20len%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28len%20%3E%205%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20mid%20%3D%20len%20-%20Math.sqrt%28len%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28key%20%3C%20_unsafeAccess%28self._checkpoints%2C%20mid%29._key%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20high%20%3D%20mid%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20low%20%3D%20mid%20%2B%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20uint256%20pos%20%3D%20_upperBinaryLookup%28self._checkpoints%2C%20key%2C%20low%2C%20high%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20return%20pos%20%3D%3D%200%20%3F%200%20%3A%20_unsafeAccess%28self._checkpoints%2C%20pos%20-%201%29._value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20value%20in%20the%20most%20recent%20checkpoint%2C%20or%20zero%20if%20there%20are%20no%20checkpoints.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20latest%28Trace160%20storage%20self%29%20internal%20view%20returns%20%28uint160%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20pos%20%3D%20self._checkpoints.length%3B%5Cn%20%20%20%20%20%20%20%20return%20pos%20%3D%3D%200%20%3F%200%20%3A%20_unsafeAccess%28self._checkpoints%2C%20pos%20-%201%29._value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20whether%20there%20is%20a%20checkpoint%20in%20the%20structure%20%28i.e.%20it%20is%20not%20empty%29%2C%20and%20if%20so%20the%20key%20and%20value%5Cn%20%20%20%20%20%2A%20in%20the%20most%20recent%20checkpoint.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20latestCheckpoint%28Trace160%20storage%20self%29%20internal%20view%20returns%20%28bool%20exists%2C%20uint96%20_key%2C%20uint160%20_value%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20pos%20%3D%20self._checkpoints.length%3B%5Cn%20%20%20%20%20%20%20%20if%20%28pos%20%3D%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28false%2C%200%2C%200%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20Checkpoint160%20storage%20ckpt%20%3D%20_unsafeAccess%28self._checkpoints%2C%20pos%20-%201%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28true%2C%20ckpt._key%2C%20ckpt._value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20number%20of%20checkpoint.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20length%28Trace160%20storage%20self%29%20internal%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20self._checkpoints.length%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20checkpoint%20at%20given%20position.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20at%28Trace160%20storage%20self%2C%20uint32%20pos%29%20internal%20view%20returns%20%28Checkpoint160%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20self._checkpoints%5Bpos%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Pushes%20a%20%28%60key%60%2C%20%60value%60%29%20pair%20into%20an%20ordered%20list%20of%20checkpoints%2C%20either%20by%20inserting%20a%20new%20checkpoint%2C%5Cn%20%20%20%20%20%2A%20or%20by%20updating%20the%20last%20one.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_insert%28%5Cn%20%20%20%20%20%20%20%20Checkpoint160%5B%5D%20storage%20self%2C%5Cn%20%20%20%20%20%20%20%20uint96%20key%2C%5Cn%20%20%20%20%20%20%20%20uint160%20value%5Cn%20%20%20%20%29%20private%20returns%20%28uint160%20oldValue%2C%20uint160%20newValue%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20pos%20%3D%20self.length%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28pos%20%3E%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20Checkpoint160%20storage%20last%20%3D%20_unsafeAccess%28self%2C%20pos%20-%201%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint96%20lastKey%20%3D%20last._key%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint160%20lastValue%20%3D%20last._value%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Checkpoint%20keys%20must%20be%20non-decreasing.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28lastKey%20%3E%20key%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20CheckpointUnorderedInsertion%28%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Update%20or%20push%20new%20checkpoint%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28lastKey%20%3D%3D%20key%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20last._value%20%3D%20value%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self.push%28Checkpoint160%28%7B_key%3A%20key%2C%20_value%3A%20value%7D%29%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28lastValue%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20self.push%28Checkpoint160%28%7B_key%3A%20key%2C%20_value%3A%20value%7D%29%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%280%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Return%20the%20index%20of%20the%20first%20%28oldest%29%20checkpoint%20with%20key%20strictly%20bigger%20than%20the%20search%20key%2C%20or%20%60high%60%5Cn%20%20%20%20%20%2A%20if%20there%20is%20none.%20%60low%60%20and%20%60high%60%20define%20a%20section%20where%20to%20do%20the%20search%2C%20with%20inclusive%20%60low%60%20and%20exclusive%5Cn%20%20%20%20%20%2A%20%60high%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20%60high%60%20should%20not%20be%20greater%20than%20the%20array%27s%20length.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_upperBinaryLookup%28%5Cn%20%20%20%20%20%20%20%20Checkpoint160%5B%5D%20storage%20self%2C%5Cn%20%20%20%20%20%20%20%20uint96%20key%2C%5Cn%20%20%20%20%20%20%20%20uint256%20low%2C%5Cn%20%20%20%20%20%20%20%20uint256%20high%5Cn%20%20%20%20%29%20private%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20while%20%28low%20%3C%20high%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20mid%20%3D%20Math.average%28low%2C%20high%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28_unsafeAccess%28self%2C%20mid%29._key%20%3E%20key%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20high%20%3D%20mid%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20low%20%3D%20mid%20%2B%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20high%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Return%20the%20index%20of%20the%20first%20%28oldest%29%20checkpoint%20with%20key%20greater%20or%20equal%20than%20the%20search%20key%2C%20or%20%60high%60%5Cn%20%20%20%20%20%2A%20if%20there%20is%20none.%20%60low%60%20and%20%60high%60%20define%20a%20section%20where%20to%20do%20the%20search%2C%20with%20inclusive%20%60low%60%20and%20exclusive%5Cn%20%20%20%20%20%2A%20%60high%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20%60high%60%20should%20not%20be%20greater%20than%20the%20array%27s%20length.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_lowerBinaryLookup%28%5Cn%20%20%20%20%20%20%20%20Checkpoint160%5B%5D%20storage%20self%2C%5Cn%20%20%20%20%20%20%20%20uint96%20key%2C%5Cn%20%20%20%20%20%20%20%20uint256%20low%2C%5Cn%20%20%20%20%20%20%20%20uint256%20high%5Cn%20%20%20%20%29%20private%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20while%20%28low%20%3C%20high%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20mid%20%3D%20Math.average%28low%2C%20high%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28_unsafeAccess%28self%2C%20mid%29._key%20%3C%20key%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20low%20%3D%20mid%20%2B%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20high%20%3D%20mid%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20high%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Access%20an%20element%20of%20the%20array%20without%20performing%20bounds%20check.%20The%20position%20is%20assumed%20to%20be%20within%20bounds.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_unsafeAccess%28%5Cn%20%20%20%20%20%20%20%20Checkpoint160%5B%5D%20storage%20self%2C%5Cn%20%20%20%20%20%20%20%20uint256%20pos%5Cn%20%20%20%20%29%20private%20pure%20returns%20%28Checkpoint160%20storage%20result%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%280%2C%20self.slot%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result.slot%20%3A%3D%20add%28keccak256%280%2C%200x20%29%2C%20pos%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2Fstructs%2FEnumerableSet.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2Fstructs%2FEnumerableSet.sol%29%5Cn%2F%2F%20This%20file%20was%20procedurally%20generated%20from%20scripts%2Fgenerate%2Ftemplates%2FEnumerableSet.js.%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20Library%20for%20managing%5Cn%20%2A%20https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FSet_%28abstract_data_type%29%5Bsets%5D%20of%20primitive%5Cn%20%2A%20types.%5Cn%20%2A%5Cn%20%2A%20Sets%20have%20the%20following%20properties%3A%5Cn%20%2A%5Cn%20%2A%20-%20Elements%20are%20added%2C%20removed%2C%20and%20checked%20for%20existence%20in%20constant%20time%5Cn%20%2A%20%28O%281%29%29.%5Cn%20%2A%20-%20Elements%20are%20enumerated%20in%20O%28n%29.%20No%20guarantees%20are%20made%20on%20the%20ordering.%5Cn%20%2A%5Cn%20%2A%20%60%60%60solidity%5Cn%20%2A%20contract%20Example%20%7B%5Cn%20%2A%20%20%20%20%20%2F%2F%20Add%20the%20library%20methods%5Cn%20%2A%20%20%20%20%20using%20EnumerableSet%20for%20EnumerableSet.AddressSet%3B%5Cn%20%2A%5Cn%20%2A%20%20%20%20%20%2F%2F%20Declare%20a%20set%20state%20variable%5Cn%20%2A%20%20%20%20%20EnumerableSet.AddressSet%20private%20mySet%3B%5Cn%20%2A%20%7D%5Cn%20%2A%20%60%60%60%5Cn%20%2A%5Cn%20%2A%20As%20of%20v3.3.0%2C%20sets%20of%20type%20%60bytes32%60%20%28%60Bytes32Set%60%29%2C%20%60address%60%20%28%60AddressSet%60%29%5Cn%20%2A%20and%20%60uint256%60%20%28%60UintSet%60%29%20are%20supported.%5Cn%20%2A%5Cn%20%2A%20%5BWARNING%5D%5Cn%20%2A%20%3D%3D%3D%3D%5Cn%20%2A%20Trying%20to%20delete%20such%20a%20structure%20from%20storage%20will%20likely%20result%20in%20data%20corruption%2C%20rendering%20the%20structure%5Cn%20%2A%20unusable.%5Cn%20%2A%20See%20https%3A%2F%2Fgithub.com%2Fethereum%2Fsolidity%2Fpull%2F11843%5Bethereum%2Fsolidity%2311843%5D%20for%20more%20info.%5Cn%20%2A%5Cn%20%2A%20In%20order%20to%20clean%20an%20EnumerableSet%2C%20you%20can%20either%20remove%20all%20elements%20one%20by%20one%20or%20create%20a%20fresh%20instance%20using%20an%5Cn%20%2A%20array%20of%20EnumerableSet.%5Cn%20%2A%20%3D%3D%3D%3D%5Cn%20%2A%2F%5Cnlibrary%20EnumerableSet%20%7B%5Cn%20%20%20%20%2F%2F%20To%20implement%20this%20library%20for%20multiple%20types%20with%20as%20little%20code%5Cn%20%20%20%20%2F%2F%20repetition%20as%20possible%2C%20we%20write%20it%20in%20terms%20of%20a%20generic%20Set%20type%20with%5Cn%20%20%20%20%2F%2F%20bytes32%20values.%5Cn%20%20%20%20%2F%2F%20The%20Set%20implementation%20uses%20private%20functions%2C%20and%20user-facing%5Cn%20%20%20%20%2F%2F%20implementations%20%28such%20as%20AddressSet%29%20are%20just%20wrappers%20around%20the%5Cn%20%20%20%20%2F%2F%20underlying%20Set.%5Cn%20%20%20%20%2F%2F%20This%20means%20that%20we%20can%20only%20create%20new%20EnumerableSets%20for%20types%20that%20fit%5Cn%20%20%20%20%2F%2F%20in%20bytes32.%5Cn%5Cn%20%20%20%20struct%20Set%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Storage%20of%20set%20values%5Cn%20%20%20%20%20%20%20%20bytes32%5B%5D%20_values%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Position%20is%20the%20index%20of%20the%20value%20in%20the%20%60values%60%20array%20plus%201.%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Position%200%20is%20used%20to%20mean%20a%20value%20is%20not%20in%20the%20set.%5Cn%20%20%20%20%20%20%20%20mapping%28bytes32%20value%20%3D%3E%20uint256%29%20_positions%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Add%20a%20value%20to%20a%20set.%20O%281%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%20true%20if%20the%20value%20was%20added%20to%20the%20set%2C%20that%20is%20if%20it%20was%20not%5Cn%20%20%20%20%20%2A%20already%20present.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_add%28Set%20storage%20set%2C%20bytes32%20value%29%20private%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28%21_contains%28set%2C%20value%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20set._values.push%28value%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20The%20value%20is%20stored%20at%20length-1%2C%20but%20we%20add%201%20to%20all%20indexes%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20and%20use%200%20as%20a%20sentinel%20value%5Cn%20%20%20%20%20%20%20%20%20%20%20%20set._positions%5Bvalue%5D%20%3D%20set._values.length%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Removes%20a%20value%20from%20a%20set.%20O%281%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%20true%20if%20the%20value%20was%20removed%20from%20the%20set%2C%20that%20is%20if%20it%20was%5Cn%20%20%20%20%20%2A%20present.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_remove%28Set%20storage%20set%2C%20bytes32%20value%29%20private%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20We%20cache%20the%20value%27s%20position%20to%20prevent%20multiple%20reads%20from%20the%20same%20storage%20slot%5Cn%20%20%20%20%20%20%20%20uint256%20position%20%3D%20set._positions%5Bvalue%5D%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28position%20%21%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Equivalent%20to%20contains%28set%2C%20value%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20To%20delete%20an%20element%20from%20the%20_values%20array%20in%20O%281%29%2C%20we%20swap%20the%20element%20to%20delete%20with%20the%20last%20one%20in%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20the%20array%2C%20and%20then%20remove%20the%20last%20element%20%28sometimes%20called%20as%20%27swap%20and%20pop%27%29.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20This%20modifies%20the%20order%20of%20the%20array%2C%20as%20noted%20in%20%7Bat%7D.%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20valueIndex%20%3D%20position%20-%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20lastIndex%20%3D%20set._values.length%20-%201%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28valueIndex%20%21%3D%20lastIndex%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytes32%20lastValue%20%3D%20set._values%5BlastIndex%5D%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Move%20the%20lastValue%20to%20the%20index%20where%20the%20value%20to%20delete%20is%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20set._values%5BvalueIndex%5D%20%3D%20lastValue%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Update%20the%20tracked%20position%20of%20the%20lastValue%20%28that%20was%20just%20moved%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20set._positions%5BlastValue%5D%20%3D%20position%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Delete%20the%20slot%20where%20the%20moved%20value%20was%20stored%5Cn%20%20%20%20%20%20%20%20%20%20%20%20set._values.pop%28%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Delete%20the%20tracked%20position%20for%20the%20deleted%20slot%5Cn%20%20%20%20%20%20%20%20%20%20%20%20delete%20set._positions%5Bvalue%5D%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20true%20if%20the%20value%20is%20in%20the%20set.%20O%281%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_contains%28Set%20storage%20set%2C%20bytes32%20value%29%20private%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20set._positions%5Bvalue%5D%20%21%3D%200%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20number%20of%20values%20on%20the%20set.%20O%281%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_length%28Set%20storage%20set%29%20private%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20set._values.length%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20value%20stored%20at%20position%20%60index%60%20in%20the%20set.%20O%281%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Note%20that%20there%20are%20no%20guarantees%20on%20the%20ordering%20of%20values%20inside%20the%5Cn%20%20%20%20%20%2A%20array%2C%20and%20it%20may%20change%20when%20more%20values%20are%20added%20or%20removed.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60index%60%20must%20be%20strictly%20less%20than%20%7Blength%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_at%28Set%20storage%20set%2C%20uint256%20index%29%20private%20view%20returns%20%28bytes32%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20set._values%5Bindex%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Return%20the%20entire%20set%20in%20an%20array%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20This%20operation%20will%20copy%20the%20entire%20storage%20to%20memory%2C%20which%20can%20be%20quite%20expensive.%20This%20is%20designed%5Cn%20%20%20%20%20%2A%20to%20mostly%20be%20used%20by%20view%20accessors%20that%20are%20queried%20without%20any%20gas%20fees.%20Developers%20should%20keep%20in%20mind%20that%5Cn%20%20%20%20%20%2A%20this%20function%20has%20an%20unbounded%20cost%2C%20and%20using%20it%20as%20part%20of%20a%20state-changing%20function%20may%20render%20the%20function%5Cn%20%20%20%20%20%2A%20uncallable%20if%20the%20set%20grows%20to%20a%20point%20where%20copying%20to%20memory%20consumes%20too%20much%20gas%20to%20fit%20in%20a%20block.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_values%28Set%20storage%20set%29%20private%20view%20returns%20%28bytes32%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20set._values%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%20Bytes32Set%5Cn%5Cn%20%20%20%20struct%20Bytes32Set%20%7B%5Cn%20%20%20%20%20%20%20%20Set%20_inner%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Add%20a%20value%20to%20a%20set.%20O%281%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%20true%20if%20the%20value%20was%20added%20to%20the%20set%2C%20that%20is%20if%20it%20was%20not%5Cn%20%20%20%20%20%2A%20already%20present.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20add%28Bytes32Set%20storage%20set%2C%20bytes32%20value%29%20internal%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_add%28set._inner%2C%20value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Removes%20a%20value%20from%20a%20set.%20O%281%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%20true%20if%20the%20value%20was%20removed%20from%20the%20set%2C%20that%20is%20if%20it%20was%5Cn%20%20%20%20%20%2A%20present.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20remove%28Bytes32Set%20storage%20set%2C%20bytes32%20value%29%20internal%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_remove%28set._inner%2C%20value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20true%20if%20the%20value%20is%20in%20the%20set.%20O%281%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20contains%28Bytes32Set%20storage%20set%2C%20bytes32%20value%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_contains%28set._inner%2C%20value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20number%20of%20values%20in%20the%20set.%20O%281%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20length%28Bytes32Set%20storage%20set%29%20internal%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_length%28set._inner%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20value%20stored%20at%20position%20%60index%60%20in%20the%20set.%20O%281%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Note%20that%20there%20are%20no%20guarantees%20on%20the%20ordering%20of%20values%20inside%20the%5Cn%20%20%20%20%20%2A%20array%2C%20and%20it%20may%20change%20when%20more%20values%20are%20added%20or%20removed.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60index%60%20must%20be%20strictly%20less%20than%20%7Blength%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20at%28Bytes32Set%20storage%20set%2C%20uint256%20index%29%20internal%20view%20returns%20%28bytes32%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_at%28set._inner%2C%20index%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Return%20the%20entire%20set%20in%20an%20array%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20This%20operation%20will%20copy%20the%20entire%20storage%20to%20memory%2C%20which%20can%20be%20quite%20expensive.%20This%20is%20designed%5Cn%20%20%20%20%20%2A%20to%20mostly%20be%20used%20by%20view%20accessors%20that%20are%20queried%20without%20any%20gas%20fees.%20Developers%20should%20keep%20in%20mind%20that%5Cn%20%20%20%20%20%2A%20this%20function%20has%20an%20unbounded%20cost%2C%20and%20using%20it%20as%20part%20of%20a%20state-changing%20function%20may%20render%20the%20function%5Cn%20%20%20%20%20%2A%20uncallable%20if%20the%20set%20grows%20to%20a%20point%20where%20copying%20to%20memory%20consumes%20too%20much%20gas%20to%20fit%20in%20a%20block.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20values%28Bytes32Set%20storage%20set%29%20internal%20view%20returns%20%28bytes32%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes32%5B%5D%20memory%20store%20%3D%20_values%28set._inner%29%3B%5Cn%20%20%20%20%20%20%20%20bytes32%5B%5D%20memory%20result%3B%5Cn%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20store%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20return%20result%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%20AddressSet%5Cn%5Cn%20%20%20%20struct%20AddressSet%20%7B%5Cn%20%20%20%20%20%20%20%20Set%20_inner%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Add%20a%20value%20to%20a%20set.%20O%281%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%20true%20if%20the%20value%20was%20added%20to%20the%20set%2C%20that%20is%20if%20it%20was%20not%5Cn%20%20%20%20%20%2A%20already%20present.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20add%28AddressSet%20storage%20set%2C%20address%20value%29%20internal%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_add%28set._inner%2C%20bytes32%28uint256%28uint160%28value%29%29%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Removes%20a%20value%20from%20a%20set.%20O%281%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%20true%20if%20the%20value%20was%20removed%20from%20the%20set%2C%20that%20is%20if%20it%20was%5Cn%20%20%20%20%20%2A%20present.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20remove%28AddressSet%20storage%20set%2C%20address%20value%29%20internal%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_remove%28set._inner%2C%20bytes32%28uint256%28uint160%28value%29%29%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20true%20if%20the%20value%20is%20in%20the%20set.%20O%281%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20contains%28AddressSet%20storage%20set%2C%20address%20value%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_contains%28set._inner%2C%20bytes32%28uint256%28uint160%28value%29%29%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20number%20of%20values%20in%20the%20set.%20O%281%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20length%28AddressSet%20storage%20set%29%20internal%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_length%28set._inner%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20value%20stored%20at%20position%20%60index%60%20in%20the%20set.%20O%281%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Note%20that%20there%20are%20no%20guarantees%20on%20the%20ordering%20of%20values%20inside%20the%5Cn%20%20%20%20%20%2A%20array%2C%20and%20it%20may%20change%20when%20more%20values%20are%20added%20or%20removed.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60index%60%20must%20be%20strictly%20less%20than%20%7Blength%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20at%28AddressSet%20storage%20set%2C%20uint256%20index%29%20internal%20view%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20address%28uint160%28uint256%28_at%28set._inner%2C%20index%29%29%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Return%20the%20entire%20set%20in%20an%20array%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20This%20operation%20will%20copy%20the%20entire%20storage%20to%20memory%2C%20which%20can%20be%20quite%20expensive.%20This%20is%20designed%5Cn%20%20%20%20%20%2A%20to%20mostly%20be%20used%20by%20view%20accessors%20that%20are%20queried%20without%20any%20gas%20fees.%20Developers%20should%20keep%20in%20mind%20that%5Cn%20%20%20%20%20%2A%20this%20function%20has%20an%20unbounded%20cost%2C%20and%20using%20it%20as%20part%20of%20a%20state-changing%20function%20may%20render%20the%20function%5Cn%20%20%20%20%20%2A%20uncallable%20if%20the%20set%20grows%20to%20a%20point%20where%20copying%20to%20memory%20consumes%20too%20much%20gas%20to%20fit%20in%20a%20block.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20values%28AddressSet%20storage%20set%29%20internal%20view%20returns%20%28address%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes32%5B%5D%20memory%20store%20%3D%20_values%28set._inner%29%3B%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20memory%20result%3B%5Cn%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20store%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20return%20result%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%20UintSet%5Cn%5Cn%20%20%20%20struct%20UintSet%20%7B%5Cn%20%20%20%20%20%20%20%20Set%20_inner%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Add%20a%20value%20to%20a%20set.%20O%281%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%20true%20if%20the%20value%20was%20added%20to%20the%20set%2C%20that%20is%20if%20it%20was%20not%5Cn%20%20%20%20%20%2A%20already%20present.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20add%28UintSet%20storage%20set%2C%20uint256%20value%29%20internal%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_add%28set._inner%2C%20bytes32%28value%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Removes%20a%20value%20from%20a%20set.%20O%281%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%20true%20if%20the%20value%20was%20removed%20from%20the%20set%2C%20that%20is%20if%20it%20was%5Cn%20%20%20%20%20%2A%20present.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20remove%28UintSet%20storage%20set%2C%20uint256%20value%29%20internal%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_remove%28set._inner%2C%20bytes32%28value%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20true%20if%20the%20value%20is%20in%20the%20set.%20O%281%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20contains%28UintSet%20storage%20set%2C%20uint256%20value%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_contains%28set._inner%2C%20bytes32%28value%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20number%20of%20values%20in%20the%20set.%20O%281%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20length%28UintSet%20storage%20set%29%20internal%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_length%28set._inner%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20value%20stored%20at%20position%20%60index%60%20in%20the%20set.%20O%281%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Note%20that%20there%20are%20no%20guarantees%20on%20the%20ordering%20of%20values%20inside%20the%5Cn%20%20%20%20%20%2A%20array%2C%20and%20it%20may%20change%20when%20more%20values%20are%20added%20or%20removed.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60index%60%20must%20be%20strictly%20less%20than%20%7Blength%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20at%28UintSet%20storage%20set%2C%20uint256%20index%29%20internal%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20uint256%28_at%28set._inner%2C%20index%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Return%20the%20entire%20set%20in%20an%20array%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20WARNING%3A%20This%20operation%20will%20copy%20the%20entire%20storage%20to%20memory%2C%20which%20can%20be%20quite%20expensive.%20This%20is%20designed%5Cn%20%20%20%20%20%2A%20to%20mostly%20be%20used%20by%20view%20accessors%20that%20are%20queried%20without%20any%20gas%20fees.%20Developers%20should%20keep%20in%20mind%20that%5Cn%20%20%20%20%20%2A%20this%20function%20has%20an%20unbounded%20cost%2C%20and%20using%20it%20as%20part%20of%20a%20state-changing%20function%20may%20render%20the%20function%5Cn%20%20%20%20%20%2A%20uncallable%20if%20the%20set%20grows%20to%20a%20point%20where%20copying%20to%20memory%20consumes%20too%20much%20gas%20to%20fit%20in%20a%20block.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20values%28UintSet%20storage%20set%29%20internal%20view%20returns%20%28uint256%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes32%5B%5D%20memory%20store%20%3D%20_values%28set._inner%29%3B%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20result%3B%5Cn%5Cn%20%20%20%20%20%20%20%20assembly%20%28%5C%22memory-safe%5C%22%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20store%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20return%20result%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40openzeppelin%2Fcontracts%2Futils%2Ftypes%2FTime.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20%28last%20updated%20v5.1.0%29%20%28utils%2Ftypes%2FTime.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BMath%7D%20from%20%5C%22..%2Fmath%2FMath.sol%5C%22%3B%5Cnimport%20%7BSafeCast%7D%20from%20%5C%22..%2Fmath%2FSafeCast.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20This%20library%20provides%20helpers%20for%20manipulating%20time-related%20objects.%5Cn%20%2A%5Cn%20%2A%20It%20uses%20the%20following%20types%3A%5Cn%20%2A%20-%20%60uint48%60%20for%20timepoints%5Cn%20%2A%20-%20%60uint32%60%20for%20durations%5Cn%20%2A%5Cn%20%2A%20While%20the%20library%20doesn%27t%20provide%20specific%20types%20for%20timepoints%20and%20duration%2C%20it%20does%20provide%3A%5Cn%20%2A%20-%20a%20%60Delay%60%20type%20to%20represent%20duration%20that%20can%20be%20programmed%20to%20change%20value%20automatically%20at%20a%20given%20point%5Cn%20%2A%20-%20additional%20helper%20functions%5Cn%20%2A%2F%5Cnlibrary%20Time%20%7B%5Cn%20%20%20%20using%20Time%20for%20%2A%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Get%20the%20block%20timestamp%20as%20a%20Timepoint.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20timestamp%28%29%20internal%20view%20returns%20%28uint48%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20SafeCast.toUint48%28block.timestamp%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Get%20the%20block%20number%20as%20a%20Timepoint.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20blockNumber%28%29%20internal%20view%20returns%20%28uint48%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20SafeCast.toUint48%28block.number%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20Delay%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20A%20%60Delay%60%20is%20a%20uint32%20duration%20that%20can%20be%20programmed%20to%20change%20value%20automatically%20at%20a%20given%20point%20in%20the%5Cn%20%20%20%20%20%2A%20future.%20The%20%5C%22effect%5C%22%20timepoint%20describes%20when%20the%20transitions%20happens%20from%20the%20%5C%22old%5C%22%20value%20to%20the%20%5C%22new%5C%22%20value.%5Cn%20%20%20%20%20%2A%20This%20allows%20updating%20the%20delay%20applied%20to%20some%20operation%20while%20keeping%20some%20guarantees.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20In%20particular%2C%20the%20%7Bupdate%7D%20function%20guarantees%20that%20if%20the%20delay%20is%20reduced%2C%20the%20old%20delay%20still%20applies%20for%5Cn%20%20%20%20%20%2A%20some%20time.%20For%20example%20if%20the%20delay%20is%20currently%207%20days%20to%20do%20an%20upgrade%2C%20the%20admin%20should%20not%20be%20able%20to%20set%5Cn%20%20%20%20%20%2A%20the%20delay%20to%200%20and%20upgrade%20immediately.%20If%20the%20admin%20wants%20to%20reduce%20the%20delay%2C%20the%20old%20delay%20%287%20days%29%20should%5Cn%20%20%20%20%20%2A%20still%20apply%20for%20some%20time.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20The%20%60Delay%60%20type%20is%20112%20bits%20long%2C%20and%20packs%20the%20following%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20%60%60%60%5Cn%20%20%20%20%20%2A%20%20%20%7C%20%5Buint48%5D%3A%20effect%20date%20%28timepoint%29%5Cn%20%20%20%20%20%2A%20%20%20%7C%20%20%20%20%20%20%20%20%20%20%20%7C%20%5Buint32%5D%3A%20value%20before%20%28duration%29%5Cn%20%20%20%20%20%2A%20%20%20%E2%86%93%20%20%20%20%20%20%20%20%20%20%20%E2%86%93%20%20%20%20%20%20%20%E2%86%93%20%5Buint32%5D%3A%20value%20after%20%28duration%29%5Cn%20%20%20%20%20%2A%200xAAAAAAAAAAAABBBBBBBBCCCCCCCC%5Cn%20%20%20%20%20%2A%20%60%60%60%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20The%20%7Bget%7D%20and%20%7BwithUpdate%7D%20functions%20operate%20using%20timestamps.%20Block%20number%20based%20delays%20are%20not%20currently%5Cn%20%20%20%20%20%2A%20supported.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20type%20Delay%20is%20uint112%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Wrap%20a%20duration%20into%20a%20Delay%20to%20add%20the%20one-step%20%5C%22update%20in%20the%20future%5C%22%20feature%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20toDelay%28uint32%20duration%29%20internal%20pure%20returns%20%28Delay%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20Delay.wrap%28duration%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Get%20the%20value%20at%20a%20given%20timepoint%20plus%20the%20pending%20value%20and%20effect%20timepoint%20if%20there%20is%20a%20scheduled%5Cn%20%20%20%20%20%2A%20change%20after%20this%20timepoint.%20If%20the%20effect%20timepoint%20is%200%2C%20then%20the%20pending%20value%20should%20not%20be%20considered.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_getFullAt%28%5Cn%20%20%20%20%20%20%20%20Delay%20self%2C%5Cn%20%20%20%20%20%20%20%20uint48%20timepoint%5Cn%20%20%20%20%29%20private%20pure%20returns%20%28uint32%20valueBefore%2C%20uint32%20valueAfter%2C%20uint48%20effect%29%20%7B%5Cn%20%20%20%20%20%20%20%20%28valueBefore%2C%20valueAfter%2C%20effect%29%20%3D%20self.unpack%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20effect%20%3C%3D%20timepoint%20%3F%20%28valueAfter%2C%200%2C%200%29%20%3A%20%28valueBefore%2C%20valueAfter%2C%20effect%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Get%20the%20current%20value%20plus%20the%20pending%20value%20and%20effect%20timepoint%20if%20there%20is%20a%20scheduled%20change.%20If%20the%5Cn%20%20%20%20%20%2A%20effect%20timepoint%20is%200%2C%20then%20the%20pending%20value%20should%20not%20be%20considered.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getFull%28Delay%20self%29%20internal%20view%20returns%20%28uint32%20valueBefore%2C%20uint32%20valueAfter%2C%20uint48%20effect%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_getFullAt%28self%2C%20timestamp%28%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Get%20the%20current%20value.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20get%28Delay%20self%29%20internal%20view%20returns%20%28uint32%29%20%7B%5Cn%20%20%20%20%20%20%20%20%28uint32%20delay%2C%20%2C%20%29%20%3D%20self.getFull%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20delay%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Update%20a%20Delay%20object%20so%20that%20it%20takes%20a%20new%20duration%20after%20a%20timepoint%20that%20is%20automatically%20computed%20to%5Cn%20%20%20%20%20%2A%20enforce%20the%20old%20delay%20at%20the%20moment%20of%20the%20update.%20Returns%20the%20updated%20Delay%20object%20and%20the%20timestamp%20when%20the%5Cn%20%20%20%20%20%2A%20new%20delay%20becomes%20effective.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20withUpdate%28%5Cn%20%20%20%20%20%20%20%20Delay%20self%2C%5Cn%20%20%20%20%20%20%20%20uint32%20newValue%2C%5Cn%20%20%20%20%20%20%20%20uint32%20minSetback%5Cn%20%20%20%20%29%20internal%20view%20returns%20%28Delay%20updatedDelay%2C%20uint48%20effect%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint32%20value%20%3D%20self.get%28%29%3B%5Cn%20%20%20%20%20%20%20%20uint32%20setback%20%3D%20uint32%28Math.max%28minSetback%2C%20value%20%3E%20newValue%20%3F%20value%20-%20newValue%20%3A%200%29%29%3B%5Cn%20%20%20%20%20%20%20%20effect%20%3D%20timestamp%28%29%20%2B%20setback%3B%5Cn%20%20%20%20%20%20%20%20return%20%28pack%28value%2C%20newValue%2C%20effect%29%2C%20effect%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Split%20a%20delay%20into%20its%20components%3A%20valueBefore%2C%20valueAfter%20and%20effect%20%28transition%20timepoint%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20unpack%28Delay%20self%29%20internal%20pure%20returns%20%28uint32%20valueBefore%2C%20uint32%20valueAfter%2C%20uint48%20effect%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint112%20raw%20%3D%20Delay.unwrap%28self%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20valueAfter%20%3D%20uint32%28raw%29%3B%5Cn%20%20%20%20%20%20%20%20valueBefore%20%3D%20uint32%28raw%20%3E%3E%2032%29%3B%5Cn%20%20%20%20%20%20%20%20effect%20%3D%20uint48%28raw%20%3E%3E%2064%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20return%20%28valueBefore%2C%20valueAfter%2C%20effect%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20pack%20the%20components%20into%20a%20Delay%20object.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20pack%28uint32%20valueBefore%2C%20uint32%20valueAfter%2C%20uint48%20effect%29%20internal%20pure%20returns%20%28Delay%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20Delay.wrap%28%28uint112%28effect%29%20%3C%3C%2064%29%20%7C%20%28uint112%28valueBefore%29%20%3C%3C%2032%29%20%7C%20uint112%28valueAfter%29%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40peeramid-labs%2Feds%2Fsrc%2Fabstracts%2FCloneDistribution.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%3E%3D0.8.0%20%3C0.9.0%3B%5Cn%5Cnimport%20%5C%22%40openzeppelin%2Fcontracts%2Fproxy%2FClones.sol%5C%22%3B%5Cnimport%20%5C%22..%2Finterfaces%2FIDistribution.sol%5C%22%3B%5Cnimport%20%5C%22.%2FCodeIndexer.sol%5C%22%3B%5Cn%5Cnabstract%20contract%20CloneDistribution%20is%20IDistribution%2C%20CodeIndexer%20%7B%5Cn%20%20%20%20error%20CodeNotFoundInIndex%28bytes32%20codeId%29%3B%5Cn%5Cn%20%20%20%20function%20sources%28%29%20internal%20view%20virtual%20returns%20%28address%5B%5D%20memory%2C%20bytes32%20name%2C%20uint256%20version%29%3B%5Cn%5Cn%20%20%20%20%2F%2F%20%40inheritdoc%20IDistribution%5Cn%20%20%20%20function%20_instantiate%28%29%5Cn%20%20%20%20%20%20%20%20internal%5Cn%20%20%20%20%20%20%20%20virtual%5Cn%20%20%20%20%20%20%20%20returns%20%28address%5B%5D%20memory%20instances%2C%20bytes32%20distributionName%2C%20uint256%20distributionVersion%29%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%28address%5B%5D%20memory%20_sources%2C%20bytes32%20_distributionName%2C%20uint256%20_distributionVersion%29%20%3D%20sources%28%29%3B%5Cn%20%20%20%20%20%20%20%20uint256%20srcsLength%20%3D%20_sources.length%3B%5Cn%20%20%20%20%20%20%20%20instances%20%3D%20new%20address%5B%5D%28srcsLength%29%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%3B%20i%20%3C%20srcsLength%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20address%20clone%20%3D%20Clones.clone%28_sources%5Bi%5D%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20instances%5Bi%5D%20%3D%20clone%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20emit%20Distributed%28msg.sender%2C%20instances%29%3B%5Cn%20%20%20%20%20%20%20%20return%20%28instances%2C%20_distributionName%2C%20_distributionVersion%29%3B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%2F%2F%20%40inheritdoc%20IDistribution%5Cn%20%20%20%20function%20get%28%29%20external%20view%20virtual%20returns%20%28address%5B%5D%20memory%20src%2C%20bytes32%20name%2C%20uint256%20version%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20sources%28%29%3B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%2F%2F%20%40inheritdoc%20IDistribution%5Cn%20%20%20%20function%20contractURI%28%29%20external%20view%20virtual%20returns%20%28string%20memory%29%3B%5Cn%7D%5Cn%22%7D%2C%22%40peeramid-labs%2Feds%2Fsrc%2Fabstracts%2FCodeIndexer.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20CC0-1.0%5Cnpragma%20solidity%20%3E%3D0.8.0%20%3C0.9.0%3B%5Cn%5Cnimport%20%7BIERC7744%20as%20ICodeIndex%7D%20from%20%5C%22..%2FIERC7744.sol%5C%22%3B%5Cn%5Cnabstract%20contract%20CodeIndexer%20%7B%5Cn%20%20%20%20%2F%2FCreate2%20contract%5Cn%20%20%20%20ICodeIndex%20private%20constant%20INDEX_CONTRACT%20%3D%20ICodeIndex%280xC0dE1D2F7662c63796E544B2647b2A94EE658E07%29%3B%5Cn%20%20%20%20constructor%28%29%20%7B%7D%5Cn%20%20%20%20%2F%2F%20%40inheritdoc%20ICodeIndex%5Cn%20%20%20%20function%20getContractsIndex%28%29%20internal%20pure%20returns%20%28ICodeIndex%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20INDEX_CONTRACT%3B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%2F%2F%20%40inheritdoc%20ICodeIndex%5Cn%20%20%20%20function%20index%28address%20source%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20INDEX_CONTRACT.register%28source%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40peeramid-labs%2Feds%2Fsrc%2Fabstracts%2FERC7746Middleware.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20Apache-2.0%5Cn%5Cnpragma%20solidity%20%3E%3D0.8.0%20%3C0.9.0%3B%5Cnimport%20%5C%22..%2Flibraries%2FLibMiddleware.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40title%20ERC7746Middleware%5Cn%20%2A%20%40notice%20Abstract%20contract%20that%20serves%20as%20a%20middleware%20for%20ERC7746%20standard.%5Cn%20%2A%20This%20contract%20is%20intended%20to%20be%20inherited%20by%20other%20contracts%20that%20implement%5Cn%20%2A%20the%20ERC7746%20functionality.%20It%20provides%20base%20functionality%20and%20structure%5Cn%20%2A%20that%20can%20be%20extended%20and%20customized%20by%20derived%20contracts.%5Cn%20%2A%20%40author%20Peeramid%20Labs%2C%202024%5Cn%20%2A%2F%5Cnabstract%20contract%20ERC7746Middleware%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40notice%20Modifier%20to%20apply%20custom%20logic%20for%20ERC7746%20compliance.%5Cn%20%20%20%20%20%2A%20%40param%20_selector%20The%20function%20selector%20to%20be%20checked.%5Cn%20%20%20%20%20%2A%20%40param%20sender%20The%20address%20of%20the%20sender.%5Cn%20%20%20%20%20%2A%20%40param%20data%20The%20calldata%20being%20passed%20to%20the%20function.%5Cn%20%20%20%20%20%2A%20%40param%20value%20The%20value%20being%20transferred.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20modifier%20ERC7746C%28bytes4%20_selector%2C%20address%20sender%2C%20bytes%20calldata%20data%2C%20uint256%20value%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes%5B%5D%20memory%20layerReturns%20%3D%20LibMiddleware.beforeCall%28_selector%2C%20sender%2C%20data%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20_%3B%5Cn%20%20%20%20%20%20%20%20LibMiddleware.afterCall%28_selector%2C%20sender%2C%20data%2C%20value%2C%20layerReturns%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40notice%20Modifier%20to%20apply%20ERC7746%20specific%20logic.%5Cn%20%20%20%20%20%2A%20This%20modifier%20can%20be%20used%20to%20enforce%20certain%20conditions%20or%5Cn%20%20%20%20%20%2A%20execute%20specific%20code%20before%20or%20after%20the%20function%20it%20modifies.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20modifier%20ERC7746%28%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes%5B%5D%20memory%20layerReturns%20%3D%20LibMiddleware.beforeCall%28msg.sig%2C%20msg.sender%2C%20msg.data%2C%20msg.value%29%3B%5Cn%20%20%20%20%20%20%20%20_%3B%5Cn%20%20%20%20%20%20%20%20LibMiddleware.afterCall%28msg.sig%2C%20msg.sender%2C%20msg.data%2C%20msg.value%2C%20layerReturns%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40peeramid-labs%2Feds%2Fsrc%2FIERC7744.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20CC0-1.0%5Cnpragma%20solidity%20%3E%3D0.8.0%20%3C0.9.0%3B%5Cn%5Cninterface%20IERC7744%20%7B%5Cn%20%20%20%20event%20Indexed%28address%20indexed%20container%2C%20bytes32%20indexed%20codeHash%29%3B%5Cn%20%20%20%20error%20alreadyExists%28bytes32%20id%2C%20address%20source%29%3B%5Cn%5Cn%20%20%20%20function%20register%28address%20container%29%20external%3B%5Cn%5Cn%20%20%20%20function%20get%28bytes32%20id%29%20external%20view%20returns%20%28address%29%3B%5Cn%7D%5Cn%22%7D%2C%22%40peeramid-labs%2Feds%2Fsrc%2Finterfaces%2FIContractURI.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%3E%3D0.8.0%20%3C0.9.0%3B%5Cn%5Cninterface%20IContractURI%20%7B%5Cn%20%20%20%20function%20contractURI%28%29%20external%20view%20returns%20%28string%20memory%29%3B%5Cn%7D%5Cn%22%7D%2C%22%40peeramid-labs%2Feds%2Fsrc%2Finterfaces%2FIDistribution.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%3E%3D0.8.0%20%3C0.9.0%3B%5Cnimport%20%7BIContractURI%7D%20from%20%5C%22.%2FIContractURI.sol%5C%22%3B%5Cn%2F%2A%2A%5Cn%20%2A%20%40title%20IDistribution%5Cn%20%2A%20%40notice%20Interface%20for%20distribution-related%20functionalities.%20It%20can%20get%20sources%20and%20produce%20a%20new%20instances%20out%20from%20them.%20It%20also%20provides%20metadata%20about%20the%20distribution.%5Cn%20%2A%20%40dev%20It%20is%20highly%20recommended%20to%20keep%20implementation%20stateless%2C%20and%20use%20%60immutable%60%20variables%20for%20any%20state.%20This%20allows%20your%20code%20to%20be%20referred%20in%20distributor%20and%20respositories%20via%20ERC7744.%20It%27s%20also%20easier%20to%20reason%20about%2C%20and%20more%20gas%20efficient.%5Cn%20%2A%20%40author%20Peeramid%20Labs%2C%202024%5Cn%20%2A%2F%5Cninterface%20IDistribution%20is%20IContractURI%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40notice%20Emitted%20when%20a%20distribution%20occurs.%5Cn%20%20%20%20%20%2A%20%40param%20distributor%20The%20address%20of%20the%20entity%20that%20performed%20the%20distribution.%5Cn%20%20%20%20%20%2A%20%40param%20instances%20An%20array%20of%20addresses%20that%20were%20produced.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20event%20Distributed%28address%20indexed%20distributor%2C%20address%5B%5D%20instances%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40notice%20Instantiates%20a%20new%20instance%20with%20the%20given%20parameters.%5Cn%20%20%20%20%20%2A%20%40param%20data%20The%20data%20to%20be%20used%20for%20instantiation.%5Cn%20%20%20%20%20%2A%20%40return%20instances%20An%20array%20of%20addresses%20that%20were%20produced.%5Cn%20%20%20%20%20%2A%20%40return%20distributionName%20The%20name%20of%20the%20distribution.%5Cn%20%20%20%20%20%2A%20%40return%20distributionVersion%20The%20version%20of%20the%20distribution.%5Cn%20%20%20%20%20%2A%20%40dev%20WARNING%3A%20It%20MUST%20emit%20Distributed%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20instantiate%28%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20data%5Cn%20%20%20%20%29%20external%20returns%20%28address%5B%5D%20memory%20instances%2C%20bytes32%20distributionName%2C%20uint256%20distributionVersion%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40notice%20Retrieves%20the%20current%20distribution%20sources.%5Cn%20%20%20%20%20%2A%20%40return%20sources%20An%20array%20of%20addresses%20that%20are%20used%20for%20instantiation.%5Cn%20%20%20%20%20%2A%20%40return%20distributionName%20The%20name%20of%20the%20distribution.%5Cn%20%20%20%20%20%2A%20%40return%20distributionVersion%20The%20version%20of%20the%20distribution.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20get%28%29%5Cn%20%20%20%20%20%20%20%20external%5Cn%20%20%20%20%20%20%20%20view%5Cn%20%20%20%20%20%20%20%20returns%20%28address%5B%5D%20memory%20sources%2C%20bytes32%20distributionName%2C%20uint256%20distributionVersion%29%3B%5Cn%7D%5Cn%22%7D%2C%22%40peeramid-labs%2Feds%2Fsrc%2Finterfaces%2FIERC7746.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20CC0-1.0%5Cnpragma%20solidity%20%3E%3D0.8.0%20%3C0.9.0%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40title%20IERC7746%20Interface%5Cn%20%2A%20%40dev%20Interface%20for%20the%20ERC7746%20standard.%5Cn%20%2A%2F%5Cninterface%20IERC7746%20%7B%5Cn%20%20%20%20%2F%2F%2F%20%40notice%20Validates%20a%20function%20call%20before%20execution.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20configuration%20Middleware-specific%20configuration%20data.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20selector%20The%20function%20selector%20being%20called.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20sender%20The%20address%20initiating%20the%20call.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20value%20The%20amount%20of%20ETH%20sent%20with%20the%20call%20%28if%20any%29.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20data%20The%20calldata%20for%20the%20function%20call.%5Cn%20%20%20%20%2F%2F%2F%20%40return%20beforeCallResult%20Arbitrary%20data%20to%20be%20passed%20to%20%60afterCallValidation%60.%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20MUST%20revert%20if%20validation%20fails.%5Cn%20%20%20%20function%20beforeCall%28%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20configuration%2C%5Cn%20%20%20%20%20%20%20%20bytes4%20selector%2C%5Cn%20%20%20%20%20%20%20%20address%20sender%2C%5Cn%20%20%20%20%20%20%20%20uint256%20value%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20data%5Cn%20%20%20%20%29%20external%20returns%20%28bytes%20memory%29%3B%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40notice%20Validates%20a%20function%20call%20after%20execution.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20configuration%20Middleware-specific%20configuration%20data.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20selector%20The%20function%20selector%20being%20called.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20sender%20The%20address%20initiating%20the%20call.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20value%20The%20amount%20of%20ETH%20sent%20with%20the%20call%20%28if%20any%29.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20data%20The%20calldata%20for%20the%20function%20call.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20beforeCallResult%20The%20data%20returned%20by%20%60beforeCallValidation%60.%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20MUST%20revert%20if%20validation%20fails.%5Cn%20%20%20%20function%20afterCall%28%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20configuration%2C%5Cn%20%20%20%20%20%20%20%20bytes4%20selector%2C%5Cn%20%20%20%20%20%20%20%20address%20sender%2C%5Cn%20%20%20%20%20%20%20%20uint256%20value%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20data%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20beforeCallResult%5Cn%20%20%20%20%29%20external%3B%5Cn%7D%5Cn%22%7D%2C%22%40peeramid-labs%2Feds%2Fsrc%2Flibraries%2FLibMiddleware.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%3E%3D0.8.0%20%3C0.9.0%3B%5Cnimport%20%7BIERC7746%7D%20from%20%5C%22..%2Finterfaces%2FIERC7746.sol%5C%22%3B%5Cn%5Cnlibrary%20LibMiddleware%20%7B%5Cn%20%20%20%20bytes32%20private%20constant%20ACCESS_LAYERS_STORAGE_POSITION%20%3D%20keccak256%28%5C%22lib.access.layer.storage%5C%22%29%3B%5Cn%5Cn%20%20%20%20struct%20LayerStruct%20%7B%5Cn%20%20%20%20%20%20%20%20address%20layerAddess%3B%5Cn%20%20%20%20%20%20%20%20bytes%20layerConfigData%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20accessLayersStorage%28%29%20internal%20pure%20returns%20%28LayerStruct%5B%5D%20storage%20ls%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes32%20position%20%3D%20ACCESS_LAYERS_STORAGE_POSITION%3B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20ls.slot%20%3A%3D%20position%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20setLayer%28address%20layerAddress%2C%20uint256%20layerIndex%2C%20bytes%20memory%20layerConfigData%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20LayerStruct%5B%5D%20storage%20ls%20%3D%20accessLayersStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20ls%5BlayerIndex%5D.layerAddess%20%3D%20layerAddress%3B%5Cn%20%20%20%20%20%20%20%20ls%5BlayerIndex%5D.layerConfigData%20%3D%20layerConfigData%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20addLayer%28LayerStruct%20memory%20newLayer%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20LayerStruct%5B%5D%20storage%20ls%20%3D%20accessLayersStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20ls.push%28newLayer%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20setLayers%28LayerStruct%5B%5D%20memory%20newLayers%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20length%20%3D%20newLayers.length%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%3B%20i%20%3C%20length%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20addLayer%28newLayers%5Bi%5D%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20addLayer%28address%20layerAddress%2C%20bytes%20memory%20layerConfigData%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20LayerStruct%5B%5D%20storage%20ls%20%3D%20accessLayersStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20LayerStruct%20memory%20newLayer%20%3D%20LayerStruct%28%7BlayerAddess%3A%20layerAddress%2C%20layerConfigData%3A%20layerConfigData%7D%29%3B%5Cn%20%20%20%20%20%20%20%20ls.push%28newLayer%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20popLayer%28%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20LayerStruct%5B%5D%20storage%20ls%20%3D%20accessLayersStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20ls.pop%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20getLayer%28uint256%20layerIdx%29%20internal%20view%20returns%20%28LayerStruct%20storage%29%20%7B%5Cn%20%20%20%20%20%20%20%20LayerStruct%5B%5D%20storage%20ls%20%3D%20accessLayersStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20ls%5BlayerIdx%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20beforeCall%28%5Cn%20%20%20%20%20%20%20%20bytes4%20_selector%2C%5Cn%20%20%20%20%20%20%20%20address%20sender%2C%5Cn%20%20%20%20%20%20%20%20bytes%20calldata%20data%2C%5Cn%20%20%20%20%20%20%20%20uint256%20value%5Cn%20%20%20%20%29%20internal%20returns%20%28bytes%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20LayerStruct%5B%5D%20storage%20ls%20%3D%20accessLayersStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20uint256%20length%20%3D%20ls.length%3B%5Cn%20%20%20%20%20%20%20%20bytes%5B%5D%20memory%20layerReturns%20%3D%20new%20bytes%5B%5D%28length%29%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%3B%20i%20%3C%20length%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20layerReturns%5Bi%5D%20%3D%20validateLayerBeforeCall%28ls%5Bi%5D%2C%20_selector%2C%20sender%2C%20data%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20layerReturns%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20validateLayerBeforeCall%28%5Cn%20%20%20%20%20%20%20%20LayerStruct%20storage%20layer%2C%5Cn%20%20%20%20%20%20%20%20bytes4%20_selector%2C%5Cn%20%20%20%20%20%20%20%20address%20sender%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20data%2C%5Cn%20%20%20%20%20%20%20%20uint256%20value%5Cn%20%20%20%20%29%20internal%20returns%20%28bytes%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20retval%20%3D%20IERC7746%28layer.layerAddess%29.beforeCall%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20layer.layerConfigData%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_selector%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20sender%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20value%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20data%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20return%20retval%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20afterCall%28%5Cn%20%20%20%20%20%20%20%20bytes4%20_selector%2C%5Cn%20%20%20%20%20%20%20%20address%20sender%2C%5Cn%20%20%20%20%20%20%20%20bytes%20calldata%20data%2C%5Cn%20%20%20%20%20%20%20%20uint256%20value%2C%5Cn%20%20%20%20%20%20%20%20bytes%5B%5D%20memory%20beforeCallReturns%5Cn%20%20%20%20%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20LayerStruct%5B%5D%20storage%20ls%20%3D%20accessLayersStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20uint256%20length%20%3D%20ls.length%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%3B%20i%20%3C%20length%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20validateLayerAfterCall%28ls%5Blength%20-%201%20-%20i%5D%2C%20_selector%2C%20sender%2C%20data%2C%20value%2C%20beforeCallReturns%5Bi%5D%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20extractRevertReason%28bytes%20memory%20revertData%29%20internal%20pure%20returns%20%28string%20memory%20reason%29%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20l%20%3D%20revertData.length%3B%5Cn%20%20%20%20%20%20%20%20if%20%28l%20%3C%2068%29%20return%20%5C%22%5C%22%3B%5Cn%20%20%20%20%20%20%20%20uint256%20t%3B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revertData%20%3A%3D%20add%28revertData%2C%204%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20t%20%3A%3D%20mload%28revertData%29%20%2F%2F%20Save%20the%20content%20of%20the%20length%20slot%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28revertData%2C%20sub%28l%2C%204%29%29%20%2F%2F%20Set%20proper%20length%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20reason%20%3D%20abi.decode%28revertData%2C%20%28string%29%29%3B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%28revertData%2C%20t%29%20%2F%2F%20Restore%20the%20content%20of%20the%20length%20slot%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20validateLayerAfterCall%28%5Cn%20%20%20%20%20%20%20%20LayerStruct%20storage%20layer%2C%5Cn%20%20%20%20%20%20%20%20bytes4%20_selector%2C%5Cn%20%20%20%20%20%20%20%20address%20sender%2C%5Cn%20%20%20%20%20%20%20%20bytes%20calldata%20data%2C%5Cn%20%20%20%20%20%20%20%20uint256%20value%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20beforeCallReturnValue%5Cn%20%20%20%20%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20IERC7746%28layer.layerAddess%29.afterCall%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20layer.layerConfigData%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_selector%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20sender%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20value%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20data%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20beforeCallReturnValue%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22%40peeramid-labs%2Feds%2Fsrc%2Flibraries%2FLibSemver.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%3E%3D0.8.0%20%3C0.9.0%3B%5Cnimport%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2FStrings.sol%5C%22%3B%5Cnlibrary%20LibSemver%20%7B%5Cn%20%20%20%20error%20versionMismatch%28string%20message%29%3B%5Cn%20%20%20%20struct%20Version%20%7B%5Cn%20%20%20%20%20%20%20%20uint64%20major%3B%5Cn%20%20%20%20%20%20%20%20uint64%20minor%3B%5Cn%20%20%20%20%20%20%20%20uint128%20patch%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20enum%20requirements%20%7B%5Cn%20%20%20%20%20%20%20%20ANY%2C%20%2F%2F%20%2A%5Cn%20%20%20%20%20%20%20%20EXACT%2C%20%2F%2F%20%3D%5Cn%20%20%20%20%20%20%20%20MAJOR%2C%20%2F%2F%20%5E%5Cn%20%20%20%20%20%20%20%20MAJOR_MINOR%2C%20%2F%2F%20~%5Cn%20%20%20%20%20%20%20%20GREATER_EQUAL%2C%20%2F%2F%20%3E%3D%5Cn%20%20%20%20%20%20%20%20GREATER%2C%20%2F%2F%20%3E%5Cn%20%20%20%20%20%20%20%20LESSER_EQUAL%2C%20%2F%2F%20%3C%3D%5Cn%20%20%20%20%20%20%20%20LESSER%20%2F%2F%20%3C%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20VersionRequirement%20%7B%5Cn%20%20%20%20%20%20%20%20Version%20version%3B%5Cn%20%20%20%20%20%20%20%20requirements%20requirement%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20toUint256%28Version%20memory%20_version%29%20internal%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20%28uint256%28_version.major%29%20%3C%3C%20192%29%20%7C%20%28uint256%28_version.minor%29%20%3C%3C%20128%29%20%7C%20uint256%28_version.patch%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20parse%28uint256%20_version%29%20internal%20pure%20returns%20%28Version%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20Version%28uint64%28_version%20%3E%3E%20192%29%2C%20uint64%28_version%20%3E%3E%20128%29%2C%20uint128%28_version%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20toString%28Version%20memory%20_version%29%20internal%20pure%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%5Cn%20%20%20%20%20%20%20%20%20%20%20%20string%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20abi.encodePacked%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Strings.toString%28uint256%28_version.major%29%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22.%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Strings.toString%28uint256%28_version.minor%29%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22.%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Strings.toString%28uint256%28_version.patch%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20require_exact%28Version%20memory%20_version1%2C%20Version%20memory%20_version2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28toUint256%28_version1%29%20%21%3D%20toUint256%28_version2%29%29%20revert%20versionMismatch%28%5C%22Version%20mismatch%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20require_major%28Version%20memory%20_version1%2C%20Version%20memory%20_version2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28_version1.major%20%21%3D%20_version2.major%29%20revert%20versionMismatch%28%5C%22Major%20version%20mismatch%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20require_major_minor%28Version%20memory%20_version1%2C%20Version%20memory%20_version2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28_version1.major%20%21%3D%20_version2.major%20%7C%7C%20_version1.minor%20%21%3D%20_version2.minor%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20versionMismatch%28%5C%22Major%20and%20minor%20version%20mismatch%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20require_greater_equal%28Version%20memory%20_version1%2C%20Version%20memory%20_version2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28toUint256%28_version1%29%20%3C%20toUint256%28_version2%29%29%20revert%20versionMismatch%28%5C%22Version%20is%20not%20greater%20or%20equal%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20require_greater%28Version%20memory%20_version1%2C%20Version%20memory%20_version2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28toUint256%28_version1%29%20%3C%3D%20toUint256%28_version2%29%29%20revert%20versionMismatch%28%5C%22Version%20is%20not%20greater%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20require_lesser_equal%28Version%20memory%20_version1%2C%20Version%20memory%20_version2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28toUint256%28_version1%29%20%3E%20toUint256%28_version2%29%29%20revert%20versionMismatch%28%5C%22Version%20is%20not%20lesser%20or%20equal%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20require_lesser%28Version%20memory%20_version1%2C%20Version%20memory%20_version2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28toUint256%28_version1%29%20%3E%3D%20toUint256%28_version2%29%29%20revert%20versionMismatch%28%5C%22Version%20is%20not%20lesser%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20areEqual%28Version%20memory%20_version1%2C%20Version%20memory%20_version2%29%20internal%20pure%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20toUint256%28_version1%29%20%3D%3D%20toUint256%28_version2%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20compare%28Version%20memory%20has%2C%20VersionRequirement%20memory%20needs%29%20internal%20pure%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28needs.requirement%20%3D%3D%20requirements.ANY%29%20return%20true%3B%5Cn%20%20%20%20%20%20%20%20if%20%28needs.requirement%20%3D%3D%20requirements.EXACT%29%20return%20toUint256%28has%29%20%3D%3D%20toUint256%28needs.version%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28needs.requirement%20%3D%3D%20requirements.MAJOR%29%20return%20has.major%20%3D%3D%20needs.version.major%3B%5Cn%20%20%20%20%20%20%20%20if%20%28needs.requirement%20%3D%3D%20requirements.MAJOR_MINOR%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20has.major%20%3D%3D%20needs.version.major%20%26%26%20has.minor%20%3D%3D%20needs.version.minor%3B%5Cn%20%20%20%20%20%20%20%20if%20%28needs.requirement%20%3D%3D%20requirements.GREATER_EQUAL%29%20return%20toUint256%28has%29%20%3E%3D%20toUint256%28needs.version%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28needs.requirement%20%3D%3D%20requirements.GREATER%29%20return%20toUint256%28has%29%20%3E%20toUint256%28needs.version%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28needs.requirement%20%3D%3D%20requirements.LESSER_EQUAL%29%20return%20toUint256%28has%29%20%3C%3D%20toUint256%28needs.version%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28needs.requirement%20%3D%3D%20requirements.LESSER%29%20return%20toUint256%28has%29%20%3C%20toUint256%28needs.version%29%3B%5Cn%20%20%20%20%20%20%20%20return%20false%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20getNextMajor%28Version%20memory%20_version%29%20internal%20pure%20returns%20%28Version%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20Version%28_version.major%20%2B%201%2C%200%2C%200%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20getNextMinor%28Version%20memory%20_version%29%20internal%20pure%20returns%20%28Version%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20Version%28_version.major%2C%20_version.minor%20%2B%201%2C%200%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20getNextPatch%28Version%20memory%20_version%29%20internal%20pure%20returns%20%28Version%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20Version%28_version.major%2C%20_version.minor%2C%20_version.patch%20%2B%201%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22hardhat%2Fconsole.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%3E%3D0.4.22%20%3C0.9.0%3B%5Cn%5Cnlibrary%20console%20%7B%5Cn%20%20%20%20address%20constant%20CONSOLE_ADDRESS%20%3D%5Cn%20%20%20%20%20%20%20%200x000000000000000000636F6e736F6c652e6c6f67%3B%5Cn%5Cn%20%20%20%20function%20_sendLogPayloadImplementation%28bytes%20memory%20payload%29%20internal%20view%20%7B%5Cn%20%20%20%20%20%20%20%20address%20consoleAddress%20%3D%20CONSOLE_ADDRESS%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%2F%20%40solidity%20memory-safe-assembly%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20pop%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20staticcall%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gas%28%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20consoleAddress%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20add%28payload%2C%2032%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mload%28payload%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_castToPure%28%5Cn%20%20%20%20%20%20function%28bytes%20memory%29%20internal%20view%20fnIn%5Cn%20%20%20%20%29%20internal%20pure%20returns%20%28function%28bytes%20memory%29%20pure%20fnOut%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20fnOut%20%3A%3D%20fnIn%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_sendLogPayload%28bytes%20memory%20payload%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_castToPure%28_sendLogPayloadImplementation%29%28payload%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28%29%5C%22%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logInt%28int256%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28int256%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logUint%28uint256%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logString%28string%20memory%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBool%28bool%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logAddress%28address%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes%28bytes%20memory%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes1%28bytes1%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes1%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes2%28bytes2%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes2%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes3%28bytes3%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes3%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes4%28bytes4%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes4%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes5%28bytes5%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes5%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes6%28bytes6%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes6%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes7%28bytes7%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes7%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes8%28bytes8%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes8%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes9%28bytes9%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes9%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes10%28bytes10%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes10%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes11%28bytes11%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes11%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes12%28bytes12%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes12%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes13%28bytes13%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes13%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes14%28bytes14%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes14%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes15%28bytes15%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes15%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes16%28bytes16%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes16%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes17%28bytes17%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes17%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes18%28bytes18%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes18%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes19%28bytes19%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes19%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes20%28bytes20%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes20%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes21%28bytes21%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes21%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes22%28bytes22%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes22%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes23%28bytes23%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes23%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes24%28bytes24%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes24%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes25%28bytes25%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes25%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes26%28bytes26%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes26%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes27%28bytes27%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes27%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes28%28bytes28%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes28%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes29%28bytes29%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes29%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes30%28bytes30%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes30%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes31%28bytes31%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes31%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20logBytes32%28bytes32%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bytes32%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%29%5C%22%2C%20p0%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20uint256%20p1%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cuint256%29%5C%22%2C%20p0%2C%20p1%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20string%20memory%20p1%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cstring%29%5C%22%2C%20p0%2C%20p1%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20bool%20p1%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cbool%29%5C%22%2C%20p0%2C%20p1%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20address%20p1%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Caddress%29%5C%22%2C%20p0%2C%20p1%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20uint256%20p1%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cuint256%29%5C%22%2C%20p0%2C%20p1%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20string%20memory%20p1%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cstring%29%5C%22%2C%20p0%2C%20p1%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20bool%20p1%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cbool%29%5C%22%2C%20p0%2C%20p1%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20address%20p1%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Caddress%29%5C%22%2C%20p0%2C%20p1%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20uint256%20p1%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cuint256%29%5C%22%2C%20p0%2C%20p1%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20string%20memory%20p1%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cstring%29%5C%22%2C%20p0%2C%20p1%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20bool%20p1%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cbool%29%5C%22%2C%20p0%2C%20p1%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20address%20p1%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Caddress%29%5C%22%2C%20p0%2C%20p1%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20uint256%20p1%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cuint256%29%5C%22%2C%20p0%2C%20p1%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20string%20memory%20p1%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cstring%29%5C%22%2C%20p0%2C%20p1%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20bool%20p1%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cbool%29%5C%22%2C%20p0%2C%20p1%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20address%20p1%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Caddress%29%5C%22%2C%20p0%2C%20p1%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20uint256%20p1%2C%20uint256%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cuint256%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20uint256%20p1%2C%20string%20memory%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cuint256%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20uint256%20p1%2C%20bool%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cuint256%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20uint256%20p1%2C%20address%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cuint256%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20string%20memory%20p1%2C%20uint256%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cstring%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20string%20memory%20p1%2C%20string%20memory%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cstring%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20string%20memory%20p1%2C%20bool%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cstring%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20string%20memory%20p1%2C%20address%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cstring%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20bool%20p1%2C%20uint256%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cbool%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20bool%20p1%2C%20string%20memory%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cbool%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20bool%20p1%2C%20bool%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cbool%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20bool%20p1%2C%20address%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cbool%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20address%20p1%2C%20uint256%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Caddress%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20address%20p1%2C%20string%20memory%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Caddress%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20address%20p1%2C%20bool%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Caddress%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20address%20p1%2C%20address%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Caddress%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20uint256%20p1%2C%20uint256%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cuint256%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20uint256%20p1%2C%20string%20memory%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cuint256%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20uint256%20p1%2C%20bool%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cuint256%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20uint256%20p1%2C%20address%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cuint256%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20string%20memory%20p1%2C%20uint256%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cstring%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20string%20memory%20p1%2C%20string%20memory%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cstring%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20string%20memory%20p1%2C%20bool%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cstring%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20string%20memory%20p1%2C%20address%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cstring%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20bool%20p1%2C%20uint256%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cbool%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20bool%20p1%2C%20string%20memory%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cbool%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20bool%20p1%2C%20bool%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cbool%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20bool%20p1%2C%20address%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cbool%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20address%20p1%2C%20uint256%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Caddress%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20address%20p1%2C%20string%20memory%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Caddress%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20address%20p1%2C%20bool%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Caddress%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20address%20p1%2C%20address%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Caddress%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20uint256%20p1%2C%20uint256%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cuint256%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20uint256%20p1%2C%20string%20memory%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cuint256%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20uint256%20p1%2C%20bool%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cuint256%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20uint256%20p1%2C%20address%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cuint256%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20string%20memory%20p1%2C%20uint256%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cstring%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20string%20memory%20p1%2C%20string%20memory%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cstring%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20string%20memory%20p1%2C%20bool%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cstring%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20string%20memory%20p1%2C%20address%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cstring%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20bool%20p1%2C%20uint256%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cbool%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20bool%20p1%2C%20string%20memory%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cbool%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20bool%20p1%2C%20bool%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cbool%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20bool%20p1%2C%20address%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cbool%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20address%20p1%2C%20uint256%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Caddress%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20address%20p1%2C%20string%20memory%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Caddress%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20address%20p1%2C%20bool%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Caddress%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20address%20p1%2C%20address%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Caddress%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20uint256%20p1%2C%20uint256%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cuint256%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20uint256%20p1%2C%20string%20memory%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cuint256%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20uint256%20p1%2C%20bool%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cuint256%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20uint256%20p1%2C%20address%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cuint256%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20string%20memory%20p1%2C%20uint256%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cstring%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20string%20memory%20p1%2C%20string%20memory%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cstring%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20string%20memory%20p1%2C%20bool%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cstring%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20string%20memory%20p1%2C%20address%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cstring%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20bool%20p1%2C%20uint256%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cbool%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20bool%20p1%2C%20string%20memory%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cbool%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20bool%20p1%2C%20bool%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cbool%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20bool%20p1%2C%20address%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cbool%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20address%20p1%2C%20uint256%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Caddress%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20address%20p1%2C%20string%20memory%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Caddress%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20address%20p1%2C%20bool%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Caddress%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20address%20p1%2C%20address%20p2%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Caddress%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20uint256%20p1%2C%20uint256%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cuint256%2Cuint256%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20uint256%20p1%2C%20uint256%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cuint256%2Cuint256%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20uint256%20p1%2C%20uint256%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cuint256%2Cuint256%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20uint256%20p1%2C%20uint256%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cuint256%2Cuint256%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20uint256%20p1%2C%20string%20memory%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cuint256%2Cstring%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20uint256%20p1%2C%20string%20memory%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cuint256%2Cstring%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20uint256%20p1%2C%20string%20memory%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cuint256%2Cstring%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20uint256%20p1%2C%20string%20memory%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cuint256%2Cstring%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20uint256%20p1%2C%20bool%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cuint256%2Cbool%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20uint256%20p1%2C%20bool%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cuint256%2Cbool%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20uint256%20p1%2C%20bool%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cuint256%2Cbool%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20uint256%20p1%2C%20bool%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cuint256%2Cbool%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20uint256%20p1%2C%20address%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cuint256%2Caddress%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20uint256%20p1%2C%20address%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cuint256%2Caddress%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20uint256%20p1%2C%20address%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cuint256%2Caddress%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20uint256%20p1%2C%20address%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cuint256%2Caddress%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20string%20memory%20p1%2C%20uint256%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cstring%2Cuint256%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20string%20memory%20p1%2C%20uint256%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cstring%2Cuint256%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20string%20memory%20p1%2C%20uint256%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cstring%2Cuint256%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20string%20memory%20p1%2C%20uint256%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cstring%2Cuint256%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20string%20memory%20p1%2C%20string%20memory%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cstring%2Cstring%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20string%20memory%20p1%2C%20string%20memory%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cstring%2Cstring%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20string%20memory%20p1%2C%20string%20memory%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cstring%2Cstring%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20string%20memory%20p1%2C%20string%20memory%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cstring%2Cstring%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20string%20memory%20p1%2C%20bool%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cstring%2Cbool%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20string%20memory%20p1%2C%20bool%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cstring%2Cbool%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20string%20memory%20p1%2C%20bool%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cstring%2Cbool%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20string%20memory%20p1%2C%20bool%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cstring%2Cbool%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20string%20memory%20p1%2C%20address%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cstring%2Caddress%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20string%20memory%20p1%2C%20address%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cstring%2Caddress%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20string%20memory%20p1%2C%20address%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cstring%2Caddress%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20string%20memory%20p1%2C%20address%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cstring%2Caddress%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20bool%20p1%2C%20uint256%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cbool%2Cuint256%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20bool%20p1%2C%20uint256%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cbool%2Cuint256%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20bool%20p1%2C%20uint256%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cbool%2Cuint256%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20bool%20p1%2C%20uint256%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cbool%2Cuint256%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20bool%20p1%2C%20string%20memory%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cbool%2Cstring%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20bool%20p1%2C%20string%20memory%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cbool%2Cstring%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20bool%20p1%2C%20string%20memory%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cbool%2Cstring%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20bool%20p1%2C%20string%20memory%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cbool%2Cstring%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20bool%20p1%2C%20bool%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cbool%2Cbool%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20bool%20p1%2C%20bool%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cbool%2Cbool%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20bool%20p1%2C%20bool%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cbool%2Cbool%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20bool%20p1%2C%20bool%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cbool%2Cbool%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20bool%20p1%2C%20address%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cbool%2Caddress%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20bool%20p1%2C%20address%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cbool%2Caddress%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20bool%20p1%2C%20address%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cbool%2Caddress%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20bool%20p1%2C%20address%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Cbool%2Caddress%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20address%20p1%2C%20uint256%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Caddress%2Cuint256%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20address%20p1%2C%20uint256%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Caddress%2Cuint256%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20address%20p1%2C%20uint256%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Caddress%2Cuint256%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20address%20p1%2C%20uint256%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Caddress%2Cuint256%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20address%20p1%2C%20string%20memory%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Caddress%2Cstring%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20address%20p1%2C%20string%20memory%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Caddress%2Cstring%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20address%20p1%2C%20string%20memory%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Caddress%2Cstring%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20address%20p1%2C%20string%20memory%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Caddress%2Cstring%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20address%20p1%2C%20bool%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Caddress%2Cbool%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20address%20p1%2C%20bool%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Caddress%2Cbool%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20address%20p1%2C%20bool%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Caddress%2Cbool%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20address%20p1%2C%20bool%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Caddress%2Cbool%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20address%20p1%2C%20address%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Caddress%2Caddress%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20address%20p1%2C%20address%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Caddress%2Caddress%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20address%20p1%2C%20address%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Caddress%2Caddress%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28uint256%20p0%2C%20address%20p1%2C%20address%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28uint256%2Caddress%2Caddress%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20uint256%20p1%2C%20uint256%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cuint256%2Cuint256%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20uint256%20p1%2C%20uint256%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cuint256%2Cuint256%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20uint256%20p1%2C%20uint256%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cuint256%2Cuint256%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20uint256%20p1%2C%20uint256%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cuint256%2Cuint256%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20uint256%20p1%2C%20string%20memory%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cuint256%2Cstring%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20uint256%20p1%2C%20string%20memory%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cuint256%2Cstring%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20uint256%20p1%2C%20string%20memory%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cuint256%2Cstring%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20uint256%20p1%2C%20string%20memory%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cuint256%2Cstring%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20uint256%20p1%2C%20bool%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cuint256%2Cbool%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20uint256%20p1%2C%20bool%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cuint256%2Cbool%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20uint256%20p1%2C%20bool%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cuint256%2Cbool%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20uint256%20p1%2C%20bool%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cuint256%2Cbool%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20uint256%20p1%2C%20address%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cuint256%2Caddress%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20uint256%20p1%2C%20address%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cuint256%2Caddress%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20uint256%20p1%2C%20address%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cuint256%2Caddress%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20uint256%20p1%2C%20address%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cuint256%2Caddress%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20string%20memory%20p1%2C%20uint256%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cstring%2Cuint256%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20string%20memory%20p1%2C%20uint256%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cstring%2Cuint256%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20string%20memory%20p1%2C%20uint256%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cstring%2Cuint256%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20string%20memory%20p1%2C%20uint256%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cstring%2Cuint256%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20string%20memory%20p1%2C%20string%20memory%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cstring%2Cstring%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20string%20memory%20p1%2C%20string%20memory%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cstring%2Cstring%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20string%20memory%20p1%2C%20string%20memory%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cstring%2Cstring%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20string%20memory%20p1%2C%20string%20memory%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cstring%2Cstring%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20string%20memory%20p1%2C%20bool%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cstring%2Cbool%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20string%20memory%20p1%2C%20bool%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cstring%2Cbool%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20string%20memory%20p1%2C%20bool%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cstring%2Cbool%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20string%20memory%20p1%2C%20bool%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cstring%2Cbool%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20string%20memory%20p1%2C%20address%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cstring%2Caddress%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20string%20memory%20p1%2C%20address%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cstring%2Caddress%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20string%20memory%20p1%2C%20address%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cstring%2Caddress%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20string%20memory%20p1%2C%20address%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cstring%2Caddress%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20bool%20p1%2C%20uint256%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cbool%2Cuint256%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20bool%20p1%2C%20uint256%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cbool%2Cuint256%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20bool%20p1%2C%20uint256%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cbool%2Cuint256%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20bool%20p1%2C%20uint256%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cbool%2Cuint256%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20bool%20p1%2C%20string%20memory%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cbool%2Cstring%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20bool%20p1%2C%20string%20memory%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cbool%2Cstring%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20bool%20p1%2C%20string%20memory%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cbool%2Cstring%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20bool%20p1%2C%20string%20memory%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cbool%2Cstring%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20bool%20p1%2C%20bool%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cbool%2Cbool%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20bool%20p1%2C%20bool%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cbool%2Cbool%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20bool%20p1%2C%20bool%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cbool%2Cbool%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20bool%20p1%2C%20bool%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cbool%2Cbool%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20bool%20p1%2C%20address%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cbool%2Caddress%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20bool%20p1%2C%20address%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cbool%2Caddress%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20bool%20p1%2C%20address%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cbool%2Caddress%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20bool%20p1%2C%20address%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Cbool%2Caddress%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20address%20p1%2C%20uint256%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Caddress%2Cuint256%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20address%20p1%2C%20uint256%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Caddress%2Cuint256%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20address%20p1%2C%20uint256%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Caddress%2Cuint256%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20address%20p1%2C%20uint256%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Caddress%2Cuint256%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20address%20p1%2C%20string%20memory%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Caddress%2Cstring%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20address%20p1%2C%20string%20memory%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Caddress%2Cstring%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20address%20p1%2C%20string%20memory%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Caddress%2Cstring%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20address%20p1%2C%20string%20memory%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Caddress%2Cstring%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20address%20p1%2C%20bool%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Caddress%2Cbool%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20address%20p1%2C%20bool%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Caddress%2Cbool%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20address%20p1%2C%20bool%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Caddress%2Cbool%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20address%20p1%2C%20bool%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Caddress%2Cbool%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20address%20p1%2C%20address%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Caddress%2Caddress%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20address%20p1%2C%20address%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Caddress%2Caddress%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20address%20p1%2C%20address%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Caddress%2Caddress%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28string%20memory%20p0%2C%20address%20p1%2C%20address%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28string%2Caddress%2Caddress%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20uint256%20p1%2C%20uint256%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cuint256%2Cuint256%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20uint256%20p1%2C%20uint256%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cuint256%2Cuint256%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20uint256%20p1%2C%20uint256%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cuint256%2Cuint256%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20uint256%20p1%2C%20uint256%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cuint256%2Cuint256%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20uint256%20p1%2C%20string%20memory%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cuint256%2Cstring%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20uint256%20p1%2C%20string%20memory%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cuint256%2Cstring%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20uint256%20p1%2C%20string%20memory%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cuint256%2Cstring%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20uint256%20p1%2C%20string%20memory%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cuint256%2Cstring%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20uint256%20p1%2C%20bool%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cuint256%2Cbool%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20uint256%20p1%2C%20bool%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cuint256%2Cbool%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20uint256%20p1%2C%20bool%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cuint256%2Cbool%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20uint256%20p1%2C%20bool%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cuint256%2Cbool%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20uint256%20p1%2C%20address%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cuint256%2Caddress%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20uint256%20p1%2C%20address%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cuint256%2Caddress%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20uint256%20p1%2C%20address%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cuint256%2Caddress%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20uint256%20p1%2C%20address%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cuint256%2Caddress%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20string%20memory%20p1%2C%20uint256%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cstring%2Cuint256%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20string%20memory%20p1%2C%20uint256%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cstring%2Cuint256%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20string%20memory%20p1%2C%20uint256%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cstring%2Cuint256%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20string%20memory%20p1%2C%20uint256%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cstring%2Cuint256%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20string%20memory%20p1%2C%20string%20memory%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cstring%2Cstring%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20string%20memory%20p1%2C%20string%20memory%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cstring%2Cstring%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20string%20memory%20p1%2C%20string%20memory%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cstring%2Cstring%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20string%20memory%20p1%2C%20string%20memory%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cstring%2Cstring%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20string%20memory%20p1%2C%20bool%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cstring%2Cbool%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20string%20memory%20p1%2C%20bool%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cstring%2Cbool%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20string%20memory%20p1%2C%20bool%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cstring%2Cbool%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20string%20memory%20p1%2C%20bool%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cstring%2Cbool%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20string%20memory%20p1%2C%20address%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cstring%2Caddress%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20string%20memory%20p1%2C%20address%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cstring%2Caddress%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20string%20memory%20p1%2C%20address%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cstring%2Caddress%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20string%20memory%20p1%2C%20address%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cstring%2Caddress%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20bool%20p1%2C%20uint256%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cbool%2Cuint256%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20bool%20p1%2C%20uint256%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cbool%2Cuint256%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20bool%20p1%2C%20uint256%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cbool%2Cuint256%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20bool%20p1%2C%20uint256%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cbool%2Cuint256%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20bool%20p1%2C%20string%20memory%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cbool%2Cstring%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20bool%20p1%2C%20string%20memory%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cbool%2Cstring%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20bool%20p1%2C%20string%20memory%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cbool%2Cstring%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20bool%20p1%2C%20string%20memory%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cbool%2Cstring%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20bool%20p1%2C%20bool%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cbool%2Cbool%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20bool%20p1%2C%20bool%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cbool%2Cbool%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20bool%20p1%2C%20bool%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cbool%2Cbool%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20bool%20p1%2C%20bool%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cbool%2Cbool%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20bool%20p1%2C%20address%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cbool%2Caddress%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20bool%20p1%2C%20address%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cbool%2Caddress%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20bool%20p1%2C%20address%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cbool%2Caddress%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20bool%20p1%2C%20address%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Cbool%2Caddress%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20address%20p1%2C%20uint256%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Caddress%2Cuint256%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20address%20p1%2C%20uint256%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Caddress%2Cuint256%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20address%20p1%2C%20uint256%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Caddress%2Cuint256%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20address%20p1%2C%20uint256%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Caddress%2Cuint256%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20address%20p1%2C%20string%20memory%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Caddress%2Cstring%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20address%20p1%2C%20string%20memory%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Caddress%2Cstring%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20address%20p1%2C%20string%20memory%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Caddress%2Cstring%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20address%20p1%2C%20string%20memory%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Caddress%2Cstring%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20address%20p1%2C%20bool%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Caddress%2Cbool%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20address%20p1%2C%20bool%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Caddress%2Cbool%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20address%20p1%2C%20bool%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Caddress%2Cbool%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20address%20p1%2C%20bool%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Caddress%2Cbool%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20address%20p1%2C%20address%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Caddress%2Caddress%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20address%20p1%2C%20address%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Caddress%2Caddress%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20address%20p1%2C%20address%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Caddress%2Caddress%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28bool%20p0%2C%20address%20p1%2C%20address%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28bool%2Caddress%2Caddress%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20uint256%20p1%2C%20uint256%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cuint256%2Cuint256%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20uint256%20p1%2C%20uint256%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cuint256%2Cuint256%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20uint256%20p1%2C%20uint256%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cuint256%2Cuint256%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20uint256%20p1%2C%20uint256%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cuint256%2Cuint256%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20uint256%20p1%2C%20string%20memory%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cuint256%2Cstring%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20uint256%20p1%2C%20string%20memory%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cuint256%2Cstring%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20uint256%20p1%2C%20string%20memory%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cuint256%2Cstring%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20uint256%20p1%2C%20string%20memory%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cuint256%2Cstring%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20uint256%20p1%2C%20bool%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cuint256%2Cbool%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20uint256%20p1%2C%20bool%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cuint256%2Cbool%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20uint256%20p1%2C%20bool%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cuint256%2Cbool%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20uint256%20p1%2C%20bool%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cuint256%2Cbool%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20uint256%20p1%2C%20address%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cuint256%2Caddress%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20uint256%20p1%2C%20address%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cuint256%2Caddress%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20uint256%20p1%2C%20address%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cuint256%2Caddress%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20uint256%20p1%2C%20address%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cuint256%2Caddress%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20string%20memory%20p1%2C%20uint256%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cstring%2Cuint256%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20string%20memory%20p1%2C%20uint256%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cstring%2Cuint256%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20string%20memory%20p1%2C%20uint256%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cstring%2Cuint256%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20string%20memory%20p1%2C%20uint256%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cstring%2Cuint256%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20string%20memory%20p1%2C%20string%20memory%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cstring%2Cstring%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20string%20memory%20p1%2C%20string%20memory%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cstring%2Cstring%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20string%20memory%20p1%2C%20string%20memory%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cstring%2Cstring%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20string%20memory%20p1%2C%20string%20memory%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cstring%2Cstring%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20string%20memory%20p1%2C%20bool%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cstring%2Cbool%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20string%20memory%20p1%2C%20bool%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cstring%2Cbool%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20string%20memory%20p1%2C%20bool%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cstring%2Cbool%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20string%20memory%20p1%2C%20bool%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cstring%2Cbool%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20string%20memory%20p1%2C%20address%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cstring%2Caddress%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20string%20memory%20p1%2C%20address%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cstring%2Caddress%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20string%20memory%20p1%2C%20address%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cstring%2Caddress%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20string%20memory%20p1%2C%20address%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cstring%2Caddress%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20bool%20p1%2C%20uint256%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cbool%2Cuint256%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20bool%20p1%2C%20uint256%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cbool%2Cuint256%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20bool%20p1%2C%20uint256%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cbool%2Cuint256%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20bool%20p1%2C%20uint256%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cbool%2Cuint256%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20bool%20p1%2C%20string%20memory%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cbool%2Cstring%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20bool%20p1%2C%20string%20memory%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cbool%2Cstring%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20bool%20p1%2C%20string%20memory%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cbool%2Cstring%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20bool%20p1%2C%20string%20memory%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cbool%2Cstring%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20bool%20p1%2C%20bool%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cbool%2Cbool%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20bool%20p1%2C%20bool%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cbool%2Cbool%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20bool%20p1%2C%20bool%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cbool%2Cbool%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20bool%20p1%2C%20bool%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cbool%2Cbool%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20bool%20p1%2C%20address%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cbool%2Caddress%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20bool%20p1%2C%20address%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cbool%2Caddress%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20bool%20p1%2C%20address%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cbool%2Caddress%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20bool%20p1%2C%20address%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Cbool%2Caddress%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20address%20p1%2C%20uint256%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Caddress%2Cuint256%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20address%20p1%2C%20uint256%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Caddress%2Cuint256%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20address%20p1%2C%20uint256%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Caddress%2Cuint256%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20address%20p1%2C%20uint256%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Caddress%2Cuint256%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20address%20p1%2C%20string%20memory%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Caddress%2Cstring%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20address%20p1%2C%20string%20memory%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Caddress%2Cstring%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20address%20p1%2C%20string%20memory%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Caddress%2Cstring%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20address%20p1%2C%20string%20memory%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Caddress%2Cstring%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20address%20p1%2C%20bool%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Caddress%2Cbool%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20address%20p1%2C%20bool%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Caddress%2Cbool%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20address%20p1%2C%20bool%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Caddress%2Cbool%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20address%20p1%2C%20bool%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Caddress%2Cbool%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20address%20p1%2C%20address%20p2%2C%20uint256%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Caddress%2Caddress%2Cuint256%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20address%20p1%2C%20address%20p2%2C%20string%20memory%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Caddress%2Caddress%2Cstring%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20address%20p1%2C%20address%20p2%2C%20bool%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Caddress%2Caddress%2Cbool%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20log%28address%20p0%2C%20address%20p1%2C%20address%20p2%2C%20address%20p3%29%20internal%20pure%20%7B%5Cn%20%20%20%20%20%20%20%20_sendLogPayload%28abi.encodeWithSignature%28%5C%22log%28address%2Caddress%2Caddress%2Caddress%29%5C%22%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Fabstracts%2FDiamondReentrancyGuard.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20Apache-2.0%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20Author%3A%20%40Peersky%20https%3A%2F%2Fgithub.com%2Fpeersky%5Cn%20%2A%20Adapted%20this%20diamond%20reentrancy%20guard%20from%3A%5Cn%5Cn%20%2A%20Authors%3A%20Moonstream%20Engineering%20%28engineering%40moonstream.to%29%5Cn%20%2A%20GitHub%3A%20https%3A%2F%2Fgithub.com%2Fbugout-dev%2Fdao%5Cn%20%2A%2F%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cnimport%20%5C%22..%2Flibraries%2FLibReentrancyGuard.sol%5C%22%3B%5Cn%5Cnabstract%20contract%20DiamondReentrancyGuard%20%7B%5Cn%20%20%20%20modifier%20nonReentrant%28%29%20%7B%5Cn%20%20%20%20%20%20%20%20LibReentrancyGuard.ReentrancyGuardStruct%20storage%20rgs%20%3D%20LibReentrancyGuard.reentrancyGuardStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20require%28%21rgs._entered%2C%20%5C%22REG%3A%20You%20shall%20not%20pass%21%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20rgs._entered%20%3D%20true%3B%5Cn%20%20%20%20%20%20%20%20_%3B%5Cn%20%20%20%20%20%20%20%20rgs._entered%20%3D%20false%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Fabstracts%2Fdraft-EIP712Diamond.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20OpenZeppelin%20Contracts%20v4.4.1%20%28utils%2Fcryptography%2Fdraft-EIP712.sol%29%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Fcryptography%2FMessageHashUtils.sol%5C%22%3B%5Cnimport%20%5C%22..%2Flibraries%2FLibEIP712Storage.sol%5C%22%3B%5Cnimport%20%5C%22..%2Fmodifiers%2FOnlyOwnerDiamond.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-712%5BEIP%20712%5D%20is%20a%20standard%20for%20hashing%20and%20signing%20of%20typed%20structured%20data.%5Cn%20%2A%5Cn%20%2A%20The%20encoding%20specified%20in%20the%20EIP%20is%20very%20generic%2C%20and%20such%20a%20generic%20implementation%20in%20Solidity%20is%20not%20feasible%2C%5Cn%20%2A%20thus%20this%20contract%20does%20not%20implement%20the%20encoding%20itself.%20Protocols%20need%20to%20implement%20the%20type-specific%20encoding%5Cn%20%2A%20they%20need%20in%20their%20contracts%20using%20a%20combination%20of%20%60abi.encode%60%20and%20%60keccak256%60.%5Cn%20%2A%5Cn%20%2A%20This%20contract%20implements%20the%20EIP%20712%20domain%20separator%20%28%7B_domainSeparatorV4%7D%29%20that%20is%20used%20as%20part%20of%20the%20encoding%5Cn%20%2A%20scheme%2C%20and%20the%20final%20step%20of%20the%20encoding%20to%20obtain%20the%20message%20digest%20that%20is%20then%20signed%20via%20ECDSA%5Cn%20%2A%20%28%7B_hashTypedDataV4%7D%29.%5Cn%20%2A%5Cn%20%2A%20The%20implementation%20of%20the%20domain%20separator%20was%20designed%20to%20be%20as%20efficient%20as%20possible%20while%20still%20properly%20updating%5Cn%20%2A%20the%20chain%20id%20to%20protect%20against%20replay%20attacks%20on%20an%20eventual%20fork%20of%20the%20chain.%5Cn%20%2A%5Cn%20%2A%20NOTE%3A%20This%20contract%20implements%20the%20version%20of%20the%20encoding%20known%20as%20%5C%22v4%5C%22%2C%20as%20implemented%20by%20the%20JSON%20RPC%20method%5Cn%20%2A%20https%3A%2F%2Fdocs.metamask.io%2Fguide%2Fsigning-data.html%5B%60eth_signTypedDataV4%60%20in%20MetaMask%5D.%5Cn%20%2A%5Cn%20%2A%20_Available%20since%20v3.4._%5Cn%20%2A%2F%5Cnabstract%20contract%20EIP712%20is%20OnlyOwnerDiamond%20%7B%5Cn%20%20%20%20%2F%2A%20solhint-disable%20var-name-mixedcase%20%2A%2F%5Cn%20%20%20%20%2F%2F%20Cache%20the%20domain%20separator%20as%20an%20immutable%20value%2C%20but%20also%20store%20the%20chain%20id%20that%20it%20corresponds%20to%2C%20in%20order%20to%5Cn%20%20%20%20%2F%2F%20invalidate%20the%20cached%20domain%20separator%20if%20the%20chain%20id%20changes.%5Cn%5Cn%20%20%20%20%2F%2A%20solhint-enable%20var-name-mixedcase%20%2A%2F%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Initializes%20the%20domain%20separator%20and%20parameter%20caches.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20The%20meaning%20of%20%60name%60%20and%20%60version%60%20is%20specified%20in%5Cn%20%20%20%20%20%2A%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-712%23definition-of-domainseparator%5BEIP%20712%5D%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60name%60%3A%20the%20user%20readable%20name%20of%20the%20signing%20domain%2C%20i.e.%20the%20name%20of%20the%20DApp%20or%20the%20protocol.%5Cn%20%20%20%20%20%2A%20-%20%60version%60%3A%20the%20current%20major%20version%20of%20the%20signing%20domain.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20NOTE%3A%20These%20parameters%20cannot%20be%20changed%20except%20through%20a%20xref%3Alearn%3A%3Aupgrading-smart-contracts.adoc%5Bsmart%5Cn%20%20%20%20%20%2A%20contract%20upgrade%5D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20constructor%28%29%20%7B%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20domain%20separator%20for%20the%20current%20chain.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_domainSeparatorV4%28%29%20internal%20view%20returns%20%28bytes32%29%20%7B%5Cn%20%20%20%20%20%20%20%20LibEIP712WithStorage.LibEIP712WithStorageStorage%20storage%20ss%20%3D%20LibEIP712WithStorage.EIP712WithStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28address%28this%29%20%3D%3D%20ss._CACHED_THIS%20%26%26%20block.chainid%20%3D%3D%20ss._CACHED_CHAIN_ID%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20ss._CACHED_DOMAIN_SEPARATOR%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20_buildDomainSeparator%28ss._TYPE_HASH%2C%20ss._HASHED_NAME%2C%20ss._HASHED_VERSION%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_buildDomainSeparator%28%5Cn%20%20%20%20%20%20%20%20bytes32%20typeHash%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20nameHash%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20versionHash%5Cn%20%20%20%20%29%20private%20view%20returns%20%28bytes32%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20keccak256%28abi.encode%28typeHash%2C%20nameHash%2C%20versionHash%2C%20block.chainid%2C%20address%28this%29%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Given%20an%20already%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-712%23definition-of-hashstruct%5Bhashed%20struct%5D%2C%20this%5Cn%20%20%20%20%20%2A%20function%20returns%20the%20hash%20of%20the%20fully%20encoded%20EIP712%20message%20for%20this%20domain.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20This%20hash%20can%20be%20used%20together%20with%20%7BECDSA-recover%7D%20to%20obtain%20the%20signer%20of%20a%20message.%20For%20example%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20%60%60%60solidity%5Cn%20%20%20%20%20%2A%20bytes32%20digest%20%3D%20_hashTypedDataV4%28keccak256%28abi.encode%28%5Cn%20%20%20%20%20%2A%20%20%20%20%20keccak256%28%5C%22Mail%28address%20to%2Cstring%20contents%29%5C%22%29%2C%5Cn%20%20%20%20%20%2A%20%20%20%20%20mailTo%2C%5Cn%20%20%20%20%20%2A%20%20%20%20%20keccak256%28bytes%28mailContents%29%29%5Cn%20%20%20%20%20%2A%20%29%29%29%3B%5Cn%20%20%20%20%20%2A%20address%20signer%20%3D%20ECDSA.recover%28digest%2C%20signature%29%3B%5Cn%20%20%20%20%20%2A%20%60%60%60%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_hashTypedDataV4%28bytes32%20structHash%29%20internal%20view%20virtual%20returns%20%28bytes32%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20MessageHashUtils.toTypedDataHash%28_domainSeparatorV4%28%29%2C%20structHash%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Fdistributions%2FArguableVotingTournament.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%3D0.8.28%3B%5Cn%5Cnimport%20%5C%22.%2FInitializedDiamondDistribution.sol%5C%22%3B%5Cnimport%20%5C%22..%2Fvendor%2Fdiamond%2Ffacets%2FDiamondLoupeFacet.sol%5C%22%3B%5Cnimport%20%5C%22..%2Ffacets%2FEIP712InspectorFacet.sol%5C%22%3B%5Cnimport%20%5C%22..%2Fvendor%2Fdiamond%2Ffacets%2FOwnershipFacet.sol%5C%22%3B%5Cnimport%20%5C%22..%2Ffacets%2FRankifyInstanceMainFacet.sol%5C%22%3B%5Cnimport%20%5C%22..%2Ffacets%2FRankifyInstanceRequirementsFacet.sol%5C%22%3B%5Cnimport%20%5C%22..%2Ffacets%2FRankifyInstanceGameMastersFacet.sol%5C%22%3B%5Cnimport%20%5C%22..%2Finitializers%2FRankifyInstanceInit.sol%5C%22%3B%5Cnimport%20%5C%22..%2Fvendor%2Fdiamond%2Finterfaces%2FIDiamondCut.sol%5C%22%3B%5Cnimport%20%5C%22%40peeramid-labs%2Feds%2Fsrc%2Flibraries%2FLibSemver.sol%5C%22%3B%5Cnimport%20%7BShortStrings%2C%20ShortString%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2FShortStrings.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40title%20ArguableVotingTournament%20Distribution%5Cn%20%2A%20%40notice%20This%20contract%20implements%20a%20diamond%20distribution%20for%20the%20Ethereum%20Distribution%20System%20%28EDS%29.%5Cn%20%2A%20%20%20%20%20%20%20%20%20It%20creates%20and%20manages%20instances%20of%20ArguableVotingTournament%2C%20enabling%20decentralized%5Cn%20%2A%20%20%20%20%20%20%20%20%20tournament%20management%20with%20voting%20capabilities.%5Cn%20%2A%20%40dev%20This%20contract%20follows%20the%20Diamond%20pattern%20and%20is%20designed%20to%20be%20used%20exclusively%20by%20the%5Cn%20%2A%20%20%20%20%20%20Distributor%20contract.%20It%20manages%20facets%20for%20tournament%20operations%2C%20voting%2C%20and%20game%20master%20functions.%5Cn%20%2A%20%40author%20Peeramid%20Labs%2C%202024%5Cn%20%2A%2F%5Cncontract%20ArguableVotingTournament%20is%20InitializedDiamondDistribution%20%7B%5Cn%20%20%20%20using%20ShortStrings%20for%20ShortString%3B%5Cn%20%20%20%20DiamondLoupeFacet%20private%20immutable%20_loupeFacet%3B%5Cn%20%20%20%20EIP712InspectorFacet%20private%20immutable%20_inspectorFacet%3B%5Cn%20%20%20%20RankifyInstanceMainFacet%20private%20immutable%20_RankifyMainFacet%3B%5Cn%20%20%20%20RankifyInstanceRequirementsFacet%20private%20immutable%20_RankifyReqsFacet%3B%5Cn%20%20%20%20RankifyInstanceGameMastersFacet%20private%20immutable%20_RankifyGMFacet%3B%5Cn%20%20%20%20OwnershipFacet%20private%20immutable%20_OwnershipFacet%3B%5Cn%20%20%20%20address%20private%20immutable%20_initializer%3B%5Cn%5Cn%20%20%20%20ShortString%20private%20immutable%20distributionName%3B%5Cn%20%20%20%20uint256%20private%20immutable%20distributionVersion%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Utility%20function%20to%20convert%20function%20signature%20strings%20to%20selectors%5Cn%20%20%20%20%20%2A%20%40param%20signature%20The%20function%20signature%20as%20a%20string%5Cn%20%20%20%20%20%2A%20%40return%20bytes4%20The%20corresponding%20function%20selector%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20stringToSelector%28string%20memory%20signature%29%20private%20pure%20returns%20%28bytes4%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20bytes4%28keccak256%28bytes%28signature%29%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Groups%20the%20addresses%20of%20all%20required%20facets%20for%20the%20tournament%5Cn%20%20%20%20%20%2A%20%40notice%20This%20struct%20helps%20organize%20the%20deployment%20of%20the%20diamond%20proxy%20system%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20struct%20ArguableTournamentAddresses%20%7B%5Cn%20%20%20%20%20%20%20%20address%20loupeFacet%3B%5Cn%20%20%20%20%20%20%20%20address%20inspectorFacet%3B%5Cn%20%20%20%20%20%20%20%20address%20RankifyMainFacet%3B%5Cn%20%20%20%20%20%20%20%20address%20RankifyReqsFacet%3B%5Cn%20%20%20%20%20%20%20%20address%20RankifyGMFacet%3B%5Cn%20%20%20%20%20%20%20%20address%20OwnershipFacet%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Constructor%20for%20the%20ArguableVotingTournament%20contract%5Cn%20%20%20%20%20%2A%20%40dev%20WARNING%3A%20distributionName%20must%20be%20less%20then%2031%20bytes%20long%20to%20comply%20with%20ShortStrings%20immutable%20format%5Cn%20%20%20%20%20%2A%20%40notice%20Sets%20up%20the%20diamond%20proxy%20system%20with%20all%20required%20facets%20and%20initializes%20core%20components%5Cn%20%20%20%20%20%2A%20%40dev%20The%20initializer%20function%20is%20added%20as%20a%20regular%20facet%20to%20the%20Diamond%20Proxy.%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20Since%20initialization%20is%20handled%20by%20the%20distributor%20contract%2C%20it%27s%20expected%20that%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20the%20distributor%20will%20remove%20this%20facet%20after%20successful%20initialization.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20constructor%28%5Cn%20%20%20%20%20%20%20%20address%20initializer%2C%5Cn%20%20%20%20%20%20%20%20bytes4%20initializerSelector%2C%5Cn%20%20%20%20%20%20%20%20string%20memory%20_distributionName%2C%5Cn%20%20%20%20%20%20%20%20LibSemver.Version%20memory%20version%2C%5Cn%20%20%20%20%20%20%20%20ArguableTournamentAddresses%20memory%20addresses%5Cn%20%20%20%20%29%20InitializedDiamondDistribution%28address%28this%29%2C%20bytes32%280%29%2C%20initializerSelector%29%20%7B%5Cn%20%20%20%20%20%20%20%20_initializer%20%3D%20initializer%3B%5Cn%20%20%20%20%20%20%20%20_loupeFacet%20%3D%20DiamondLoupeFacet%28addresses.loupeFacet%29%3B%5Cn%20%20%20%20%20%20%20%20_inspectorFacet%20%3D%20EIP712InspectorFacet%28addresses.inspectorFacet%29%3B%5Cn%20%20%20%20%20%20%20%20_RankifyMainFacet%20%3D%20RankifyInstanceMainFacet%28addresses.RankifyMainFacet%29%3B%5Cn%20%20%20%20%20%20%20%20_RankifyReqsFacet%20%3D%20RankifyInstanceRequirementsFacet%28addresses.RankifyReqsFacet%29%3B%5Cn%20%20%20%20%20%20%20%20_RankifyGMFacet%20%3D%20RankifyInstanceGameMastersFacet%28addresses.RankifyGMFacet%29%3B%5Cn%20%20%20%20%20%20%20%20_OwnershipFacet%20%3D%20OwnershipFacet%28addresses.OwnershipFacet%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20distributionName%20%3D%20ShortStrings.toShortString%28_distributionName%29%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20console.log%28LibSemver.toString%28%29%29%5Cn%20%20%20%20%20%20%20%20distributionVersion%20%3D%20LibSemver.toUint256%28version%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40notice%20see%20Ethereum%20Distribution%20System%20IDistribute%20for%20interface%20specification.%5Cn%20%20%20%20%20%2A%20%40return%20instances%20Array%5B8%5D%3A%20%5Bdiamond%20proxy%2C%208x%20diamond%20facets..%5D%5Cn%20%20%20%20%20%2A%20%40return%20distributionName%3A%20bytes32%20encoded%20name%20to%20be%20used%20in%20EIP712%20signing%20flow%5Cn%20%20%20%20%20%2A%20%40return%20distributionVersion%3A%20uint256%20encoded%20distribution%20version.%20Can%20be%20parsed%20to%20eip712%20signature%20with%20EDS%20LibSemver%5Cn%20%20%20%20%20%2A%20%40dev%20%20%20%2F%2F%20instances%3A%200%20-%20diamond%3B%201%20-%20DiamondLoupeFacet%3B%202%20-%20EIP712InspectorFacet%3B%203%20-%20RankifyInstanceMainFacet%3B%204%20-%20RankifyInstanceRequirementsFacet%3B%205%20-%20RankifyInstanceGameMastersFacet%20%2F%2F%206%20-%20OwnershipFacet%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20instantiate%28%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20ownerEncoded%5Cn%20%20%20%20%29%20external%20override%20returns%20%28address%5B%5D%20memory%20instances%2C%20bytes32%2C%20uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20address%20owner%20%3D%20abi.decode%28ownerEncoded%2C%20%28address%29%29%3B%5Cn%20%20%20%20%20%20%20%20%28address%5B%5D%20memory%20_instances%2C%20%2C%20%29%20%3D%20super._instantiate%28%29%3B%5Cn%20%20%20%20%20%20%20%20address%20diamond%20%3D%20_instances%5B0%5D%3B%5Cn%20%20%20%20%20%20%20%20IDiamondCut.FacetCut%5B%5D%20memory%20facetCuts%20%3D%20new%20IDiamondCut.FacetCut%5B%5D%287%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20bytes4%5B%5D%20memory%20loupeSelectors%20%3D%20new%20bytes4%5B%5D%284%29%3B%5Cn%20%20%20%20%20%20%20%20loupeSelectors%5B0%5D%20%3D%20DiamondLoupeFacet.facets.selector%3B%5Cn%20%20%20%20%20%20%20%20loupeSelectors%5B1%5D%20%3D%20DiamondLoupeFacet.facetFunctionSelectors.selector%3B%5Cn%20%20%20%20%20%20%20%20loupeSelectors%5B2%5D%20%3D%20DiamondLoupeFacet.facetAddresses.selector%3B%5Cn%20%20%20%20%20%20%20%20loupeSelectors%5B3%5D%20%3D%20DiamondLoupeFacet.facetAddress.selector%3B%5Cn%20%20%20%20%20%20%20%20facetCuts%5B0%5D%20%3D%20IDiamondCut.FacetCut%28%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20facetAddress%3A%20address%28_loupeFacet%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20action%3A%20IDiamondCut.FacetCutAction.Add%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20functionSelectors%3A%20loupeSelectors%5Cn%20%20%20%20%20%20%20%20%7D%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20bytes4%5B%5D%20memory%20EIP712InspectorFacetSelectors%20%3D%20new%20bytes4%5B%5D%282%29%3B%5Cn%20%20%20%20%20%20%20%20EIP712InspectorFacetSelectors%5B0%5D%20%3D%20EIP712InspectorFacet.inspectEIP712Hashes.selector%3B%5Cn%20%20%20%20%20%20%20%20EIP712InspectorFacetSelectors%5B1%5D%20%3D%20EIP712InspectorFacet.currentChainId.selector%3B%5Cn%5Cn%20%20%20%20%20%20%20%20facetCuts%5B1%5D%20%3D%20IDiamondCut.FacetCut%28%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20facetAddress%3A%20address%28_inspectorFacet%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20action%3A%20IDiamondCut.FacetCutAction.Add%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20functionSelectors%3A%20EIP712InspectorFacetSelectors%5Cn%20%20%20%20%20%20%20%20%7D%29%3B%5Cn%20%20%20%20%20%20%20%20bytes4%5B%5D%20memory%20RankifyInstanceMainFacetSelectors%20%3D%20new%20bytes4%5B%5D%2836%29%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B0%5D%20%3D%20RankifyInstanceMainFacet.cancelGame.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B1%5D%20%3D%20RankifyInstanceMainFacet.gameCreator.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B2%5D%20%3D%20RankifyInstanceMainFacet.createGame.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B3%5D%20%3D%20RankifyInstanceMainFacet.leaveGame.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B4%5D%20%3D%20RankifyInstanceMainFacet.joinGame.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B5%5D%20%3D%20RankifyInstanceMainFacet.openRegistration.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B6%5D%20%3D%20RankifyInstanceMainFacet.startGame.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B7%5D%20%3D%20RankifyInstanceMainFacet.onERC1155BatchReceived.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B8%5D%20%3D%20RankifyInstanceMainFacet.onERC1155Received.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B9%5D%20%3D%20RankifyInstanceMainFacet.onERC721Received.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B10%5D%20%3D%20RankifyInstanceMainFacet.getContractState.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B11%5D%20%3D%20RankifyInstanceMainFacet.getTurn.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B12%5D%20%3D%20RankifyInstanceMainFacet.getGM.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B13%5D%20%3D%20RankifyInstanceMainFacet.getScores.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B14%5D%20%3D%20RankifyInstanceMainFacet.isOvertime.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B15%5D%20%3D%20RankifyInstanceMainFacet.isGameOver.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B16%5D%20%3D%20RankifyInstanceMainFacet.getPlayersGames.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B17%5D%20%3D%20RankifyInstanceMainFacet.isLastTurn.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B18%5D%20%3D%20RankifyInstanceMainFacet.isRegistrationOpen.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B19%5D%20%3D%20RankifyInstanceMainFacet.getGameRank.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B20%5D%20%3D%20RankifyInstanceMainFacet.getPlayers.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B21%5D%20%3D%20RankifyInstanceMainFacet.canStartGame.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B22%5D%20%3D%20RankifyInstanceMainFacet.canEndVotingStage.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B23%5D%20%3D%20RankifyInstanceMainFacet.isPlayerTurnComplete.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B24%5D%20%3D%20RankifyInstanceMainFacet.getPlayerVotedArray.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B25%5D%20%3D%20RankifyInstanceMainFacet.getPlayersMoved.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B26%5D%20%3D%20RankifyInstanceMainFacet.estimateGamePrice.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B27%5D%20%3D%20RankifyInstanceMainFacet.isActive.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B28%5D%20%3D%20RankifyInstanceMainFacet.exitRankToken.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B29%5D%20%3D%20RankifyInstanceMainFacet.gameWinner.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B30%5D%20%3D%20RankifyInstanceMainFacet.isPlayerInGame.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B31%5D%20%3D%20RankifyInstanceMainFacet.createAndOpenGame.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B32%5D%20%3D%20RankifyInstanceMainFacet.setJoinRequirements.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B33%5D%20%3D%20RankifyInstanceMainFacet.canEndProposingStage.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B34%5D%20%3D%20RankifyInstanceMainFacet.isProposingStage.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceMainFacetSelectors%5B35%5D%20%3D%20RankifyInstanceMainFacet.isVotingStage.selector%3B%5Cn%5Cn%20%20%20%20%20%20%20%20facetCuts%5B2%5D%20%3D%20IDiamondCut.FacetCut%28%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20facetAddress%3A%20address%28_RankifyMainFacet%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20action%3A%20IDiamondCut.FacetCutAction.Add%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20functionSelectors%3A%20RankifyInstanceMainFacetSelectors%5Cn%20%20%20%20%20%20%20%20%7D%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20bytes4%5B%5D%20memory%20RankifyInstanceRequirementsFacetSelectors%20%3D%20new%20bytes4%5B%5D%286%29%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceRequirementsFacetSelectors%5B0%5D%20%3D%20RankifyInstanceRequirementsFacet.getJoinRequirements.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceRequirementsFacetSelectors%5B1%5D%20%3D%20RankifyInstanceRequirementsFacet%5Cn%20%20%20%20%20%20%20%20%20%20%20%20.getJoinRequirementsByToken%5Cn%20%20%20%20%20%20%20%20%20%20%20%20.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceRequirementsFacetSelectors%5B2%5D%20%3D%20RankifyInstanceRequirementsFacet.getGameState.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceRequirementsFacetSelectors%5B3%5D%20%3D%20RankifyInstanceRequirementsFacet.getCommonParams.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceRequirementsFacetSelectors%5B4%5D%20%3D%20RankifyInstanceRequirementsFacet.getPullableEth.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceRequirementsFacetSelectors%5B5%5D%20%3D%20RankifyInstanceRequirementsFacet.pullEth.selector%3B%5Cn%5Cn%20%20%20%20%20%20%20%20facetCuts%5B3%5D%20%3D%20IDiamondCut.FacetCut%28%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20facetAddress%3A%20address%28_RankifyReqsFacet%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20action%3A%20IDiamondCut.FacetCutAction.Add%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20functionSelectors%3A%20RankifyInstanceRequirementsFacetSelectors%5Cn%20%20%20%20%20%20%20%20%7D%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20bytes4%5B%5D%20memory%20RankifyInstanceGameMastersFacetSelectors%20%3D%20new%20bytes4%5B%5D%285%29%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceGameMastersFacetSelectors%5B0%5D%20%3D%20RankifyInstanceGameMastersFacet.submitVote.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceGameMastersFacetSelectors%5B1%5D%20%3D%20RankifyInstanceGameMastersFacet.submitProposal.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceGameMastersFacetSelectors%5B2%5D%20%3D%20RankifyInstanceGameMastersFacet.endVoting.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceGameMastersFacetSelectors%5B3%5D%20%3D%20RankifyInstanceGameMastersFacet.endProposing.selector%3B%5Cn%20%20%20%20%20%20%20%20RankifyInstanceGameMastersFacetSelectors%5B4%5D%20%3D%20RankifyInstanceGameMastersFacet.forceEndStaleGame.selector%3B%5Cn%5Cn%20%20%20%20%20%20%20%20facetCuts%5B4%5D%20%3D%20IDiamondCut.FacetCut%28%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20facetAddress%3A%20address%28_RankifyGMFacet%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20action%3A%20IDiamondCut.FacetCutAction.Add%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20functionSelectors%3A%20RankifyInstanceGameMastersFacetSelectors%5Cn%20%20%20%20%20%20%20%20%7D%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20bytes4%5B%5D%20memory%20OwnershipFacetSelectors%20%3D%20new%20bytes4%5B%5D%282%29%3B%5Cn%20%20%20%20%20%20%20%20OwnershipFacetSelectors%5B0%5D%20%3D%20_OwnershipFacet.transferOwnership.selector%3B%5Cn%20%20%20%20%20%20%20%20OwnershipFacetSelectors%5B1%5D%20%3D%20_OwnershipFacet.owner.selector%3B%5Cn%5Cn%20%20%20%20%20%20%20%20facetCuts%5B5%5D%20%3D%20IDiamondCut.FacetCut%28%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20facetAddress%3A%20address%28_OwnershipFacet%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20action%3A%20IDiamondCut.FacetCutAction.Add%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20functionSelectors%3A%20OwnershipFacetSelectors%5Cn%20%20%20%20%20%20%20%20%7D%29%3B%5Cn%20%20%20%20%20%20%20%20bytes4%5B%5D%20memory%20initializerSelectors%20%3D%20new%20bytes4%5B%5D%281%29%3B%5Cn%20%20%20%20%20%20%20%20initializerSelectors%5B0%5D%20%3D%20RankifyInstanceInit.init.selector%3B%5Cn%20%20%20%20%20%20%20%20facetCuts%5B6%5D%20%3D%20IDiamondCut.FacetCut%28%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20facetAddress%3A%20_initializer%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20action%3A%20IDiamondCut.FacetCutAction.Add%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20functionSelectors%3A%20initializerSelectors%5Cn%20%20%20%20%20%20%20%20%7D%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20super.initialize%28DiamondCutFacet%28diamond%29%2C%20facetCuts%2C%20%5C%22%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20memory%20returnValue%20%3D%20new%20address%5B%5D%288%29%3B%5Cn%20%20%20%20%20%20%20%20returnValue%5B0%5D%20%3D%20diamond%3B%5Cn%20%20%20%20%20%20%20%20returnValue%5B1%5D%20%3D%20facetCuts%5B0%5D.facetAddress%3B%5Cn%20%20%20%20%20%20%20%20returnValue%5B2%5D%20%3D%20facetCuts%5B1%5D.facetAddress%3B%5Cn%20%20%20%20%20%20%20%20returnValue%5B3%5D%20%3D%20facetCuts%5B2%5D.facetAddress%3B%5Cn%20%20%20%20%20%20%20%20returnValue%5B4%5D%20%3D%20facetCuts%5B3%5D.facetAddress%3B%5Cn%20%20%20%20%20%20%20%20returnValue%5B5%5D%20%3D%20facetCuts%5B4%5D.facetAddress%3B%5Cn%20%20%20%20%20%20%20%20returnValue%5B6%5D%20%3D%20facetCuts%5B5%5D.facetAddress%3B%5Cn%20%20%20%20%20%20%20%20returnValue%5B7%5D%20%3D%20facetCuts%5B6%5D.facetAddress%3B%5Cn%20%20%20%20%20%20%20%20%2F%2Frenouncing%20ownership%5Cn%20%20%20%20%20%20%20%20OwnershipFacet%28diamond%29.transferOwnership%28owner%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20return%20%28returnValue%2C%20ShortString.unwrap%28distributionName%29%2C%20distributionVersion%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20contractURI%28%29%20public%20pure%20virtual%20override%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20string%28abi.encodePacked%28super.contractURI%28%29%2C%20%5C%22%3B%5C%22%2C%20%5C%22ArguableVotingTournament%5C%22%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20sources%28%29%20internal%20view%20virtual%20override%20returns%20%28address%5B%5D%20memory%2C%20bytes32%2C%20uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20%28address%5B%5D%20memory%20srcs%2C%20%2C%20%29%20%3D%20super.sources%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20%28srcs%2C%20ShortString.unwrap%28distributionName%29%2C%20distributionVersion%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Fdistributions%2FDiamondDistribution.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%3D0.8.28%3B%5Cn%5Cnimport%20%5C%22%40peeramid-labs%2Feds%2Fsrc%2Fabstracts%2FCloneDistribution.sol%5C%22%3B%5Cnimport%20%5C%22..%2Fvendor%2Fdiamond%2FDiamondClonable.sol%5C%22%3B%5Cnimport%20%5C%22..%2Fvendor%2Fdiamond%2Ffacets%2FDiamondCutFacet.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40title%20Diamond%20Proxy%20Distribution%5Cn%20%2A%20%40notice%20This%20contract%20is%20EDS%20compatible%20factory%20for%20diamond%20proxies%5Cn%20%2A%20%40dev%20This%20uses%20modified%20version%20of%20Diamond%20Proxy%2C%20which%20allows%20proxy%20itself%20to%20cloned%5Cn%20%2A%20%40author%20Peeramid%20Labs%2C%202024%5Cn%20%2A%2F%5Cncontract%20DiamondDistribution%20is%20CloneDistribution%20%7B%5Cn%20%20%20%20address%20private%20immutable%20_reference%3B%5Cn%5Cn%20%20%20%20constructor%28address%20owner%29%20%7B%5Cn%20%20%20%20%20%20%20%20address%20diamondCutFacet%20%3D%20address%28new%20DiamondCutFacet%28%29%29%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Deploy%20the%20diamond%20proxy%20contract%5Cn%20%20%20%20%20%20%20%20address%20diamondProxy%20%3D%20address%28new%20DiamondClonable%28owner%2C%20diamondCutFacet%29%29%3B%5Cn%20%20%20%20%20%20%20%20_reference%20%3D%20diamondProxy%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20instantiate%28bytes%20memory%29%20external%20virtual%20override%20returns%20%28address%5B%5D%20memory%2C%20bytes32%2C%20uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20super._instantiate%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20sources%28%29%20internal%20view%20virtual%20override%20returns%20%28address%5B%5D%20memory%2C%20bytes32%20name%2C%20uint256%20version%29%20%7B%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20memory%20_sources%20%3D%20new%20address%5B%5D%281%29%3B%5Cn%20%20%20%20%20%20%20%20_sources%5B0%5D%20%3D%20_reference%3B%5Cn%20%20%20%20%20%20%20%20return%20%28_sources%2C%20bytes32%28abi.encodePacked%28%5C%22DiamondDistribution%5C%22%29%29%2C%20uint256%280%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20contractURI%28%29%20public%20pure%20virtual%20override%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20%5C%22%5C%22%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Fdistributions%2FInitializedDiamondDistribution.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%5C%22..%2Fvendor%2Fdiamond%2FDiamondClonable.sol%5C%22%3B%5Cnimport%20%5C%22..%2Fvendor%2Fdiamond%2Ffacets%2FDiamondCutFacet.sol%5C%22%3B%5Cnimport%20%5C%22.%2FDiamondDistribution.sol%5C%22%3B%5Cnimport%20%5C%22..%2Fvendor%2Fdiamond%2Flibraries%2FLibDiamond.sol%5C%22%3B%5Cnimport%20%5C%22..%2Fvendor%2Fdiamond%2Finterfaces%2FIDiamondCut.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40title%20Initialized%20Diamond%20Proxy%20Distribution%5Cn%20%2A%20%40notice%20This%20contract%20is%20EDS%20compatible%20factory%20for%20diamond%20proxies%5Cn%20%2A%20%40dev%20This%20allows%20to%20store%20immutable%20initializer%20logic%20for%20a%20cloned%20diamond%20proxy%5Cn%20%2A%20%40author%20Peeramid%20Labs%2C%202024%5Cn%20%2A%2F%5Cnabstract%20contract%20InitializedDiamondDistribution%20is%20DiamondDistribution%20%7B%5Cn%20%20%20%20address%20private%20immutable%20initializer%3B%5Cn%20%20%20%20bytes4%20private%20immutable%20initializerSelector%3B%5Cn%5Cn%20%20%20%20constructor%28address%20owner%2C%20bytes32%20_initializerId%2C%20bytes4%20_initializerSelector%29%20DiamondDistribution%28owner%29%20%7B%5Cn%20%20%20%20%20%20%20%20initializer%20%3D%20getContractsIndex%28%29.get%28_initializerId%29%3B%5Cn%20%20%20%20%20%20%20%20initializerSelector%20%3D%20_initializerSelector%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20initialize%28%5Cn%20%20%20%20%20%20%20%20DiamondCutFacet%20instance%2C%5Cn%20%20%20%20%20%20%20%20IDiamondCut.FacetCut%5B%5D%20memory%20_diamondCut%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20args%5Cn%20%20%20%20%29%20internal%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20_calldata%20%3D%20args.length%20%3E%200%20%3F%20abi.encodeWithSelector%28initializerSelector%2C%20args%29%20%3A%20bytes%28%5C%22%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20instance.diamondCut%28_diamondCut%2C%20initializer%2C%20_calldata%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20get%28%29%20public%20view%20virtual%20override%20returns%20%28address%5B%5D%20memory%2C%20bytes32%20name%2C%20uint256%20version%29%20%7B%5Cn%20%20%20%20%20%20%20%20%28address%5B%5D%20memory%20srcs%2C%20%2C%20%29%20%3D%20super.sources%28%29%3B%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20memory%20_sources%20%3D%20new%20address%5B%5D%282%29%3B%5Cn%20%20%20%20%20%20%20%20assert%28srcs.length%20%3D%3D%201%29%3B%5Cn%20%20%20%20%20%20%20%20_sources%5B0%5D%20%3D%20srcs%5B0%5D%3B%5Cn%20%20%20%20%20%20%20%20_sources%5B1%5D%20%3D%20initializer%3B%5Cn%20%20%20%20%20%20%20%20return%20%28srcs%2C%20bytes32%28abi.encodePacked%28%5C%22InitializedDiamondDistribution%5C%22%29%29%2C%20uint256%280%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20contractURI%28%29%20public%20pure%20virtual%20override%20returns%20%28string%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20string%28abi.encodePacked%28super.contractURI%28%29%2C%20%5C%22%3B%5C%22%2C%20%5C%22InitializedDiamondDistribution%5C%22%29%29%3B%20%2F%2FToDo%3A%20Add%20IPFS%20link%20with%20readme%21%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Ffacets%2FEIP712InspectorFacet.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cnimport%20%5C%22..%2Flibraries%2FLibEIP712Storage.sol%5C%22%3B%5Cn%5Cncontract%20EIP712InspectorFacet%20%7B%5Cn%20%20%20%20function%20inspectEIP712Hashes%28%29%5Cn%20%20%20%20%20%20%20%20public%5Cn%20%20%20%20%20%20%20%20view%5Cn%20%20%20%20%20%20%20%20returns%20%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes32%20_CACHED_DOMAIN_SEPARATOR%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20_CACHED_CHAIN_ID%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20address%20_CACHED_THIS%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes32%20_HASHED_NAME%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes32%20_HASHED_VERSION%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes32%20_TYPE_HASH%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20string%20memory%20_NAME%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20string%20memory%20_VERSION%5Cn%20%20%20%20%20%20%20%20%29%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20LibEIP712WithStorage.LibEIP712WithStorageStorage%20storage%20ss%20%3D%20LibEIP712WithStorage.EIP712WithStorage%28%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20return%20%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20ss._CACHED_DOMAIN_SEPARATOR%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20ss._CACHED_CHAIN_ID%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20ss._CACHED_THIS%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20ss._HASHED_NAME%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20ss._HASHED_VERSION%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20ss._TYPE_HASH%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20ss._NAME%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20ss._VERSION%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20currentChainId%28%29%20public%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20block.chainid%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Ffacets%2FRankifyInstanceGameMastersFacet.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.28%3B%5Cn%5Cnimport%20%7BLibTBG%7D%20from%20%5C%22..%2Flibraries%2FLibTurnBasedGame.sol%5C%22%3B%5Cnimport%20%7BLibRankify%7D%20from%20%5C%22..%2Flibraries%2FLibRankify.sol%5C%22%3B%5Cnimport%20%7BIRankifyInstance%7D%20from%20%5C%22..%2Finterfaces%2FIRankifyInstance.sol%5C%22%3B%5Cnimport%20%5C%22..%2Fabstracts%2FDiamondReentrancyGuard.sol%5C%22%3B%5Cnimport%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Fcryptography%2FSignatureChecker.sol%5C%22%3B%5Cnimport%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Fcryptography%2FECDSA.sol%5C%22%3B%5Cnimport%20%5C%22..%2Fabstracts%2Fdraft-EIP712Diamond.sol%5C%22%3B%5Cnimport%20%7BLibCoinVending%7D%20from%20%5C%22..%2Flibraries%2FLibCoinVending.sol%5C%22%3B%5Cnimport%20%5C%22hardhat%2Fconsole.sol%5C%22%3B%5Cnimport%20%7BIERC20%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Finterfaces%2FIERC20.sol%5C%22%3B%5Cnimport%20%5C%22..%2Fvendor%2Fdiamond%2Flibraries%2FLibDiamond.sol%5C%22%3B%5Cnimport%20%7BIErrors%7D%20from%20%5C%22..%2Finterfaces%2FIErrors.sol%5C%22%3B%5Cnimport%20%7BProposalsIntegrity15Groth16Verifier%7D%20from%20%5C%22..%2Fverifiers%2FProposalsIntegrity15Groth16Verifier.sol%5C%22%3B%5Cn%5Cninterface%20IPoseidon5%20%7B%5Cn%20%20%20%20function%20poseidon%28bytes32%5B5%5D%20memory%20inputs%29%20external%20view%20returns%20%28bytes32%29%3B%5Cn%7D%5Cn%5Cninterface%20IPoseidon6%20%7B%5Cn%20%20%20%20function%20poseidon%28bytes32%5B6%5D%20memory%20inputs%29%20external%20view%20returns%20%28bytes32%29%3B%5Cn%7D%5Cn%5Cninterface%20IPoseidon2%20%7B%5Cn%20%20%20%20function%20poseidon%28bytes32%5B2%5D%20memory%20inputs%29%20external%20view%20returns%20%28bytes32%29%3B%5Cn%7D%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40title%20RankifyInstanceGameMastersFacet%5Cn%20%2A%20%40notice%20Facet%20handling%20game%20master%20functionality%20for%20Rankify%20instances%5Cn%20%2A%20%40dev%20Implements%20game%20master%20specific%20operations%20like%20vote%20submission%20and%20game%20management%5Cn%20%2A%20%40author%20Peeramid%20Labs%2C%202024%5Cn%20%2A%2F%5Cncontract%20RankifyInstanceGameMastersFacet%20is%20DiamondReentrancyGuard%2C%20EIP712%20%7B%5Cn%20%20%20%20%2F%2F%20This%20is%20the%20precompiled%20value%20of%20Poseidon2%280%2C0%29%5Cn%20%20%20%20uint256%20private%20constant%20zeroPoseidon2%20%3D%5Cn%20%20%20%20%20%20%20%2014744269619966411208579211824598458697587494354926760081771325075741142829156%3B%5Cn%20%20%20%20error%20ballotIntegrityCheckFailed%28bytes32%20ballotHash%2C%20bytes32%20ballotHashFromVotes%29%3B%5Cn%20%20%20%20using%20LibTBG%20for%20uint256%3B%5Cn%20%20%20%20using%20LibRankify%20for%20uint256%3B%5Cn%20%20%20%20using%20LibTBG%20for%20LibTBG.State%3B%5Cn%20%20%20%20event%20OverTime%28uint256%20indexed%20gameId%29%3B%5Cn%20%20%20%20event%20ProposalScore%28%5Cn%20%20%20%20%20%20%20%20uint256%20indexed%20gameId%2C%5Cn%20%20%20%20%20%20%20%20uint256%20indexed%20turn%2C%5Cn%20%20%20%20%20%20%20%20string%20indexed%20proposalHash%2C%5Cn%20%20%20%20%20%20%20%20string%20proposal%2C%5Cn%20%20%20%20%20%20%20%20uint256%20score%5Cn%20%20%20%20%29%3B%5Cn%20%20%20%20event%20LastTurn%28uint256%20indexed%20gameId%29%3B%5Cn%20%20%20%20event%20GameOver%28uint256%20indexed%20gameId%2C%20address%5B%5D%20players%2C%20uint256%5B%5D%20scores%29%3B%5Cn%20%20%20%20event%20ProposalSubmitted%28%5Cn%20%20%20%20%20%20%20%20uint256%20indexed%20gameId%2C%5Cn%20%20%20%20%20%20%20%20uint256%20indexed%20turn%2C%5Cn%20%20%20%20%20%20%20%20address%20indexed%20proposer%2C%5Cn%20%20%20%20%20%20%20%20uint256%20commitment%2C%5Cn%20%20%20%20%20%20%20%20string%20encryptedProposal%2C%5Cn%20%20%20%20%20%20%20%20bytes%20gmSignature%2C%5Cn%20%20%20%20%20%20%20%20bytes%20proposerSignature%5Cn%20%20%20%20%29%3B%5Cn%20%20%20%20event%20VoteSubmitted%28%5Cn%20%20%20%20%20%20%20%20uint256%20indexed%20gameId%2C%5Cn%20%20%20%20%20%20%20%20uint256%20indexed%20turn%2C%5Cn%20%20%20%20%20%20%20%20address%20indexed%20player%2C%5Cn%20%20%20%20%20%20%20%20string%20sealedBallotId%2C%5Cn%20%20%20%20%20%20%20%20bytes%20gmSignature%2C%5Cn%20%20%20%20%20%20%20%20bytes%20voterSignature%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20ballotHash%5Cn%20%20%20%20%29%3B%5Cn%20%20%20%20event%20ProposingStageEnded%28%5Cn%20%20%20%20%20%20%20%20uint256%20indexed%20gameId%2C%5Cn%20%20%20%20%20%20%20%20uint256%20indexed%20roundNumber%2C%5Cn%20%20%20%20%20%20%20%20uint256%20numProposals%2C%5Cn%20%20%20%20%20%20%20%20string%5B%5D%20proposals%5Cn%20%20%20%20%29%3B%5Cn%20%20%20%20event%20VotingStageResults%28%5Cn%20%20%20%20%20%20%20%20uint256%20indexed%20gameId%2C%5Cn%20%20%20%20%20%20%20%20uint256%20indexed%20roundNumber%2C%5Cn%20%20%20%20%20%20%20%20address%20indexed%20winner%2C%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20players%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20scores%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%5B%5D%20votesSorted%2C%5Cn%20%20%20%20%20%20%20%20bool%5B%5D%20isActive%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%5B%5D%20finalizedVotingMatrix%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20permutation%5Cn%20%20%20%20%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Represents%20a%20proposal%20for%20a%20game.%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game%5Cn%20%20%20%20%20%2A%20%40param%20encryptedProposal%20The%20encrypted%20proposal%2C%20may%20be%20treated%20as%20simply%20restricted%20URI.%5Cn%20%20%20%20%20%2A%20%40param%20commitment%20The%20commitment%20to%20the%20proposal%5Cn%20%20%20%20%20%2A%20%40param%20proposer%20The%20address%20of%20the%20proposer%5Cn%20%20%20%20%20%2A%20%40param%20gmSignature%20The%20ECDSA%20signature%20of%20the%20game%20master%5Cn%20%20%20%20%20%2A%20%40param%20voterSignature%20The%20ECDSA%20signature%20of%20the%20voter%5Cn%20%20%20%20%20%2A%20%40notice%20gmSignature%20and%20voterSignature%20are%20ECDSA%20signatures%20for%20verification%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20struct%20ProposalParams%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20gameId%3B%5Cn%20%20%20%20%20%20%20%20string%20encryptedProposal%3B%5Cn%20%20%20%20%20%20%20%20uint256%20commitment%3B%5Cn%20%20%20%20%20%20%20%20address%20proposer%3B%5Cn%20%20%20%20%20%20%20%20bytes%20gmSignature%3B%5Cn%20%20%20%20%20%20%20%20bytes%20proposerSignature%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Represents%20a%20batch%20of%20proposal%20reveals%20for%20a%20game.%5Cn%20%20%20%20%20%2A%20%40param%20proposals%20Array%20of%20revealed%20proposals%5Cn%20%20%20%20%20%2A%20%40param%20a%20ZK%20proof%20components%5Cn%20%20%20%20%20%2A%20%40param%20b%20ZK%20proof%20components%5Cn%20%20%20%20%20%2A%20%40param%20c%20ZK%20proof%20components%5Cn%20%20%20%20%20%2A%20%40param%20permutationCommitment%20The%20commitment%20to%20the%20permutation%5Cn%20%20%20%20%20%2A%20%40notice%20permutationCommitment%20must%20be%20poseidon%28sponge%28nextTurnPermutation%29%2C%20nullifier%29.%20For%20sponge%20implementation%20see%20poseidonSpongeT3%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20struct%20BatchProposalReveal%20%7B%5Cn%20%20%20%20%20%20%20%20string%5B%5D%20proposals%3B%20%2F%2F%20Array%20of%20revealed%20proposals%5Cn%20%20%20%20%20%20%20%20uint%5B2%5D%20a%3B%20%2F%2F%20ZK%20proof%20components%5Cn%20%20%20%20%20%20%20%20uint%5B2%5D%5B2%5D%20b%3B%5Cn%20%20%20%20%20%20%20%20uint%5B2%5D%20c%3B%5Cn%20%20%20%20%20%20%20%20uint256%20permutationCommitment%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Handles%20the%20end%20of%20the%20game%20for%20a%20player.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60player%60%20is%20the%20address%20of%20the%20player.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Releases%20the%20coins%20for%20the%20game%20with%20%60gameId%60%2C%20the%20game%20creator%2C%20the%20top%20player%2C%20and%20%60player%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20onPlayersGameEnd%28uint256%20gameId%2C%20address%20player%29%20private%20%7B%5Cn%20%20%20%20%20%20%20%20LibRankify.GameState%20storage%20game%20%3D%20gameId.getGameState%28%29%3B%5Cn%20%20%20%20%20%20%20%20LibCoinVending.release%28bytes32%28gameId%29%2C%20game.createdBy%2C%20gameId.getLeaderBoard%28%29%5B0%5D%2C%20player%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Submits%20a%20vote%20for%20a%20game.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60encryptedVotes%60%20is%20the%20encrypted%20votes.%20%60voter%60%20is%20the%20address%20of%20the%20voter.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20a%20_VoteSubmitted_%20event.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20caller%20must%20be%20a%20game%20master%20of%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20exist.%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20have%20started.%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20not%20be%20over.%5Cn%20%20%20%20%20%2A%20-%20%60voter%60%20must%20be%20in%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%20-%20The%20current%20turn%20of%20the%20game%20with%20%60gameId%60%20must%20be%20greater%20than%201.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20submitVote%28%5Cn%20%20%20%20%20%20%20%20uint256%20gameId%2C%5Cn%20%20%20%20%20%20%20%20string%20memory%20sealedBallotId%2C%5Cn%20%20%20%20%20%20%20%20address%20voter%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20gmSignature%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20voterSignature%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20ballotHash%5Cn%20%20%20%20%29%20public%20%7B%5Cn%20%20%20%20%20%20%20%20gameId.enforceGameExists%28%29%3B%5Cn%20%20%20%20%20%20%20%20gameId.enforceHasStarted%28%29%3B%5Cn%20%20%20%20%20%20%20%20require%28%21gameId.isGameOver%28%29%2C%20%5C%22Game%20over%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20gameId.enforceIsPlayingGame%28voter%29%3B%5Cn%20%20%20%20%20%20%20%20require%28gameId.isVotingStage%28%29%2C%20%5C%22Not%20in%20voting%20stage%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20address%20gm%20%3D%20gameId.getGM%28%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28msg.sender%20%21%3D%20gm%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Verify%20GM%20signature%20for%20sealed%20ballot%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes32%20ballotDigest%20%3D%20_hashTypedDataV4%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20keccak256%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20abi.encode%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20keccak256%28%5C%22SubmitVote%28uint256%20gameId%2Caddress%20voter%2Cstring%20sealedBallotId%2Cbytes32%20ballotHash%29%5C%22%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gameId%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20voter%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20keccak256%28bytes%28sealedBallotId%29%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ballotHash%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20require%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20SignatureChecker.isValidSignatureNow%28gm%2C%20ballotDigest%2C%20gmSignature%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20IErrors.invalidECDSARecoverSigner%28ballotDigest%2C%20%5C%22Invalid%20GM%20signature%5C%22%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%2F%2F%20If%20sender%20is%20not%20the%20voter%2C%20verify%20voter%27s%20signature%5Cn%20%20%20%20%20%20%20%20bytes32%20voterDigest%20%3D%20_hashTypedDataV4%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20keccak256%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20abi.encode%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20keccak256%28%5C%22AuthorizeVoteSubmission%28uint256%20gameId%2Cstring%20sealedBallotId%2Cbytes32%20ballotHash%29%5C%22%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gameId%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20keccak256%28bytes%28sealedBallotId%29%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ballotHash%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%29%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20require%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20SignatureChecker.isValidSignatureNow%28voter%2C%20voterDigest%2C%20voterSignature%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20IErrors.invalidECDSARecoverSigner%28voterDigest%2C%20%5C%22Invalid%20voter%20signature%5C%22%29%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20LibRankify.GameState%20storage%20game%20%3D%20gameId.getGameState%28%29%3B%5Cn%20%20%20%20%20%20%20%20game.ballotHashes%5Bvoter%5D%20%3D%20ballotHash%3B%5Cn%20%20%20%20%20%20%20%20require%28%21game.playerVoted%5Bvoter%5D%2C%20%5C%22Already%20voted%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20game.numVotes%20%2B%3D%201%3B%5Cn%20%20%20%20%20%20%20%20game.playerVoted%5Bvoter%5D%20%3D%20true%3B%5Cn%20%20%20%20%20%20%20%20gameId.tryPlayerMove%28voter%29%3B%5Cn%20%20%20%20%20%20%20%20emit%20VoteSubmitted%28gameId%2C%20gameId.getTurn%28%29%2C%20voter%2C%20sealedBallotId%2C%20gmSignature%2C%20voterSignature%2C%20ballotHash%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20submits%20a%20proposal%20for%20a%20game.%20%60params%60%20is%20the%20proposal%20data.%5Cn%20%20%20%20%20%2A%20%40param%20params%20ProposalParams%5Cn%20%20%20%20%20%2A%20%40notice%20this%20can%20be%20submitted%20by%20either%20player%20or%20game%20master%2C%20params%20contain%20ECDSA%20signatures%20for%20verification%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20submitProposal%28ProposalParams%20memory%20params%29%20public%20%7B%5Cn%20%20%20%20%20%20%20%20params.gameId.enforceGameExists%28%29%3B%5Cn%20%20%20%20%20%20%20%20require%28%21params.gameId.isGameOver%28%29%2C%20%5C%22Game%20over%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20address%20gm%20%3D%20params.gameId.getGM%28%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28msg.sender%20%21%3D%20gm%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes32%20proposalDigest%20%3D%20_hashTypedDataV4%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20keccak256%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20abi.encode%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20keccak256%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22SubmitProposal%28uint256%20gameId%2Caddress%20proposer%2Cstring%20encryptedProposal%2Cuint256%20commitment%29%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20params.gameId%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20params.proposer%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20keccak256%28bytes%28params.encryptedProposal%29%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20params.commitment%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20require%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20SignatureChecker.isValidSignatureNow%28gm%2C%20proposalDigest%2C%20params.gmSignature%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20IErrors.invalidECDSARecoverSigner%28proposalDigest%2C%20%5C%22Invalid%20GM%20signature%5C%22%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20%28msg.sender%20%21%3D%20params.proposer%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes32%20voterDigest%20%3D%20_hashTypedDataV4%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20keccak256%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20abi.encode%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20keccak256%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22AuthorizeProposalSubmission%28uint256%20gameId%2Cstring%20encryptedProposal%2Cuint256%20commitment%29%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20params.gameId%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20keccak256%28bytes%28params.encryptedProposal%29%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20params.commitment%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20require%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20SignatureChecker.isValidSignatureNow%28params.proposer%2C%20voterDigest%2C%20params.proposerSignature%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22invalid%20proposer%20signature%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20LibRankify.GameState%20storage%20game%20%3D%20params.gameId.getGameState%28%29%3B%5Cn%20%20%20%20%20%20%20%20require%28params.gameId.isPlayerInGame%28params.proposer%29%2C%20%5C%22not%20a%20player%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20require%28bytes%28params.encryptedProposal%29.length%20%21%3D%200%2C%20%5C%22Cannot%20propose%20empty%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20require%28game.proposalCommitment%5Bparams.proposer%5D%20%3D%3D%200%2C%20%5C%22Already%20proposed%21%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20uint256%20turn%20%3D%20params.gameId.getTurn%28%29%3B%5Cn%20%20%20%20%20%20%20%20game.proposalCommitment%5Bparams.proposer%5D%20%3D%20params.commitment%3B%5Cn%20%20%20%20%20%20%20%20params.gameId.enforceHasStarted%28%29%3B%5Cn%20%20%20%20%20%20%20%20params.gameId.tryPlayerMove%28params.proposer%29%3B%5Cn%20%20%20%20%20%20%20%20game.numCommitments%20%2B%3D%201%3B%5Cn%20%20%20%20%20%20%20%20emit%20ProposalSubmitted%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20params.gameId%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20turn%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20params.proposer%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20params.commitment%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20params.encryptedProposal%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20params.gmSignature%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20params.proposerSignature%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Hashes%20the%20inputs%20using%20Poseidon%20sponge%20function.%5Cn%20%20%20%20%20%2A%20%40param%20inputs%20Array%20of%20inputs%20to%20hash%5Cn%20%20%20%20%20%2A%20%40param%20size%20Size%20of%20the%20inputs%20array%5Cn%20%20%20%20%20%2A%20%40param%20poseidon5%20Address%20of%20Poseidon5%20contract%5Cn%20%20%20%20%20%2A%20%40param%20poseidon6%20Address%20of%20Poseidon6%20contract%5Cn%20%20%20%20%20%2A%20%40return%20hash3%20The%20final%20hash%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20poseidonSpongeT3%28%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20inputs%2C%5Cn%20%20%20%20%20%20%20%20uint256%20size%2C%5Cn%20%20%20%20%20%20%20%20address%20poseidon5%2C%5Cn%20%20%20%20%20%20%20%20address%20poseidon6%5Cn%20%20%20%20%29%20internal%20view%20returns%20%28bytes32%29%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20console.log%28%5C%22begin%20hashing%20poseidon5%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%2F%2Fverify%20that%20permutation%20is%20correct%5Cn%20%20%20%20%20%20%20%20bytes32%20hash1%20%3D%20IPoseidon5%28poseidon5%29.poseidon%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytes32%28size%20%3E%200%20%3F%20inputs%5B0%5D%20%3A%200%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytes32%28size%20%3E%201%20%3F%20inputs%5B1%5D%20%3A%201%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytes32%28size%20%3E%202%20%3F%20inputs%5B2%5D%20%3A%202%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytes32%28size%20%3E%203%20%3F%20inputs%5B3%5D%20%3A%203%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytes32%28size%20%3E%204%20%3F%20inputs%5B4%5D%20%3A%204%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5D%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20bytes32%20hash2%20%3D%20IPoseidon6%28poseidon6%29.poseidon%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20hash1%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytes32%28size%20%3E%205%20%3F%20inputs%5B5%5D%20%3A%205%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytes32%28size%20%3E%206%20%3F%20inputs%5B6%5D%20%3A%206%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytes32%28size%20%3E%207%20%3F%20inputs%5B7%5D%20%3A%207%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytes32%28size%20%3E%208%20%3F%20inputs%5B8%5D%20%3A%208%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytes32%28size%20%3E%209%20%3F%20inputs%5B9%5D%20%3A%209%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5D%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20bytes32%20hash3%20%3D%20IPoseidon6%28poseidon6%29.poseidon%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20hash2%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytes32%28size%20%3E%2010%20%3F%20inputs%5B10%5D%20%3A%2010%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytes32%28size%20%3E%2011%20%3F%20inputs%5B11%5D%20%3A%2011%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytes32%28size%20%3E%2012%20%3F%20inputs%5B12%5D%20%3A%2012%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytes32%28size%20%3E%2013%20%3F%20inputs%5B13%5D%20%3A%2013%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytes32%28size%20%3E%2014%20%3F%20inputs%5B14%5D%20%3A%2014%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5D%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20return%20hash3%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Handles%20the%20next%20turn%20of%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60newProposals%60%20is%20the%20array%20of%20new%20proposals.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Emits%20an%20%7BOverTime_%20event%20if%20the%20game%20is%20in%20the%20last%20turn%20and%20overtime.%5Cn%20%20%20%20%20%2A%20emits%20a%20_LastTurn_%20event%20if%20the%20game%20is%20in%20the%20last%20turn.%5Cn%20%20%20%20%20%2A%20emits%20a%20_GameOver_%20event%20if%20the%20game%20is%20over.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_nextTurn%28uint256%20gameId%29%20private%20%7B%5Cn%20%20%20%20%20%20%20%20%28bool%20_isLastTurn%2C%20bool%20_wasLastTurn%2C%20bool%20_isOvertime%2C%20bool%20_isGameOver%29%20%3D%20gameId.next%28%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28_wasLastTurn%20%26%26%20_isOvertime%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20emit%20OverTime%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20%28_isLastTurn%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20emit%20LastTurn%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20%28_isGameOver%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%28address%5B%5D%20memory%20players%2C%20uint256%5B%5D%20memory%20finalScores%29%20%3D%20gameId.closeGame%28onPlayersGameEnd%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20emit%20GameOver%28gameId%2C%20players%2C%20finalScores%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40notice%20Called%20by%20the%20Game%20Master%20to%20submit%20revealed%20votes%20and%20end%20the%20current%20voting%20stage.%5Cn%20%20%20%20%20%2A%20Advances%20the%20game%20to%20the%20next%20proposing%20stage%20or%20ends%20the%20game%20if%20it%27s%20the%20final%20round.%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20Id%20of%20the%20game%5Cn%20%20%20%20%20%2A%20%40param%20votes%20Revealed%20votes%20for%20the%20current%20voting%20stage.%20votes%5BplayerIndex%5D%5BvoteTargetIndex%5D.%5Cn%20%20%20%20%20%2A%20%40param%20permutation%20The%20permutation%20of%20players%20used%20when%20their%20proposals%20%28now%20being%20voted%20on%29%20were%20originally%20revealed.%5Cn%20%20%20%20%20%2A%20%40param%20shuffleSalt%20The%20salt%20used%20with%20the%20permutation%20for%20vote%20commitment%20hashing.%5Cn%20%20%20%20%20%2A%20%40custom%3Asecurity%20nonReentrant%20Restricted%20to%20Game%20Master.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20endVoting%28%5Cn%20%20%20%20%20%20%20%20uint256%20gameId%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%5B%5D%20memory%20votes%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20permutation%2C%5Cn%20%20%20%20%20%20%20%20uint256%20shuffleSalt%5Cn%20%20%20%20%29%20public%20nonReentrant%20%7B%5Cn%20%20%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20gameId.enforceGameExists%28%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20gameId.enforceIsGM%28msg.sender%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20gameId.enforceHasStarted%28%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20gameId.enforceIsNotOver%28%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20require%28gameId.isVotingStage%28%29%2C%20%5C%22Not%20in%20voting%20stage%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20LibRankify.GameState%20storage%20game%20%3D%20gameId.getGameState%28%29%3B%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20memory%20players%20%3D%20gameId.getPlayers%28%29%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%201.%20Handle%20previous%20turn%27s%20voting%20and%20scoring%5Cn%20%20%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%5B%5D%5B%5D%20memory%20votesSorted%20%3D%20new%20uint256%5B%5D%5B%5D%28players.length%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Verify%20vote%20integrity%5Cn%20%20%20%20%20%20%20%20%20%20%20%20for%20%28uint256%20player%20%3D%200%3B%20player%20%3C%20players.length%3B%20%2B%2Bplayer%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20votesSorted%5Bplayer%5D%20%3D%20new%20uint256%5B%5D%28players.length%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytes32%20ballotHash%20%3D%20game.ballotHashes%5Bplayers%5Bplayer%5D%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytes32%20playerSalt%20%3D%20keccak256%28abi.encodePacked%28players%5Bplayer%5D%2C%20shuffleSalt%29%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytes32%20ballotHashFromVotes%20%3D%20keccak256%28abi.encodePacked%28votes%5Bplayer%5D%2C%20playerSalt%29%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20console.log%28%5C%22playerSalt%5C%22%2C%20uint256%28playerSalt%29%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20console.log%28%5C%22shuffleSalt%5C%22%2C%20uint256%28shuffleSalt%29%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20console.log%28%5C%22ballotHashFromVotes%5C%22%2C%20uint256%28ballotHashFromVotes%29%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28game.playerVoted%5Bplayers%5Bplayer%5D%5D%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20require%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ballotHash%20%3D%3D%20ballotHashFromVotes%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ballotIntegrityCheckFailed%28ballotHash%2C%20ballotHashFromVotes%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Verify%20proposer%20indices%20for%20previous%20turn%27s%20proposals%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bool%5B%5D%20memory%20used%20%3D%20new%20bool%5B%5D%28players.length%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20players.length%3B%20i%2B%2B%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20require%28permutation%5Bi%5D%20%3C%20players.length%2C%20%5C%22Invalid%20proposer%20index%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20require%28%21used%5Bpermutation%5Bi%5D%5D%2C%20%5C%22Duplicate%20proposer%20index%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20used%5Bpermutation%5Bi%5D%5D%20%3D%20true%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Sort%20votes%20according%20to%20previous%20turn%27s%20proposer%20indices%5Cn%20%20%20%20%20%20%20%20%20%20%20%20for%20%28uint256%20voter%20%3D%200%3B%20voter%20%3C%20players.length%3B%20%2B%2Bvoter%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20permutation%20is%20the%20index%20where%20players%20proposal%20was%20shuffled%20in%20to%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20uint256%20proposalCol%20%3D%20permutation%5Bvoter%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20We%20slice%20the%20votes%20array%20to%20get%20the%20votes%20for%20the%20current%20player%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20%28uint256%20candidate%20%3D%200%3B%20candidate%20%3C%20players.length%3B%20candidate%2B%2B%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20votesSorted%5Bvoter%5D%5Bcandidate%5D%20%3D%20votes%5Bvoter%5D%5Bpermutation%5Bcandidate%5D%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21game.playerVoted%5Bplayers%5Bvoter%5D%5D%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20require%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20votesSorted%5Bvoter%5D%5Bcandidate%5D%20%3D%3D%200%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22Player%20did%20not%20vote%20but%20non%20zero%20vote%20was%20revealed%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20require%28votesSorted%5Bvoter%5D%5Bvoter%5D%20%3D%3D%200%2C%20%5C%22voted%20for%20himself%5C%22%29%3B%20%2F%2F%20did%20not%20vote%20for%20himself%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Calculate%20scores%20for%20previous%20turn%27s%20proposals%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20roundScores%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20address%20roundWinner%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bool%5B%5D%20memory%20isActive%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uint256%5B%5D%5B%5D%20memory%20finalizedVotingMatrix%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%29%20%3D%20gameId.calculateScores%28votesSorted%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20string%5B%5D%20memory%20proposals%20%3D%20new%20string%5B%5D%28players.length%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20turn%20%3D%20gameId.getTurn%28%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20players.length%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20string%20memory%20proposal%20%3D%20game.ongoingProposals%5Bpermutation%5Bi%5D%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20emit%20ProposalScore%28gameId%2C%20turn%2C%20proposal%2C%20proposal%2C%20roundScores%5Bi%5D%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20emit%20VotingStageResults%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gameId%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gameId.getTurn%28%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20roundWinner%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20players%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20roundScores%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20votesSorted%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20isActive%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20finalizedVotingMatrix%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20permutation%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20LibRankify.InstanceState%20storage%20instanceState%20%3D%20LibRankify.instanceState%28%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes32%20hash4%20%3D%20IPoseidon2%28instanceState.commonParams.poseidon2%29.poseidon%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20poseidonSpongeT3%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20permutation%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20players.length%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20instanceState.commonParams.poseidon5%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20instanceState.commonParams.poseidon6%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytes32%28shuffleSalt%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20console.log%28%5C%22hash4%5C%22%2C%20uint256%28hash4%29%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20console.log%28%5C%22comparing%20hashes%5C%22%2C%20shuffleSalt%2C%20game.permutationCommitment%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20require%28hash4%20%3D%3D%20bytes32%28game.permutationCommitment%29%2C%20%5C%22Invalid%20permutation%20commitment%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Clean%20up%20for%20next%20turn%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20players.length%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20game.ongoingProposals%5Bi%5D%20%3D%20%5C%22%5C%22%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20game.playerVoted%5Bplayers%5Bi%5D%5D%20%3D%20false%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20game.ballotHashes%5Bplayers%5Bi%5D%5D%20%3D%20bytes32%280%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20game.proposalCommitment%5Bplayers%5Bi%5D%5D%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20game.numVotes%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20game.numCommitments%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20_nextTurn%28gameId%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40notice%20Called%20by%20the%20Game%20Master%20to%20submit%20revealed%20proposals%20and%20end%20the%20current%20proposing%20stage.%5Cn%20%20%20%20%20%2A%20Advances%20the%20game%20to%20the%20next%20voting%20stage.%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20Id%20of%20the%20game%5Cn%20%20%20%20%20%2A%20%40param%20newProposals%20The%20new%20proposals%20for%20the%20current%20turn%2C%20see%20BatchProposalReveal%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20endProposing%28uint256%20gameId%2C%20BatchProposalReveal%20memory%20newProposals%29%20public%20nonReentrant%20%7B%5Cn%20%20%20%20%20%20%20%20gameId.enforceGameExists%28%29%3B%5Cn%20%20%20%20%20%20%20%20gameId.enforceIsGM%28msg.sender%29%3B%5Cn%20%20%20%20%20%20%20%20gameId.enforceHasStarted%28%29%3B%5Cn%20%20%20%20%20%20%20%20gameId.enforceIsNotOver%28%29%3B%5Cn%20%20%20%20%20%20%20%20require%28gameId.isProposingStage%28%29%2C%20%5C%22Not%20in%20proposing%20stage%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20LibRankify.GameState%20storage%20game%20%3D%20gameId.getGameState%28%29%3B%5Cn%20%20%20%20%20%20%20%20IRankifyInstance.ProposingEndStatus%20status%20%3D%20gameId.canEndProposing%28%29%3B%5Cn%20%20%20%20%20%20%20%20require%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20status%20%3D%3D%20IRankifyInstance.ProposingEndStatus.Success%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20IRankifyInstance.ErrorProposingStageEndFailed%28gameId%2C%20status%29%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20memory%20players%20%3D%20gameId.getPlayers%28%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20LibRankify.InstanceState%20storage%20instanceState%20%3D%20LibRankify.instanceState%28%29%3B%5Cn%20%20%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%5B32%5D%20memory%20PropIntegrityPublicInputs%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20require%28players.length%20%3C%3D%2015%2C%20%5C%22Too%20many%20players%2C%20current%20ZKP%20circuit%20only%20supports%2015%20players%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20require%28newProposals.proposals.length%20%3D%3D%2015%2C%20%5C%22Invalid%20proposal%20count%5C%22%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Fill%20public%20inputs%20with%20commitments%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20players.length%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uint256%20commitment%20%3D%20game.proposalCommitment%5Bplayers%5Bi%5D%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20PropIntegrityPublicInputs%5Bi%5D%20%3D%20commitment%20%21%3D%200%20%3F%20commitment%20%3A%20zeroPoseidon2%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Fill%20remaining%20slots%20with%20zero%20hashes%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%20players.length%3B%20i%20%3C%2015%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20PropIntegrityPublicInputs%5Bi%5D%20%3D%20zeroPoseidon2%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes32%20emptyProposalHash%20%3D%20keccak256%28abi.encodePacked%28%5C%22%5C%22%29%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Fill%20public%20inputs%20with%20proposals%5Cn%20%20%20%20%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%2015%3B%20i%20%3C%2030%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytes32%20proposalHash%20%3D%20keccak256%28abi.encodePacked%28newProposals.proposals%5Bi%20-%2015%5D%29%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28i%20-%2015%20%3C%20players.length%20%26%26%20proposalHash%20%21%3D%20emptyProposalHash%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20PropIntegrityPublicInputs%5Bi%5D%20%3D%20uint256%28proposalHash%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20PropIntegrityPublicInputs%5Bi%5D%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20PropIntegrityPublicInputs%5B30%5D%20%3D%20newProposals.permutationCommitment%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20PropIntegrityPublicInputs%5B31%5D%20%3D%20players.length%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%202.%20Handle%20current%20turn%27s%20proposal%20reveals%20with%20single%20proof%5Cn%20%20%20%20%20%20%20%20%20%20%20%20require%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ProposalsIntegrity15Groth16Verifier%28instanceState.commonParams.proposalIntegrityVerifier%29.verifyProof%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newProposals.a%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newProposals.b%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newProposals.c%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20PropIntegrityPublicInputs%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22Invalid%20batch%20proposal%20reveal%20proof%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20game.permutationCommitment%20%3D%20uint256%28newProposals.permutationCommitment%29%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20newProposals.proposals.length%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20game.ongoingProposals%5Bi%5D%20%3D%20newProposals.proposals%5Bi%5D%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20emit%20ProposingStageEnded%28gameId%2C%20gameId.getTurn%28%29%2C%20game.numCommitments%2C%20newProposals.proposals%29%3B%5Cn%20%20%20%20%20%20%20%20gameId.next%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40notice%20Allows%20a%20Game%20Master%20to%20forcibly%20end%20a%20game%20that%20has%20become%20stale.%5Cn%20%20%20%20%20%2A%20A%20game%20is%20considered%20stale%20if%20minimum%20game%20time%20has%20passed%2C%20it%27s%20stuck%20in%20the%20proposing%20stage%5Cn%20%20%20%20%20%2A%20with%20insufficient%20proposals%2C%20and%20the%20proposing%20phase%20has%20timed%20out.%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game%20to%20forcibly%20end.%5Cn%20%20%20%20%20%2A%20%40custom%3Asecurity%20nonReentrant%20Restricted%20to%20Game%20Master.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20forceEndStaleGame%28uint256%20gameId%29%20public%20nonReentrant%20%7B%5Cn%20%20%20%20%20%20%20%20gameId.enforceGameExists%28%29%3B%5Cn%20%20%20%20%20%20%20%20require%28%21LibTBG.isGameOver%28gameId%29%2C%20%5C%22Rankify%3A%20Game%20already%20over%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20require%28LibRankify.isGameStaleForForcedEnd%28gameId%29%2C%20IRankifyInstance.ErrorCannotForceEndGame%28gameId%29%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20LibRankify.GameState%20storage%20game%20%3D%20gameId.getGameState%28%29%3B%5Cn%20%20%20%20%20%20%20%20LibTBG.State%20storage%20tbgState%20%3D%20gameId._getState%28%29%3B%5Cn%20%20%20%20%20%20%20%20tbgState.hasEnded%20%3D%20true%3B%5Cn%20%20%20%20%20%20%20%20%28address%5B%5D%20memory%20players%2C%20uint256%5B%5D%20memory%20finalScores%29%20%3D%20gameId.closeGame%28onPlayersGameEnd%29%3B%5Cn%20%20%20%20%20%20%20%20emit%20GameOver%28gameId%2C%20players%2C%20finalScores%29%3B%5Cn%20%20%20%20%20%20%20%20emit%20IRankifyInstance.StaleGameEnded%28gameId%2C%20game.winner%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Ffacets%2FRankifyInstanceMainFacet.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BLibTBG%7D%20from%20%5C%22..%2Flibraries%2FLibTurnBasedGame.sol%5C%22%3B%5Cnimport%20%7BIRankifyInstance%7D%20from%20%5C%22..%2Finterfaces%2FIRankifyInstance.sol%5C%22%3B%5Cn%5Cnimport%20%7BIERC1155Receiver%7D%20from%20%5C%22..%2Finterfaces%2FIERC1155Receiver.sol%5C%22%3B%5Cnimport%20%7BIERC721Receiver%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC721%2FIERC721Receiver.sol%5C%22%3B%5Cnimport%20%5C%22..%2Fabstracts%2FDiamondReentrancyGuard.sol%5C%22%3B%5Cnimport%20%7BLibRankify%7D%20from%20%5C%22..%2Flibraries%2FLibRankify.sol%5C%22%3B%5Cnimport%20%7BLibCoinVending%7D%20from%20%5C%22..%2Flibraries%2FLibCoinVending.sol%5C%22%3B%5Cnimport%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2FStrings.sol%5C%22%3B%5Cnimport%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Fcryptography%2FSignatureChecker.sol%5C%22%3B%5Cnimport%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Fcryptography%2FECDSA.sol%5C%22%3B%5Cnimport%20%5C%22..%2Fabstracts%2Fdraft-EIP712Diamond.sol%5C%22%3B%5Cnimport%20%5C%22hardhat%2Fconsole.sol%5C%22%3B%5Cnimport%20%7BIErrors%7D%20from%20%5C%22..%2Finterfaces%2FIErrors.sol%5C%22%3B%5Cnimport%20%7BIRankToken%7D%20from%20%5C%22..%2Finterfaces%2FIRankToken.sol%5C%22%3B%5Cnimport%20%7BDistributableGovernanceERC20%7D%20from%20%5C%22..%2Ftokens%2FDistributableGovernanceERC20.sol%5C%22%3B%5Cnimport%20%7BMath%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Fmath%2FMath.sol%5C%22%3B%5Cn%2F%2A%2A%5Cn%20%2A%20%40title%20RankifyInstanceMainFacet%5Cn%20%2A%20%40notice%20Main%20facet%20for%20the%20Rankify%20protocol%20that%20handles%20game%20creation%20and%20management%5Cn%20%2A%20%40dev%20Implements%20core%20game%20functionality%2C%20ERC%20token%20receivers%2C%20and%20reentrancy%20protection%5Cn%20%2A%20%40author%20Peeramid%20Labs%2C%202024%5Cn%20%2A%2F%5Cncontract%20RankifyInstanceMainFacet%20is%5Cn%20%20%20%20IRankifyInstance%2C%5Cn%20%20%20%20IERC1155Receiver%2C%5Cn%20%20%20%20DiamondReentrancyGuard%2C%5Cn%20%20%20%20IERC721Receiver%2C%5Cn%20%20%20%20EIP712%2C%5Cn%20%20%20%20IErrors%5Cn%7B%5Cn%20%20%20%20using%20LibTBG%20for%20LibTBG.Instance%3B%5Cn%20%20%20%20using%20LibTBG%20for%20uint256%3B%5Cn%20%20%20%20using%20Math%20for%20uint256%3B%5Cn%20%20%20%20using%20LibTBG%20for%20LibTBG.Settings%3B%5Cn%20%20%20%20using%20LibRankify%20for%20uint256%3B%5Cn%5Cn%20%20%20%20%2F%2F%20Event%20for%20when%20a%20voting%20stage%20ends%20and%20scores%20are%20calculated%5Cn%20%20%20%20event%20VotingStageEnded%28uint256%20indexed%20gameId%2C%20uint256%20indexed%20roundNumber%2C%20address%5B%5D%20players%2C%20uint256%5B%5D%20scores%29%3B%5Cn%20%20%20%20%2F%2F%20Event%20for%20when%20a%20proposing%20stage%20ends%20%28this%20might%20be%20better%20in%20GameMastersFacet%20if%20emitted%20there%29%5Cn%20%20%20%20%2F%2F%20event%20ProposingStageEnded%28uint256%20indexed%20gameId%2C%20uint256%20indexed%20roundNumber%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Internal%20function%20to%20create%20a%20new%20game%20with%20the%20specified%20parameters%5Cn%20%20%20%20%20%2A%20%40param%20params%20Struct%20containing%20all%20necessary%20parameters%20for%20game%20creation%5Cn%20%20%20%20%20%2A%20%40notice%20This%20function%20handles%20the%20core%20game%20creation%20logic%2C%20including%3A%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20%20%20%20-%20Setting%20up%20the%20game%20state%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20%20%20%20-%20Configuring%20the%20coin%20vending%20system%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20%20%20%20-%20Emitting%20the%20game%20creation%20event%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20createGame%28%5Cn%20%20%20%20%20%20%20%20LibRankify.NewGameParams%20memory%20params%2C%5Cn%20%20%20%20%20%20%20%20LibCoinVending.ConfigPosition%20memory%20requirements%5Cn%20%20%20%20%29%20private%20nonReentrant%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2FTODO%3A%20add%20this%20back%20in%20start%20%20game%20to%20verify%20commitment%20from%20game%20master%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%20bytes32%20digest%20%3D%20_hashTypedDataV4%28%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20keccak256%28%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20abi.encode%28%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20keccak256%28%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22AttestGameCreation%28uint256%20gameId%2Cuint256%20commitment%29%5C%22%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%29%2C%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20params.gameId%2C%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20params.gmCommitment%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%29%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%29%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20LibRankify.newGame%28params%29%3B%5Cn%20%20%20%20%20%20%20%20LibCoinVending.configure%28bytes32%28params.gameId%29%2C%20requirements%29%3B%5Cn%20%20%20%20%20%20%20%20emit%20gameCreated%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20params.gameId%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20params.gameMaster%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20msg.sender%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20params.gameRank%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20params.proposingPhaseDuration%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20params.votePhaseDuration%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20return%20params.gameId%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20External%20function%20to%20create%20a%20new%20game%5Cn%20%20%20%20%20%2A%20%40param%20params%20Input%20parameters%20for%20creating%20a%20new%20game%5Cn%20%20%20%20%20%2A%20%40notice%20This%20function%3A%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20%20%20%20-%20Validates%20the%20contract%20is%20initialized%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20%20%20%20-%20Processes%20input%20parameters%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20%20%20%20-%20Creates%20a%20new%20game%20with%20specified%20settings%5Cn%20%20%20%20%20%2A%20%40custom%3Asecurity%20inherits%20nonReentrant%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20createGame%28IRankifyInstance.NewGameParamsInput%20memory%20params%29%20public%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20LibRankify.enforceIsInitialized%28%29%3B%5Cn%20%20%20%20%20%20%20%20LibRankify.InstanceState%20storage%20settings%20%3D%20LibRankify.instanceState%28%29%3B%5Cn%20%20%20%20%20%20%20%20LibRankify.NewGameParams%20memory%20newGameParams%20%3D%20LibRankify.NewGameParams%28%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20gameId%3A%20settings.numGames%20%2B%201%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20gameRank%3A%20params.gameRank%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20creator%3A%20msg.sender%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20minPlayerCnt%3A%20params.minPlayerCnt%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20maxPlayerCnt%3A%20params.maxPlayerCnt%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20gameMaster%3A%20params.gameMaster%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20nTurns%3A%20params.nTurns%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20voteCredits%3A%20params.voteCredits%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20minGameTime%3A%20params.minGameTime%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20timePerTurn%3A%20params.timePerTurn%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20timeToJoin%3A%20params.timeToJoin%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20metadata%3A%20params.metadata%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20votePhaseDuration%3A%20params.votePhaseDuration%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20proposingPhaseDuration%3A%20params.proposingPhaseDuration%5Cn%20%20%20%20%20%20%20%20%7D%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20LibCoinVending.ConfigPosition%20memory%20emptyConfig%3B%5Cn%20%20%20%20%20%20%20%20return%20createGame%28newGameParams%2C%20emptyConfig%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Creates%20a%20new%20game%20and%20opens%20registration%20for%20it.%5Cn%20%20%20%20%20%2A%20%40param%20params%20The%20parameters%20for%20the%20new%20game.%5Cn%20%20%20%20%20%2A%20%40param%20requirements%20The%20requirements%20for%20the%20game.%5Cn%20%20%20%20%20%2A%20%40custom%3Asecurity%20nonReentrant%20is%20inherited%20from%20createGame%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20createAndOpenGame%28%5Cn%20%20%20%20%20%20%20%20IRankifyInstance.NewGameParamsInput%20memory%20params%2C%5Cn%20%20%20%20%20%20%20%20LibCoinVending.ConfigPosition%20memory%20requirements%5Cn%20%20%20%20%29%20public%20%7B%5Cn%20%20%20%20%20%20%20%20LibRankify.enforceIsInitialized%28%29%3B%5Cn%20%20%20%20%20%20%20%20LibRankify.InstanceState%20storage%20settings%20%3D%20LibRankify.instanceState%28%29%3B%5Cn%20%20%20%20%20%20%20%20LibRankify.NewGameParams%20memory%20newGameParams%20%3D%20LibRankify.NewGameParams%28%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20gameId%3A%20settings.numGames%20%2B%201%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20gameRank%3A%20params.gameRank%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20creator%3A%20msg.sender%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20minPlayerCnt%3A%20params.minPlayerCnt%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20maxPlayerCnt%3A%20params.maxPlayerCnt%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20gameMaster%3A%20params.gameMaster%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20nTurns%3A%20params.nTurns%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20voteCredits%3A%20params.voteCredits%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20minGameTime%3A%20params.minGameTime%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20timePerTurn%3A%20params.timePerTurn%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20timeToJoin%3A%20params.timeToJoin%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20metadata%3A%20params.metadata%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20votePhaseDuration%3A%20params.votePhaseDuration%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20proposingPhaseDuration%3A%20params.proposingPhaseDuration%5Cn%20%20%20%20%20%20%20%20%7D%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20uint256%20gameId%20%3D%20createGame%28newGameParams%2C%20requirements%29%3B%5Cn%20%20%20%20%20%20%20%20gameId.openRegistration%28%29%3B%5Cn%20%20%20%20%20%20%20%20emit%20RequirementsConfigured%28gameId%2C%20requirements%29%3B%5Cn%20%20%20%20%20%20%20%20emit%20RegistrationOpen%28gameId%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Sets%20the%20join%20requirements%20for%20a%20specific%20game.%5Cn%20%20%20%20%20%2A%20Only%20the%20game%20creator%20can%20call%20this%20function.%5Cn%20%20%20%20%20%2A%20The%20game%20must%20be%20in%20the%20pre-registration%20stage.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%20%40param%20config%20The%20configuration%20position%20for%20the%20join%20requirements.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20setJoinRequirements%28uint256%20gameId%2C%20LibCoinVending.ConfigPosition%20memory%20config%29%20public%20nonReentrant%20%7B%5Cn%20%20%20%20%20%20%20%20gameId.enforceIsGameCreator%28msg.sender%29%3B%5Cn%20%20%20%20%20%20%20%20gameId.enforceIsPreRegistrationStage%28%29%3B%5Cn%20%20%20%20%20%20%20%20LibCoinVending.configure%28bytes32%28gameId%29%2C%20config%29%3B%5Cn%20%20%20%20%20%20%20%20emit%20IRankifyInstance.RequirementsConfigured%28gameId%2C%20config%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Handles%20a%20player%20quitting%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60player%60%20is%20the%20address%20of%20the%20player.%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%20%40param%20player%20The%20address%20of%20the%20player.%5Cn%20%20%20%20%20%2A%20%40notice%20This%20function%3A%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20%20%20%20-%20Refunds%20the%20coins%20for%20%60player%60%20in%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20%20%20%20-%20Emits%20a%20_PlayerLeft_%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20onPlayerQuit%28uint256%20gameId%2C%20address%20player%29%20private%20%7B%5Cn%20%20%20%20%20%20%20%20LibCoinVending.refund%28bytes32%28gameId%29%2C%20player%29%3B%5Cn%20%20%20%20%20%20%20%20emit%20PlayerLeft%28gameId%2C%20player%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Cancels%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%20%40notice%20This%20function%3A%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20%20%20%20-%20Calls%20the%20%60enforceIsGameCreator%60%20function%20with%20%60msg.sender%60.%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20%20%20%20-%20Cancels%20the%20game.%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20%20%20%20-%20Emits%20a%20_GameClosed_%20event.%5Cn%20%20%20%20%20%2A%20%40custom%3Asecurity%20nonReentrant%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20cancelGame%28uint256%20gameId%29%20public%20nonReentrant%20%7B%5Cn%20%20%20%20%20%20%20%20gameId.enforceIsGameCreator%28msg.sender%29%3B%5Cn%20%20%20%20%20%20%20%20gameId.cancelGame%28onPlayerQuit%29%3B%5Cn%20%20%20%20%20%20%20%20emit%20GameClosed%28gameId%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Allows%20a%20player%20to%20leave%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%20%40notice%20This%20function%3A%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20%20%20%20-%20Calls%20the%20%60quitGame%60%20function%20with%20%60msg.sender%60%2C%20%60true%60%2C%20and%20%60onPlayerQuit%60.%5Cn%20%20%20%20%20%2A%20%40custom%3Asecurity%20nonReentrant%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20leaveGame%28uint256%20gameId%29%20public%20nonReentrant%20%7B%5Cn%20%20%20%20%20%20%20%20gameId.quitGame%28msg.sender%2C%20onPlayerQuit%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Opens%20registration%20for%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%20%40notice%20This%20function%3A%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20%20%20%20-%20Calls%20the%20%60enforceIsGameCreator%60%20function%20with%20%60msg.sender%60.%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20%20%20%20-%20Calls%20the%20%60enforceIsPreRegistrationStage%60%20function.%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20%20%20%20-%20Calls%20the%20%60openRegistration%60%20function.%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20%20%20%20-%20Emits%20a%20_RegistrationOpen_%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20openRegistration%28uint256%20gameId%29%20public%20%7B%5Cn%20%20%20%20%20%20%20%20gameId.enforceGameExists%28%29%3B%5Cn%20%20%20%20%20%20%20%20gameId.enforceIsGameCreator%28msg.sender%29%3B%5Cn%20%20%20%20%20%20%20%20gameId.enforceIsPreRegistrationStage%28%29%3B%5Cn%20%20%20%20%20%20%20%20gameId.openRegistration%28%29%3B%5Cn%20%20%20%20%20%20%20%20emit%20RegistrationOpen%28gameId%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Allows%20a%20player%20to%20join%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%20%40param%20gameMasterSignature%20The%20ECDSA%20signature%20of%20the%20game%20master.%5Cn%20%20%20%20%20%2A%20%40param%20gmCommitment%20The%20gmCommitment%20to%20the%20player%20signed%20by%20the%20game%20master.%5Cn%20%20%20%20%20%2A%20%40param%20deadline%20The%20deadline%20for%20the%20player%20to%20sign%20the%20gmCommitment.%5Cn%20%20%20%20%20%2A%20%40notice%20This%20function%3A%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20%20%20%20-%20Calls%20the%20%60joinGame%60%20function%20with%20%60msg.sender%60.%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20%20%20%20-%20Calls%20the%20%60fund%60%20function%20with%20%60bytes32%28gameId%29%60.%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20%20%20%20-%20Emits%20a%20_PlayerJoined_%20event.%5Cn%20%20%20%20%20%2A%20%40custom%3Asecurity%20nonReentrant%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20joinGame%28%5Cn%20%20%20%20%20%20%20%20uint256%20gameId%2C%5Cn%20%20%20%20%20%20%20%20bytes%20memory%20gameMasterSignature%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20gmCommitment%2C%5Cn%20%20%20%20%20%20%20%20uint256%20deadline%2C%5Cn%20%20%20%20%20%20%20%20string%20memory%20voterPubKey%5Cn%20%20%20%20%29%20public%20payable%20nonReentrant%20%7B%5Cn%20%20%20%20%20%20%20%20require%28block.timestamp%20%3C%20deadline%2C%20%5C%22Signature%20deadline%20has%20passed%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20bytes32%20digest%20%3D%20_hashTypedDataV4%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20keccak256%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20abi.encode%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20keccak256%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22AttestJoiningGame%28address%20participant%2Cuint256%20gameId%2Cbytes32%20gmCommitment%2Cuint256%20deadline%2Cbytes32%20participantPubKeyHash%29%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20msg.sender%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gameId%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gmCommitment%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20deadline%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20keccak256%28abi.encodePacked%28voterPubKey%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%29%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20gameId.joinGame%28msg.sender%2C%20gameMasterSignature%2C%20digest%29%3B%5Cn%20%20%20%20%20%20%20%20LibCoinVending.fund%28bytes32%28gameId%29%29%3B%5Cn%20%20%20%20%20%20%20%20emit%20PlayerJoined%28gameId%2C%20msg.sender%2C%20gmCommitment%2C%20voterPubKey%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Starts%20a%20game%20with%20the%20provided%20game%20ID%20early.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%20%40notice%20This%20function%3A%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20%20%20%20-%20Calls%20the%20%60enforceGameExists%60%20function.%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20%20%20%20-%20Calls%20the%20%60startGameEarly%60%20function.%5Cn%20%20%20%20%20%2A%20%20%20%20%20%20%20%20%20-%20Emits%20a%20_GameStarted_%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20startGame%28uint256%20gameId%29%20public%20nonReentrant%20%7B%5Cn%20%20%20%20%20%20%20%20gameId.enforceGameExists%28%29%3B%5Cn%20%20%20%20%20%20%20%20address%20createdBy%20%3D%20gameId.getGameState%28%29.createdBy%3B%5Cn%20%20%20%20%20%20%20%20if%20%28msg.sender%20%3D%3D%20createdBy%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20gameId.startGameEarly%28%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20gameId.startGame%28%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20emit%20GameStarted%28gameId%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20onERC1155Received%28%5Cn%20%20%20%20%20%20%20%20address%20operator%2C%5Cn%20%20%20%20%20%20%20%20address%2C%5Cn%20%20%20%20%20%20%20%20uint256%2C%5Cn%20%20%20%20%20%20%20%20uint256%2C%5Cn%20%20%20%20%20%20%20%20bytes%20calldata%5Cn%20%20%20%20%29%20public%20view%20override%20returns%20%28bytes4%29%20%7B%5Cn%20%20%20%20%20%20%20%20LibRankify.enforceIsInitialized%28%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28operator%20%3D%3D%20address%28this%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20bytes4%28keccak256%28%5C%22onERC1155Received%28address%2Caddress%2Cuint256%2Cuint256%2Cbytes%29%5C%22%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20bytes4%28%5C%22%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20onERC1155BatchReceived%28%5Cn%20%20%20%20%20%20%20%20address%20operator%2C%5Cn%20%20%20%20%20%20%20%20address%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20calldata%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20calldata%2C%5Cn%20%20%20%20%20%20%20%20bytes%20calldata%5Cn%20%20%20%20%29%20external%20view%20override%20returns%20%28bytes4%29%20%7B%5Cn%20%20%20%20%20%20%20%20LibRankify.enforceIsInitialized%28%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28operator%20%3D%3D%20address%28this%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20bytes4%28keccak256%28%5C%22onERC1155BatchReceived%28address%2Caddress%2Cuint256%5B%5D%2Cuint256%5B%5D%2Cbytes%29%5C%22%29%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20bytes4%28%5C%22%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20onERC721Received%28%5Cn%20%20%20%20%20%20%20%20address%20operator%2C%5Cn%20%20%20%20%20%20%20%20address%2C%5Cn%20%20%20%20%20%20%20%20uint256%2C%5Cn%20%20%20%20%20%20%20%20bytes%20calldata%5Cn%20%20%20%20%29%20external%20view%20override%20returns%20%28bytes4%29%20%7B%5Cn%20%20%20%20%20%20%20%20LibRankify.enforceIsInitialized%28%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28operator%20%3D%3D%20address%28this%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20IERC721Receiver.onERC721Received.selector%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20bytes4%28%5C%22%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20current%20state%20of%20the%20contract%5Cn%20%20%20%20%20%2A%20%40return%20LibRankify.InstanceState%20The%20current%20state%20of%20the%20contract%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getContractState%28%29%20public%20pure%20returns%20%28LibRankify.InstanceState%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20LibRankify.InstanceState%20memory%20state%20%3D%20LibRankify.instanceState%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20state%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20whether%20the%20game%20is%20currently%20in%20the%20proposing%20stage.%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%20%40return%20bool%20True%20if%20in%20proposing%20stage%2C%20false%20otherwise.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isProposingStage%28uint256%20gameId%29%20public%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20gameId.isProposingStage%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20whether%20the%20game%20is%20currently%20in%20the%20voting%20stage.%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%20%40return%20bool%20True%20if%20in%20voting%20stage%2C%20false%20otherwise.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isVotingStage%28uint256%20gameId%29%20public%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20gameId.isVotingStage%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Checks%20if%20the%20current%20proposing%20stage%20can%20end%20for%20the%20game%20with%20the%20specified%20ID.%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%20%40return%20bool%20Whether%20the%20proposing%20stage%20can%20end.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20canEndProposingStage%28uint256%20gameId%29%20public%20view%20returns%20%28bool%2C%20ProposingEndStatus%29%20%7B%5Cn%20%20%20%20%20%20%20%20ProposingEndStatus%20status%20%3D%20LibRankify.canEndProposing%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20return%20%28status%20%3D%3D%20ProposingEndStatus.Success%2C%20status%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Checks%20if%20the%20current%20voting%20stage%20can%20end%20for%20the%20game%20with%20the%20specified%20ID.%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%20%40return%20bool%20Whether%20the%20voting%20stage%20can%20end.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20canEndVotingStage%28uint256%20gameId%29%20public%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20LibRankify.canEndVoting%28gameId%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20current%20turn%20of%20the%20game%20with%20the%20specified%20ID%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game%5Cn%20%20%20%20%20%2A%20%40return%20uint256%20The%20current%20turn%20of%20the%20game%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getTurn%28uint256%20gameId%29%20public%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20gameId.getTurn%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20game%20master%20of%20the%20game%20with%20the%20specified%20ID%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game%5Cn%20%20%20%20%20%2A%20%40return%20address%20The%20game%20master%20of%20the%20game%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getGM%28uint256%20gameId%29%20public%20view%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20gameId.getGM%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20scores%20of%20the%20game%20with%20the%20specified%20ID%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game%5Cn%20%20%20%20%20%2A%20%40return%20address%5B%5D%20The%20players%20in%20the%20game%5Cn%20%20%20%20%20%2A%20%40return%20uint256%5B%5D%20The%20scores%20of%20the%20players%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getScores%28uint256%20gameId%29%20public%20view%20returns%20%28address%5B%5D%20memory%2C%20uint256%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20gameId.getScores%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20whether%20the%20game%20with%20the%20specified%20ID%20is%20in%20overtime%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game%5Cn%20%20%20%20%20%2A%20%40return%20bool%20Whether%20the%20game%20is%20in%20overtime%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isOvertime%28uint256%20gameId%29%20public%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20gameId.isOvertime%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20whether%20the%20game%20with%20the%20specified%20ID%20is%20over%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game%5Cn%20%20%20%20%20%2A%20%40return%20bool%20Whether%20the%20game%20is%20over%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isGameOver%28uint256%20gameId%29%20public%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20gameId.isGameOver%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20game%20ID%20of%20the%20game%20that%20the%20specified%20player%20is%20in%5Cn%20%20%20%20%20%2A%20%40param%20player%20The%20address%20of%20the%20player%5Cn%20%20%20%20%20%2A%20%40return%20uint256%20The%20ID%20of%20the%20game%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getPlayersGames%28address%20player%29%20public%20view%20returns%20%28uint256%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20LibTBG.getPlayersGames%28player%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20whether%20the%20specified%20player%20is%20in%20the%20specified%20game%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game%5Cn%20%20%20%20%20%2A%20%40param%20player%20The%20address%20of%20the%20player%5Cn%20%20%20%20%20%2A%20%40return%20bool%20Whether%20the%20player%20is%20in%20the%20game%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isPlayerInGame%28uint256%20gameId%2C%20address%20player%29%20public%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20gameId.isPlayerInGame%28player%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20whether%20the%20game%20with%20the%20specified%20ID%20is%20in%20the%20last%20turn%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game%5Cn%20%20%20%20%20%2A%20%40return%20bool%20Whether%20the%20game%20is%20in%20the%20last%20turn%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isLastTurn%28uint256%20gameId%29%20public%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20gameId.isLastTurn%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20whether%20registration%20is%20open%20for%20the%20game%20with%20the%20specified%20ID%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game%5Cn%20%20%20%20%20%2A%20%40return%20bool%20Whether%20registration%20is%20open%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isRegistrationOpen%28uint256%20gameId%29%20public%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20gameId.isRegistrationOpen%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20creator%20of%20the%20game%20with%20the%20specified%20ID%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game%5Cn%20%20%20%20%20%2A%20%40return%20address%20The%20creator%20of%20the%20game%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20gameCreator%28uint256%20gameId%29%20public%20view%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20gameId.getGameState%28%29.createdBy%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20rank%20of%20the%20game%20with%20the%20specified%20ID%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game%5Cn%20%20%20%20%20%2A%20%40return%20uint256%20The%20rank%20of%20the%20game%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getGameRank%28uint256%20gameId%29%20public%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20gameId.getGameState%28%29.rank%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Estimates%20the%20price%20of%20a%20game%20with%20the%20specified%20minimum%20game%20time%5Cn%20%20%20%20%20%2A%20%40param%20minGameTime%20The%20minimum%20game%20time%5Cn%20%20%20%20%20%2A%20%40return%20uint256%20The%20estimated%20price%20of%20the%20game%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20estimateGamePrice%28uint128%20minGameTime%29%20public%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20LibRankify.InstanceState%20memory%20state%20%3D%20LibRankify.instanceState%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20LibRankify.getGamePrice%28minGameTime%2C%20state.commonParams%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20players%20in%20the%20game%20with%20the%20specified%20ID%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game%5Cn%20%20%20%20%20%2A%20%40return%20address%5B%5D%20The%20players%20in%20the%20game%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getPlayers%28uint256%20gameId%29%20public%20view%20returns%20%28address%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20gameId.getPlayers%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20whether%20the%20game%20with%20the%20specified%20ID%20can%20be%20started%20early%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game%5Cn%20%20%20%20%20%2A%20%40return%20bool%20Whether%20the%20game%20can%20be%20started%20early%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20canStartGame%28uint256%20gameId%29%20public%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20gameId.canStartByFull%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20whether%20the%20player%20has%20completed%20their%20turn%20in%20the%20game%20with%20the%20specified%20ID%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game%5Cn%20%20%20%20%20%2A%20%40param%20player%20The%20address%20of%20the%20player%5Cn%20%20%20%20%20%2A%20%40return%20bool%20Whether%20the%20player%20has%20completed%20their%20turn%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isPlayerTurnComplete%28uint256%20gameId%2C%20address%20player%29%20public%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20gameId.isPlayerTurnComplete%28player%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20voted%20array%20for%20the%20game%20with%20the%20specified%20ID%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game%5Cn%20%20%20%20%20%2A%20%40return%20bool%5B%5D%20The%20voted%20array%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getPlayerVotedArray%28uint256%20gameId%29%20public%20view%20returns%20%28bool%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20LibRankify.GameState%20storage%20game%20%3D%20gameId.getGameState%28%29%3B%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20memory%20players%20%3D%20gameId.getPlayers%28%29%3B%5Cn%20%20%20%20%20%20%20%20bool%5B%5D%20memory%20playerVoted%20%3D%20new%20bool%5B%5D%28players.length%29%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20players.length%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20playerVoted%5Bi%5D%20%3D%20game.playerVoted%5Bplayers%5Bi%5D%5D%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20playerVoted%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20players%20who%20have%20moved%20in%20the%20game%20with%20the%20specified%20ID%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game%5Cn%20%20%20%20%20%2A%20%40return%20bool%5B%5D%20The%20players%20who%20have%20moved%5Cn%20%20%20%20%20%2A%20%40return%20uint256%20The%20number%20of%20players%20who%20have%20moved%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getPlayersMoved%28uint256%20gameId%29%20public%20view%20returns%20%28bool%5B%5D%20memory%2C%20uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20LibTBG.State%20storage%20game%20%3D%20gameId._getState%28%29%3B%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20memory%20players%20%3D%20gameId.getPlayers%28%29%3B%5Cn%20%20%20%20%20%20%20%20bool%5B%5D%20memory%20playersMoved%20%3D%20new%20bool%5B%5D%28players.length%29%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20players.length%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20playersMoved%5Bi%5D%20%3D%20game.madeMove%5Bplayers%5Bi%5D%5D%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20%28playersMoved%2C%20game.numPlayersMadeMove%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20isActive%28uint256%20gameId%2C%20address%20player%29%20public%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20gameId.isActive%28player%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20madeMove%28uint256%20gameId%2C%20address%20player%29%20public%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20LibTBG.State%20storage%20turnState%20%3D%20LibTBG._getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20return%20turnState.madeMove%5Bplayer%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Exits%20a%20rank%20token%20from%20the%20game.%5Cn%20%20%20%20%20%2A%20%40param%20rankId%20The%20ID%20of%20the%20rank%20token.%5Cn%20%20%20%20%20%2A%20%40param%20amount%20The%20amount%20of%20rank%20tokens%20to%20exit.%5Cn%20%20%20%20%20%2A%20%40notice%20this%20function%20will%20overflow%20at%20high%20ranks%2C%20we%20have%20temporary%20hard%20limit%20set%20on%20rank%2010%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20exitRankToken%28uint256%20rankId%2C%20uint256%20amount%29%20external%20nonReentrant%20%7B%5Cn%20%20%20%20%20%20%20%20require%28amount%20%21%3D%200%2C%20%5C%22cannot%20specify%20zero%20exit%20amount%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20LibRankify.InstanceState%20storage%20state%20%3D%20LibRankify.instanceState%28%29%3B%5Cn%20%20%20%20%20%20%20%20LibRankify.CommonParams%20storage%20commons%20%3D%20state.commonParams%3B%5Cn%20%20%20%20%20%20%20%20IRankToken%20rankContract%20%3D%20IRankToken%28commons.rankTokenAddress%29%3B%5Cn%20%20%20%20%20%20%20%20rankContract.burn%28msg.sender%2C%20rankId%2C%20amount%29%3B%5Cn%20%20%20%20%20%20%20%20DistributableGovernanceERC20%20tokenContract%20%3D%20DistributableGovernanceERC20%28commons.derivedToken%29%3B%5Cn%20%20%20%20%20%20%20%20uint256%20minParticipants%20%3D%20commons.minimumParticipantsInCircle%3B%5Cn%5Cn%20%20%20%20%20%20%20%20uint256%20_toMint%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20uint256%20linearFromRank%20%3D%2010%3B%5Cn%20%20%20%20%20%20%20%20if%20%28rankId%20%3C%20linearFromRank%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_toMint%20%3D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20commons.principalCost%20%2A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20minParticipants%20%2A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20amount.mulDiv%28%28minParticipants%20%2A%2A%20rankId%29%20-%201%2C%20minParticipants%20-%201%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_toMint%20%3D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20commons.principalCost%20%2A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20minParticipants%20%2A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20amount.mulDiv%28%28minParticipants%20%2A%2A%20linearFromRank%29%20-%201%2C%20minParticipants%20-%201%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_toMint%20%2B%3D%20linearFromRank%20-%20rankId%20%2A%20_toMint%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20tokenContract.mint%28msg.sender%2C%20_toMint%29%3B%5Cn%20%20%20%20%20%20%20%20emit%20RankTokenExited%28msg.sender%2C%20rankId%2C%20amount%2C%20_toMint%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20winner%20of%20the%20game%20with%20the%20specified%20ID%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game%5Cn%20%20%20%20%20%2A%20%40return%20address%20The%20winner%20of%20the%20game%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20gameWinner%28uint256%20gameId%29%20public%20view%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20gameId.getGameState%28%29.winner%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Ffacets%2FRankifyInstanceRequirementsFacet.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BLibTBG%7D%20from%20%5C%22..%2Flibraries%2FLibTurnBasedGame.sol%5C%22%3B%5Cnimport%20%7BLibCoinVending%7D%20from%20%5C%22..%2Flibraries%2FLibCoinVending.sol%5C%22%3B%5Cnimport%20%7BLibRankify%7D%20from%20%5C%22..%2Flibraries%2FLibRankify.sol%5C%22%3B%5Cnimport%20%7BIRankifyInstance%7D%20from%20%5C%22..%2Finterfaces%2FIRankifyInstance.sol%5C%22%3B%5Cnimport%20%7BReentrancyGuard%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2FReentrancyGuard.sol%5C%22%3B%5Cn%2F%2A%2A%5Cn%20%2A%20%40title%20RankifyInstanceRequirementsFacet%5Cn%20%2A%20%40notice%20Facet%20handling%20game%20requirements%20and%20conditions%20for%20Rankify%20instances%5Cn%20%2A%20%40dev%20Implements%20functionality%20for%20setting%20and%20checking%20join%20requirements%20for%20games%2C%5Cn%20%2A%20%20%20%20%20%20utilizing%20the%20LibCoinVending%20library%20for%20configuration%20management%5Cn%20%2A%20%40author%20Peeramid%20Labs%2C%202024%5Cn%20%2A%2F%5Cncontract%20RankifyInstanceRequirementsFacet%20is%20ReentrancyGuard%20%7B%5Cn%20%20%20%20using%20LibTBG%20for%20uint256%3B%5Cn%20%20%20%20using%20LibRankify%20for%20uint256%3B%5Cn%20%20%20%20using%20LibTBG%20for%20LibTBG.State%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Retrieves%20the%20join%20requirements%20for%20a%20specific%20game.%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%20%40return%20The%20join%20requirements%20as%20a%20%60LibCoinVending.ConditionReturn%60%20struct.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getJoinRequirements%28uint256%20gameId%29%20public%20view%20returns%20%28LibCoinVending.ConditionReturn%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20LibCoinVending.getPosition%28bytes32%28gameId%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Retrieves%20the%20join%20requirements%20for%20a%20specific%20token%20in%20a%20game.%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%20%40param%20contractAddress%20The%20address%20of%20the%20contract.%5Cn%20%20%20%20%20%2A%20%40param%20contractId%20The%20ID%20of%20the%20contract.%5Cn%20%20%20%20%20%2A%20%40param%20contractType%20The%20type%20of%20the%20contract.%5Cn%20%20%20%20%20%2A%20%40return%20The%20join%20requirements%20for%20the%20specified%20token.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getJoinRequirementsByToken%28%5Cn%20%20%20%20%20%20%20%20uint256%20gameId%2C%5Cn%20%20%20%20%20%20%20%20address%20contractAddress%2C%5Cn%20%20%20%20%20%20%20%20uint256%20contractId%2C%5Cn%20%20%20%20%20%20%20%20LibCoinVending.ContractTypes%20contractType%5Cn%20%20%20%20%29%20public%20view%20returns%20%28LibCoinVending.ContractCondition%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20LibCoinVending.getPositionByContract%28bytes32%28gameId%29%2C%20contractAddress%2C%20contractId%2C%20contractType%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20getCommonParams%28%29%20public%20view%20returns%20%28LibRankify.CommonParams%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20LibRankify.instanceState%28%29.commonParams%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20getGameState%28uint256%20gameId%29%20public%20view%20returns%20%28IRankifyInstance.GameStateOutput%20memory%20state%29%20%7B%5Cn%20%20%20%20%20%20%20%20LibTBG.Instance%20storage%20tbgInstanceState%20%3D%20LibTBG._getInstance%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20LibRankify.GameState%20storage%20gameState%20%3D%20gameId.getGameState%28%29%3B%5Cn%20%20%20%20%20%20%20%20state%20%3D%20IRankifyInstance.GameStateOutput%28%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20rank%3A%20gameState.rank%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20minGameTime%3A%20gameState.minGameTime%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20createdBy%3A%20gameState.createdBy%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20numCommitments%3A%20gameState.numCommitments%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20numVotes%3A%20gameState.numVotes%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20voting%3A%20gameState.voting%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20currentTurn%3A%20tbgInstanceState.state.currentTurn%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20turnStartedAt%3A%20tbgInstanceState.state.startedAt%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20registrationOpenAt%3A%20tbgInstanceState.state.registrationOpenAt%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20hasStarted%3A%20tbgInstanceState.state.hasStarted%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20hasEnded%3A%20tbgInstanceState.state.hasEnded%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20numPlayersMadeMove%3A%20tbgInstanceState.state.numPlayersMadeMove%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20numActivePlayers%3A%20tbgInstanceState.state.numActivePlayers%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20isOvertime%3A%20tbgInstanceState.state.isOvertime%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20timePerTurn%3A%20tbgInstanceState.settings.timePerTurn%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20maxPlayerCnt%3A%20tbgInstanceState.settings.maxPlayerCnt%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20minPlayerCnt%3A%20tbgInstanceState.settings.minPlayerCnt%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20timeToJoin%3A%20tbgInstanceState.settings.timeToJoin%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20maxTurns%3A%20tbgInstanceState.settings.maxTurns%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20voteCredits%3A%20tbgInstanceState.settings.voteCredits%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20gameMaster%3A%20tbgInstanceState.settings.gameMaster%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20metadata%3A%20gameState.metadata%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20phase%3A%20tbgInstanceState.state.phase%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20proposingPhaseDuration%3A%20tbgInstanceState.settings.turnPhaseDurations%5B0%5D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20votePhaseDuration%3A%20tbgInstanceState.settings.turnPhaseDurations%5B1%5D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20phaseStartedAt%3A%20tbgInstanceState.state.phaseStartedAt%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20startedAt%3A%20tbgInstanceState.state.startedAt%5Cn%20%20%20%20%20%20%20%20%7D%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Retrieves%20the%20amount%20of%20ETH%20that%20can%20be%20pulled%20from%20the%20bank%20for%20a%20specific%20player.%5Cn%20%20%20%20%20%2A%20%40param%20player%20The%20address%20of%20the%20player.%5Cn%20%20%20%20%20%2A%20%40return%20The%20amount%20of%20ETH%20that%20can%20be%20pulled%20from%20the%20bank.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getPullableEth%28address%20player%29%20public%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20LibCoinVending.bankBalance%28player%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Pulls%20ETH%20from%20the%20bank%20for%20a%20specific%20player.%5Cn%20%20%20%20%20%2A%20%40param%20player%20The%20address%20of%20the%20player.%5Cn%20%20%20%20%20%2A%20%40param%20amount%20The%20amount%20of%20ETH%20to%20pull%20from%20the%20bank.%5Cn%20%20%20%20%20%2A%20%40notice%20This%20function%20allows%20ANYONE%20to%20pull%20ETH%20from%20the%20bank%20to%20the%20account%3B%20This%20means%20someone%20can%20pay%20tx%20gas%20for%20someone%20else%20to%20pull%20ETH%20from%20the%20bank%20to%20their%20account%3B%20It%20is%20not%20security%20vulnerability%20since%20vending%20already%20tries%20to%20release%20these%20funds%20at%20all%20times%3B%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20pullEth%28address%20player%2C%20uint256%20amount%29%20public%20nonReentrant%20%7B%5Cn%20%20%20%20%20%20%20%20LibCoinVending.withdrawFromBank%28player%2C%20amount%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Finitializers%2FRankifyInstanceInit.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%5C%5C%5Cn%2A%20Author%3A%20Nick%20Mudge%20%3Cnick%40perfectabstractions.com%3E%20%28https%3A%2F%2Ftwitter.com%2Fmudgen%29%5Cn%2A%20EIP-2535%20Diamonds%3A%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-2535%5Cn%2A%5Cn%2A%20Implementation%20of%20a%20diamond.%5Cn%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%5Cn%5Cnimport%20%7BLibDiamond%7D%20from%20%5C%22..%2Fvendor%2Fdiamond%2Flibraries%2FLibDiamond.sol%5C%22%3B%5Cnimport%20%7BIDiamondLoupe%7D%20from%20%5C%22..%2Fvendor%2Fdiamond%2Finterfaces%2FIDiamondLoupe.sol%5C%22%3B%5Cnimport%20%7BIDiamondCut%7D%20from%20%5C%22..%2Fvendor%2Fdiamond%2Finterfaces%2FIDiamondCut.sol%5C%22%3B%5Cnimport%20%7BIERC173%7D%20from%20%5C%22..%2Fvendor%2Fdiamond%2Finterfaces%2FIERC173.sol%5C%22%3B%5Cnimport%20%7BIERC165%7D%20from%20%5C%22..%2Fvendor%2Fdiamond%2Finterfaces%2FIERC165.sol%5C%22%3B%5Cnimport%20%7BLibEIP712WithStorage%7D%20from%20%5C%22..%2Flibraries%2FLibEIP712Storage.sol%5C%22%3B%5Cnimport%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Fcryptography%2FECDSA.sol%5C%22%3B%5Cnimport%20%7BIRankifyInstance%7D%20from%20%5C%22..%2Finterfaces%2FIRankifyInstance.sol%5C%22%3B%5Cnimport%20%7BIRankToken%7D%20from%20%5C%22..%2Finterfaces%2FIRankToken.sol%5C%22%3B%5Cnimport%20%7BLibTBG%7D%20from%20%5C%22..%2Flibraries%2FLibTurnBasedGame.sol%5C%22%3B%5Cnimport%20%7BLibQuadraticVoting%7D%20from%20%5C%22..%2Flibraries%2FLibQuadraticVoting.sol%5C%22%3B%5Cnimport%20%7BInitializable%7D%20from%20%5C%22%40openzeppelin%2Fcontracts-upgradeable%2Fproxy%2Futils%2FInitializable.sol%5C%22%3B%5Cnimport%20%7BLibRankify%7D%20from%20%5C%22..%2Flibraries%2FLibRankify.sol%5C%22%3B%5Cn%2F%2F%20import%20%7BIERC1155%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC1155%2FIERC1155.sol%5C%22%3B%5Cn%5Cn%2F%2F%20It%20is%20expected%20that%20this%20contract%20is%20customized%20if%20you%20want%20to%20deploy%20your%20diamond%5Cn%2F%2F%20with%20data%20from%20a%20deployment%20script.%20Use%20the%20init%20function%20to%20initialize%20state%20variables%5Cn%2F%2F%20of%20your%20diamond.%20Add%20parameters%20to%20the%20init%20function%20if%20you%20need%20to.%5Cn%5Cncontract%20RankifyInstanceInit%20is%20Initializable%20%7B%5Cn%20%20%20%20function%20_buildDomainSeparator%28%5Cn%20%20%20%20%20%20%20%20bytes32%20typeHash%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20nameHash%2C%5Cn%20%20%20%20%20%20%20%20bytes32%20versionHash%5Cn%20%20%20%20%29%20private%20view%20returns%20%28bytes32%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20keccak256%28abi.encode%28typeHash%2C%20nameHash%2C%20versionHash%2C%20block.chainid%2C%20address%28this%29%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20contractInitializer%20%7B%5Cn%20%20%20%20%20%20%20%20address%20rewardToken%3B%5Cn%20%20%20%20%20%20%20%20uint256%20principalCost%3B%5Cn%20%20%20%20%20%20%20%20uint96%20principalTimeConstant%3B%5Cn%20%20%20%20%20%20%20%20uint256%20minimumParticipantsInCircle%3B%5Cn%20%20%20%20%20%20%20%20address%20paymentToken%3B%5Cn%20%20%20%20%20%20%20%20address%20beneficiary%3B%5Cn%20%20%20%20%20%20%20%20address%20derivedToken%3B%5Cn%20%20%20%20%20%20%20%20address%20proposalIntegrityVerifier%3B%5Cn%20%20%20%20%20%20%20%20address%20poseidon5%3B%5Cn%20%20%20%20%20%20%20%20address%20poseidon6%3B%5Cn%20%20%20%20%20%20%20%20address%20poseidon2%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%20You%20can%20add%20parameters%20to%20this%20function%20in%20order%20to%20pass%20in%5Cn%20%20%20%20%2F%2F%20data%20to%20set%20your%20own%20state%20variables%5Cn%20%20%20%20function%20init%28string%20memory%20name%2C%20string%20memory%20version%2C%20contractInitializer%20memory%20initData%29%20external%20initializer%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20adding%20ERC165%20data%5Cn%20%20%20%20%20%20%20%20%2F%2F%20LibDiamond.enforceIsContractOwner%28%29%3B%5Cn%20%20%20%20%20%20%20%20LibDiamond.DiamondStorage%20storage%20ds%20%3D%20LibDiamond.diamondStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20ds.supportedInterfaces%5Btype%28IERC165%29.interfaceId%5D%20%3D%20true%3B%5Cn%20%20%20%20%20%20%20%20ds.supportedInterfaces%5Btype%28IDiamondCut%29.interfaceId%5D%20%3D%20true%3B%5Cn%20%20%20%20%20%20%20%20ds.supportedInterfaces%5Btype%28IDiamondLoupe%29.interfaceId%5D%20%3D%20true%3B%5Cn%20%20%20%20%20%20%20%20ds.supportedInterfaces%5Btype%28IERC173%29.interfaceId%5D%20%3D%20true%3B%5Cn%20%20%20%20%20%20%20%20bytes32%20hashedName%20%3D%20keccak256%28bytes%28name%29%29%3B%5Cn%20%20%20%20%20%20%20%20bytes32%20hashedVersion%20%3D%20keccak256%28bytes%28version%29%29%3B%5Cn%20%20%20%20%20%20%20%20bytes32%20typeHash%20%3D%20keccak256%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22EIP712Domain%28string%20name%2Cstring%20version%2Cuint256%20chainId%2Caddress%20verifyingContract%29%5C%22%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20LibEIP712WithStorage.LibEIP712WithStorageStorage%20storage%20ss%20%3D%20LibEIP712WithStorage.EIP712WithStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20ss._HASHED_NAME%20%3D%20hashedName%3B%5Cn%20%20%20%20%20%20%20%20ss._HASHED_VERSION%20%3D%20hashedVersion%3B%5Cn%20%20%20%20%20%20%20%20ss._CACHED_CHAIN_ID%20%3D%20block.chainid%3B%5Cn%20%20%20%20%20%20%20%20ss._CACHED_DOMAIN_SEPARATOR%20%3D%20_buildDomainSeparator%28typeHash%2C%20hashedName%2C%20hashedVersion%29%3B%5Cn%20%20%20%20%20%20%20%20ss._CACHED_THIS%20%3D%20address%28this%29%3B%5Cn%20%20%20%20%20%20%20%20ss._TYPE_HASH%20%3D%20typeHash%3B%5Cn%20%20%20%20%20%20%20%20ss._NAME%20%3D%20name%3B%5Cn%20%20%20%20%20%20%20%20ss._VERSION%20%3D%20version%3B%5Cn%5Cn%20%20%20%20%20%20%20%20LibRankify.CommonParams%20storage%20commons%20%3D%20LibRankify.instanceState%28%29.commonParams%3B%5Cn%5Cn%20%20%20%20%20%20%20%20commons.principalCost%20%3D%20initData.principalCost%3B%5Cn%20%20%20%20%20%20%20%20commons.principalTimeConstant%20%3D%20initData.principalTimeConstant%3B%5Cn%20%20%20%20%20%20%20%20commons.gamePaymentToken%20%3D%20initData.paymentToken%3B%5Cn%20%20%20%20%20%20%20%20commons.rankTokenAddress%20%3D%20initData.rewardToken%3B%5Cn%20%20%20%20%20%20%20%20commons.beneficiary%20%3D%20initData.beneficiary%3B%5Cn%20%20%20%20%20%20%20%20commons.minimumParticipantsInCircle%20%3D%20initData.minimumParticipantsInCircle%3B%5Cn%20%20%20%20%20%20%20%20commons.derivedToken%20%3D%20initData.derivedToken%3B%5Cn%20%20%20%20%20%20%20%20commons.proposalIntegrityVerifier%20%3D%20initData.proposalIntegrityVerifier%3B%5Cn%20%20%20%20%20%20%20%20commons.poseidon5%20%3D%20initData.poseidon5%3B%5Cn%20%20%20%20%20%20%20%20commons.poseidon6%20%3D%20initData.poseidon6%3B%5Cn%20%20%20%20%20%20%20%20commons.poseidon2%20%3D%20initData.poseidon2%3B%5Cn%20%20%20%20%20%20%20%20LibRankify.InstanceState%20storage%20_RInstance%20%3D%20LibRankify.instanceState%28%29%3B%5Cn%20%20%20%20%20%20%20%20require%28initData.paymentToken%20%21%3D%20address%280%29%2C%20%5C%22initializer.paymentToken%20not%20set%5C%22%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20IRankToken%20rankContract%20%3D%20IRankToken%28initData.rewardToken%29%3B%5Cn%20%20%20%20%20%20%20%20require%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20rankContract.supportsInterface%28type%28IRankToken%29.interfaceId%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22RankifyInstance-%3Einit%3A%20rank%20token%20address%20does%20not%20support%20Rank%20interface%5C%22%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20_RInstance.contractInitialized%20%3D%20true%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Finterfaces%2FIERC1155Receiver.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40title%20ERC1155%20transfer%20receiver%20interface%5Cn%20%2A%2F%5Cninterface%20IERC1155Receiver%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40notice%20validate%20receipt%20of%20ERC1155%20transfer%5Cn%20%20%20%20%20%2A%20%40param%20operator%20executor%20of%20transfer%5Cn%20%20%20%20%20%2A%20%40param%20from%20sender%20of%20tokens%5Cn%20%20%20%20%20%2A%20%40param%20id%20token%20ID%20received%5Cn%20%20%20%20%20%2A%20%40param%20value%20quantity%20of%20tokens%20received%5Cn%20%20%20%20%20%2A%20%40param%20data%20data%20payload%5Cn%20%20%20%20%20%2A%20%40return%20function%27s%20own%20selector%20if%20transfer%20is%20accepted%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20onERC1155Received%28%5Cn%20%20%20%20%20%20%20%20address%20operator%2C%5Cn%20%20%20%20%20%20%20%20address%20from%2C%5Cn%20%20%20%20%20%20%20%20uint256%20id%2C%5Cn%20%20%20%20%20%20%20%20uint256%20value%2C%5Cn%20%20%20%20%20%20%20%20bytes%20calldata%20data%5Cn%20%20%20%20%29%20external%20returns%20%28bytes4%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40notice%20validate%20receipt%20of%20ERC1155%20batch%20transfer%5Cn%20%20%20%20%20%2A%20%40param%20operator%20executor%20of%20transfer%5Cn%20%20%20%20%20%2A%20%40param%20from%20sender%20of%20tokens%5Cn%20%20%20%20%20%2A%20%40param%20ids%20token%20IDs%20received%5Cn%20%20%20%20%20%2A%20%40param%20values%20quantities%20of%20tokens%20received%5Cn%20%20%20%20%20%2A%20%40param%20data%20data%20payload%5Cn%20%20%20%20%20%2A%20%40return%20function%27s%20own%20selector%20if%20transfer%20is%20accepted%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20onERC1155BatchReceived%28%5Cn%20%20%20%20%20%20%20%20address%20operator%2C%5Cn%20%20%20%20%20%20%20%20address%20from%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20calldata%20ids%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20calldata%20values%2C%5Cn%20%20%20%20%20%20%20%20bytes%20calldata%20data%5Cn%20%20%20%20%29%20external%20returns%20%28bytes4%29%3B%5Cn%7D%5Cn%22%7D%2C%22src%2Finterfaces%2FIErrors.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.0%3B%5Cn%5Cninterface%20IErrors%20%7B%5Cn%20%20%20%20error%20invalidConfiguration%28string%20message%29%3B%5Cn%20%20%20%20error%20zeroValue%28%29%3B%5Cn%20%20%20%20error%20invalidECDSARecoverSigner%28bytes32%20digest%2C%20string%20message%29%3B%5Cn%7D%5Cn%22%7D%2C%22src%2Finterfaces%2FILockableERC1155.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BIERC1155%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Finterfaces%2FIERC1155.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40title%20ILockableERC1155%5Cn%20%2A%20%40dev%20Interface%20for%20a%20lockable%20ERC1155%20token%20contract.%5Cn%20%2A%2F%5Cninterface%20ILockableERC1155%20is%20IERC1155%20%7B%5Cn%20%20%20%20error%20insufficient%28uint256%20id%2C%20uint256%20balance%2C%20uint256%20required%29%3B%5Cn%5Cn%20%20%20%20event%20TokensLocked%28address%20indexed%20account%2C%20uint256%20indexed%20id%2C%20uint256%20value%29%3B%5Cn%5Cn%20%20%20%20event%20TokensUnlocked%28address%20indexed%20account%2C%20uint256%20indexed%20id%2C%20uint256%20value%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Locks%20a%20specified%20amount%20of%20tokens%20for%20a%20given%20account%20and%20token%20ID.%20%60account%60%20is%20the%20address%20of%20the%20account%20to%20lock%20the%20tokens%20for.%20%60id%60%20is%20the%20ID%20of%20the%20token%20to%20lock.%20%60amount%60%20is%20the%20amount%20of%20tokens%20to%20lock.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20emits%20a%20_TokensLocked_%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20lock%28address%20account%2C%20uint256%20id%2C%20uint256%20amount%29%20external%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Unlocks%20a%20specified%20amount%20of%20tokens%20for%20a%20given%20account%20and%20token%20ID.%20%60account%60%20is%20the%20address%20of%20the%20account%20to%20unlock%20the%20tokens%20for.%20%60id%60%20is%20the%20ID%20of%20the%20token%20to%20unlock.%20%60amount%60%20is%20the%20amount%20of%20tokens%20to%20unlock.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20emits%20a%20_TokensUnlocked_%20event.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20unlock%28address%20account%2C%20uint256%20id%2C%20uint256%20amount%29%20external%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20unlocked%20balance%20of%20tokens%20for%20a%20given%20account%20and%20token%20ID.%20%60account%60%20is%20the%20address%20of%20the%20account%20to%20check%20the%20unlocked%20balance%20for.%20%60id%60%20is%20the%20ID%20of%20the%20token%20to%20check%20the%20unlocked%20balance%20for.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20unlocked%20balance%20of%20tokens.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20unlockedBalanceOf%28address%20account%2C%20uint256%20id%29%20external%20view%20returns%20%28uint256%29%3B%5Cn%5Cn%20%20%20%20function%20burn%28address%20account%2C%20uint256%20id%2C%20uint256%20value%29%20external%3B%5Cn%7D%5Cn%22%7D%2C%22src%2Finterfaces%2FIRankifyInstance.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cnimport%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Fintrospection%2FERC165.sol%5C%22%3B%5Cnimport%20%7BLibTBG%7D%20from%20%5C%22..%2Flibraries%2FLibTurnBasedGame.sol%5C%22%3B%5Cnimport%20%7BLibQuadraticVoting%7D%20from%20%5C%22..%2Flibraries%2FLibQuadraticVoting.sol%5C%22%3B%5Cnimport%20%7BLibCoinVending%7D%20from%20%5C%22..%2Flibraries%2FLibCoinVending.sol%5C%22%3B%5Cn%5Cninterface%20IRankifyInstance%20%7B%5Cn%20%20%20%20enum%20ProposingEndStatus%20%7B%5Cn%20%20%20%20%20%20%20%20Success%2C%5Cn%20%20%20%20%20%20%20%20MinProposalsNotMetAndNotStale%2C%5Cn%20%20%20%20%20%20%20%20GameIsStaleAndCanEnd%2C%20%2F%2F%20Explicit%20status%20for%20when%20min%20proposals%20not%20met%20but%20game%20is%20stale%5Cn%20%20%20%20%20%20%20%20PhaseConditionsNotMet%2C%20%2F%2F%20Basic%20LibTBG%20conditions%20not%20met%5Cn%20%20%20%20%20%20%20%20NotProposingStage%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20error%20NoDivisionReminderAllowed%28uint256%20a%2C%20uint256%20b%29%3B%5Cn%20%20%20%20error%20invalidTurnCount%28uint256%20nTurns%29%3B%5Cn%20%20%20%20error%20RankNotSpecified%28%29%3B%5Cn%20%20%20%20error%20ErrorProposingStageEndFailed%28uint256%20gameId%2C%20ProposingEndStatus%20status%29%3B%5Cn%20%20%20%20error%20ErrorCannotForceEndGame%28uint256%20gameId%29%3B%5Cn%5Cn%20%20%20%20event%20RegistrationOpen%28uint256%20indexed%20gameId%29%3B%5Cn%20%20%20%20event%20PlayerJoined%28uint256%20indexed%20gameId%2C%20address%20indexed%20participant%2C%20bytes32%20gmCommitment%2C%20string%20voterPubKey%29%3B%5Cn%20%20%20%20event%20GameStarted%28uint256%20indexed%20gameId%29%3B%5Cn%20%20%20%20event%20gameCreated%28%5Cn%20%20%20%20%20%20%20%20uint256%20gameId%2C%5Cn%20%20%20%20%20%20%20%20address%20indexed%20gm%2C%5Cn%20%20%20%20%20%20%20%20address%20indexed%20creator%2C%5Cn%20%20%20%20%20%20%20%20uint256%20indexed%20rank%2C%5Cn%20%20%20%20%20%20%20%20uint256%20proposingPhaseDuration%2C%5Cn%20%20%20%20%20%20%20%20uint256%20votePhaseDuration%5Cn%20%20%20%20%29%3B%5Cn%20%20%20%20event%20GameClosed%28uint256%20indexed%20gameId%29%3B%5Cn%20%20%20%20event%20PlayerLeft%28uint256%20indexed%20gameId%2C%20address%20indexed%20player%29%3B%5Cn%20%20%20%20event%20RankTokenExited%28address%20indexed%20player%2C%20uint256%20rankId%2C%20uint256%20amount%2C%20uint256%20_toMint%29%3B%5Cn%20%20%20%20event%20RequirementsConfigured%28uint256%20indexed%20gameId%2C%20LibCoinVending.ConfigPosition%20config%29%3B%5Cn%20%20%20%20event%20StaleGameEnded%28uint256%20indexed%20gameId%2C%20address%20winner%29%3B%5Cn%5Cn%20%20%20%20struct%20NewGameParamsInput%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20gameRank%3B%5Cn%20%20%20%20%20%20%20%20uint256%20minPlayerCnt%3B%5Cn%20%20%20%20%20%20%20%20uint256%20maxPlayerCnt%3B%5Cn%20%20%20%20%20%20%20%20uint96%20nTurns%3B%5Cn%20%20%20%20%20%20%20%20uint256%20voteCredits%3B%5Cn%20%20%20%20%20%20%20%20address%20gameMaster%3B%5Cn%20%20%20%20%20%20%20%20uint128%20minGameTime%3B%5Cn%20%20%20%20%20%20%20%20uint128%20timePerTurn%3B%5Cn%20%20%20%20%20%20%20%20uint128%20timeToJoin%3B%5Cn%20%20%20%20%20%20%20%20string%20metadata%3B%5Cn%20%20%20%20%20%20%20%20uint256%20votePhaseDuration%3B%5Cn%20%20%20%20%20%20%20%20uint256%20proposingPhaseDuration%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20GameStateOutput%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20rank%3B%5Cn%20%20%20%20%20%20%20%20uint256%20minGameTime%3B%5Cn%20%20%20%20%20%20%20%20address%20createdBy%3B%5Cn%20%20%20%20%20%20%20%20uint256%20numCommitments%3B%5Cn%20%20%20%20%20%20%20%20uint256%20numVotes%3B%5Cn%20%20%20%20%20%20%20%20LibQuadraticVoting.qVotingStruct%20voting%3B%5Cn%20%20%20%20%20%20%20%20uint256%20currentTurn%3B%5Cn%20%20%20%20%20%20%20%20uint256%20turnStartedAt%3B%5Cn%20%20%20%20%20%20%20%20uint256%20registrationOpenAt%3B%5Cn%20%20%20%20%20%20%20%20bool%20hasStarted%3B%5Cn%20%20%20%20%20%20%20%20bool%20hasEnded%3B%5Cn%20%20%20%20%20%20%20%20uint256%20numPlayersMadeMove%3B%5Cn%20%20%20%20%20%20%20%20uint256%20numActivePlayers%3B%5Cn%20%20%20%20%20%20%20%20bool%20isOvertime%3B%5Cn%20%20%20%20%20%20%20%20uint256%20timePerTurn%3B%5Cn%20%20%20%20%20%20%20%20uint256%20maxPlayerCnt%3B%5Cn%20%20%20%20%20%20%20%20uint256%20minPlayerCnt%3B%5Cn%20%20%20%20%20%20%20%20uint256%20timeToJoin%3B%5Cn%20%20%20%20%20%20%20%20uint256%20maxTurns%3B%5Cn%20%20%20%20%20%20%20%20uint256%20voteCredits%3B%5Cn%20%20%20%20%20%20%20%20address%20gameMaster%3B%5Cn%20%20%20%20%20%20%20%20string%20metadata%3B%5Cn%20%20%20%20%20%20%20%20uint256%20phase%3B%5Cn%20%20%20%20%20%20%20%20uint256%20votePhaseDuration%3B%5Cn%20%20%20%20%20%20%20%20uint256%20proposingPhaseDuration%3B%5Cn%20%20%20%20%20%20%20%20uint256%20phaseStartedAt%3B%5Cn%20%20%20%20%20%20%20%20uint256%20startedAt%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Finterfaces%2FIRankToken.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BILockableERC1155%7D%20from%20%5C%22.%2FILockableERC1155.sol%5C%22%3B%5Cn%5Cninterface%20IRankToken%20is%20ILockableERC1155%20%7B%5Cn%20%20%20%20event%20RankingInstanceUpdated%28address%20indexed%20newRankingInstance%29%3B%5Cn%5Cn%20%20%20%20%2F%2F%20event%20LevelUp%28address%20indexed%20account%2C%20uint256%20id%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Mints%20a%20specified%20amount%20of%20tokens%20to%20an%20account.%20%60to%60%20is%20the%20address%20of%20the%20account%20to%20mint%20the%20tokens%20to.%20%60amount%60%20is%20the%20amount%20of%20tokens%20to%20mint.%20%60poolId%60%20is%20the%20ID%20of%20the%20pool.%20%60data%60%20is%20the%20additional%20data.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20mint%28address%20to%2C%20uint256%20amount%2C%20uint256%20poolId%2C%20bytes%20memory%20data%29%20external%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Mints%20specified%20amounts%20of%20tokens%20to%20an%20account.%20%60to%60%20is%20the%20address%20of%20the%20account%20to%20mint%20the%20tokens%20to.%20%60ids%60%20is%20the%20array%20of%20IDs%20of%20the%20tokens%20to%20mint.%20%60amounts%60%20is%20the%20array%20of%20amounts%20of%20tokens%20to%20mint.%20%60data%60%20is%20the%20additional%20data.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20batchMint%28address%20to%2C%20uint256%5B%5D%20memory%20ids%2C%20uint256%5B%5D%20memory%20amounts%2C%20bytes%20memory%20data%29%20external%3B%5Cn%5Cn%20%20%20%20%2F%2F%20%2F%2A%2A%5Cn%20%20%20%20%2F%2F%20%20%2A%20%40dev%20Updates%20the%20ranking%20instance.%20%60newRankingInstance%60%20is%20the%20address%20of%20the%20new%20ranking%20instance.%5Cn%20%20%20%20%2F%2F%20%20%2A%5Cn%20%20%20%20%2F%2F%20%20%2A%20emits%20a%20_RankingInstanceUpdated_%20event.%5Cn%20%20%20%20%2F%2F%20%20%2A%2F%5Cn%20%20%20%20%2F%2F%20function%20updateRankingInstance%28address%20newRankingInstance%29%20external%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Gets%20the%20ranking%20instance%20which%20can%20emit%20new%20rank%20updates%20and%20mint%20rank%20tokens.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20address%20of%20the%20ranking%20instance.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20%2F%2F%20function%20getRankingInstance%28%29%20external%20view%20returns%20%28address%29%3B%5Cn%5Cn%20%20%20%20%2F%2F%20%2F%2A%2A%5Cn%20%20%20%20%2F%2F%20%20%2A%20%40dev%20Finds%20the%20new%20rank%20of%20an%20account.%20%60account%60%20is%20the%20address%20of%20the%20account.%20%60oldRank%60%20is%20the%20old%20rank%20of%20the%20account.%5Cn%20%20%20%20%2F%2F%20%20%2A%20It%20checks%20the%20balance%20of%20the%20account%20and%20returns%20the%20new%20rank%20that%20can%20be%20upgraded%20to.%5Cn%20%20%20%20%2F%2F%20%20%2A%5Cn%20%20%20%20%2F%2F%20%20%2A%20Returns%3A%5Cn%20%20%20%20%2F%2F%20%20%2A%5Cn%20%20%20%20%2F%2F%20%20%2A%20-%20The%20new%20rank%20of%20the%20account.%5Cn%20%20%20%20%2F%2F%20%20%2A%2F%5Cn%20%20%20%20%2F%2F%20function%20findNewRank%28address%20account%2C%20uint256%20oldRank%29%20external%20view%20returns%20%28uint256%29%3B%5Cn%5Cn%20%20%20%20%2F%2F%20%2F%2A%2A%5Cn%20%20%20%20%2F%2F%20%20%2A%20%40dev%20Gets%20the%20rank%20of%20an%20account.%20%60account%60%20is%20the%20address%20of%20the%20account.%5Cn%20%20%20%20%2F%2F%20%20%2A%5Cn%20%20%20%20%2F%2F%20%20%2A%20Returns%3A%5Cn%20%20%20%20%2F%2F%20%20%2A%5Cn%20%20%20%20%2F%2F%20%20%2A%20-%20The%20rank%20of%20the%20account.%5Cn%20%20%20%20%2F%2F%20%20%2A%2F%5Cn%20%20%20%20%2F%2F%20function%20getAccountRank%28address%20account%29%20external%20view%20returns%20%28uint256%29%3B%5Cn%7D%5Cn%22%7D%2C%22src%2Flibraries%2FLibArray.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cnimport%20%5C%22hardhat%2Fconsole.sol%5C%22%3B%5Cn%5Cnlibrary%20LibArray%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Sorts%20the%20elements%20of%20the%20array%20in%20ascending%20order%20using%20the%20quicksort%20algorithm.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20array%20to%20be%20sorted%20must%20not%20be%20empty.%5Cn%20%20%20%20%20%2A%20-%20The%20starting%20and%20ending%20indices%20must%20be%20within%20the%20bounds%20of%20the%20array.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20array%20is%20sorted%20in%20ascending%20order.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Note%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20This%20function%20uses%20the%20in-place%20quicksort%20algorithm%2C%20which%20has%20an%20average-case%20complexity%20of%20O%28n%20log%20n%29%20and%20a%20worst-case%20complexity%20of%20O%28n%5E2%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20quickSort%28uint256%5B%5D%20memory%20arr%2C%20int256%20left%2C%20int256%20right%29%20internal%20view%20%7B%5Cn%20%20%20%20%20%20%20%20int256%20i%20%3D%20left%3B%5Cn%20%20%20%20%20%20%20%20int256%20j%20%3D%20right%3B%5Cn%20%20%20%20%20%20%20%20if%20%28i%20%3D%3D%20j%29%20return%3B%5Cn%20%20%20%20%20%20%20%20uint256%20pivot%20%3D%20arr%5Buint256%28left%20%2B%20%28right%20-%20left%29%20%2F%202%29%5D%3B%5Cn%20%20%20%20%20%20%20%20while%20%28i%20%3C%3D%20j%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20while%20%28arr%5Buint256%28i%29%5D%20%3E%20pivot%29%20%2B%2Bi%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20while%20%28pivot%20%3E%20arr%5Buint256%28j%29%5D%29%20j--%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28i%20%3C%3D%20j%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28arr%5Buint256%28i%29%5D%2C%20arr%5Buint256%28j%29%5D%29%20%3D%20%28arr%5Buint256%28j%29%5D%2C%20arr%5Buint256%28i%29%5D%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2B%2Bi%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20j--%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20%28left%20%3C%20j%29%20quickSort%28arr%2C%20left%2C%20j%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28i%20%3C%20right%29%20quickSort%28arr%2C%20i%2C%20right%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Flibraries%2FLibCoinVending.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%2F%2F%20Author%3A%20Tim%20Pechersky%20%3C%40Peersky%3E%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BIERC20%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC20%2FIERC20.sol%5C%22%3B%5Cnimport%20%7BERC1155Burnable%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC1155%2Fextensions%2FERC1155Burnable.sol%5C%22%3B%5Cnimport%20%5C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC721%2Fextensions%2FERC721Burnable.sol%5C%22%3B%5Cnimport%20%7BAddress%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2FAddress.sol%5C%22%3B%5Cn%5Cninterface%20IERC20Burnable%20is%20IERC20%20%7B%5Cn%20%20%20%20function%20burn%28uint256%20amount%29%20external%3B%5Cn%7D%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40dev%20This%20library%20is%20used%20to%20simulate%20the%20vending%20machine%20coin%20acceptor%20state%20machine%20that%3A%5Cn%20%2A%20%20-%20Supports%20large%20number%20of%20positions%3B%20Each%20represents%20requirements%20to%20access%20different%20goods%20of%20the%20virtual%20vending%20machine.%5Cn%20%2A%20%20-%20Accepts%20multiple%20assets%20of%20following%20types%3A%20Native%20%28Eth%29%2C%20ERC20%2C%20ERC721%2C%20and%20ERC1155%20tokens%20that%20can%20be%20stacked%20together.%5Cn%20%2A%20%20-%20Allows%20for%20each%20individual%20asset%20action%20promise%20can%20be%20one%20of%20following%3A%5Cn%20%2A%20%20%20%20%20%20-%20Lock%3A%20The%20asset%20is%20locked%20in%20the%20acceptor%20with%20promise%20that%20asset%20will%20be%20returned%20to%20the%20sender%20at%20release%20funds%20time.%5Cn%20%2A%20%20%20%20%20%20-%20Bet%3A%20The%20asset%20is%20locked%20in%20the%20acceptor%20with%20promise%20that%20asset%20will%20be%20awarded%20to%20beneficiary%20at%20release%20funds%20time.%5Cn%20%2A%20%20%20%20%20%20-%20Pay%3A%20The%20asset%20is%20locked%20in%20the%20acceptor%20with%20promise%20that%20asset%20will%20be%20paid%20to%20payee%20at%20release%20funds%20time.%5Cn%20%2A%20%20%20%20%20%20-%20Burn%3A%20The%20asset%20is%20locked%20in%20the%20acceptor%20with%20promise%20that%20asset%20will%20be%20destroyed%20at%20release%20funds%20time.%5Cn%20%2A%20%20-%20Maintains%20each%20position%20balance%2C%20hence%20allowing%20multiple%20participants%20to%20line%20up%20for%20the%20same%20position.%5Cn%20%2A%20%20-%20Allows%20three%20actions%3A%5Cn%20%2A%20%20%20%20%20%20-%20Fund%20position%20with%20assets%5Cn%20%2A%20%20%20%20%20%20-%20Refund%20assets%20to%20user%5Cn%20%2A%20%20%20%20%20%20-%20Consume%20assets%20and%20provide%20goods%20to%20user%5Cn%20%2A%20%20%20%20%20%20-%20Consuming%20asset%20might%20take%20a%20form%20of%5Cn%20%2A%20%20%20%20%20%20-%20Transferring%20assets%20to%20payee%5Cn%20%2A%20%20%20%20%20%20-%20Burning%20assets%5Cn%20%2A%20%20%20%20%20%20-%20Awarding%20beneficiary%20with%20assets%5Cn%20%2A%20%20%20%20%20%20-%20Returning%20locked%20assets%20back%20to%20sender%5Cn%20%2A%5Cn%20%2A%20This%20library%20DOES%20enforces%20that%20any%20position%20can%20only%20be%20refunded%20or%20processed%20only%20within%20amount%20funded%20boundaries%5Cn%20%2A%20This%20library%20DOES%20NOT%20store%20the%20addresses%20of%20senders%2C%20nor%20beneficiaries%2C%20nor%20payees.%5Cn%20%2A%20This%20is%20to%20be%20stored%20within%20implementation%20contract.%5Cn%20%2A%5Cn%20%2A%5Cn%20%2A%20%20%21%21%21%21%21%20IMPORTANT%20%21%21%21%21%21%5Cn%20%2A%20This%20library%20does%20NOT%20invocates%20reentrancy%20guards.%20It%20is%20implementation%20contract%27s%20responsibility%20to%20enforce%20reentrancy%20guards.%5Cn%20%2A%20Reentrancy%20guards%20MUST%20be%20implemented%20in%20an%20implementing%20contract.%5Cn%20%2A%5Cn%20%2A%20%20Usage%3A%5Cn%20%2A%5Cn%20%2A%20%200.%20Configure%20position%20via%20configure%28...%29%5Cn%20%2A%20%201.%20fund%20position%20with%20assets%20via%20fund%28...%29%5Cn%20%2A%20%202.%20release%20or%20refund%20assets%20via%20release%28...%29%20or%20refund%28...%29%5Cn%20%2A%20%203.%20repeat%20steps%201%20and%202%20as%20needed.%5Cn%20%2A%20%20Position%20can%20be%20reconfigured%20at%20any%20time%20when%20it%27s%20effective%20balance%20is%20zero%3A%20%60timesFunded%20-%20timesRefund%20-%20timesReleased%20%3D%200%60%5Cn%20%2A%5Cn%20%2A%5Cn%20%2A%20Test%20state%3A%5Cn%20%2A%20This%20library%20most%20functionality%20has%20been%20tested%3A%20see%20..%2Ftests%2FLibCoinVending.ts%20and%20..%2Ftests%2Freport.md%20for%20details.%5Cn%20%2A%5Cn%20%2A%20ERC721%20token%20is%20checked%20only%20for%20%5C%22HAVE%5C%22%20condition%20since%20putting%20requirements%20on%20non%20fungible%20token%20id%20yet%20to%20be%20resolved.%5Cn%20%2A%20%28see%20ERC721%20section%20in%20the%20code%20below%29%5Cn%20%2A%5Cn%20%2A%20This%20library%20has%20not%20been%20yet%20audited%5Cn%20%2A%5Cn%20%2A%2F%5Cnlibrary%20LibCoinVending%20%7B%5Cn%20%20%20%20using%20Address%20for%20address%20payable%3B%5Cn%20%20%20%20struct%20Condition%20%7B%5Cn%20%20%20%20%20%20%20%20mapping%28ContractTypes%20%3D%3E%20mapping%28address%20%3D%3E%20mapping%28uint256%20%3D%3E%20ContractCondition%29%29%29%20contracts%3B%5Cn%20%20%20%20%20%20%20%20NumericCondition%20ethValues%3B%5Cn%20%20%20%20%20%20%20%20uint256%20timesRefunded%3B%5Cn%20%20%20%20%20%20%20%20uint256%20timesReleased%3B%5Cn%20%20%20%20%20%20%20%20uint256%20timesFunded%3B%5Cn%20%20%20%20%20%20%20%20ContractTypes%5B%5D%20contractTypes%3B%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20contractAddresses%3B%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20contractIds%3B%5Cn%20%20%20%20%20%20%20%20bool%20_isConfigured%3B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20enum%20RequirementTypes%20%7B%5Cn%20%20%20%20%20%20%20%20HAVE%2C%5Cn%20%20%20%20%20%20%20%20LOCK%2C%5Cn%20%20%20%20%20%20%20%20BURN%2C%5Cn%20%20%20%20%20%20%20%20BET%2C%5Cn%20%20%20%20%20%20%20%20PAY%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20TransactionProperties%20%7B%5Cn%20%20%20%20%20%20%20%20bytes%20data%3B%5Cn%20%20%20%20%20%20%20%20uint256%20amount%3B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20struct%20ContractCondition%20%7B%5Cn%20%20%20%20%20%20%20%20TransactionProperties%20have%3B%5Cn%20%20%20%20%20%20%20%20TransactionProperties%20lock%3B%5Cn%20%20%20%20%20%20%20%20TransactionProperties%20burn%3B%5Cn%20%20%20%20%20%20%20%20TransactionProperties%20pay%3B%5Cn%20%20%20%20%20%20%20%20TransactionProperties%20bet%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20NumericCondition%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20have%3B%5Cn%20%20%20%20%20%20%20%20uint256%20lock%3B%5Cn%20%20%20%20%20%20%20%20uint256%20burn%3B%5Cn%20%20%20%20%20%20%20%20uint256%20pay%3B%5Cn%20%20%20%20%20%20%20%20uint256%20bet%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20enum%20TransferTypes%20%7B%5Cn%20%20%20%20%20%20%20%20FUND%2C%5Cn%20%20%20%20%20%20%20%20REFUND%2C%5Cn%20%20%20%20%20%20%20%20RELEASE%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20ConditionReturn%20%7B%5Cn%20%20%20%20%20%20%20%20NumericCondition%20ethValues%3B%5Cn%20%20%20%20%20%20%20%20uint256%20timesRefunded%3B%5Cn%20%20%20%20%20%20%20%20uint256%20timesReleased%3B%5Cn%20%20%20%20%20%20%20%20uint256%20timesFunded%3B%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20contractAddresses%3B%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20contractIds%3B%5Cn%20%20%20%20%20%20%20%20ContractTypes%5B%5D%20contractTypes%3B%5Cn%20%20%20%20%20%20%20%20bool%20_isConfigured%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20configSmartRequirement%20%7B%5Cn%20%20%20%20%20%20%20%20address%20contractAddress%3B%5Cn%20%20%20%20%20%20%20%20uint256%20contractId%3B%5Cn%20%20%20%20%20%20%20%20ContractTypes%20contractType%3B%5Cn%20%20%20%20%20%20%20%20ContractCondition%20contractRequirement%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20ConfigPosition%20%7B%5Cn%20%20%20%20%20%20%20%20NumericCondition%20ethValues%3B%5Cn%20%20%20%20%20%20%20%20configSmartRequirement%5B%5D%20contracts%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20LibCoinVendingStorage%20%7B%5Cn%20%20%20%20%20%20%20%20mapping%28bytes32%20%3D%3E%20Condition%29%20positions%3B%5Cn%20%20%20%20%20%20%20%20address%20beneficiary%3B%5Cn%20%20%20%20%20%20%20%20mapping%28address%20%3D%3E%20uint256%29%20bankPosition%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20enum%20ContractTypes%20%7B%5Cn%20%20%20%20%20%20%20%20ERC20%2C%5Cn%20%20%20%20%20%20%20%20ERC1155%2C%5Cn%20%20%20%20%20%20%20%20ERC721%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20bytes32%20constant%20COIN_VENDING_STORAGE_POSITION%20%3D%20keccak256%28%5C%22coin.vending.storage.position%5C%22%29%3B%5Cn%5Cn%20%20%20%20function%20coinVendingPosition%28bytes32%20position%29%20internal%20view%20returns%20%28Condition%20storage%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20coinVendingStorage%28%29.positions%5Bkeccak256%28abi.encode%28position%29%29%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20coinVendingStorage%28%29%20internal%20pure%20returns%20%28LibCoinVendingStorage%20storage%20es%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes32%20position%20%3D%20COIN_VENDING_STORAGE_POSITION%3B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20es.slot%20%3A%3D%20position%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Transfers%20a%20specified%20amount%20of%20tokens%20from%20one%20address%20to%20another%2C%20or%20burns%20them%20if%20the%20destination%20address%20is%20zero.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20%60value%60%20must%20be%20non-zero.%5Cn%20%20%20%20%20%2A%20-%20The%20%60from%60%20address%20must%20have%20a%20sufficient%20token%20balance.%5Cn%20%20%20%20%20%2A%20-%20If%20the%20%60from%60%20address%20is%20not%20this%20contract%2C%20it%20must%20have%20approved%20this%20contract%20to%20transfer%20tokens%20on%20its%20behalf.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20token%20balances%20of%20the%20%60from%60%20and%20%60to%60%20addresses%2C%20or%20the%20total%20supply%20of%20tokens%20if%20%60to%60%20is%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20transferFromAny%28address%20erc20Addr%2C%20address%20from%2C%20address%20to%2C%20uint256%20value%29%20private%20%7B%5Cn%20%20%20%20%20%20%20%20IERC20%20token%20%3D%20IERC20%28erc20Addr%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%21%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28from%20%3D%3D%20address%28this%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28to%20%21%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20token.transfer%28to%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%20IERC20Burnable%28erc20Addr%29.burn%28value%29%20%7B%7D%20catch%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%28%5C%22Burn%20failed%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28to%20%21%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20token.transferFrom%28from%2C%20to%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20token.transferFrom%28from%2C%20address%28this%29%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%20IERC20Burnable%28erc20Addr%29.burn%28value%29%20%7B%7D%20catch%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%28%5C%22Burn%20failed%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Fulfills%20the%20ERC20%20token%20transfer%20according%20to%20the%20specified%20rules.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20%60from%60%20address%20must%20have%20a%20sufficient%20token%20balance.%5Cn%20%20%20%20%20%2A%20-%20If%20the%20%60from%60%20address%20is%20not%20this%20contract%2C%20it%20must%20have%20approved%20this%20contract%20to%20transfer%20tokens%20on%20its%20behalf.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20token%20balances%20of%20the%20%60from%60%20and%20%60to%60%20addresses.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20fulfillERC20%28%5Cn%20%20%20%20%20%20%20%20address%20erc20Addr%2C%5Cn%20%20%20%20%20%20%20%20ContractCondition%20storage%20tokenReq%2C%5Cn%20%20%20%20%20%20%20%20address%20from%2C%5Cn%20%20%20%20%20%20%20%20address%20payee%2C%5Cn%20%20%20%20%20%20%20%20address%20beneficiary%2C%5Cn%20%20%20%20%20%20%20%20address%20burnAddress%2C%5Cn%20%20%20%20%20%20%20%20address%20lockAddress%5Cn%20%20%20%20%29%20private%20%7B%5Cn%20%20%20%20%20%20%20%20transferFromAny%28erc20Addr%2C%20from%2C%20lockAddress%2C%20tokenReq.lock.amount%29%3B%5Cn%20%20%20%20%20%20%20%20transferFromAny%28erc20Addr%2C%20from%2C%20burnAddress%2C%20tokenReq.burn.amount%29%3B%5Cn%20%20%20%20%20%20%20%20transferFromAny%28erc20Addr%2C%20from%2C%20payee%2C%20tokenReq.pay.amount%29%3B%5Cn%20%20%20%20%20%20%20%20transferFromAny%28erc20Addr%2C%20from%2C%20beneficiary%2C%20tokenReq.bet.amount%29%3B%5Cn%20%20%20%20%20%20%20%20IERC20%20token%20%3D%20IERC20%28erc20Addr%29%3B%5Cn%20%20%20%20%20%20%20%20uint256%20value%20%3D%20tokenReq.have.amount%3B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%21%3D%200%20%26%26%20from%20%21%3D%20address%28this%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20require%28token.balanceOf%28from%29%20%3E%3D%20value%2C%20%5C%22Not%20enough%20erc20%20tokens%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Fulfills%20the%20ERC721%20token%20transfer%20according%20to%20the%20specified%20rules.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20%60from%60%20address%20must%20own%20the%20token.%5Cn%20%20%20%20%20%2A%20-%20If%20the%20%60from%60%20address%20is%20not%20this%20contract%2C%20it%20must%20have%20approved%20this%20contract%20to%20transfer%20the%20token%20on%20its%20behalf.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20token%20ownership%20from%20the%20%60from%60%20address%20to%20the%20%60to%60%20address.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Notes%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Due%20to%20non%20fungible%20nature%20it%27s%20an%20open%20question%20how%20to%20implement%20this%20method%20correctly%20for%20lock%2Fburn%2Fpay%2Fbet%20cases.%5Cn%20%20%20%20%20%2A%20In%20this%20library%20I%20assume%20that%20requirements%20are%20for%20multiple%20members%2C%20hence%20it%20makes%20no%20sense%20to%20put%20requirement%20on%20particular%20tokenId%20for%20ERC721.%5Cn%20%20%20%20%20%2A%20I%20think%20best%20approach%20would%20be%20to%20split%20in%20to%20two%20methods%3A%5Cn%20%20%20%20%20%2A%20%201.%20fulfillERC72Balance%3A%20Treats%20tokens%20as%20fungible%20-%20requires%20one%20to%20lock%2Fburn%2Fpay%2Fbet%20ANY%20token%20id%2C%20but%20in%20total%20should%20be%20equal%20to%20desired%20value.%5Cn%20%20%20%20%20%2A%20%202.%20fulfillERC721Ids%3A%20Requires%20one%20to%20lock%2Fburn%2Fpay%2Fbet%20specific%20token%20id.%20%28useful%20when%20requirements%20are%20unique%20per%20applicant%29.%5Cn%20%20%20%20%20%2A%20fulfillERC72Balance%20is%20easy.%20fulfillERC721Ids%20brings%20up%20a%20question%20of%20how%20to%20select%20those%20ID%27s%28since%20must%20specify%20for%20ERC721%20contract%20on%20transfer%20method%29.%5Cn%20%20%20%20%20%2A%20%20Two%20possible%20solutions%3A%5Cn%20%20%20%20%20%2A%20%201%3A%20modify%20fund%28%29%20method%20to%20accept%20array%20of%20address%2Bid%20pairs%20of%20NFT%27s%20and%20parse%20trough%20it.%20computationally%20inefficient.%5Cn%20%20%20%20%20%2A%20%202%3A%20implement%20onERC721Received%20such%20that%20there%20is%20NFT%20vault%20in%20the%20contract%2C%20later%20fill%20funding%20position%20from%20that%20vault.%20That%20way%20applicant%20could%20pre-send%20NFT%27s%20to%20the%20contract%20and%20calling%20fund%20later%20would%20pull%20those%20out%20from%20the%20vault.%5Cn%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20fulfillERC72Balance%28address%20erc721addr%2C%20ContractCondition%20storage%20tokenReq%2C%20address%20from%29%20private%20view%20%7B%5Cn%20%20%20%20%20%20%20%20ERC721%20token%20%3D%20ERC721%28erc721addr%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20require%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20tokenReq.lock.amount%20%3D%3D%200%20%26%26%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tokenReq.burn.amount%20%3D%3D%200%20%26%26%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tokenReq.pay.amount%20%3D%3D%200%20%26%26%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tokenReq.bet.amount%20%3D%3D%200%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22ERC721%20transfers%20not%20supported%5C%22%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28tokenReq.have.amount%20%21%3D%200%20%26%26%20from%20%21%3D%20address%28this%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20balance%20%3D%20token.balanceOf%28from%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20require%28balance%20%3E%3D%20tokenReq.have.amount%2C%20%5C%22Not%20enough%20ERC721%20balance%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Fulfills%20the%20ERC1155%20token%20transfer%20according%20to%20the%20specified%20rules.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20%60from%60%20address%20must%20own%20the%20token.%5Cn%20%20%20%20%20%2A%20-%20If%20the%20%60from%60%20address%20is%20not%20this%20contract%2C%20it%20must%20have%20approved%20this%20contract%20to%20transfer%20the%20token%20on%20its%20behalf.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20token%20ownership%20from%20the%20%60from%60%20address%20to%20the%20%60to%60%20address.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20fulfillERC1155%28%5Cn%20%20%20%20%20%20%20%20address%20erc1155addr%2C%5Cn%20%20%20%20%20%20%20%20uint256%20id%2C%5Cn%20%20%20%20%20%20%20%20ContractCondition%20storage%20tokenReq%2C%5Cn%20%20%20%20%20%20%20%20address%20from%2C%5Cn%20%20%20%20%20%20%20%20address%20payee%2C%5Cn%20%20%20%20%20%20%20%20address%20beneficiary%2C%5Cn%20%20%20%20%20%20%20%20address%20burnAddress%2C%5Cn%20%20%20%20%20%20%20%20address%20lockAddress%5Cn%20%20%20%20%29%20private%20%7B%5Cn%20%20%20%20%20%20%20%20ERC1155Burnable%20token%20%3D%20ERC1155Burnable%28erc1155addr%29%3B%5Cn%20%20%20%20%20%20%20%20uint256%20value%20%3D%20tokenReq.have.amount%3B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%21%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20balance%20%3D%20token.balanceOf%28from%2C%20id%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20require%28balance%20%3E%3D%20value%2C%20%5C%22ERC1155%20balance%20is%20not%20valid%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20value%20%3D%20tokenReq.pay.amount%3B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%21%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20token.safeTransferFrom%28from%2C%20payee%2C%20id%2C%20value%2C%20tokenReq.pay.data%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20value%20%3D%20tokenReq.bet.amount%3B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%21%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20token.safeTransferFrom%28from%2C%20beneficiary%2C%20id%2C%20value%2C%20tokenReq.bet.data%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20value%20%3D%20tokenReq.burn.amount%3B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%21%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28burnAddress%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20token.burn%28from%2C%20id%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20token.safeTransferFrom%28from%2C%20burnAddress%2C%20id%2C%20value%2C%20tokenReq.burn.data%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20value%20%3D%20tokenReq.lock.amount%3B%5Cn%20%20%20%20%20%20%20%20if%20%28value%20%21%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20token.safeTransferFrom%28from%2C%20lockAddress%2C%20id%2C%20value%2C%20tokenReq.lock.data%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20putToBank%28address%20to%2C%20uint256%20amount%29%20private%20%7B%5Cn%20%20%20%20%20%20%20%20LibCoinVendingStorage%20storage%20_coinVendingStorage%20%3D%20coinVendingStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20_coinVendingStorage.bankPosition%5Bto%5D%20%2B%3D%20amount%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20withdrawFromBank%28address%20to%2C%20uint256%20amount%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20LibCoinVendingStorage%20storage%20_coinVendingStorage%20%3D%20coinVendingStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20uint256%20balance%20%3D%20_coinVendingStorage.bankPosition%5Bto%5D%3B%5Cn%20%20%20%20%20%20%20%20require%28balance%20%3E%3D%20amount%2C%20%5C%22Insufficient%20balance%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20_coinVendingStorage.bankPosition%5Bto%5D%20-%3D%20amount%3B%5Cn%20%20%20%20%20%20%20%20payable%28to%29.sendValue%28amount%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20bankBalance%28address%20to%29%20internal%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20LibCoinVendingStorage%20storage%20_coinVendingStorage%20%3D%20coinVendingStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20_coinVendingStorage.bankPosition%5Bto%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Fulfills%20the%20conditions%20of%20a%20position.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20If%20%60from%60%20is%20not%20this%20contract%2C%20the%20sent%20value%20must%20be%20greater%20than%20or%20equal%20to%20the%20sum%20of%20the%20locked%2C%20paid%2C%20bet%2C%20and%20burned%20values.%5Cn%20%20%20%20%20%2A%20-%20If%20the%20transfer%20fails%2C%20the%20amount%20is%20added%20to%20the%20bank.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Transfers%20the%20specified%20amounts%20of%20Ether%20to%20the%20lock%2C%20payee%2C%20beneficiary%2C%20and%20burn%20addresses.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20fulfill%28%5Cn%20%20%20%20%20%20%20%20Condition%20storage%20position%2C%5Cn%20%20%20%20%20%20%20%20address%20from%2C%5Cn%20%20%20%20%20%20%20%20address%20payee%2C%5Cn%20%20%20%20%20%20%20%20address%20beneficiary%2C%5Cn%20%20%20%20%20%20%20%20address%20burnAddress%2C%5Cn%20%20%20%20%20%20%20%20address%20lockAddress%5Cn%20%20%20%20%29%20private%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28from%20%3D%3D%20address%28this%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28position.ethValues.lock%20%21%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bool%20success%20%3D%20payable%28lockAddress%29.send%28position.ethValues.lock%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21success%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20putToBank%28lockAddress%2C%20position.ethValues.lock%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28position.ethValues.pay%20%21%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bool%20success%20%3D%20payable%28payee%29.send%28position.ethValues.pay%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21success%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20putToBank%28payee%2C%20position.ethValues.pay%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28position.ethValues.bet%20%21%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bool%20success%20%3D%20payable%28beneficiary%29.send%28position.ethValues.bet%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21success%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20putToBank%28beneficiary%2C%20position.ethValues.bet%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28position.ethValues.burn%20%21%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bool%20success%20%3D%20payable%28burnAddress%29.send%28position.ethValues.burn%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21success%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20putToBank%28burnAddress%2C%20position.ethValues.burn%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20VLReq%20%3D%20position.ethValues.lock%20%2B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20position.ethValues.pay%20%2B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20position.ethValues.bet%20%2B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20position.ethValues.burn%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20require%28msg.value%20%3E%3D%20VLReq%2C%20%5C%22msg.value%20too%20low%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28msg.value%20%3E%20VLReq%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20putToBank%28from%2C%20msg.value%20-%20VLReq%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20position.contractAddresses.length%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20address%20contractAddress%20%3D%20position.contractAddresses%5Bi%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20id%20%3D%20position.contractIds%5Bi%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20ContractTypes%20contractType%20%3D%20position.contractTypes%5Bi%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20ContractCondition%20storage%20requirement%20%3D%20position.contracts%5BcontractType%5D%5BcontractAddress%5D%5Bid%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28contractType%20%3D%3D%20ContractTypes.ERC20%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fulfillERC20%28contractAddress%2C%20requirement%2C%20from%2C%20payee%2C%20beneficiary%2C%20burnAddress%2C%20lockAddress%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28contractType%20%3D%3D%20ContractTypes.ERC721%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fulfillERC72Balance%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20contractAddress%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20id%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20requirement%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20from%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20payee%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20beneficiary%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20burnAddress%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20lockAddress%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28contractType%20%3D%3D%20ContractTypes.ERC1155%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fulfillERC1155%28contractAddress%2C%20id%2C%20requirement%2C%20from%2C%20payee%2C%20beneficiary%2C%20burnAddress%2C%20lockAddress%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Refunds%20the%20balance%20of%20a%20condition%20to%20the%20specified%20address.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20%60reqPos%60%20The%20storage%20reference%20to%20the%20condition.%5Cn%20%20%20%20%20%2A%20%60to%60%20The%20address%20to%20refund%20the%20balance%20to.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20sum%20of%20%60timesRefunded%60%20and%20%60timesReleased%60%20for%20the%20condition%20must%20be%20less%20than%20%60timesFunded%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Transfers%20the%20remaining%20balance%20of%20the%20condition%20to%20the%20%60to%60%20address.%5Cn%20%20%20%20%20%2A%20-%20Increments%20the%20%60timesRefunded%60%20counter%20for%20the%20condition.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_refund%28Condition%20storage%20reqPos%2C%20address%20to%29%20private%20%7B%5Cn%20%20%20%20%20%20%20%20require%28%28reqPos.timesRefunded%20%2B%20reqPos.timesReleased%29%20%3C%20reqPos.timesFunded%2C%20%5C%22Not%20enough%20balance%20to%20refund%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20fulfill%28reqPos%2C%20address%28this%29%2C%20to%2C%20to%2C%20to%2C%20to%29%3B%5Cn%20%20%20%20%20%20%20%20reqPos.timesRefunded%20%2B%3D%201%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20all%20position%20requirements%20back%20to%20founder.%20%60position%60%20is%20the%20identifier%20of%20the%20condition.%20%60to%60%20is%20the%20address%20to%20refund%20the%20balance%20to.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20sum%20of%20%60timesRefunded%60%20and%20%60timesReleased%60%20for%20the%20condition%20must%20be%20less%20than%20%60timesFunded%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Transfers%20the%20remaining%20balance%20of%20the%20condition%20to%20the%20%60to%60%20address.%5Cn%20%20%20%20%20%2A%20-%20Increments%20the%20%60timesRefunded%60%20counter%20for%20the%20condition.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20refund%28bytes32%20position%2C%20address%20to%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20Condition%20storage%20reqPos%20%3D%20coinVendingPosition%28position%29%3B%5Cn%20%20%20%20%20%20%20%20_refund%28reqPos%2C%20to%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20all%20position%20requirements%20back%20to%20multiple%20founders.%20%60position%60%20is%20the%20identifier%20of%20the%20condition.%20%60returnAddresses%60%20is%20an%20array%20of%20addresses%20to%20refund%20the%20balance%20to.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20sum%20of%20%60timesRefunded%60%20and%20%60timesReleased%60%20for%20the%20condition%20must%20be%20less%20than%20%60timesFunded%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Transfers%20the%20remaining%20balance%20of%20the%20condition%20to%20each%20address%20in%20%60returnAddresses%60.%5Cn%20%20%20%20%20%2A%20-%20Increments%20the%20%60timesRefunded%60%20counter%20for%20the%20condition%20for%20each%20address%20in%20%60returnAddresses%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20batchRefund%28bytes32%20position%2C%20address%5B%5D%20memory%20returnAddresses%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20Condition%20storage%20reqPos%20%3D%20coinVendingPosition%28position%29%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20returnAddresses.length%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_refund%28reqPos%2C%20returnAddresses%5Bi%5D%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_release%28Condition%20storage%20reqPos%2C%20address%20payee%2C%20address%20beneficiary%2C%20address%20returnAddress%29%20private%20%7B%5Cn%20%20%20%20%20%20%20%20require%28%28reqPos.timesRefunded%20%2B%20reqPos.timesReleased%29%20%3C%20reqPos.timesFunded%2C%20%5C%22Not%20enough%20balance%20to%20release%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20fulfill%28reqPos%2C%20address%28this%29%2C%20payee%2C%20beneficiary%2C%20address%280%29%2C%20returnAddress%29%3B%5Cn%20%20%20%20%20%20%20%20reqPos.timesReleased%20%2B%3D%201%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Releases%20the%20funds%20from%20a%20coin%20vending%20position%20to%20the%20specified%20addresses.%20%60position%60%20is%20the%20identifier%20of%20the%20condition.%20%60payee%60%2C%20%60beneficiary%60%2C%20and%20%60returnAddress%60%20are%20the%20addresses%20to%20release%20the%20funds%20to.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20sum%20of%20%60timesRefunded%60%20and%20%60timesReleased%60%20for%20the%20condition%20must%20be%20less%20than%20%60timesFunded%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Transfers%20the%20remaining%20balance%20of%20the%20condition%20to%20the%20%60payee%60%2C%20%60beneficiary%60%2C%20and%20%60returnAddress%60.%5Cn%20%20%20%20%20%2A%20-%20Increments%20the%20%60timesReleased%60%20counter%20for%20the%20condition.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20release%28bytes32%20position%2C%20address%20payee%2C%20address%20beneficiary%2C%20address%20returnAddress%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20Condition%20storage%20reqPos%20%3D%20coinVendingPosition%28position%29%3B%5Cn%20%20%20%20%20%20%20%20_release%28reqPos%2C%20payee%2C%20beneficiary%2C%20returnAddress%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Releases%20the%20funds%20from%20a%20coin%20vending%20position%20to%20multiple%20return%20addresses.%20%60position%60%20is%20the%20identifier%20of%20the%20condition.%20%60payee%60%2C%20%60beneficiary%60%2C%20and%20%60returnAddresses%60%20are%20the%20addresses%20to%20release%20the%20funds%20to.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20sum%20of%20%60timesRefunded%60%20and%20%60timesReleased%60%20for%20the%20condition%20must%20be%20less%20than%20%60timesFunded%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Transfers%20the%20remaining%20balance%20of%20the%20condition%20to%20the%20%60payee%60%2C%20%60beneficiary%60%2C%20and%20each%20address%20in%20%60returnAddresses%60.%5Cn%20%20%20%20%20%2A%20-%20Increments%20the%20%60timesReleased%60%20counter%20for%20the%20condition%20for%20each%20address%20in%20%60returnAddresses%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20batchRelease%28%5Cn%20%20%20%20%20%20%20%20bytes32%20position%2C%5Cn%20%20%20%20%20%20%20%20address%20payee%2C%5Cn%20%20%20%20%20%20%20%20address%20beneficiary%2C%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20memory%20returnAddresses%5Cn%20%20%20%20%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20Condition%20storage%20reqPos%20%3D%20coinVendingPosition%28position%29%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20returnAddresses.length%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_release%28reqPos%2C%20payee%2C%20beneficiary%2C%20returnAddresses%5Bi%5D%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_fund%28Condition%20storage%20reqPos%2C%20address%20founder%29%20private%20%7B%5Cn%20%20%20%20%20%20%20%20require%28reqPos._isConfigured%2C%20%5C%22Position%20does%20not%20exist%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20fulfill%28reqPos%2C%20founder%2C%20address%28this%29%2C%20address%28this%29%2C%20address%28this%29%2C%20address%28this%29%29%3B%5Cn%20%20%20%20%20%20%20%20reqPos.timesFunded%20%2B%3D%201%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Funds%20the%20position%20by%20%60msg.sender%60.%20%60position%60%20is%20the%20identifier%20of%20the%20condition.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20condition%20must%20be%20configured.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Transfers%20the%20funds%20from%20%60msg.sender%60%20to%20this%20contract.%5Cn%20%20%20%20%20%2A%20-%20Increments%20the%20%60timesFunded%60%20counter%20for%20the%20condition.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20fund%28bytes32%20position%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20Condition%20storage%20reqPos%20%3D%20coinVendingPosition%28position%29%3B%5Cn%20%20%20%20%20%20%20%20_fund%28reqPos%2C%20msg.sender%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Configures%20the%20position.%20%60position%60%20is%20the%20identifier%20of%20the%20condition.%20%60configuration%60%20is%20the%20new%20configuration%20for%20the%20condition.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20condition%20must%20not%20have%20a%20positive%20balance.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Sets%20the%20configuration%20of%20the%20condition%20to%20%60configuration%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20configure%28bytes32%20position%2C%20ConfigPosition%20memory%20configuration%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20Condition%20storage%20mustDo%20%3D%20coinVendingPosition%28position%29%3B%5Cn%20%20%20%20%20%20%20%20require%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mustDo.timesFunded%20%3D%3D%200%20%7C%7C%20%28mustDo.timesFunded%20%3D%3D%20%28mustDo.timesRefunded%20%2B%20mustDo.timesReleased%29%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22Cannot%20mutate%20position%20with%20currently%20positive%20balance%5C%22%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20mustDo.ethValues%20%3D%20configuration.ethValues%3B%5Cn%20%20%20%20%20%20%20%20delete%20mustDo.contractAddresses%3B%5Cn%20%20%20%20%20%20%20%20delete%20mustDo.contractIds%3B%5Cn%20%20%20%20%20%20%20%20delete%20mustDo.contractTypes%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20configuration.contracts.length%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mustDo.contractAddresses.push%28configuration.contracts%5Bi%5D.contractAddress%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mustDo.contractIds.push%28configuration.contracts%5Bi%5D.contractId%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mustDo.contractTypes.push%28configuration.contracts%5Bi%5D.contractType%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mustDo.contracts%5Bconfiguration.contracts%5Bi%5D.contractType%5D%5Bconfiguration.contracts%5Bi%5D.contractAddress%5D%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20configuration.contracts%5Bi%5D.contractId%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5D%20%3D%20configuration.contracts%5Bi%5D.contractRequirement%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20mustDo._isConfigured%20%3D%20true%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20condition%20associated%20with%20the%20given%20position.%20%60position%60%20is%20the%20identifier%20of%20the%20condition.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20condition%20associated%20with%20%60position%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getPosition%28bytes32%20position%29%20internal%20view%20returns%20%28ConditionReturn%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20Condition%20storage%20pos%20%3D%20coinVendingPosition%28position%29%3B%5Cn%20%20%20%20%20%20%20%20ConditionReturn%20memory%20ret%3B%5Cn%20%20%20%20%20%20%20%20ret.ethValues%20%3D%20pos.ethValues%3B%5Cn%20%20%20%20%20%20%20%20ret.timesFunded%20%3D%20pos.timesFunded%3B%5Cn%20%20%20%20%20%20%20%20ret.timesRefunded%20%3D%20pos.timesRefunded%3B%5Cn%20%20%20%20%20%20%20%20ret.timesReleased%20%3D%20pos.timesReleased%3B%5Cn%20%20%20%20%20%20%20%20ret._isConfigured%20%3D%20pos._isConfigured%3B%5Cn%20%20%20%20%20%20%20%20ret.contractAddresses%20%3D%20pos.contractAddresses%3B%5Cn%20%20%20%20%20%20%20%20ret.contractIds%20%3D%20pos.contractIds%3B%5Cn%20%20%20%20%20%20%20%20ret.contractTypes%20%3D%20pos.contractTypes%3B%5Cn%20%20%20%20%20%20%20%20return%20ret%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20contract%20condition%20associated%20with%20the%20given%20position%2C%20contract%20address%2C%20contract%20ID%2C%20and%20contract%20type.%20%60position%60%20is%20the%20identifier%20of%20the%20condition.%20%60contractAddress%60%20is%20the%20address%20of%20the%20contract.%20%60contractId%60%20is%20the%20ID%20of%20the%20contract.%20%60contractType%60%20is%20the%20type%20of%20the%20contract.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20contract%20condition%20associated%20with%20%60position%60%2C%20%60contractAddress%60%2C%20%60contractId%60%2C%20and%20%60contractType%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getPositionByContract%28%5Cn%20%20%20%20%20%20%20%20bytes32%20position%2C%5Cn%20%20%20%20%20%20%20%20address%20contractAddress%2C%5Cn%20%20%20%20%20%20%20%20uint256%20contractId%2C%5Cn%20%20%20%20%20%20%20%20ContractTypes%20contractType%5Cn%20%20%20%20%29%20internal%20view%20returns%20%28ContractCondition%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20Condition%20storage%20pos%20%3D%20coinVendingPosition%28position%29%3B%5Cn%20%20%20%20%20%20%20%20return%20pos.contracts%5BcontractType%5D%5BcontractAddress%5D%5BcontractId%5D%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Flibraries%2FLibEIP712Storage.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%7BIDiamondCut%7D%20from%20%5C%22..%2Fvendor%2Fdiamond%2Finterfaces%2FIDiamondCut.sol%5C%22%3B%5Cn%5Cnlibrary%20LibEIP712WithStorage%20%7B%5Cn%20%20%20%20bytes32%20constant%20EIP712_STORAGE_POSITION%20%3D%20keccak256%28%5C%22EIP.712.STORAGE.POSITION%5C%22%29%3B%5Cn%5Cn%20%20%20%20struct%20LibEIP712WithStorageStorage%20%7B%5Cn%20%20%20%20%20%20%20%20bytes32%20_CACHED_DOMAIN_SEPARATOR%3B%5Cn%20%20%20%20%20%20%20%20uint256%20_CACHED_CHAIN_ID%3B%5Cn%20%20%20%20%20%20%20%20address%20_CACHED_THIS%3B%5Cn%20%20%20%20%20%20%20%20bytes32%20_HASHED_NAME%3B%5Cn%20%20%20%20%20%20%20%20bytes32%20_HASHED_VERSION%3B%5Cn%20%20%20%20%20%20%20%20bytes32%20_TYPE_HASH%3B%5Cn%20%20%20%20%20%20%20%20string%20_VERSION%3B%20%2F%2F%20Added%20for%20introspection%20reasons%5Cn%20%20%20%20%20%20%20%20string%20_NAME%3B%20%2F%2F%20Added%20for%20introspection%20reasons%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20EIP712WithStorage%28%29%20internal%20pure%20returns%20%28LibEIP712WithStorageStorage%20storage%20ds%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes32%20position%20%3D%20EIP712_STORAGE_POSITION%3B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20ds.slot%20%3A%3D%20position%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Flibraries%2FLibQuadraticVoting.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.28%3B%5Cnimport%20%7BMath%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Fmath%2FMath.sol%5C%22%3B%5Cnerror%20quadraticVotingError%28string%20parameter%2C%20uint256%20arg%2C%20uint256%20arg2%29%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40title%20LibQuadraticVoting%5Cn%20%2A%20%40dev%20A%20library%20for%20quadratic%20voting%20calculations.%5Cn%20%2A%2F%5Cnlibrary%20LibQuadraticVoting%20%7B%5Cn%20%20%20%20struct%20qVotingStruct%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20voteCredits%3B%5Cn%20%20%20%20%20%20%20%20uint256%20maxQuadraticPoints%3B%5Cn%20%20%20%20%20%20%20%20uint256%20minQuadraticPositions%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Pre-computes%20the%20values%20for%20quadratic%20voting.%20%60voteCredits%60%20is%20the%20total%20number%20of%20vote%20credits.%20%60minExpectedVoteItems%60%20is%20the%20minimum%20expected%20number%20of%20vote%20items.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20A%20%60qVotingStruct%60%20containing%20the%20precomputed%20values.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20precomputeValues%28%5Cn%20%20%20%20%20%20%20%20uint256%20voteCredits%2C%5Cn%20%20%20%20%20%20%20%20uint256%20minExpectedVoteItems%5Cn%20%20%20%20%29%20internal%20pure%20returns%20%28qVotingStruct%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20qVotingStruct%20memory%20q%3B%5Cn%5Cn%20%20%20%20%20%20%20%20q.maxQuadraticPoints%20%3D%20Math.sqrt%28voteCredits%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20This%20block%20finds%20how%20many%20vote%20positions%20are%20needed%20to%20distribute%20all%20quadratic%20vote%20points.%5Cn%20%20%20%20%20%20%20%20uint256%20iterator%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20uint256%20accumulator%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20do%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20accumulator%20%2B%3D%20%28q.maxQuadraticPoints%20-%20iterator%29%20%2A%2A%202%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20iterator%2B%2B%3B%5Cn%20%20%20%20%20%20%20%20%7D%20while%20%28accumulator%20%3C%20voteCredits%29%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20This%20enforces%20requirement%20that%20all%20vote%20credits%20can%20indeed%20be%20spent%20%28no%20leftovers%29%5Cn%20%20%20%20%20%20%20%20if%20%28accumulator%20%21%3D%20voteCredits%29%20require%28false%2C%20%5C%22quadraticVotingError%3A%20voteCredits%20must%20be%20i%5E2%20series%5C%22%29%3B%20%2F%2Frevert%20quadraticVotingError%28%5C%22voteCredits%20must%20be%20i%5E2%20series%5C%22%2C%20accumulator%2C%20voteCredits%29%3B%5Cn%20%20%20%20%20%20%20%20q.minQuadraticPositions%20%3D%20iterator%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20In%20order%20to%20spend%20all%20vote%20credits%20there%20must%20be%20at%20least%20minQuadraticPositions%2B1%20%28because%20proposer%20is%20also%20a%20player%20and%20cannot%20vote%20for%20himself%29%5Cn%20%20%20%20%20%20%20%20require%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20minExpectedVoteItems%20%3E%20q.minQuadraticPositions%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22quadraticVotingError%3A%20Minimum%20Voting%20positions%20above%20min%20players%5C%22%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20revert%20quadraticVotingError%28%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%5C%22Minimum%20Voting%20positions%20above%20min%20players%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20q.minQuadraticPositions%2C%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20minExpectedVoteItems%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%29%3B%5Cn%20%20%20%20%20%20%20%20q.voteCredits%20%3D%20voteCredits%3B%5Cn%20%20%20%20%20%20%20%20return%20q%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Computes%20the%20scores%20for%20each%20proposal%20by%20voter%20preference%20index.%20%60q%60%20is%20the%20precomputed%20quadratic%20voting%20values.%20%60VotersVotes%60%20is%20a%202D%20array%20of%20votes%2C%20where%20each%20row%20corresponds%20to%20a%20voter%20and%20each%20column%20corresponds%20to%20a%20proposal.%20%60isActive%60%20is%20an%20array%20indicating%20whether%20each%20voter%20has%20voted.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20An%20array%20of%20scores%20for%20each%20proposal.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20tallyVotes%28%5Cn%20%20%20%20%20%20%20%20qVotingStruct%20memory%20q%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%5B%5D%20memory%20tally%2C%20%2F%2F%20%5Bparticipant%5D%5BvotedFor%5D%5Cn%20%20%20%20%20%20%20%20bool%5B%5D%20memory%20hasVoted%2C%5Cn%20%20%20%20%20%20%20%20bool%5B%5D%20memory%20hasProposed%5Cn%20%20%20%20%29%20internal%20pure%20returns%20%28uint256%5B%5D%20memory%2C%20uint256%5B%5D%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20assert%28hasVoted.length%20%3D%3D%20hasProposed.length%29%3B%20%2F%2F%20This%20shall%20be%20by%20design%5Cn%20%20%20%20%20%20%20%20uint256%20notVotedGivesEveryone%20%3D%20q.maxQuadraticPoints%3B%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20scores%20%3D%20new%20uint256%5B%5D%28tally.length%29%3B%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20creditsUsed%20%3D%20new%20uint256%5B%5D%28tally.length%29%3B%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%5B%5D%20memory%20finalizedVotingMatrix%20%3D%20new%20uint256%5B%5D%5B%5D%28tally.length%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20participant%20%3D%200%3B%20participant%20%3C%20tally.length%3B%20participant%2B%2B%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20finalizedVotingMatrix%5Bparticipant%5D%20%3D%20new%20uint256%5B%5D%28tally.length%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20assert%28tally%5Bparticipant%5D.length%20%3D%3D%20tally.length%29%3B%20%2F%2F%20This%20shall%20be%20by%20design%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFor%20each%20proposal%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20console.log%28%5C%22New%20tally%20iter%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20votedFor%20%3D%20tally%5Bparticipant%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20for%20%28uint256%20candidate%20%3D%200%3B%20candidate%20%3C%20tally.length%3B%20candidate%2B%2B%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20For%20each%20potential%20voter%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21hasVoted%5Bparticipant%5D%20%26%26%20hasProposed%5Bcandidate%5D%20%26%26%20candidate%20%21%3D%20participant%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Check%20if%20participant%20wasn%27t%20voting%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20scores%5Bcandidate%5D%20%2B%3D%20notVotedGivesEveryone%3B%20%2F%2F%20Gives%20benefits%20to%20everyone%20but%20himself%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20creditsUsed%5Bparticipant%5D%20%3D%20q.voteCredits%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20finalizedVotingMatrix%5Bparticipant%5D%5Bcandidate%5D%20%3D%20notVotedGivesEveryone%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20participant%20voted%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20scores%5Bcandidate%5D%20%2B%3D%20votedFor%5Bcandidate%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20creditsUsed%5Bparticipant%5D%20%2B%3D%20votedFor%5Bcandidate%5D%20%2A%2A%202%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20finalizedVotingMatrix%5Bparticipant%5D%5Bcandidate%5D%20%3D%20votedFor%5Bcandidate%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20require%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20creditsUsed%5Bparticipant%5D%20%3C%3D%20q.voteCredits%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20quadraticVotingError%28%5C%22Quadratic%3A%20vote%20credits%20overrun%5C%22%2C%20q.voteCredits%2C%20creditsUsed%5Bparticipant%5D%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20%28scores%2C%20finalizedVotingMatrix%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Flibraries%2FLibRankify.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.28%3B%5Cnimport%20%7BLibTBG%7D%20from%20%5C%22..%2Flibraries%2FLibTurnBasedGame.sol%5C%22%3B%5Cnimport%20%7BIRankifyInstance%7D%20from%20%5C%22..%2Finterfaces%2FIRankifyInstance.sol%5C%22%3B%5Cnimport%20%7BIRankToken%7D%20from%20%5C%22..%2Finterfaces%2FIRankToken.sol%5C%22%3B%5Cnimport%20%5C%22..%2Ftokens%2FRankify.sol%5C%22%3B%5Cnimport%20%7BLibQuadraticVoting%7D%20from%20%5C%22.%2FLibQuadraticVoting.sol%5C%22%3B%5Cnimport%20%7BMath%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Fmath%2FMath.sol%5C%22%3B%5Cnimport%20%7BSignedMath%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Fmath%2FSignedMath.sol%5C%22%3B%5Cnimport%20%7BIErrors%7D%20from%20%5C%22..%2Finterfaces%2FIErrors.sol%5C%22%3B%5Cnimport%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Fcryptography%2FECDSA.sol%5C%22%3B%5Cn%2F%2A%2A%5Cn%20%2A%20%40title%20LibRankify%5Cn%20%2A%20%40dev%20Core%20library%20for%20the%20Rankify%20protocol%20that%20handles%20game%20state%20management%2C%20voting%2C%20and%20player%20interactions%5Cn%20%2A%20%40author%20Peeramid%20Labs%2C%202024%5Cn%20%2A%2F%5Cnlibrary%20LibRankify%20%7B%5Cn%20%20%20%20using%20LibTBG%20for%20LibTBG.Instance%3B%5Cn%20%20%20%20using%20LibTBG%20for%20uint256%3B%5Cn%20%20%20%20using%20LibTBG%20for%20LibTBG.Settings%3B%5Cn%20%20%20%20using%20LibTBG%20for%20LibTBG.State%3B%5Cn%20%20%20%20using%20LibQuadraticVoting%20for%20LibQuadraticVoting.qVotingStruct%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Main%20state%20structure%20for%20a%20Rankify%20instance%5Cn%20%20%20%20%20%2A%20%40param%20numGames%20Total%20number%20of%20games%20created%20in%20this%20instance%5Cn%20%20%20%20%20%2A%20%40param%20contractInitialized%20Whether%20the%20contract%20has%20been%20properly%20initialized%5Cn%20%20%20%20%20%2A%20%40param%20commonParams%20Common%20parameters%20shared%20across%20all%20games%20in%20this%20instance%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20struct%20InstanceState%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20numGames%3B%5Cn%20%20%20%20%20%20%20%20bool%20contractInitialized%3B%5Cn%20%20%20%20%20%20%20%20CommonParams%20commonParams%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Common%20parameters%20shared%20across%20all%20games%20in%20a%20Rankify%20instance%5Cn%20%20%20%20%20%2A%20%40param%20principalCost%20Base%20cost%20for%20creating%20a%20game%5Cn%20%20%20%20%20%2A%20%40param%20principalTimeConstant%20Time%20constant%20used%20for%20game%20duration%20calculations%5Cn%20%20%20%20%20%2A%20%40param%20gamePaymentToken%20Address%20of%20the%20token%20used%20for%20game%20payments%5Cn%20%20%20%20%20%2A%20%40param%20rankTokenAddress%20Address%20of%20the%20rank%20token%20contract%5Cn%20%20%20%20%20%2A%20%40param%20beneficiary%20Address%20that%20receives%20game%20fees%5Cn%20%20%20%20%20%2A%20%40param%20minimumParticipantsInCircle%20Minimum%20number%20of%20participants%20required%20to%20join%20a%20game%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20struct%20CommonParams%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20principalCost%3B%5Cn%20%20%20%20%20%20%20%20uint96%20principalTimeConstant%3B%5Cn%20%20%20%20%20%20%20%20address%20gamePaymentToken%3B%5Cn%20%20%20%20%20%20%20%20address%20rankTokenAddress%3B%5Cn%20%20%20%20%20%20%20%20address%20beneficiary%3B%5Cn%20%20%20%20%20%20%20%20uint256%20minimumParticipantsInCircle%3B%5Cn%20%20%20%20%20%20%20%20address%20derivedToken%3B%5Cn%20%20%20%20%20%20%20%20address%20proposalIntegrityVerifier%3B%5Cn%20%20%20%20%20%20%20%20address%20poseidon5%3B%5Cn%20%20%20%20%20%20%20%20address%20poseidon6%3B%5Cn%20%20%20%20%20%20%20%20address%20poseidon2%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Comprehensive%20state%20structure%20for%20an%20individual%20game%5Cn%20%20%20%20%20%2A%20%40param%20rank%20Required%20rank%20level%20for%20participation%5Cn%20%20%20%20%20%2A%20%40param%20minGameTime%20Minimum%20duration%20the%20game%20must%20run%5Cn%20%20%20%20%20%2A%20%40param%20createdBy%20Address%20of%20the%20game%20creator%5Cn%20%20%20%20%20%2A%20%40param%20numCommitments%20Number%20of%20players%20who%20have%20committed%20a%20proposal%20in%20the%20current%20proposing%20stage%5Cn%20%20%20%20%20%2A%20%40param%20numVotes%20Number%20of%20votes%20cast%20in%20the%20current%20voting%20stage%5Cn%20%20%20%20%20%2A%20%40param%20permutationCommitment%20Commitment%20related%20to%20the%20permutation%20of%20ongoingProposals%2C%20set%20at%20end%20of%20proposing%20stage%5Cn%20%20%20%20%20%2A%20%40param%20voting%20Quadratic%20voting%20state%20for%20this%20game%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20struct%20GameState%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20rank%3B%5Cn%20%20%20%20%20%20%20%20uint256%20timePerTurnVoting%3B%5Cn%20%20%20%20%20%20%20%20uint256%20timePerTurnProposing%3B%5Cn%20%20%20%20%20%20%20%20string%20metadata%3B%5Cn%20%20%20%20%20%20%20%20uint256%20minGameTime%3B%5Cn%20%20%20%20%20%20%20%20address%20createdBy%3B%5Cn%20%20%20%20%20%20%20%20uint256%20numCommitments%3B%20%2F%2F%20Number%20of%20players%20who%20have%20committed%20a%20proposal%20in%20the%20current%20proposing%20stage%5Cn%20%20%20%20%20%20%20%20uint256%20numVotes%3B%20%2F%2F%20Number%20of%20votes%20cast%20in%20the%20current%20voting%20stage%5Cn%20%20%20%20%20%20%20%20uint256%20permutationCommitment%3B%20%2F%2F%20Commitment%20related%20to%20the%20permutation%20of%20ongoingProposals%2C%20set%20at%20end%20of%20proposing%20stage%5Cn%20%20%20%20%20%20%20%20LibQuadraticVoting.qVotingStruct%20voting%3B%5Cn%20%20%20%20%20%20%20%20mapping%28uint256%20%3D%3E%20string%29%20ongoingProposals%3B%20%2F%2F%20Proposals%20for%20the%20current%20round%20%28submitted%20in%20proposing%20stage%2C%20voted%20on%20in%20voting%20stage%29%5Cn%20%20%20%20%20%20%20%20mapping%28address%20%3D%3E%20uint256%29%20proposalCommitment%3B%20%2F%2F%20Player%27s%20commitment%20to%20their%20proposal%5Cn%20%20%20%20%20%20%20%20mapping%28address%20%3D%3E%20bytes32%29%20ballotHashes%3B%20%2F%2F%20Player%27s%20committed%20ballot%20hash%5Cn%20%20%20%20%20%20%20%20mapping%28address%20%3D%3E%20bool%29%20playerVoted%3B%20%2F%2F%20Has%20player%20voted%20in%20the%20current%20voting%20stage%5Cn%20%20%20%20%20%20%20%20address%20winner%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Compares%20two%20strings%20for%20equality.%20%60a%60%20and%20%60b%60%20are%20the%20strings%20to%20compare.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60true%60%20if%20the%20strings%20are%20equal%2C%20%60false%60%20otherwise.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20compareStrings%28string%20memory%20a%2C%20string%20memory%20b%29%20public%20pure%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20%28keccak256%28abi.encodePacked%28%28a%29%29%29%20%3D%3D%20keccak256%28abi.encodePacked%28%28b%29%29%29%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20game%20storage%20for%20the%20given%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20storage%20for%20%60gameId%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getGameState%28uint256%20gameId%29%20public%20view%20returns%20%28GameState%20storage%20game%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes32%20position%20%3D%20LibTBG.getGameDataStorage%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20game.slot%20%3A%3D%20position%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20Rankify%20InstanceSettings%20storage.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20instanceState%20storage.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20instanceState%28%29%20internal%20pure%20returns%20%28InstanceState%20storage%20contractState%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes32%20position%20%3D%20LibTBG.getDataStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20contractState.slot%20%3A%3D%20position%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20bytes32%20public%20constant%20_PROPOSAL_PROOF_TYPEHASH%20%3D%5Cn%20%20%20%20%20%20%20%20keccak256%28%5C%22signProposalByGM%28uint256%20gameId%2Cuint256%20turn%2Cbytes32%20proposalNHash%2Cstring%20encryptedProposal%29%5C%22%29%3B%5Cn%20%20%20%20bytes32%20public%20constant%20_VOTE_PROOF_TYPEHASH%20%3D%5Cn%20%20%20%20%20%20%20%20keccak256%28%5C%22signVote%28uint256%20vote1%2Cuint256%20vote2%2Cuint256%20vote3%2Cuint256%20gameId%2Cuint256%20turn%2Cbytes32%20salt%29%5C%22%29%3B%5Cn%20%20%20%20bytes32%20public%20constant%20_VOTE_SUBMIT_PROOF_TYPEHASH%20%3D%5Cn%20%20%20%20%20%20%20%20keccak256%28%5C%22publicSignVote%28uint256%20gameId%2Cuint256%20turn%2Cbytes32%20vote1%2Cbytes32%20vote2%2Cbytes32%20vote3%29%5C%22%29%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Ensures%20that%20the%20contract%20is%20initialized.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20contract%20must%20be%20initialized.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20enforceIsInitialized%28%29%20public%20view%20%7B%5Cn%20%20%20%20%20%20%20%20InstanceState%20storage%20settings%20%3D%20instanceState%28%29%3B%5Cn%20%20%20%20%20%20%20%20require%28settings.contractInitialized%2C%20%5C%22onlyInitialized%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Ensures%20that%20the%20game%20with%20the%20given%20ID%20exists.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20exist.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20enforceGameExists%28uint256%20gameId%29%20public%20view%20%7B%5Cn%20%20%20%20%20%20%20%20enforceIsInitialized%28%29%3B%5Cn%20%20%20%20%20%20%20%20require%28gameId.gameExists%28%29%2C%20%5C%22game%20not%20found%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20NewGameParams%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20gameId%3B%5Cn%20%20%20%20%20%20%20%20uint256%20gameRank%3B%5Cn%20%20%20%20%20%20%20%20address%20creator%3B%5Cn%20%20%20%20%20%20%20%20uint256%20minPlayerCnt%3B%5Cn%20%20%20%20%20%20%20%20uint256%20maxPlayerCnt%3B%5Cn%20%20%20%20%20%20%20%20uint256%20voteCredits%3B%5Cn%20%20%20%20%20%20%20%20address%20gameMaster%3B%5Cn%20%20%20%20%20%20%20%20uint96%20nTurns%3B%5Cn%20%20%20%20%20%20%20%20uint128%20minGameTime%3B%5Cn%20%20%20%20%20%20%20%20uint128%20timePerTurn%3B%5Cn%20%20%20%20%20%20%20%20uint128%20timeToJoin%3B%5Cn%20%20%20%20%20%20%20%20uint256%20votePhaseDuration%3B%5Cn%20%20%20%20%20%20%20%20uint256%20proposingPhaseDuration%3B%5Cn%20%20%20%20%20%20%20%20string%20metadata%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20ToDo%3A%20It%20must%20list%20gameKey%20for%20Game%20master%20and%20game%20master%20signature%2C%20committing%20to%20serve%20the%20game%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20getGamePrice%28uint128%20minGameTime%2C%20CommonParams%20memory%20commonParams%29%20public%20pure%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%5Cn%20%20%20%20%20%20%20%20%20%20%20%20Math.mulDiv%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uint256%28commonParams.principalCost%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uint256%28commonParams.principalTimeConstant%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uint256%28minGameTime%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Creates%20a%20new%20game%20with%20the%20given%20parameters.%20%60gameId%60%20is%20the%20ID%20of%20the%20new%20game.%20%60gameMaster%60%20is%20the%20address%20of%20the%20game%20master.%20%60gameRank%60%20is%20the%20rank%20of%20the%20game.%20%60creator%60%20is%20the%20address%20of%20the%20creator%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20not%20already%20exist.%5Cn%20%20%20%20%20%2A%20-%20%60gameRank%60%20must%20not%20be%200.%5Cn%20%20%20%20%20%2A%20-%20If%20the%20game%20price%20is%20not%200%2C%20the%20%60creator%60%20must%20have%20approved%20this%20contract%20to%20transfer%20the%20game%20price%20amount%20of%20the%20game%20payment%20token%20on%20their%20behalf.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Creates%20a%20new%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%20-%20Transfers%20the%20game%20price%20amount%20of%20the%20game%20payment%20token%20from%20%60creator%60%20to%20this%20contract.%5Cn%20%20%20%20%20%2A%20-%20Sets%20the%20payments%20balance%20of%20the%20game%20to%20the%20game%20price.%5Cn%20%20%20%20%20%2A%20-%20Sets%20the%20creator%20of%20the%20game%20to%20%60creator%60.%5Cn%20%20%20%20%20%2A%20-%20Increments%20the%20number%20of%20games.%5Cn%20%20%20%20%20%2A%20-%20Sets%20the%20rank%20of%20the%20game%20to%20%60gameRank%60.%5Cn%20%20%20%20%20%2A%20-%20Mints%20new%20rank%20tokens.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20newGame%28NewGameParams%20memory%20params%29%20public%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20address%20signer%20%3D%20ECDSA.recover%28digest%2C%20gameMasterSignature%29%3B%5Cn%20%20%20%20%20%20%20%20%2F%2FTODO%3A%20add%20this%20back%20in%20start%20game%20to%20verify%20commitment%20from%20game%20master%5Cn%20%20%20%20%20%20%20%20%2F%2F%20require%28%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20params.gameMaster%20%3D%3D%20signer%2C%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20IErrors.invalidECDSARecoverSigner%28digest%2C%20%5C%22LibRankify%3A%3AnewGame-%3Einvalid%20signature%5C%22%29%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20enforceIsInitialized%28%29%3B%5Cn%20%20%20%20%20%20%20%20CommonParams%20storage%20commonParams%20%3D%20instanceState%28%29.commonParams%3B%5Cn%5Cn%20%20%20%20%20%20%20%20require%28params.minGameTime%20%3E%200%2C%20%5C%22LibRankify%3A%3AnewGame-%3EMin%20game%20time%20zero%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20require%28params.nTurns%20%3E%200%2C%20IRankifyInstance.invalidTurnCount%28params.nTurns%29%29%3B%5Cn%20%20%20%20%20%20%20%20require%28params.votePhaseDuration%20%3E%200%2C%20%5C%22LibRankify%3A%3AnewGame-%3ETime%20per%20turn%20voting%20zero%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20require%28params.proposingPhaseDuration%20%3E%200%2C%20%5C%22LibRankify%3A%3AnewGame-%3ETime%20per%20turn%20proposing%20zero%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20require%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20params.votePhaseDuration%20%2B%20params.proposingPhaseDuration%20%3D%3D%20params.timePerTurn%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22LibRankify%3A%3AnewGame-%3ETime%20per%20turn%20voting%20and%20proposing%20must%20sum%20to%20time%20per%20turn%5C%22%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20phases%20%3D%20new%20uint256%5B%5D%282%29%3B%5Cn%20%20%20%20%20%20%20%20phases%5B0%5D%20%3D%20params.votePhaseDuration%3B%5Cn%20%20%20%20%20%20%20%20phases%5B1%5D%20%3D%20params.proposingPhaseDuration%3B%5Cn%20%20%20%20%20%20%20%20LibTBG.Settings%20memory%20newSettings%20%3D%20LibTBG.Settings%28%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20timePerTurn%3A%20params.timePerTurn%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20maxPlayerCnt%3A%20params.maxPlayerCnt%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20minPlayerCnt%3A%20params.minPlayerCnt%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20timeToJoin%3A%20params.timeToJoin%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20maxTurns%3A%20params.nTurns%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20voteCredits%3A%20params.voteCredits%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20gameMaster%3A%20params.gameMaster%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20implementationStoragePointer%3A%20bytes32%280%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20turnPhaseDurations%3A%20phases%5Cn%20%20%20%20%20%20%20%20%7D%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20InstanceState%20storage%20state%20%3D%20instanceState%28%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20params.gameId.createGame%28newSettings%29%3B%20%2F%2F%20This%20will%20enforce%20game%20does%20not%20exist%20yet%5Cn%20%20%20%20%20%20%20%20GameState%20storage%20game%20%3D%20getGameState%28params.gameId%29%3B%5Cn%20%20%20%20%20%20%20%20game.voting%20%3D%20LibQuadraticVoting.precomputeValues%28params.voteCredits%2C%20params.minPlayerCnt%29%3B%5Cn%20%20%20%20%20%20%20%20game.metadata%20%3D%20params.metadata%3B%5Cn%20%20%20%20%20%20%20%20game.timePerTurnVoting%20%3D%20params.votePhaseDuration%3B%5Cn%20%20%20%20%20%20%20%20game.timePerTurnProposing%20%3D%20params.proposingPhaseDuration%3B%5Cn%20%20%20%20%20%20%20%20require%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20SignedMath.abs%28int256%28uint256%28params.minGameTime%29%29%20-%20int256%28uint256%28commonParams.principalTimeConstant%29%29%29%20%3C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uint256%28commonParams.principalTimeConstant%29%20%2A%202%20%2A%2A%2016%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22Min%20game%20time%20out%20of%20bounds%5C%22%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20require%28commonParams.minimumParticipantsInCircle%20%3C%3D%20params.minPlayerCnt%2C%20%5C%22Min%20player%20count%20too%20low%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20uint256%20gamePrice%20%3D%20getGamePrice%28params.minGameTime%2C%20commonParams%29%3B%5Cn%20%20%20%20%20%20%20%20address%20beneficiary%20%3D%20commonParams.beneficiary%3B%5Cn%5Cn%20%20%20%20%20%20%20%20require%28params.gameRank%20%21%3D%200%2C%20IRankifyInstance.RankNotSpecified%28%29%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20game.createdBy%20%3D%20params.creator%3B%5Cn%20%20%20%20%20%20%20%20state.numGames%20%2B%3D%201%3B%5Cn%20%20%20%20%20%20%20%20game.rank%20%3D%20params.gameRank%3B%5Cn%20%20%20%20%20%20%20%20game.minGameTime%20%3D%20params.minGameTime%3B%5Cn%5Cn%20%20%20%20%20%20%20%20Rankify%28commonParams.gamePaymentToken%29.transferFrom%28params.creator%2C%20beneficiary%2C%20gamePrice%29%3B%5Cn%20%20%20%20%20%20%20%20IRankToken%20rankTokenContract%20%3D%20IRankToken%28state.commonParams.rankTokenAddress%29%3B%5Cn%20%20%20%20%20%20%20%20rankTokenContract.mint%28address%28this%29%2C%201%2C%20params.gameRank%20%2B%201%2C%20%5C%22%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Ensures%20that%20the%20candidate%20is%20the%20creator%20of%20the%20game%20with%20the%20given%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60candidate%60%20is%20the%20address%20of%20the%20candidate.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20exist.%5Cn%20%20%20%20%20%2A%20-%20%60candidate%60%20must%20be%20the%20creator%20of%20the%20game.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20enforceIsGameCreator%28uint256%20gameId%2C%20address%20candidate%29%20public%20view%20%7B%5Cn%20%20%20%20%20%20%20%20enforceGameExists%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20GameState%20storage%20game%20%3D%20getGameState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20require%28game.createdBy%20%3D%3D%20candidate%2C%20%5C%22Only%20game%20creator%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Ensures%20that%20the%20candidate%20is%20the%20game%20master%20of%20the%20game%20with%20the%20given%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60candidate%60%20is%20the%20address%20of%20the%20candidate.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20exist.%5Cn%20%20%20%20%20%2A%20-%20%60candidate%60%20must%20be%20the%20game%20master%20of%20the%20game.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20enforceIsGM%28uint256%20gameId%2C%20address%20candidate%29%20public%20view%20%7B%5Cn%20%20%20%20%20%20%20%20enforceGameExists%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20require%28gameId.getGM%28%29%20%3D%3D%20candidate%2C%20%5C%22Only%20game%20master%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Locks%20the%20rank%20token%20of%20the%20player.%20%60player%60%20is%20the%20address%20of%20the%20player.%20%60gameRank%60%20is%20the%20rank%20of%20the%20game.%20%60rankTokenAddress%60%20is%20the%20address%20of%20the%20rank%20token%20contract.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60RankTokenAddress%60%20must%20support%20%60IRankToken%60%20interface%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Locks%20%60gameRank%60%20rank%20of%20%60player%60%20in%20the%20rank%20token%20contract.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_fulfillRankRq%28address%20player%2C%20uint256%20gameRank%2C%20address%20rankTokenAddress%29%20private%20%7B%5Cn%20%20%20%20%20%20%20%20IRankToken%20rankToken%20%3D%20IRankToken%28rankTokenAddress%29%3B%5Cn%20%20%20%20%20%20%20%20rankToken.lock%28player%2C%20gameRank%2C%201%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Allows%20a%20player%20to%20join%20a%20game.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60player%60%20is%20the%20address%20of%20the%20player.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20exist.%5Cn%20%20%20%20%20%2A%20-%20If%20the%20join%20game%20price%20is%20not%200%2C%20the%20%60player%60%20must%20have%20approved%20this%20contract%20to%20transfer%20the%20join%20game%20price%20amount%20of%20the%20game%20payment%20token%20on%20their%20behalf.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Transfers%20the%20join%20game%20price%20amount%20of%20the%20game%20payment%20token%20from%20%60player%60%20to%20this%20contract.%5Cn%20%20%20%20%20%2A%20-%20Increases%20the%20payments%20balance%20of%20the%20game%20by%20the%20join%20game%20price.%5Cn%20%20%20%20%20%2A%20-%20Adds%20%60player%60%20to%20the%20game.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20joinGame%28uint256%20gameId%2C%20address%20player%2C%20bytes%20memory%20gameMasterSignature%2C%20bytes32%20digest%29%20public%20%7B%5Cn%20%20%20%20%20%20%20%20enforceGameExists%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20fulfillRankRq%28gameId%2C%20player%29%3B%5Cn%20%20%20%20%20%20%20%20gameId.addPlayer%28player%29%3B%5Cn%20%20%20%20%20%20%20%20address%20signer%20%3D%20ECDSA.recover%28digest%2C%20gameMasterSignature%29%3B%5Cn%20%20%20%20%20%20%20%20require%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20gameId.getGM%28%29%20%3D%3D%20signer%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20IErrors.invalidECDSARecoverSigner%28digest%2C%20%5C%22LibRankify%3A%3AjoinGame-%3Einvalid%20signature%5C%22%29%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Closes%20the%20game%20with%20the%20given%20ID%20and%20transfers%20the%20game%27s%20balance%20to%20the%20beneficiary.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60beneficiary%60%20is%20the%20address%20to%20transfer%20the%20game%27s%20balance%20to.%20%60playersGameEndedCallback%60%20is%20a%20callback%20function%20to%20call%20for%20each%20player%20when%20the%20game%20ends.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20exist.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Emits%20rank%20rewards%20for%20the%20game.%5Cn%20%20%20%20%20%2A%20-%20Removes%20and%20unlocks%20each%20player%20from%20the%20game.%5Cn%20%20%20%20%20%2A%20-%20Calls%20%60playersGameEndedCallback%60%20for%20each%20player.%5Cn%20%20%20%20%20%2A%20-%20Transfers%20the%20game%27s%20balance%20to%20%60beneficiary%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20final%20scores%20of%20the%20game.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20closeGame%28%5Cn%20%20%20%20%20%20%20%20uint256%20gameId%2C%5Cn%20%20%20%20%20%20%20%20function%28uint256%2C%20address%29%20playersGameEndedCallback%5Cn%20%20%20%20%29%20internal%20returns%20%28address%5B%5D%20memory%2C%20uint256%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20enforceGameExists%28gameId%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Get%20game%20state%20and%20check%20minimum%20time%5Cn%20%20%20%20%20%20%20%20GameState%20storage%20game%20%3D%20getGameState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20LibTBG.State%20storage%20tbgState%20%3D%20gameId._getState%28%29%3B%5Cn%20%20%20%20%20%20%20%20require%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20block.timestamp%20-%20tbgState.startedAt%20%3E%3D%20game.minGameTime%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22Game%20duration%20less%20than%20minimum%20required%20time%5C%22%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%28%2C%20uint256%5B%5D%20memory%20finalScores%29%20%3D%20gameId.getScores%28%29%3B%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20memory%20players%20%3D%20gameId.getPlayers%28%29%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20players.length%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20removeAndUnlockPlayer%28gameId%2C%20players%5Bi%5D%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20playersGameEndedCallback%28gameId%2C%20players%5Bi%5D%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20emitRankRewards%28gameId%2C%20gameId.getLeaderBoard%28%29%29%3B%5Cn%20%20%20%20%20%20%20%20return%20%28players%2C%20finalScores%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Allows%20a%20player%20to%20quit%20a%20game.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60player%60%20is%20the%20address%20of%20the%20player.%20%60slash%60%20is%20a%20boolean%20indicating%20whether%20to%20slash%20the%20player%27s%20payment%20refund.%20%60onPlayerLeftCallback%60%20is%20a%20callback%20function%20to%20call%20when%20the%20player%20leaves.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20exist.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20If%20the%20join%20game%20price%20is%20not%200%2C%20transfers%20a%20refund%20to%20%60player%60%20and%20decreases%20the%20game%27s%20payments%20balance%20by%20the%20refund%20amount.%5Cn%20%20%20%20%20%2A%20-%20Removes%20and%20unlocks%20%60player%60%20from%20the%20game.%5Cn%20%20%20%20%20%2A%20-%20Calls%20%60onPlayerLeftCallback%60%20for%20%60player%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20quitGame%28uint256%20gameId%2C%20address%20player%2C%20function%28uint256%2C%20address%29%20onPlayerLeftCallback%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20removeAndUnlockPlayer%28gameId%2C%20player%29%3B%20%2F%2F%20this%20will%20throw%20if%20game%20has%20started%20or%20doesn%27t%20exist%5Cn%20%20%20%20%20%20%20%20onPlayerLeftCallback%28gameId%2C%20player%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Cancels%20the%20game%20with%20the%20given%20ID%2C%20refunds%20half%20of%20the%20game%27s%20payment%20to%20the%20game%20creator%2C%20and%20transfers%20the%20remaining%20balance%20to%20the%20beneficiary.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60onPlayerLeftCallback%60%20is%20a%20callback%20function%20to%20call%20for%20each%20player%20when%20they%20leave.%20%60beneficiary%60%20is%20the%20address%20to%20transfer%20the%20remaining%20balance%20to.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20exist.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Calls%20%60quitGame%60%20for%20each%20player%20in%20the%20game.%5Cn%20%20%20%20%20%2A%20-%20Transfers%20half%20of%20the%20game%27s%20payment%20to%20the%20game%20creator.%5Cn%20%20%20%20%20%2A%20-%20Decreases%20the%20game%27s%20payments%20balance%20by%20the%20refund%20amount.%5Cn%20%20%20%20%20%2A%20-%20Transfers%20the%20remaining%20balance%20of%20the%20game%20to%20%60beneficiary%60.%5Cn%20%20%20%20%20%2A%20-%20Deletes%20the%20game.%5Cn%20%20%20%20%20%2A%2F%20function%20cancelGame%28uint256%20gameId%2C%20function%28uint256%2C%20address%29%20onPlayerLeftCallback%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Cancel%20the%20game%20for%20each%20player%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20memory%20players%20%3D%20gameId.getPlayers%28%29%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20players.length%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20quitGame%28gameId%2C%20players%5Bi%5D%2C%20onPlayerLeftCallback%29%3B%20%2F%2Fthis%20will%20throw%20if%20game%20has%20started%20or%20doesn%27t%20exist%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Delete%20the%20game%5Cn%20%20%20%20%20%20%20%20gameId.deleteGame%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Fulfills%20the%20rank%20requirement%20for%20a%20player%20to%20join%20a%20game.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60player%60%20is%20the%20address%20of%20the%20player.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Locks%20the%20rank%20token%28s%29%20of%20%60player%60%20in%20the%20rank%20token%20contract.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20fulfillRankRq%28uint256%20gameId%2C%20address%20player%29%20public%20%7B%5Cn%20%20%20%20%20%20%20%20InstanceState%20storage%20instance%20%3D%20instanceState%28%29%3B%5Cn%20%20%20%20%20%20%20%20GameState%20storage%20game%20%3D%20getGameState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28game.rank%20%3E%201%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_fulfillRankRq%28player%2C%20game.rank%2C%20instance.commonParams.rankTokenAddress%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Emits%20rank%20rewards%20to%20the%20top%20three%20addresses%20in%20the%20leaderboard.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60leaderboard%60%20is%20an%20array%20of%20addresses%20representing%20the%20leaderboard%20sorted%20in%20descending%20order.%20%60rankTokenAddress%60%20is%20the%20address%20of%20the%20rank%20token%20contract.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Transfers%20rank%20tokens%20from%20this%20contract%20to%20the%20top%20three%20addresses%20in%20the%20leaderboard.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20emitRankReward%28uint256%20gameId%2C%20address%5B%5D%20memory%20leaderboard%2C%20address%20rankTokenAddress%29%20private%20%7B%5Cn%20%20%20%20%20%20%20%20GameState%20storage%20game%20%3D%20getGameState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20IRankToken%20rankTokenContract%20%3D%20IRankToken%28rankTokenAddress%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28game.rank%20%3E%201%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20rankTokenContract.burn%28leaderboard%5B0%5D%2C%20game.rank%2C%201%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20rankTokenContract.safeTransferFrom%28address%28this%29%2C%20leaderboard%5B0%5D%2C%20game.rank%20%2B%201%2C%201%2C%20%5C%22%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20game.winner%20%3D%20leaderboard%5B0%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Emits%20rank%20rewards%20to%20the%20top%20addresses%20in%20the%20leaderboard%20for%20each%20rank%20in%20the%20game.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60leaderboard%60%20is%20an%20array%20of%20addresses%20representing%20the%20leaderboard.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Calls%20%60emitRankReward%60%20for%20the%20main%20rank%20and%20each%20additional%20rank%20in%20the%20game.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20emitRankRewards%28uint256%20gameId%2C%20address%5B%5D%20memory%20leaderboard%29%20public%20%7B%5Cn%20%20%20%20%20%20%20%20InstanceState%20storage%20instance%20%3D%20LibRankify.instanceState%28%29%3B%5Cn%20%20%20%20%20%20%20%20emitRankReward%28gameId%2C%20leaderboard%2C%20instance.commonParams.rankTokenAddress%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Releases%20a%20rank%20token%20for%20a%20player%20with%20a%20specific%20game%20rank.%20%60player%60%20is%20the%20address%20of%20the%20player.%20%60gameRank%60%20is%20the%20game%20rank%20of%20the%20player.%20%60rankTokenAddress%60%20is%20the%20address%20of%20the%20rank%20token%20contract.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Unlocks%20one%20rank%20token%20of%20%60gameRank%60%20for%20%60player%60%20in%20the%20rank%20token%20contract.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_releaseRankToken%28address%20player%2C%20uint256%20gameRank%2C%20address%20rankTokenAddress%29%20private%20%7B%5Cn%20%20%20%20%20%20%20%20IRankToken%20rankToken%20%3D%20IRankToken%28rankTokenAddress%29%3B%5Cn%20%20%20%20%20%20%20%20rankToken.unlock%28player%2C%20gameRank%2C%201%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Removes%20a%20player%20from%20a%20game%20and%20unlocks%20their%20rank%20tokens.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60player%60%20is%20the%20address%20of%20the%20player%20to%20be%20removed.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20exist.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Removes%20%60player%60%20from%20the%20game.%5Cn%20%20%20%20%20%2A%20-%20If%20the%20game%20rank%20is%20greater%20than%201%2C%20unlocks%20the%20game%20rank%20token%20for%20%60player%60%20in%20the%20rank%20token%20contract.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20removeAndUnlockPlayer%28uint256%20gameId%2C%20address%20player%29%20public%20%7B%5Cn%20%20%20%20%20%20%20%20enforceGameExists%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20gameId.removePlayer%28player%29%3B%20%2F%2FThis%20will%20throw%20if%20game%20is%20in%20the%20process%5Cn%20%20%20%20%20%20%20%20InstanceState%20storage%20instance%20%3D%20instanceState%28%29%3B%5Cn%20%20%20%20%20%20%20%20GameState%20storage%20game%20%3D%20getGameState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28game.rank%20%3E%201%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_releaseRankToken%28player%2C%20game.rank%2C%20instance.commonParams.rankTokenAddress%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Tries%20to%20make%20a%20move%20for%20a%20player%20in%20a%20game.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60player%60%20is%20the%20address%20of%20the%20player.%5Cn%20%20%20%20%20%2A%20The%20%5C%22move%5C%22%20is%20considered%20to%20be%20a%20state%20when%20player%20has%20made%20all%20actions%20he%20could%20in%20the%20given%20STAGE%20%28proposing%20or%20voting%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20exist.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20If%20the%20player%20has%20not%20completed%20their%20action%20for%20the%20current%20stage%20%28proposal%20or%20vote%29%2C%20does%20not%20make%20a%20move%20and%20returns%20%60false%60.%5Cn%20%20%20%20%20%2A%20-%20Otherwise%2C%20makes%20a%20move%20for%20%60player%60%20in%20LibTBG%20and%20returns%20%60true%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20tryPlayerMove%28uint256%20gameId%2C%20address%20player%29%20public%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20GameState%20storage%20game%20%3D%20getGameState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20bool%20actionCompleted%20%3D%20false%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28isProposingStage%28gameId%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20In%20proposing%20stage%2C%20action%20is%20complete%20if%20a%20proposal%20commitment%20exists.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28game.proposalCommitment%5Bplayer%5D%20%21%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20actionCompleted%20%3D%20true%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%20else%20if%20%28isVotingStage%28gameId%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20In%20voting%20stage%2C%20action%20is%20complete%20if%20player%20has%20voted%2C%20AND%20there%20are%20enough%20proposals.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28game.numCommitments%20%3C%20game.voting.minQuadraticPositions%20%7C%7C%20game.playerVoted%5Bplayer%5D%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20actionCompleted%20%3D%20true%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28actionCompleted%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20gameId.playerMove%28player%29%3B%20%2F%2F%20Call%20LibTBG.playerMove%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20false%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Checks%20if%20the%20current%20proposing%20stage%20can%20end.%5Cn%20%20%20%20%20%2A%20A%20proposing%20stage%20can%20end%20if%20it%27s%20a%20proposing%20stage%20and%20all%20players%20have%20made%20their%20move%20%28committed%20proposals%29%5Cn%20%20%20%20%20%2A%20or%20the%20time%20for%20the%20stage%20has%20run%20out%2C%20subject%20to%20minimum%20proposal%20and%20stale%20game%20rules.%5Cn%20%20%20%20%20%2A%20Returns%20a%20status%20indicating%20whether%20and%20how%20the%20proposing%20stage%20can%20end.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20canEndProposing%28uint256%20gameId%29%20internal%20view%20returns%20%28IRankifyInstance.ProposingEndStatus%29%20%7B%5Cn%20%20%20%20%20%20%20%20enforceGameExists%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28%21isProposingStage%28gameId%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20IRankifyInstance.ProposingEndStatus.NotProposingStage%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20LibTBG.Instance%20storage%20tbgInstanceState%20%3D%20LibTBG._getInstance%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20LibTBG.State%20storage%20tbgState%20%3D%20tbgInstanceState.state%3B%5Cn%20%20%20%20%20%20%20%20LibTBG.Settings%20storage%20tbgSettings%20%3D%20tbgInstanceState.settings%3B%20%2F%2F%20To%20get%20phase%20duration%5Cn%20%20%20%20%20%20%20%20GameState%20storage%20game%20%3D%20getGameState%28gameId%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20bool%20canTransitionBasicTBG%20%3D%20gameId.canTransitionPhaseEarly%28%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28canTransitionBasicTBG%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Check%20if%20transition%20is%20due%20to%20timeout%20or%20all%20players%20moved%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bool%20allPlayersMoved%20%3D%20tbgState.numPlayersMadeMove%20%3D%3D%20game.numCommitments%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bool%20phaseTimedOut%20%3D%20block.timestamp%20%3E%3D%20tbgState.phaseStartedAt%20%2B%20tbgSettings.turnPhaseDurations%5B0%5D%3B%20%2F%2F%20Proposing%20is%20phase%200%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28game.numCommitments%20%3E%3D%20game.voting.minQuadraticPositions%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20IRankifyInstance.ProposingEndStatus.Success%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20not%20enough%20proposals%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bool%20minGameTimeReached%20%3D%20block.timestamp%20%3E%3D%20tbgState.startedAt%20%2B%20game.minGameTime%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28minGameTimeReached%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Even%20if%20proposals%20are%20insufficient%2C%20if%20minGameTime%20is%20met%20and%20phase%20can%20end%20by%20TBG%20rules%20%28timeout%2Fall_moved%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20it%27s%20considered%20stale%20and%20can%20proceed%20%28but%20facet%20will%20revert%20as%20it%20needs%20Success%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20IRankifyInstance.ProposingEndStatus.GameIsStaleAndCanEnd%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20minGameTime%20not%20reached%2C%20and%20not%20enough%20proposals%2C%20and%20phase%20timed%20out%20%28or%20all%20moved%20without%20enough%20proposals%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28phaseTimedOut%20%7C%7C%20allPlayersMoved%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20All%20moved%20but%20not%20enough%20proposals%20is%20a%20specific%20type%20of%20not%20met%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20IRankifyInstance.ProposingEndStatus.MinProposalsNotMetAndNotStale%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20This%20case%20should%20ideally%20be%20covered%20by%20PhaseConditionsNotMet%20if%20canTransitionBasicTBG%20was%20false%20initially%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20or%20if%20canTransitionBasicTBG%20was%20true%20only%20because%20of%20allPlayersMoved%20but%20minProposals%20not%20met%20%28and%20not%20stale%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20This%20logic%20path%20might%20need%20refinement%20to%20ensure%20all%20conditions%20map%20to%20an%20enum%20state%20clearly.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20For%20now%2C%20if%20it%20got%20here%2C%20it%20means%20minProposalsNotMet%20and%20not%20stale.%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20IRankifyInstance.ProposingEndStatus.MinProposalsNotMetAndNotStale%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20IRankifyInstance.ProposingEndStatus.PhaseConditionsNotMet%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Checks%20if%20the%20current%20voting%20stage%20can%20end.%5Cn%20%20%20%20%20%2A%20A%20voting%20stage%20can%20end%20if%20it%27s%20a%20voting%20stage%20and%20all%20players%20have%20made%20their%20move%20%28voted%29%5Cn%20%20%20%20%20%2A%20or%20the%20time%20for%20the%20stage%20has%20run%20out.%5Cn%20%20%20%20%20%2A%20If%20there%20are%20not%20enough%20proposals%20to%20vote%20on%2C%20this%20stage%20effectively%20ends%20when%20LibTBG.canEndTurnEarly%28%29%20becomes%20true%20%28likely%20due%20to%20timeout%29.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20canEndVoting%28uint256%20gameId%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20enforceGameExists%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20return%20isVotingStage%28gameId%29%20%26%26%20gameId.canTransitionPhaseEarly%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Calculates%20the%20scores%20using%20a%20quadratic%20formula%20based%20on%20the%20revealed%20votes%20and%20proposer%20indices.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60votesRevealed%60%20is%20an%20array%20of%20revealed%20votes.%20%60proposerIndices%60%20is%20an%20array%20of%20proposer%20indices%20that%20links%20proposals%20to%20index%20in%20getPlayers%28%29.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20An%20array%20of%20updated%20scores%20for%20each%20player.%5Cn%20%20%20%20%20%2A%20-%20An%20array%20of%20scores%20calculated%20for%20the%20current%20round.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20calculateScores%28%5Cn%20%20%20%20%20%20%20%20uint256%20gameId%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%5B%5D%20memory%20votesRevealed%5Cn%20%20%20%20%29%20public%20returns%20%28uint256%5B%5D%20memory%2C%20uint256%5B%5D%20memory%2C%20address%2C%20bool%5B%5D%20memory%20isActive%2C%20uint256%5B%5D%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20memory%20players%20%3D%20gameId.getPlayers%28%29%3B%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20gameScores%20%3D%20new%20uint256%5B%5D%28players.length%29%3B%5Cn%20%20%20%20%20%20%20%20bool%5B%5D%20memory%20playerVoted%20%3D%20new%20bool%5B%5D%28players.length%29%3B%5Cn%20%20%20%20%20%20%20%20bool%5B%5D%20memory%20playerProposed%20%3D%20new%20bool%5B%5D%28players.length%29%3B%5Cn%20%20%20%20%20%20%20%20address%20winner%20%3D%20address%280%29%3B%5Cn%20%20%20%20%20%20%20%20uint256%20maxScore%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20GameState%20storage%20game%20%3D%20getGameState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20isActive%20%3D%20new%20bool%5B%5D%28players.length%29%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Convert%20mapping%20to%20array%20to%20pass%20it%20to%20libQuadratic%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20players.length%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20playerVoted%5Bi%5D%20%3D%20game.playerVoted%5Bplayers%5Bi%5D%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20playerProposed%5Bi%5D%20%3D%20game.proposalCommitment%5Bplayers%5Bi%5D%5D%20%21%3D%200%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%28uint256%5B%5D%20memory%20roundScores%2C%20uint256%5B%5D%5B%5D%20memory%20finalizedVotingMatrix%29%20%3D%20game.voting.tallyVotes%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20votesRevealed%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20playerVoted%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20playerProposed%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20playerIdx%20%3D%200%3B%20playerIdx%20%3C%20players.length%3B%20playerIdx%2B%2B%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Ffor%20each%20player%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28game.proposalCommitment%5Bplayers%5BplayerIdx%5D%5D%20%21%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fif%20player%20proposal%20exists%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gameScores%5BplayerIdx%5D%20%3D%20gameId.getScore%28players%5BplayerIdx%5D%29%20%2B%20roundScores%5BplayerIdx%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gameId.setScore%28players%5BplayerIdx%5D%2C%20gameScores%5BplayerIdx%5D%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28gameScores%5BplayerIdx%5D%20%3E%20maxScore%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maxScore%20%3D%20gameScores%5BplayerIdx%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20winner%20%3D%20players%5BplayerIdx%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FPlayer%20did%20not%20propose%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20implement%20tests%20for%20this%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20require%28roundScores%5BplayerIdx%5D%20%3D%3D%200%2C%20%5C%22LibRankify-%3EcalculateScores%3A%20player%20got%20votes%20without%20proposing%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20%28gameScores%2C%20roundScores%2C%20winner%2C%20isActive%2C%20finalizedVotingMatrix%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20isVotingStage%28uint256%20gameId%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20LibTBG.getPhase%28gameId%29%20%3D%3D%201%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20isProposingStage%28uint256%20gameId%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20LibTBG.getPhase%28gameId%29%20%3D%3D%200%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Checks%20if%20a%20game%20is%20in%20a%20state%20where%20it%20can%20be%20forcibly%20ended%20due%20to%20being%20stale.%5Cn%20%20%20%20%20%2A%20Conditions%20for%20being%20stale%20for%20forced%20end%3A%5Cn%20%20%20%20%20%2A%201.%20Game%20exists%20and%20is%20not%20already%20over.%5Cn%20%20%20%20%20%2A%202.%20Minimum%20game%20time%20has%20been%20reached.%5Cn%20%20%20%20%20%2A%203.%20Game%20is%20stuck%20in%20the%20proposing%20stage%3A%5Cn%20%20%20%20%20%2A%20%20%20%20a.%20Proposing%20phase%20has%20timed%20out.%5Cn%20%20%20%20%20%2A%20%20%20%20b.%20Not%20all%20active%20players%20have%20made%20their%20move%20%28committed%20proposals%29.%5Cn%20%20%20%20%20%2A%20%20%20%20c.%20The%20number%20of%20submitted%20proposals%20is%20less%20than%20minQuadraticPositions.%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%20%40return%20bool%20True%20if%20the%20game%20is%20stale%20and%20can%20be%20forcibly%20ended%2C%20false%20otherwise.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isGameStaleForForcedEnd%28uint256%20gameId%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20enforceGameExists%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28LibTBG.isGameOver%28gameId%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%20%2F%2F%20Already%20over%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20LibTBG.Instance%20storage%20tbgInstanceState%20%3D%20LibTBG._getInstance%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20LibTBG.State%20storage%20tbgState%20%3D%20tbgInstanceState.state%3B%5Cn%20%20%20%20%20%20%20%20LibTBG.Settings%20storage%20tbgSettings%20%3D%20tbgInstanceState.settings%3B%20%2F%2F%20To%20get%20phase%20duration%5Cn%20%20%20%20%20%20%20%20GameState%20storage%20game%20%3D%20getGameState%28gameId%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20bool%20minGameTimeReached%20%3D%20block.timestamp%20%3E%3D%20tbgState.startedAt%20%2B%20game.minGameTime%3B%5Cn%20%20%20%20%20%20%20%20if%20%28%21minGameTimeReached%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Check%20if%20stuck%20in%20proposing%20stage%5Cn%20%20%20%20%20%20%20%20if%20%28isProposingStage%28gameId%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bool%20proposingPhaseTimedOut%20%3D%20block.timestamp%20%3E%3D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tbgState.phaseStartedAt%20%2B%20tbgSettings.turnPhaseDurations%5B0%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bool%20notAllActivePlayersMoved%20%3D%20tbgState.numPlayersMadeMove%20%3C%20tbgState.numActivePlayers%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bool%20minProposalsNotMet%20%3D%20game.numCommitments%20%3C%20game.voting.minQuadraticPositions%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28proposingPhaseTimedOut%20%26%26%20notAllActivePlayersMoved%20%26%26%20minProposalsNotMet%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Potentially%20add%20conditions%20for%20being%20stuck%20in%20voting%20if%20other%20scenarios%20arise%20in%20the%20future%5Cn%5Cn%20%20%20%20%20%20%20%20return%20false%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Flibraries%2FLibReentrancyGuard.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%5C%22hardhat%2Fconsole.sol%5C%22%3B%5Cnimport%20%7BIERC20%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC20%2FIERC20.sol%5C%22%3B%5Cnimport%20%7BIERC1155%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC1155%2FIERC1155.sol%5C%22%3B%5Cnimport%20%7BIERC721%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC721%2FIERC721.sol%5C%22%3B%5Cn%5Cnlibrary%20LibReentrancyGuard%20%7B%5Cn%20%20%20%20bytes32%20constant%20TBG_STORAGE_POSITION%20%3D%20keccak256%28%5C%22reentrancy.guard.storage.position%5C%22%29%3B%5Cn%5Cn%20%20%20%20struct%20ReentrancyGuardStruct%20%7B%5Cn%20%20%20%20%20%20%20%20bool%20_entered%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20reentrancyGuardStorage%28%29%20internal%20pure%20returns%20%28ReentrancyGuardStruct%20storage%20ds%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes32%20position%20%3D%20TBG_STORAGE_POSITION%3B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20ds.slot%20%3A%3D%20position%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Flibraries%2FLibTurnBasedGame.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2F%20import%20%7BEnumerableMap%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Fstructs%2FEnumerableMap.sol%5C%22%3B%5Cnimport%20%7BEnumerableSet%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Fstructs%2FEnumerableSet.sol%5C%22%3B%5Cnimport%20%7BIERC20%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC20%2FIERC20.sol%5C%22%3B%5Cnimport%20%7BIERC1155%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC1155%2FIERC1155.sol%5C%22%3B%5Cnimport%20%7BIERC721%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC721%2FIERC721.sol%5C%22%3B%5Cnimport%20%7BLibArray%7D%20from%20%5C%22..%2Flibraries%2FLibArray.sol%5C%22%3B%5Cnimport%20%7BMath%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Fmath%2FMath.sol%5C%22%3B%5Cnimport%20%7BIErrors%7D%20from%20%5C%22..%2Finterfaces%2FIErrors.sol%5C%22%3B%5Cn%2F%2A%2A%5Cn%20%2A%20%40title%20LibTBG%5Cn%20%2A%20%40dev%20Library%20for%20managing%20turn-based%20games.%5Cn%20%2A%20It%20is%20designed%20to%20be%20used%20as%20a%20base%20library%20for%20games%2C%20and%20provides%20the%20following%20functionality%3A%5Cn%20%2A%20-%20setting%20game%20settings%20such%20as%20time%20per%20turn%2C%20max%20players%2C%20min%20players%2C%20etc%20as%20well%20as%20perform%20score%20and%20leaderboard%20tracking%5Cn%20%2A%5Cn%20%2A%20Limitations%3A%5Cn%20%2A%20-%20It%20is%20assumed%20there%20is%20only%20on%20game%20master%20per%20game%5Cn%20%2A%5Cn%20%2A%20%2A%2A%2AWARNING%2A%2A%2A%20Some%20limitations%3A%5Cn%20%2A%20-%20This%20library%20is%20still%20under%20development%20and%20its%20interfaces%20may%20change.%5Cn%20%2A%20-%20getting%20game%20data%20%28which%20has%20own%20storage%20assignment%20and%20can%20be%20encapsulated%20from%20library%29%20however%20there%20is%20no%20storage%20slot%20collision%20checks%20in%20place%5Cn%20%2A%5Cn%20%2A%2F%5Cnlibrary%20LibTBG%20%7B%5Cn%20%20%20%20using%20EnumerableSet%20for%20EnumerableSet.AddressSet%3B%5Cn%20%20%20%20using%20EnumerableSet%20for%20EnumerableSet.UintSet%3B%5Cn%5Cn%20%20%20%20struct%20Settings%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20timePerTurn%3B%5Cn%20%20%20%20%20%20%20%20uint256%20maxPlayerCnt%3B%5Cn%20%20%20%20%20%20%20%20uint256%20minPlayerCnt%3B%5Cn%20%20%20%20%20%20%20%20uint256%20timeToJoin%3B%5Cn%20%20%20%20%20%20%20%20uint256%20maxTurns%3B%5Cn%20%20%20%20%20%20%20%20uint256%20voteCredits%3B%5Cn%20%20%20%20%20%20%20%20address%20gameMaster%3B%5Cn%20%20%20%20%20%20%20%20bytes32%20implementationStoragePointer%3B%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20turnPhaseDurations%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20State%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20currentTurn%3B%5Cn%20%20%20%20%20%20%20%20uint256%20phaseStartedAt%3B%5Cn%20%20%20%20%20%20%20%20uint256%20registrationOpenAt%3B%5Cn%20%20%20%20%20%20%20%20uint256%20startedAt%3B%5Cn%20%20%20%20%20%20%20%20bool%20hasStarted%3B%5Cn%20%20%20%20%20%20%20%20bool%20hasEnded%3B%5Cn%20%20%20%20%20%20%20%20EnumerableSet.AddressSet%20players%3B%5Cn%20%20%20%20%20%20%20%20mapping%28address%20%3D%3E%20bool%29%20madeMove%3B%5Cn%20%20%20%20%20%20%20%20mapping%28address%20%3D%3E%20bool%29%20isActive%3B%5Cn%20%20%20%20%20%20%20%20uint256%20numPlayersMadeMove%3B%5Cn%20%20%20%20%20%20%20%20uint256%20numActivePlayers%3B%5Cn%20%20%20%20%20%20%20%20mapping%28address%20%3D%3E%20uint256%29%20score%3B%5Cn%20%20%20%20%20%20%20%20bool%20isOvertime%3B%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20leaderboard%3B%5Cn%20%20%20%20%20%20%20%20uint32%20phase%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20Instance%20%7B%5Cn%20%20%20%20%20%20%20%20Settings%20settings%3B%5Cn%20%20%20%20%20%20%20%20State%20state%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20TBGStorageStruct%20%7B%5Cn%20%20%20%20%20%20%20%20mapping%28uint256%20%3D%3E%20Instance%29%20instances%3B%5Cn%20%20%20%20%20%20%20%20mapping%28address%20%3D%3E%20EnumerableSet.UintSet%29%20playerInGames%3B%5Cn%20%20%20%20%20%20%20%20uint256%20totalGamesCreated%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20bytes32%20constant%20TBG_STORAGE_POSITION%20%3D%20keccak256%28%5C%22turn_based_game.storage.position%5C%22%29%3B%5Cn%20%20%20%20bytes32%20constant%20IMPLEMENTATION_STORAGE_POSITION%20%3D%20keccak256%28%5C%22implementation.turn_based_game.storage.position%5C%22%29%3B%5Cn%5Cn%20%20%20%20function%20TBGStorage%28%29%20internal%20pure%20returns%20%28TBGStorageStruct%20storage%20es%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes32%20position%20%3D%20TBG_STORAGE_POSITION%3B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20es.slot%20%3A%3D%20position%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_getInstance%28uint256%20gameId%29%20internal%20view%20returns%20%28Instance%20storage%29%20%7B%5Cn%20%20%20%20%20%20%20%20TBGStorageStruct%20storage%20tbg%20%3D%20TBGStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20tbg.instances%5BgameId%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20_getState%28uint256%20gameId%29%20internal%20view%20returns%20%28State%20storage%29%20%7B%5Cn%20%20%20%20%20%20%20%20TBGStorageStruct%20storage%20tbg%20%3D%20TBGStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20tbg.instances%5BgameId%5D.state%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Initializes%20the%20game%20with%20the%20provided%20settings.%20%60settings%60%20is%20the%20settings%20for%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60settings.timePerTurn%60%20must%20not%20be%20zero.%5Cn%20%20%20%20%20%2A%20-%20%60settings.maxPlayerCnt%60%20must%20not%20be%20zero.%5Cn%20%20%20%20%20%2A%20-%20%60settings.minPlayerCnt%60%20must%20be%20at%20least%202.%5Cn%20%20%20%20%20%2A%20-%20%60settings.maxTurns%60%20must%20not%20be%20zero.%5Cn%20%20%20%20%20%2A%20-%20%60settings.timeToJoin%60%20must%20not%20be%20zero.%5Cn%20%20%20%20%20%2A%20-%20%60settings.maxPlayerCnt%60%20must%20not%20be%20less%20than%20%60settings.minPlayerCnt%60.%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Sets%20the%20settings%20of%20the%20game%20to%20%60settings%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%5Cn%20%20%20%20function%20init%28uint256%20gameId%2C%20Settings%20memory%20newSettings%29%20private%20%7B%5Cn%20%20%20%20%20%20%20%20TBGStorageStruct%20storage%20tbg%20%3D%20TBGStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20Settings%20storage%20settings%20%3D%20tbg.instances%5BgameId%5D.settings%3B%5Cn%20%20%20%20%20%20%20%20require%28newSettings.timePerTurn%20%21%3D%200%2C%20IErrors.invalidConfiguration%28%5C%22LibTBG%3A%3Ainit-%3Esettings.timePerTurn%5C%22%29%29%3B%5Cn%20%20%20%20%20%20%20%20require%28newSettings.maxPlayerCnt%20%21%3D%200%2C%20IErrors.invalidConfiguration%28%5C%22LibTBG%3A%3Ainit-%3Esettings.maxPlayerCnt%5C%22%29%29%3B%5Cn%20%20%20%20%20%20%20%20require%28newSettings.minPlayerCnt%20%3E%201%2C%20IErrors.invalidConfiguration%28%5C%22LibTBG%3A%3Ainit-%3Esettings.minPlayerCnt%5C%22%29%29%3B%5Cn%20%20%20%20%20%20%20%20require%28newSettings.maxTurns%20%21%3D%200%2C%20IErrors.invalidConfiguration%28%5C%22LibTBG%3A%3Ainit-%3Esettings.maxTurns%5C%22%29%29%3B%5Cn%20%20%20%20%20%20%20%20require%28newSettings.timeToJoin%20%21%3D%200%2C%20IErrors.invalidConfiguration%28%5C%22LibTBG%3A%3Ainit-%3EtimeToJoin%5C%22%29%29%3B%5Cn%20%20%20%20%20%20%20%20require%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20settings.minPlayerCnt%20%3C%20newSettings.maxPlayerCnt%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20IErrors.invalidConfiguration%28%5C%22LibTBG%3A%3Ainit-%3EmaxPlayerCnt%5C%22%29%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20require%28newSettings.gameMaster%20%21%3D%20address%280%29%2C%20IErrors.invalidConfiguration%28%5C%22LibTBG%3A%3Ainit-%3EgameMaster%5C%22%29%29%3B%5Cn%20%20%20%20%20%20%20%20uint256%20allPhasesTime%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20newSettings.turnPhaseDurations.length%3B%20i%2B%2B%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20allPhasesTime%20%2B%3D%20newSettings.turnPhaseDurations%5Bi%5D%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20require%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20allPhasesTime%20%3D%3D%20newSettings.timePerTurn%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20IErrors.invalidConfiguration%28%5C%22LibTBG%3A%3Ainit-%3EturnPhaseDurations%5C%22%29%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20tbg.instances%5BgameId%5D.settings%20%3D%20newSettings%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Creates%20a%20new%20game%20with%20the%20provided%20game%20ID%20and%20game%20master.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60gm%60%20is%20the%20address%20of%20the%20game%20master.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20not%20already%20exist.%5Cn%20%20%20%20%20%2A%20-%20%60gm%60%20must%20not%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%20-%20%60gameId%60%20must%20not%20be%20zero.%5Cn%20%20%20%20%20%2A%20-%20The%20game%20master%20of%20the%20game%20with%20%60gameId%60%20must%20be%20the%20zero%20address.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Sets%20the%20game%20master%20of%20the%20game%20with%20%60gameId%60%20to%20%60gm%60.%5Cn%20%20%20%20%20%2A%20-%20Increments%20the%20total%20number%20of%20games%20created.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20createGame%28uint256%20gameId%2C%20Settings%20memory%20settings%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20require%28%21gameExists%28gameId%29%2C%20%5C%22createGame-%3EAlready%20exists%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20require%28gameId%20%21%3D%200%2C%20%5C%22createGame-%3EgameId%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20init%28gameId%2C%20settings%29%3B%5Cn%20%20%20%20%20%20%20%20TBGStorageStruct%20storage%20tbg%20%3D%20TBGStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20tbg.totalGamesCreated%20%2B%3D%201%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2FtotalGamesCreated%20ensures%20nonce-like%20behavior%3A%5Cn%20%20%20%20%20%20%20%20%2F%2Feven%20if%20game%20would%20get%20deleted%20and%20re-created%20with%20same%20name%2C%20data%20storage%20would%20be%20different%5Cn%20%20%20%20%20%20%20%20tbg.instances%5BgameId%5D.settings.implementationStoragePointer%20%3D%20keccak256%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20abi.encode%28gameId%2C%20tbg.totalGamesCreated%2C%20TBG_STORAGE_POSITION%29%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Deletes%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20exist.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Sets%20the%20game%20master%2C%20current%20turn%2C%20hasEnded%2C%20hasStarted%2C%5Cn%20%20%20%20%20%2A%20%20%20implementationStoragePointer%2C%20isOvertime%2C%20leaderboard%2C%20numPlayersMadeMove%2C%5Cn%20%20%20%20%20%2A%20%20%20players%2C%20registrationOpenAt%2C%20and%20turnStartedAt%20of%20the%20game%20with%20%60gameId%60%5Cn%20%20%20%20%20%2A%20%20%20to%20their%20initial%20values.%5Cn%20%20%20%20%20%2A%20-%20Sets%20the%20score%20and%20madeMove%20of%20each%20player%20in%20the%20game%20with%20%60gameId%60%5Cn%20%20%20%20%20%2A%20%20%20to%20their%20initial%20values.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20deleteGame%28uint256%20gameId%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20TBGStorageStruct%20storage%20tbg%20%3D%20TBGStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20memory%20players%20%3D%20tbg.instances%5BgameId%5D.state.players.values%28%29%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20players.length%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20tbg.instances%5BgameId%5D.state.score%5Bplayers%5Bi%5D%5D%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20tbg.instances%5BgameId%5D.state.madeMove%5Bplayers%5Bi%5D%5D%20%3D%20false%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20tbg.instances%5BgameId%5D.state.isActive%5Bplayers%5Bi%5D%5D%20%3D%20false%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20delete%20tbg.instances%5BgameId%5D.state.currentTurn%3B%5Cn%20%20%20%20%20%20%20%20delete%20tbg.instances%5BgameId%5D.state.hasEnded%3B%5Cn%20%20%20%20%20%20%20%20delete%20tbg.instances%5BgameId%5D.state.hasStarted%3B%5Cn%20%20%20%20%20%20%20%20delete%20tbg.instances%5BgameId%5D.state.isOvertime%3B%5Cn%20%20%20%20%20%20%20%20delete%20tbg.instances%5BgameId%5D.state.leaderboard%3B%5Cn%20%20%20%20%20%20%20%20delete%20tbg.instances%5BgameId%5D.state.numPlayersMadeMove%3B%5Cn%20%20%20%20%20%20%20%20delete%20tbg.instances%5BgameId%5D.state.players%3B%5Cn%20%20%20%20%20%20%20%20delete%20tbg.instances%5BgameId%5D.state.registrationOpenAt%3B%5Cn%20%20%20%20%20%20%20%20delete%20tbg.instances%5BgameId%5D.state.startedAt%3B%5Cn%20%20%20%20%20%20%20%20delete%20tbg.instances%5BgameId%5D.state.numActivePlayers%3B%5Cn%20%20%20%20%20%20%20%20delete%20tbg.instances%5BgameId%5D.settings.gameMaster%3B%5Cn%20%20%20%20%20%20%20%20delete%20tbg.instances%5BgameId%5D.settings.implementationStoragePointer%3B%5Cn%20%20%20%20%20%20%20%20delete%20tbg.instances%5BgameId%5D.settings.timePerTurn%3B%5Cn%20%20%20%20%20%20%20%20delete%20tbg.instances%5BgameId%5D.settings.maxPlayerCnt%3B%5Cn%20%20%20%20%20%20%20%20delete%20tbg.instances%5BgameId%5D.settings.minPlayerCnt%3B%5Cn%20%20%20%20%20%20%20%20delete%20tbg.instances%5BgameId%5D.settings.timeToJoin%3B%5Cn%20%20%20%20%20%20%20%20delete%20tbg.instances%5BgameId%5D.settings.maxTurns%3B%5Cn%20%20%20%20%20%20%20%20delete%20tbg.instances%5BgameId%5D.settings.voteCredits%3B%5Cn%20%20%20%20%20%20%20%20delete%20tbg.instances%5BgameId%5D.settings.turnPhaseDurations%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Checks%20if%20a%20game%20with%20the%20provided%20game%20ID%20can%20be%20joined.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20A%20boolean%20indicating%20whether%20the%20game%20can%20be%20joined.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20canBeJoined%28uint256%20gameId%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28state.hasStarted%20%7C%7C%20state.registrationOpenAt%20%3D%3D%200%29%20return%20false%3B%5Cn%20%20%20%20%20%20%20%20return%20true%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Adds%20a%20player%20to%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60participant%60%20is%20the%20address%20of%20the%20player.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20exist.%5Cn%20%20%20%20%20%2A%20-%20%60participant%60%20must%20not%20already%20be%20in%20a%20game.%5Cn%20%20%20%20%20%2A%20-%20The%20number%20of%20players%20in%20the%20game%20with%20%60gameId%60%20must%20be%20less%20than%20the%20maximum%20number%20of%20players.%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20be%20joinable.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Adds%20%60participant%60%20to%20the%20players%20of%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%20-%20Sets%20the%20madeMove%20of%20%60participant%60%20in%20the%20game%20with%20%60gameId%60%20to%20false.%5Cn%20%20%20%20%20%2A%20-%20Sets%20the%20game%20of%20%60participant%60%20to%20%60gameId%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20addPlayer%28uint256%20gameId%2C%20address%20participant%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20TBGStorageStruct%20storage%20tbg%20%3D%20TBGStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20tbg.instances%5BgameId%5D.state%3B%5Cn%20%20%20%20%20%20%20%20Settings%20storage%20settings%20%3D%20tbg.instances%5BgameId%5D.settings%3B%5Cn%20%20%20%20%20%20%20%20require%28gameExists%28gameId%29%2C%20%5C%22addPlayer-%3Einvalid%20game%5C%22%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20require%28%21tbg.playerInGames%5Bparticipant%5D.contains%28gameId%29%2C%20%5C%22addPlayer-%3EPlayer%20in%20game%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20require%28state.players.length%28%29%20%3C%20settings.maxPlayerCnt%2C%20%5C%22addPlayer-%3Eparty%20full%5C%22%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20require%28canBeJoined%28gameId%29%2C%20%5C%22addPlayer-%3Ecant%20join%20now%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20state.players.add%28participant%29%3B%5Cn%20%20%20%20%20%20%20%20state.madeMove%5Bparticipant%5D%20%3D%20false%3B%5Cn%20%20%20%20%20%20%20%20state.isActive%5Bparticipant%5D%20%3D%20false%3B%5Cn%20%20%20%20%20%20%20%20tbg.playerInGames%5Bparticipant%5D.add%28gameId%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Checks%20if%20a%20player%20is%20in%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60player%60%20is%20the%20address%20of%20the%20player.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20A%20boolean%20indicating%20whether%20the%20player%20is%20in%20the%20game.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isPlayerInGame%28uint256%20gameId%2C%20address%20player%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20TBGStorageStruct%20storage%20tbg%20%3D%20TBGStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20tbg.playerInGames%5Bplayer%5D.contains%28gameId%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Removes%20a%20player%20from%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60participant%60%20is%20the%20address%20of%20the%20player.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20exist.%5Cn%20%20%20%20%20%2A%20-%20%60participant%60%20must%20be%20in%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20not%20have%20started%20or%20must%20have%20ended.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Sets%20the%20game%20of%20%60participant%60%20to%200.%5Cn%20%20%20%20%20%2A%20-%20Removes%20%60participant%60%20from%20the%20players%20of%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20removePlayer%28uint256%20gameId%2C%20address%20participant%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20TBGStorageStruct%20storage%20tbg%20%3D%20TBGStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20tbg.instances%5BgameId%5D.state%3B%5Cn%20%20%20%20%20%20%20%20require%28gameExists%28gameId%29%2C%20%5C%22game%20does%20not%20exist%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20require%28tbg.playerInGames%5Bparticipant%5D.contains%28gameId%29%2C%20%5C%22Not%20in%20the%20game%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20require%28state.hasStarted%20%3D%3D%20false%20%7C%7C%20state.hasEnded%20%3D%3D%20true%2C%20%5C%22Cannot%20leave%20once%20started%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20tbg.playerInGames%5Bparticipant%5D.remove%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20state.players.remove%28participant%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Checks%20if%20the%20current%20turn%20in%20a%20game%20with%20the%20provided%20game%20ID%20has%20timed%20out.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60gameId%60%20must%20not%20be%20zero.%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20have%20started.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20A%20boolean%20indicating%20whether%20the%20current%20turn%20has%20timed%20out.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isTimeout%28uint256%20gameId%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20TBGStorageStruct%20storage%20tbg%20%3D%20TBGStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20assert%28gameId%20%21%3D%200%29%3B%5Cn%20%20%20%20%20%20%20%20assert%28state.hasStarted%20%3D%3D%20true%29%3B%5Cn%20%20%20%20%20%20%20%20uint32%20phase%20%3D%20tbg.instances%5BgameId%5D.state.phase%3B%5Cn%20%20%20%20%20%20%20%20if%20%28block.timestamp%20%3C%3D%20tbg.instances%5BgameId%5D.settings.turnPhaseDurations%5Bphase%5D%20%2B%20state.phaseStartedAt%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%5Cn%20%20%20%20%20%20%20%20return%20true%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Checks%20if%20a%20game%20with%20the%20provided%20game%20ID%20exists.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20A%20boolean%20indicating%20whether%20the%20game%20exists.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20gameExists%28uint256%20gameId%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20Settings%20storage%20settings%20%3D%20getSettings%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28settings.gameMaster%20%21%3D%20address%280%29%29%20return%20true%3B%5Cn%20%20%20%20%20%20%20%20return%20false%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Enforces%20that%20a%20game%20with%20the%20provided%20game%20ID%20has%20started.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60gameId%60%20must%20not%20be%20zero.%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20have%20started.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20enforceHasStarted%28uint256%20gameId%29%20internal%20view%20%7B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20assert%28gameId%20%21%3D%200%29%3B%5Cn%20%20%20%20%20%20%20%20require%28state.hasStarted%2C%20%5C%22Game%20has%20not%20yet%20started%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Enforces%20that%20a%20game%20with%20the%20provided%20game%20ID%20has%20started.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60gameId%60%20must%20not%20be%20zero.%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20have%20started.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20canTransitionPhase%28uint256%20gameId%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20bool%20timedOut%20%3D%20isTimeout%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28%21state.hasStarted%20%7C%7C%20isGameOver%28gameId%29%29%20return%20false%3B%5Cn%20%20%20%20%20%20%20%20if%20%28timedOut%29%20return%20true%3B%5Cn%20%20%20%20%20%20%20%20return%20false%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Checks%20if%20the%20current%20turn%20in%20a%20game%20with%20the%20provided%20game%20ID%20can%20end%20early.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20A%20boolean%20indicating%20whether%20the%20current%20turn%20can%20end%20early.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20canTransitionPhaseEarly%28uint256%20gameId%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28%21state.hasStarted%20%7C%7C%20isGameOver%28gameId%29%29%20return%20false%3B%5Cn%5Cn%20%20%20%20%20%20%20%20uint256%20activePlayersNotMoved%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20memory%20players%20%3D%20state.players.values%28%29%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20players.length%3B%20i%2B%2B%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28state.isActive%5Bplayers%5Bi%5D%5D%20%26%26%20%21state.madeMove%5Bplayers%5Bi%5D%5D%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20activePlayersNotMoved%2B%2B%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20activePlayersNotMoved%20%3D%3D%200%20%7C%7C%20canTransitionPhase%28gameId%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20modifier%20onlyWhenTurnCanEnd%28uint256%20gameId%29%20%7B%5Cn%20%20%20%20%20%20%20%20require%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20canTransitionPhase%28gameId%29%20%3D%3D%20true%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22onlyWhenTurnCanEnd%3A%20Not%20everyone%20made%20a%20move%20yet%20and%20there%20still%20is%20time%5C%22%5Cn%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20_%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Resets%20the%20states%20of%20the%20players%20in%20a%20game.%20%60State%60%20is%20the%20state.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Sets%20the%20madeMove%20and%20score%20of%20each%20player%20in%20%60game%60%20to%20their%20initial%20values.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_resetPlayerStates%28State%20storage%20state%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20state.players.length%28%29%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20address%20player%20%3D%20state.players.at%28i%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20state.madeMove%5Bplayer%5D%20%3D%20false%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20state.score%5Bplayer%5D%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Sets%20the%20score%20of%20a%20player%20in%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60player%60%20is%20the%20address%20of%20the%20player.%20%60value%60%20is%20the%20score.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60player%60%20must%20be%20in%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Sets%20the%20score%20of%20%60player%60%20in%20the%20game%20with%20%60gameId%60%20to%20%60value%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20setScore%28uint256%20gameId%2C%20address%20player%2C%20uint256%20value%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20require%28isPlayerInGame%28gameId%2C%20player%29%2C%20%5C%22player%20not%20in%20a%20game%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20state.score%5Bplayer%5D%20%3D%20value%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Gets%20the%20score%20of%20a%20player%20in%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60player%60%20is%20the%20address%20of%20the%20player.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20score%20of%20%60player%60%20in%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getScore%28uint256%20gameId%2C%20address%20player%29%20internal%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20return%20state.score%5Bplayer%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Gets%20the%20scores%20of%20the%20players%20in%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20An%20array%20of%20the%20addresses%20of%20the%20players%20in%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%20-%20An%20array%20of%20the%20scores%20of%20the%20players%20in%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getScores%28uint256%20gameId%29%20internal%20view%20returns%20%28address%5B%5D%20memory%2C%20uint256%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20memory%20players%20%3D%20getPlayers%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20uint256%5B%5D%20memory%20scores%20%3D%20new%20uint256%5B%5D%28players.length%29%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20players.length%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20scores%5Bi%5D%20%3D%20getScore%28gameId%2C%20players%5Bi%5D%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20%28players%2C%20scores%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Opens%20registration%20for%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20exist.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Sets%20the%20registrationOpenAt%20of%20the%20game%20with%20%60gameId%60%20to%20the%20current%20block%20timestamp.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20openRegistration%28uint256%20gameId%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20require%28gameExists%28gameId%29%2C%20%5C%22game%20not%20found%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20state.registrationOpenAt%20%3D%20block.timestamp%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Checks%20if%20registration%20is%20open%20for%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20A%20boolean%20indicating%20whether%20registration%20is%20open%20for%20the%20game.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isRegistrationOpen%28uint256%20gameId%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20TBGStorageStruct%20storage%20tbg%20%3D%20TBGStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28state.registrationOpenAt%20%3D%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20state.registrationOpenAt%20%3C%20block.timestamp%20%2B%20tbg.instances%5BgameId%5D.settings.timeToJoin%20%3F%20true%20%3A%20false%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Checks%20if%20a%20game%20with%20the%20provided%20game%20ID%20can%20start.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20A%20boolean%20indicating%20whether%20the%20game%20can%20start.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20canStart%28uint256%20gameId%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20TBGStorageStruct%20storage%20tbg%20%3D%20TBGStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28state.hasStarted%29%20return%20false%3B%5Cn%20%20%20%20%20%20%20%20if%20%28state.registrationOpenAt%20%3D%3D%200%29%20return%20false%3B%5Cn%20%20%20%20%20%20%20%20if%20%28gameId%20%3D%3D%200%29%20return%20false%3B%5Cn%20%20%20%20%20%20%20%20if%20%28block.timestamp%20%3C%3D%20state.registrationOpenAt%20%2B%20tbg.instances%5BgameId%5D.settings.timeToJoin%29%20return%20false%3B%5Cn%20%20%20%20%20%20%20%20if%20%28state.players.length%28%29%20%3C%20tbg.instances%5BgameId%5D.settings.minPlayerCnt%29%20return%20false%3B%5Cn%20%20%20%20%20%20%20%20return%20true%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20canStartByFull%28uint256%20gameId%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20canStart%28gameId%29%20%7C%7C%20isFull%28gameId%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Checks%20if%20a%20game%20with%20the%20provided%20game%20ID%20can%20start%20early.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%20By%20%5C%22early%5C%22%20it%20is%20assumed%20that%20time%20to%20join%20has%20not%20yet%20passed%2C%20but%20it%27s%20already%20cap%20players%20limit%20reached.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20A%20boolean%20indicating%20whether%20the%20game%20can%20start%20early.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isFull%28uint256%20gameId%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20TBGStorageStruct%20storage%20tbg%20%3D%20TBGStorage%28%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28%28state.players.length%28%29%20%3D%3D%20tbg.instances%5BgameId%5D.settings.maxPlayerCnt%29%29%20return%20true%3B%5Cn%20%20%20%20%20%20%20%20return%20false%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Internal%20function%20to%20perform%20common%20game%20start%20operations%5Cn%20%20%20%20%20%2A%20%40param%20gameId%20The%20ID%20of%20the%20game%20to%20start%5Cn%20%20%20%20%20%2A%20%40param%20state%20The%20game%20state%20storage%20reference%5Cn%20%20%20%20%20%2A%20%40param%20tbg%20The%20TBG%20storage%20reference%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_performGameStart%28uint256%20gameId%2C%20State%20storage%20state%2C%20TBGStorageStruct%20storage%20tbg%29%20private%20%7B%5Cn%20%20%20%20%20%20%20%20require%28state.hasStarted%20%3D%3D%20false%2C%20%5C%22startGame-%3Ealready%20started%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20require%28state.registrationOpenAt%20%21%3D%200%2C%20%5C%22startGame-%3EGame%20registration%20was%20not%20yet%20open%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20require%28gameId%20%21%3D%200%2C%20%5C%22startGame-%3EGame%20not%20found%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20require%28state.players.length%28%29%20%3E%3D%20tbg.instances%5BgameId%5D.settings.minPlayerCnt%2C%20%5C%22startGame-%3ENot%20enough%20players%5C%22%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20state.hasStarted%20%3D%20true%3B%5Cn%20%20%20%20%20%20%20%20state.hasEnded%20%3D%20false%3B%5Cn%20%20%20%20%20%20%20%20state.currentTurn%20%3D%201%3B%5Cn%20%20%20%20%20%20%20%20state.phaseStartedAt%20%3D%20block.timestamp%3B%5Cn%20%20%20%20%20%20%20%20state.phase%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20state.startedAt%20%3D%20block.timestamp%3B%5Cn%20%20%20%20%20%20%20%20state.leaderboard%20%3D%20new%20address%5B%5D%28state.players.length%28%29%29%3B%5Cn%20%20%20%20%20%20%20%20_resetPlayerStates%28state%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Initialize%20all%20players%20as%20active%5Cn%20%20%20%20%20%20%20%20uint256%20playerCount%20%3D%20state.players.length%28%29%3B%5Cn%20%20%20%20%20%20%20%20state.numActivePlayers%20%3D%20playerCount%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20playerCount%3B%20i%2B%2B%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20address%20player%20%3D%20state.players.at%28i%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20state.isActive%5Bplayer%5D%20%3D%20true%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20state.leaderboard%5Bi%5D%20%3D%20player%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Starts%20a%20game%20with%20the%20provided%20game%20ID%20early.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%20By%20%5C%22early%5C%22%20it%20is%20assumed%20that%20time%20to%20join%20has%20not%20yet%20passed%2C%20but%20it%27s%20already%20minimum%20players%20limit%20reached.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20exist.%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20not%20have%20started.%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20have%20opened%20registration.%5Cn%20%20%20%20%20%2A%20-%20The%20number%20of%20players%20in%20the%20game%20with%20%60gameId%60%20must%20be%20greater%20than%20or%20equal%20to%20the%20minimum%20number%20of%20players.%5Cn%20%20%20%20%20%2A%20-%20The%20number%20of%20players%20in%20the%20game%20with%20%60gameId%60%20must%20be%20equal%20to%20the%20maximum%20number%20of%20players%20or%20the%20current%20block%20timestamp%20must%20be%20greater%20than%20the%20registration%20open%20time%20plus%20the%20time%20to%20join.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Sets%20the%20hasStarted%2C%20hasEnded%2C%20currentTurn%2C%20and%20phaseStartedAt%20of%20the%20game%20with%20%60gameId%60%20to%20their%20new%20values.%5Cn%20%20%20%20%20%2A%20-%20Resets%20the%20states%20of%20the%20players%20in%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20startGameEarly%28uint256%20gameId%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20TBGStorageStruct%20storage%20tbg%20%3D%20TBGStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20_performGameStart%28gameId%2C%20state%2C%20tbg%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Starts%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20exist.%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20not%20have%20started.%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20have%20opened%20registration.%5Cn%20%20%20%20%20%2A%20-%20The%20current%20block%20timestamp%20must%20be%20greater%20than%20the%20registration%20open%20time%20plus%20the%20time%20to%20join.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Sets%20the%20hasStarted%2C%20hasEnded%2C%20currentTurn%2C%20and%20turnStartedAt%20of%20the%20game%20with%20%60gameId%60%20to%20their%20new%20values.%5Cn%20%20%20%20%20%2A%20-%20Resets%20the%20states%20of%20the%20players%20in%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20startGame%28uint256%20gameId%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20TBGStorageStruct%20storage%20tbg%20%3D%20TBGStorage%28%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20require%28canStartByFull%28gameId%29%2C%20%5C%22startGame-%3EStill%20Can%20Join%5C%22%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20_performGameStart%28gameId%2C%20state%2C%20tbg%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Gets%20the%20current%20turn%20of%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20current%20turn%20of%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getTurn%28uint256%20gameId%29%20internal%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20return%20state.currentTurn%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Gets%20the%20game%20master%20of%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20master%20of%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getGM%28uint256%20gameId%29%20internal%20view%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20Settings%20storage%20settings%20%3D%20getSettings%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20return%20settings.gameMaster%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Checks%20if%20the%20current%20turn%20is%20the%20last%20turn%20in%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20A%20boolean%20indicating%20whether%20the%20current%20turn%20is%20the%20last%20turn%20in%20the%20game.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isLastTurn%28uint256%20gameId%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20TBGStorageStruct%20storage%20tbg%20%3D%20TBGStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28state.currentTurn%20%3D%3D%20tbg.instances%5BgameId%5D.settings.maxTurns%29%20return%20true%3B%5Cn%20%20%20%20%20%20%20%20else%20return%20false%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Checks%20if%20a%20game%20with%20the%20provided%20game%20ID%20is%20over.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20A%20boolean%20indicating%20whether%20the%20game%20is%20over.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isGameOver%28uint256%20gameId%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20TBGStorageStruct%20storage%20tbg%20%3D%20TBGStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28%28state.currentTurn%20%3E%20tbg.instances%5BgameId%5D.settings.maxTurns%29%20%26%26%20%21state.isOvertime%29%20return%20true%3B%5Cn%20%20%20%20%20%20%20%20else%20return%20false%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Enforces%20that%20a%20game%20with%20the%20provided%20game%20ID%20is%20not%20over.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20not%20be%20over.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20enforceIsNotOver%28uint256%20gameId%29%20internal%20view%20%7B%5Cn%20%20%20%20%20%20%20%20require%28%21isGameOver%28gameId%29%2C%20%5C%22Game%20over%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Records%20a%20player%27s%20move%20in%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60player%60%20is%20the%20address%20of%20the%20player.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20have%20started.%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20not%20be%20over.%5Cn%20%20%20%20%20%2A%20-%20%60player%60%20must%20not%20have%20made%20a%20move%20in%20the%20current%20turn%20of%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%20-%20%60player%60%20must%20be%20in%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Sets%20the%20madeMove%20of%20%60player%60%20in%20the%20game%20with%20%60gameId%60%20to%20true.%5Cn%20%20%20%20%20%2A%20-%20Increments%20the%20numPlayersMadeMove%20of%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20playerMove%28uint256%20gameId%2C%20address%20player%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20enforceHasStarted%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20enforceIsNotOver%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20require%28state.madeMove%5Bplayer%5D%20%3D%3D%20false%2C%20%5C%22already%20made%20a%20move%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20TBGStorageStruct%20storage%20tbg%20%3D%20TBGStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20require%28tbg.playerInGames%5Bplayer%5D.contains%28gameId%29%2C%20%5C%22is%20not%20in%20the%20game%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20state.madeMove%5Bplayer%5D%20%3D%20true%3B%5Cn%20%20%20%20%20%20%20%20state.numPlayersMadeMove%20%2B%3D%201%3B%5Cn%20%20%20%20%20%20%20%20state.isActive%5Bplayer%5D%20%3D%20true%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20isPlayerTurnComplete%28uint256%20gameId%2C%20address%20player%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20return%20state.madeMove%5Bplayer%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Enforces%20that%20a%20player%20is%20in%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%20%60player%60%20is%20the%20address%20of%20the%20player.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20%60player%60%20must%20be%20in%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20enforceIsPlayingGame%28uint256%20gameId%2C%20address%20player%29%20internal%20view%20%7B%5Cn%20%20%20%20%20%20%20%20TBGStorageStruct%20storage%20tbg%20%3D%20TBGStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20require%28tbg.playerInGames%5Bplayer%5D.contains%28gameId%29%2C%20%5C%22is%20not%20in%20the%20game%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Checks%20if%20a%20game%20with%20the%20provided%20game%20ID%20has%20started.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20A%20boolean%20indicating%20whether%20the%20game%20has%20started.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20hasStarted%28uint256%20gameId%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20return%20state.hasStarted%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Gets%20the%20leaderboard%20of%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20An%20array%20of%20the%20addresses%20of%20the%20players%20in%20the%20game%20with%20%60gameId%60%2C%20sorted%20by%20score.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getLeaderBoard%28uint256%20gameId%29%20internal%20view%20returns%20%28address%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20return%20state.leaderboard%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Advances%20to%20the%20next%20turn%20in%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20be%20able%20to%20end%20the%20current%20turn%20early.%20%28all%20players%20have%20moved%20or%20the%20turn%20has%20timed%20out%29%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Clears%20the%20current%20moves%20in%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%20-%20Increments%20the%20currentTurn%20of%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%20-%20Sets%20the%20phaseStartedAt%20of%20the%20game%20with%20%60gameId%60%20to%20the%20current%20block%20timestamp.%5Cn%20%20%20%20%20%2A%20-%20If%20the%20current%20turn%20is%20the%20last%20turn%20or%20the%20game%20with%20%60gameId%60%20is%20in%20overtime%2C%20checks%20if%20the%20game%20is%20a%20tie%20and%20sets%20the%20isOvertime%20of%20the%20game%20with%20%60gameId%60%20to%20the%20result.%5Cn%20%20%20%20%20%2A%20-%20Sets%20the%20hasEnded%20of%20the%20game%20with%20%60gameId%60%20to%20whether%20the%20game%20is%20over.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20A%20boolean%20indicating%20whether%20the%20current%20turn%20is%20the%20last%20turn.%5Cn%20%20%20%20%20%2A%20-%20A%20boolean%20indicating%20whether%20the%20game%20is%20a%20tie.%5Cn%20%20%20%20%20%2A%20-%20A%20boolean%20indicating%20whether%20the%20game%20is%20over.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20next%28uint256%20gameId%29%20internal%20returns%20%28bool%2C%20bool%2C%20bool%2C%20bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20require%28canTransitionPhaseEarly%28gameId%29%2C%20%5C%22nextTurn-%3ECanEndEarly%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20Instance%20storage%20instance%20%3D%20_getInstance%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20instance.state%3B%5Cn%20%20%20%20%20%20%20%20bool%20wasLastTurn%20%3D%20isLastTurn%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20state.phaseStartedAt%20%3D%20block.timestamp%3B%5Cn%20%20%20%20%20%20%20%20state.phase%20%2B%3D%201%3B%5Cn%20%20%20%20%20%20%20%20bool%20_isLastTurn%20%3D%20false%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Update%20player%20activity%20status%20for%20next%20stage%5Cn%20%20%20%20%20%20%20%20uint256%20playerCount%20%3D%20state.players.length%28%29%3B%5Cn%20%20%20%20%20%20%20%20state.numActivePlayers%20%3D%200%3B%5Cn%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%20%3D%200%3B%20i%20%3C%20playerCount%3B%20i%2B%2B%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20address%20player%20%3D%20state.players.at%28i%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20player%20didn%27t%20make%20a%20move%20this%20turn%2C%20mark%20them%20as%20inactive%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21state.madeMove%5Bplayer%5D%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20console.log%28%27LibTBG%3A%3AnextTurn%20-%20%27%2C%27player%20inactive%21%27%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20state.isActive%5Bplayer%5D%20%3D%20false%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20console.log%28%27LibTBG%3A%3AnextTurn%20-%20%27%2C%27player%20active%21%27%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20state.numActivePlayers%2B%2B%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20state.madeMove%5Bplayer%5D%20%3D%20false%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20state.numPlayersMadeMove%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20if%20%28state.phase%20%3D%3D%20instance.settings.turnPhaseDurations.length%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20state.phase%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20state.currentTurn%20%2B%3D%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_isLastTurn%20%3D%20isLastTurn%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28wasLastTurn%20%7C%7C%20state.isOvertime%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bool%20_isTie%20%3D%20isTie%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20state.isOvertime%20%3D%20_isTie%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20state.hasEnded%20%3D%20isGameOver%28gameId%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%28state.leaderboard%2C%20%29%20%3D%20sortByScore%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20return%20%28_isLastTurn%2C%20wasLastTurn%2C%20state.isOvertime%2C%20state.hasEnded%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Gets%20the%20data%20storage%20pointer.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20data%20storage%20pointer.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getDataStorage%28%29%20internal%20pure%20returns%20%28bytes32%20pointer%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20IMPLEMENTATION_STORAGE_POSITION%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Gets%20the%20game%20data%20storage%20pointer%20of%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20data%20storage%20pointer%20of%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getGameDataStorage%28uint256%20gameId%29%20internal%20view%20returns%20%28bytes32%20pointer%29%20%7B%5Cn%20%20%20%20%20%20%20%20Settings%20storage%20settings%20%3D%20getSettings%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20return%20settings.implementationStoragePointer%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Gets%20the%20number%20of%20players%20in%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20number%20of%20players%20in%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getPlayersNumber%28uint256%20gameId%29%20internal%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20return%20state.players.length%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Gets%20the%20players%20in%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20An%20array%20of%20the%20addresses%20of%20the%20players%20in%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getPlayers%28uint256%20gameId%29%20internal%20view%20returns%20%28address%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20return%20state.players.values%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Gets%20the%20game%20settings.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20settings.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getSettings%28uint256%20gameId%29%20internal%20view%20returns%20%28Settings%20storage%29%20%7B%5Cn%20%20%20%20%20%20%20%20TBGStorageStruct%20storage%20tbg%20%3D%20TBGStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20tbg.instances%5BgameId%5D.settings%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Enforces%20that%20a%20game%20with%20the%20provided%20game%20ID%20is%20in%20the%20pre-registration%20stage.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Registration%20must%20not%20be%20open%20for%20the%20game%20with%20%60gameId%60.%5Cn%20%20%20%20%20%2A%20-%20The%20game%20with%20%60gameId%60%20must%20not%20have%20started.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20enforceIsPreRegistrationStage%28uint256%20gameId%29%20internal%20view%20%7B%5Cn%20%20%20%20%20%20%20%20require%28%21isRegistrationOpen%28gameId%29%2C%20%5C%22Cannot%20do%20when%20registration%20is%20open%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20require%28%21hasStarted%28gameId%29%2C%20%5C%22Cannot%20do%20when%20game%20started%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Adds%20overtime%20to%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Sets%20the%20isOvertime%20of%20the%20game%20with%20%60gameId%60%20to%20true.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20addOvertime%28uint256%20gameId%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20state.isOvertime%20%3D%20true%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Checks%20if%20a%20game%20with%20the%20provided%20game%20ID%20is%20in%20overtime.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20A%20boolean%20indicating%20whether%20the%20game%20is%20in%20overtime.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isOvertime%28uint256%20gameId%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20return%20state.isOvertime%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Resets%20the%20overtime%20of%20a%20game%20with%20the%20provided%20game%20ID.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Sets%20the%20isOvertime%20of%20the%20game%20with%20%60gameId%60%20to%20false.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20resetOvertime%28uint256%20gameId%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20state.isOvertime%20%3D%20false%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Checks%20if%20a%20game%20with%20the%20provided%20game%20ID%20is%20a%20tie.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%20Tie%20being%20defined%20as%20at%20least%20two%20of%20the%20top%20%60numWinners%3D1%60%20players%20having%20the%20same%20score.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20A%20boolean%20indicating%20whether%20the%20game%20is%20a%20tie.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20isTie%28uint256%20gameId%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20%28%2C%20uint256%5B%5D%20memory%20scores%29%20%3D%20getScores%28gameId%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20LibArray.quickSort%28scores%2C%20int256%280%29%2C%20int256%28scores.length%20-%201%29%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28scores%5B0%5D%20%3D%3D%20scores%5B1%5D%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28true%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20return%20%28false%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Gets%20the%20game%20ID%20of%20the%20game%20a%20player%20is%20in.%20%60player%60%20is%20the%20address%20of%20the%20player.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20The%20game%20ID%20of%20the%20game%20%60player%60%20is%20in.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20getPlayersGames%28address%20player%29%20internal%20view%20returns%20%28uint256%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20TBGStorageStruct%20storage%20tbg%20%3D%20TBGStorage%28%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20return%20tbg.playerInGames%5Bplayer%5D.values%28%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Sorts%20the%20players%20and%20scores%20arrays%20in%20descending%20order%20of%20scores%20using%20the%20quicksort%20algorithm.%20%60players%60%20is%20the%20array%20of%20player%20addresses.%20%60scores%60%20is%20the%20array%20of%20scores.%20%60left%60%20is%20the%20left%20index.%20%60right%60%20is%20the%20right%20index.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Modifies%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20Sorts%20the%20%60players%60%20and%20%60scores%60%20arrays%20in%20place.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_quickSort%28address%5B%5D%20memory%20players%2C%20uint256%5B%5D%20memory%20scores%2C%20int256%20left%2C%20int256%20right%29%20private%20view%20%7B%5Cn%20%20%20%20%20%20%20%20int256%20i%20%3D%20left%3B%5Cn%20%20%20%20%20%20%20%20int256%20j%20%3D%20right%3B%5Cn%20%20%20%20%20%20%20%20if%20%28i%20%3D%3D%20j%29%20return%3B%5Cn%20%20%20%20%20%20%20%20uint256%20pivot%20%3D%20scores%5Buint256%28left%20%2B%20%28right%20-%20left%29%20%2F%202%29%5D%3B%5Cn%20%20%20%20%20%20%20%20while%20%28i%20%3C%3D%20j%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20while%20%28scores%5Buint256%28i%29%5D%20%3E%20pivot%29%20%2B%2Bi%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20while%20%28pivot%20%3E%20scores%5Buint256%28j%29%5D%29%20j--%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28i%20%3C%3D%20j%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28scores%5Buint256%28i%29%5D%2C%20scores%5Buint256%28j%29%5D%29%20%3D%20%28scores%5Buint256%28j%29%5D%2C%20scores%5Buint256%28i%29%5D%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28players%5Buint256%28i%29%5D%2C%20players%5Buint256%28j%29%5D%29%20%3D%20%28players%5Buint256%28j%29%5D%2C%20players%5Buint256%28i%29%5D%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2B%2Bi%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20j--%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20%28left%20%3C%20j%29%20_quickSort%28players%2C%20scores%2C%20left%2C%20j%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28i%20%3C%20right%29%20_quickSort%28players%2C%20scores%2C%20i%2C%20right%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Sorts%20the%20players%20in%20a%20game%20with%20the%20provided%20game%20ID%20by%20score%20in%20descending%20order.%20%60gameId%60%20is%20the%20ID%20of%20the%20game.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Returns%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20An%20array%20of%20the%20addresses%20of%20the%20players%20in%20the%20game%20with%20%60gameId%60%2C%20sorted%20by%20score.%5Cn%20%20%20%20%20%2A%20-%20An%20array%20of%20the%20scores%20of%20the%20players%20in%20the%20game%20with%20%60gameId%60%2C%20sorted%20in%20descending%20order.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20sortByScore%28uint256%20gameId%29%20internal%20view%20returns%20%28address%5B%5D%20memory%2C%20uint256%5B%5D%20memory%29%20%7B%5Cn%20%20%20%20%20%20%20%20%28address%5B%5D%20memory%20players%2C%20uint256%5B%5D%20memory%20scores%29%20%3D%20getScores%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28players.length%20%3D%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%28players%2C%20scores%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20_quickSort%28players%2C%20scores%2C%200%2C%20int256%28scores.length%20-%201%29%29%3B%5Cn%20%20%20%20%20%20%20%20return%20%28players%2C%20scores%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20isActive%28uint256%20gameId%2C%20address%20player%29%20internal%20view%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20return%20state.isActive%5Bplayer%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20getPhaseDuration%28uint256%20gameId%29%20internal%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20Settings%20storage%20settings%20%3D%20getSettings%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20return%20settings.turnPhaseDurations%5BgetPhase%28gameId%29%5D%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20getPhase%28uint256%20gameId%29%20internal%20view%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20State%20storage%20state%20%3D%20_getState%28gameId%29%3B%5Cn%20%20%20%20%20%20%20%20return%20state.phase%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Fmodifiers%2FOnlyOwnerDiamond.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cnimport%20%5C%22..%2Fvendor%2Fdiamond%2Flibraries%2FLibDiamond.sol%5C%22%3B%5Cn%5Cn%2F%2F%20import%20%5C%22.%2Finterfaces%2FIERC173.sol%5C%22%3B%5Cn%5Cncontract%20OnlyOwnerDiamond%20%7B%5Cn%20%20%20%20modifier%20onlyOwner%28%29%20%7B%5Cn%20%20%20%20%20%20%20%20LibDiamond.enforceIsContractOwner%28%29%3B%5Cn%20%20%20%20%20%20%20%20_%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Ftokens%2FDistributableGovernanceERC20.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20AGPL-3.0-or-later%5Cn%5Cnpragma%20solidity%20%3D0.8.28%3B%5Cn%5Cn%2F%2F%20import%20%5C%22%40openzeppelin%2Fcontracts-upgradeable%2Ftoken%2FERC20%2Fextensions%2FERC20PermitUpgradeable.sol%5C%22%3B%5Cnimport%20%5C%22%40openzeppelin%2Fcontracts-upgradeable%2Ftoken%2FERC20%2FERC20Upgradeable.sol%5C%22%3B%5Cn%2F%2F%20import%20%7BIERC20MetadataUpgradeable%7D%20from%20%5C%22%40openzeppelin%2Fcontracts-upgradeable%2Ftoken%2FERC20%2Fextensions%2FERC20MetadataUpgradeable.sol%5C%22%5Cnimport%20%7BIERC20Metadata%7D%20from%20%5C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC20%2Fextensions%2FIERC20Metadata.sol%5C%22%3B%5Cnimport%20%7BERC20VotesUpgradeable%7D%20from%20%5C%22%40openzeppelin%2Fcontracts-upgradeable%2Ftoken%2FERC20%2Fextensions%2FERC20VotesUpgradeable.sol%5C%22%3B%5Cnimport%20%7BInitializable%7D%20from%20%5C%22%40openzeppelin%2Fcontracts-upgradeable%2Fproxy%2Futils%2FInitializable.sol%5C%22%3B%5Cnimport%20%7BERC165Upgradeable%7D%20from%20%5C%22%40openzeppelin%2Fcontracts-upgradeable%2Futils%2Fintrospection%2FERC165Upgradeable.sol%5C%22%3B%5Cnimport%20%5C%22%40openzeppelin%2Fcontracts-upgradeable%2Fgovernance%2Futils%2FVotesUpgradeable.sol%5C%22%3B%5Cnimport%20%5C%22%40peeramid-labs%2Feds%2Fsrc%2Fabstracts%2FERC7746Middleware.sol%5C%22%3B%5Cnimport%20%5C%22%40peeramid-labs%2Feds%2Fsrc%2Flibraries%2FLibMiddleware.sol%5C%22%3B%5Cnimport%20%5C%22%40openzeppelin%2Fcontracts-upgradeable%2Futils%2FReentrancyGuardUpgradeable.sol%5C%22%3B%5Cn%5Cn%2F%2F%2F%20%40notice%20The%20settings%20for%20the%20initial%20mint%20of%20the%20token.%5Cn%2F%2F%2F%20%40param%20receivers%20The%20receivers%20of%20the%20tokens.%5Cn%2F%2F%2F%20%40param%20amounts%20The%20amounts%20of%20tokens%20to%20be%20minted%20for%20each%20receiver.%5Cn%2F%2F%2F%20%40dev%20The%20lengths%20of%20%60receivers%60%20and%20%60amounts%60%20must%20match.%5Cnstruct%20MintSettings%20%7B%5Cn%20%20%20%20address%5B%5D%20receivers%3B%5Cn%20%20%20%20uint256%5B%5D%20amounts%3B%5Cn%7D%5Cn%5Cn%2F%2F%2F%20%40title%20IERC20MintableUpgradeable%5Cn%2F%2F%2F%20%40notice%20Interface%20to%20allow%20minting%20of%20%5BERC-20%5D%28https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-20%29%20tokens.%5Cninterface%20IERC20MintableUpgradeable%20%7B%5Cn%20%20%20%20%2F%2F%2F%20%40notice%20Mints%20%5BERC-20%5D%28https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-20%29%20tokens%20for%20a%20receiving%20address.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20_to%20The%20receiving%20address.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20_amount%20The%20amount%20of%20tokens.%5Cn%20%20%20%20function%20mint%28address%20_to%2C%20uint256%20_amount%29%20external%3B%5Cn%7D%5Cn%5Cn%2F%2F%2F%20%40title%20DistributableGovernanceERC20%5Cn%2F%2F%2F%20%40author%20Peeramid%20Labs%2C%20adapted%20version%20from%20Aragon%20Association%5Cn%2F%2F%2F%20%40notice%20An%20%5BOpenZeppelin%20%60Votes%60%5D%28https%3A%2F%2Fdocs.openzeppelin.com%2Fcontracts%2F4.x%2Fapi%2Fgovernance%23Votes%29%20compatible%20%5BERC-20%5D%28https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-20%29%20token%20that%20can%20be%20used%20for%20voting%20and%20is%20managed%20by%20a%20DAO.%5Cncontract%20DistributableGovernanceERC20%20is%5Cn%20%20%20%20IERC20MintableUpgradeable%2C%5Cn%20%20%20%20Initializable%2C%5Cn%20%20%20%20ERC165Upgradeable%2C%5Cn%20%20%20%20ERC20VotesUpgradeable%2C%5Cn%20%20%20%20ERC7746Middleware%2C%5Cn%20%20%20%20ReentrancyGuardUpgradeable%5Cn%7B%5Cn%20%20%20%20%2F%2F%2F%20%40notice%20Thrown%20if%20the%20number%20of%20receivers%20and%20amounts%20specified%20in%20the%20mint%20settings%20do%20not%20match.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20receiversArrayLength%20The%20length%20of%20the%20%60receivers%60%20array.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20amountsArrayLength%20The%20length%20of%20the%20%60amounts%60%20array.%5Cn%20%20%20%20error%20MintSettingsArrayLengthMismatch%28uint256%20receiversArrayLength%2C%20uint256%20amountsArrayLength%29%3B%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40notice%20Calls%20the%20initialize%20function.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20_name%20The%20name%20of%20the%20%5BERC-20%5D%28https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-20%29%20governance%20token.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20_symbol%20The%20symbol%20of%20the%20%5BERC-20%5D%28https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-20%29%20governance%20token.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20_mintSettings%20The%20token%20mint%20settings%20struct%20containing%20the%20%60receivers%60%20and%20%60amounts%60.%5Cn%20%20%20%20constructor%28string%20memory%20_name%2C%20string%20memory%20_symbol%2C%20MintSettings%20memory%20_mintSettings%2C%20address%20_accessManager%29%20%7B%5Cn%20%20%20%20%20%20%20%20initialize%28_name%2C%20_symbol%2C%20_mintSettings%2C%20_accessManager%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40notice%20Initializes%20the%20contract%20and%20mints%20tokens%20to%20a%20list%20of%20receivers.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20_name%20The%20name%20of%20the%20%5BERC-20%5D%28https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-20%29%20governance%20token.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20_symbol%20The%20symbol%20of%20the%20%5BERC-20%5D%28https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-20%29%20governance%20token.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20_mintSettings%20The%20token%20mint%20settings%20struct%20containing%20the%20%60receivers%60%20and%20%60amounts%60.%5Cn%20%20%20%20function%20initialize%28%5Cn%20%20%20%20%20%20%20%20string%20memory%20_name%2C%5Cn%20%20%20%20%20%20%20%20string%20memory%20_symbol%2C%5Cn%20%20%20%20%20%20%20%20MintSettings%20memory%20_mintSettings%2C%5Cn%20%20%20%20%20%20%20%20address%20accessManager%5Cn%20%20%20%20%29%20public%20initializer%20%7B%5Cn%20%20%20%20%20%20%20%20LibMiddleware.LayerStruct%5B%5D%20memory%20layers%20%3D%20new%20LibMiddleware.LayerStruct%5B%5D%281%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Set%20the%20layer%20for%20the%20sender%5Cn%20%20%20%20%20%20%20%20layers%5B0%5D%20%3D%20LibMiddleware.LayerStruct%28%7BlayerAddess%3A%20accessManager%2C%20layerConfigData%3A%20%5C%22%5C%22%7D%29%3B%5Cn%20%20%20%20%20%20%20%20LibMiddleware.setLayers%28layers%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Check%20mint%20settings%5Cn%20%20%20%20%20%20%20%20if%20%28_mintSettings.receivers.length%20%21%3D%20_mintSettings.amounts.length%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20revert%20MintSettingsArrayLengthMismatch%28%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20receiversArrayLength%3A%20_mintSettings.receivers.length%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20amountsArrayLength%3A%20_mintSettings.amounts.length%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20__ERC20_init%28_name%2C%20_symbol%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%3B%20i%20%3C%20_mintSettings.receivers.length%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_mint%28_mintSettings.receivers%5Bi%5D%2C%20_mintSettings.amounts%5Bi%5D%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40notice%20Checks%20if%20this%20or%20the%20parent%20contract%20supports%20an%20interface%20by%20its%20ID.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20interfaceId%20The%20ID%20of%20the%20interface.%5Cn%20%20%20%20%2F%2F%2F%20%40return%20Returns%20%60true%60%20if%20the%20interface%20is%20supported.%5Cn%20%20%20%20function%20supportsInterface%28bytes4%20interfaceId%29%20public%20view%20virtual%20override%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%5Cn%20%20%20%20%20%20%20%20%20%20%20%20interfaceId%20%3D%3D%20type%28ERC20Upgradeable%29.interfaceId%20%7C%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20interfaceId%20%3D%3D%20type%28ERC20PermitUpgradeable%29.interfaceId%20%7C%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20interfaceId%20%3D%3D%20type%28IERC20Metadata%29.interfaceId%20%7C%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20interfaceId%20%3D%3D%20type%28VotesUpgradeable%29.interfaceId%20%7C%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20interfaceId%20%3D%3D%20type%28IERC20MintableUpgradeable%29.interfaceId%20%7C%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20super.supportsInterface%28interfaceId%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40notice%20Mints%20tokens%20to%20an%20address.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20to%20The%20address%20receiving%20the%20tokens.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20amount%20The%20amount%20of%20tokens%20to%20be%20minted.%5Cn%20%20%20%20function%20mint%28%5Cn%20%20%20%20%20%20%20%20address%20to%2C%5Cn%20%20%20%20%20%20%20%20uint256%20amount%5Cn%20%20%20%20%29%20external%20override%20nonReentrant%20ERC7746C%28msg.sig%2C%20msg.sender%2C%20msg.data%2C%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20_mint%28to%2C%20amount%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%20https%3A%2F%2Fforum.openzeppelin.com%2Ft%2Fself-delegation-in-erc20votes%2F17501%2F12%3Fu%3Dnovaknole%5Cn%20%20%20%20%2F%2F%2F%20%40inheritdoc%20ERC20VotesUpgradeable%5Cn%20%20%20%20function%20_update%28address%20from%2C%20address%20to%2C%20uint256%20amount%29%20internal%20override%20%7B%5Cn%20%20%20%20%20%20%20%20super._update%28from%2C%20to%2C%20amount%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Automatically%20turn%20on%20delegation%20on%20mint%2Ftransfer%20but%20only%20for%20the%20first%20time.%5Cn%20%20%20%20%20%20%20%20if%20%28to%20%21%3D%20address%280%29%20%26%26%20numCheckpoints%28to%29%20%3D%3D%200%20%26%26%20delegates%28to%29%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20_delegate%28to%2C%20to%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Ftokens%2FRankify.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.28%3B%5Cn%5Cnimport%20%5C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC20%2Fextensions%2FERC20Votes.sol%5C%22%3B%5Cnimport%20%5C%22%40openzeppelin%2Fcontracts%2Ftoken%2FERC20%2Fextensions%2FERC20Capped.sol%5C%22%3B%5Cnimport%20%5C%22%40openzeppelin%2Fcontracts%2Futils%2Fcryptography%2FEIP712.sol%5C%22%3B%5Cnimport%20%5C%22%40openzeppelin%2Fcontracts%2Faccess%2FOwnable.sol%5C%22%3B%5Cn%5Cncontract%20Rankify%20is%20ERC20Votes%2C%20Ownable%20%7B%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Total%20supply%20cap%20has%20been%20exceeded.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC20ExceededCap%28uint256%20increasedSupply%2C%20uint256%20cap%29%3B%5Cn%5Cn%20%20%20%20uint256%20private%20immutable%20_cap%3B%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20The%20supplied%20cap%20is%20not%20a%20valid%20cap.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20error%20ERC20InvalidCap%28uint256%20cap%29%3B%5Cn%5Cn%20%20%20%20constructor%28address%20owner%29%20ERC20%28%5C%22Rankify%5C%22%2C%20%5C%22RFY%5C%22%29%20EIP712%28%5C%22RankifyToken%5C%22%2C%20%5C%220.12.0%5C%22%29%20Ownable%28owner%29%20%7B%5Cn%20%20%20%20%20%20%20%20_cap%20%3D%2010%20%2A%2A%2018%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20mint%28address%20to%2C%20uint256%20amount%29%20public%20onlyOwner%20%7B%5Cn%20%20%20%20%20%20%20%20_mint%28to%2C%20amount%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20decimals%28%29%20public%20view%20virtual%20override%20returns%20%28uint8%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%209%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Returns%20the%20cap%20on%20the%20token%27s%20total%20supply.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20cap%28%29%20public%20view%20virtual%20returns%20%28uint256%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20_cap%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20See%20%7BERC20-_update%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20_update%28address%20from%2C%20address%20to%2C%20uint256%20value%29%20internal%20virtual%20override%20%7B%5Cn%20%20%20%20%20%20%20%20super._update%28from%2C%20to%2C%20value%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20%28from%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20maxSupply%20%3D%20cap%28%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20supply%20%3D%20totalSupply%28%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28supply%20%3E%20maxSupply%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20ERC20ExceededCap%28supply%2C%20maxSupply%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Destroys%20a%20%60value%60%20amount%20of%20tokens%20from%20the%20caller.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20See%20%7BERC20-_burn%7D.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20burn%28uint256%20value%29%20public%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20_burn%28_msgSender%28%29%2C%20value%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2A%2A%5Cn%20%20%20%20%20%2A%20%40dev%20Destroys%20a%20%60value%60%20amount%20of%20tokens%20from%20%60account%60%2C%20deducting%20from%5Cn%20%20%20%20%20%2A%20the%20caller%27s%20allowance.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20See%20%7BERC20-_burn%7D%20and%20%7BERC20-allowance%7D.%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20Requirements%3A%5Cn%20%20%20%20%20%2A%5Cn%20%20%20%20%20%2A%20-%20the%20caller%20must%20have%20allowance%20for%20%60%60accounts%60%60%27s%20tokens%20of%20at%20least%5Cn%20%20%20%20%20%2A%20%60value%60.%5Cn%20%20%20%20%20%2A%2F%5Cn%20%20%20%20function%20burnFrom%28address%20account%2C%20uint256%20value%29%20public%20virtual%20%7B%5Cn%20%20%20%20%20%20%20%20_spendAllowance%28account%2C%20_msgSender%28%29%2C%20value%29%3B%5Cn%20%20%20%20%20%20%20%20_burn%28account%2C%20value%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Fvendor%2Fdiamond%2FDiamondClonable.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.0%3B%5Cn%5Cn%2F%2F%20Adapted%20from%20the%20Diamond%203%20reference%20implementation%20by%20Nick%20Mudge%3A%5Cn%2F%2F%20https%3A%2F%2Fgithub.com%2Fmudgen%2Fdiamond-3-hardhat%5Cn%5Cnimport%20%7BLibDiamond%7D%20from%20%5C%22.%2Flibraries%2FLibDiamond.sol%5C%22%3B%5Cnimport%20%7BIDiamondCut%7D%20from%20%5C%22.%2Finterfaces%2FIDiamondCut.sol%5C%22%3B%5Cn%5Cn%2F%2A%2A%5Cn%20%2A%20%40title%20DiamondClonable%5Cn%20%2A%20%40notice%20A%20modified%20Diamond%20implementation%20that%20supports%20cloning%20for%20efficient%20proxy%20deployment%5Cn%20%2A%20%40dev%20Extends%20the%20Diamond%20pattern%20to%20allow%20the%20contract%20to%20be%20cloned%2C%20reducing%20gas%20costs%5Cn%20%2A%20%20%20%20%20%20for%20deploying%20multiple%20instances.%20Includes%20core%20Diamond%20functionality%20like%20cut%20operations%5Cn%20%2A%20%20%20%20%20%20and%20function%20delegation.%5Cn%20%2A%20%40author%20Adapted%20from%20Nick%20Mudge%27s%20Diamond%20implementation%20by%20Peeramid%20Labs%2C%202024%5Cn%20%2A%2F%5Cncontract%20DiamondClonable%20%7B%5Cn%20%20%20%20error%20functionDoesNotExist%28bytes4%20selector%29%3B%5Cn%20%20%20%20address%20private%20immutable%20cutFacet%3B%5Cn%5Cn%20%20%20%20constructor%28address%20_contractOwner%2C%20address%20_diamondCutFacet%29%20payable%20%7B%5Cn%20%20%20%20%20%20%20%20cutFacet%20%3D%20_diamondCutFacet%3B%5Cn%20%20%20%20%20%20%20%20addDiamondCutFacet%28_contractOwner%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20addDiamondCutFacet%28address%20_contractOwner%29%20private%20%7B%5Cn%20%20%20%20%20%20%20%20LibDiamond.setContractOwner%28_contractOwner%29%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Add%20the%20diamondCut%20external%20function%20from%20the%20diamondCutFacet%5Cn%20%20%20%20%20%20%20%20IDiamondCut.FacetCut%5B%5D%20memory%20cut%20%3D%20new%20IDiamondCut.FacetCut%5B%5D%281%29%3B%5Cn%20%20%20%20%20%20%20%20bytes4%5B%5D%20memory%20functionSelectors%20%3D%20new%20bytes4%5B%5D%281%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20functionSelectors%5B0%5D%20%3D%20IDiamondCut.diamondCut.selector%3B%5Cn%20%20%20%20%20%20%20%20cut%5B0%5D%20%3D%20IDiamondCut.FacetCut%28%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20facetAddress%3A%20cutFacet%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20action%3A%20IDiamondCut.FacetCutAction.Add%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20functionSelectors%3A%20functionSelectors%5Cn%20%20%20%20%20%20%20%20%7D%29%3B%5Cn%20%20%20%20%20%20%20%20LibDiamond.diamondCut%28cut%2C%20address%280%29%2C%20%5C%22%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%20Find%20facet%20for%20function%20that%20is%20called%20and%20execute%20the%5Cn%20%20%20%20%2F%2F%20function%20if%20a%20facet%20is%20found%20and%20return%20any%20value.%5Cn%20%20%20%20fallback%28%29%20external%20payable%20%7B%5Cn%20%20%20%20%20%20%20%20LibDiamond.DiamondStorage%20storage%20ds%3B%5Cn%20%20%20%20%20%20%20%20bytes32%20position%20%3D%20LibDiamond.DIAMOND_STORAGE_POSITION%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20get%20diamond%20storage%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20ds.slot%20%3A%3D%20position%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%2F%2F%20get%20facet%20from%20function%20selector%5Cn%20%20%20%20%20%20%20%20address%20facet%20%3D%20ds.selectorToFacetAndPosition%5Bmsg.sig%5D.facetAddress%3B%5Cn%20%20%20%20%20%20%20%20if%20%28facet%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28msg.sig%20%3D%3D%20IDiamondCut.diamondCut.selector%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28IDiamondCut.FacetCut%5B%5D%20memory%20facets%2C%20address%20target%2C%20bytes%20memory%20data%29%20%3D%20abi.decode%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20msg.data%5B4%3A%5D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28IDiamondCut.FacetCut%5B%5D%2C%20address%2C%20bytes%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20diamond%20was%20cloned%2C%20has%20no%20state%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Owner%20is%20inferred%20from%20msg.sender%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20addDiamondCutFacet%28msg.sender%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20LibDiamond.diamondCut%28facets%2C%20target%2C%20data%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%20functionDoesNotExist%28msg.sig%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Execute%20external%20function%20from%20facet%20using%20delegatecall%20and%20return%20any%20value.%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20copy%20function%20selector%20and%20any%20arguments%5Cn%20%20%20%20%20%20%20%20%20%20%20%20calldatacopy%280%2C%200%2C%20calldatasize%28%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20execute%20function%20call%20using%20the%20facet%5Cn%20%20%20%20%20%20%20%20%20%20%20%20let%20result%20%3A%3D%20delegatecall%28gas%28%29%2C%20facet%2C%200%2C%20calldatasize%28%29%2C%200%2C%200%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20get%20any%20return%20value%5Cn%20%20%20%20%20%20%20%20%20%20%20%20returndatacopy%280%2C%200%2C%20returndatasize%28%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20return%20any%20return%20value%20or%20error%20back%20to%20the%20caller%5Cn%20%20%20%20%20%20%20%20%20%20%20%20switch%20result%5Cn%20%20%20%20%20%20%20%20%20%20%20%20case%200%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%280%2C%20returndatasize%28%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20default%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%280%2C%20returndatasize%28%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20receive%28%29%20external%20payable%20%7B%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Fvendor%2Fdiamond%2Ffacets%2FDiamondCutFacet.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%5C%5C%5Cn%2A%20Author%3A%20Nick%20Mudge%20%3Cnick%40perfectabstractions.com%3E%20%28https%3A%2F%2Ftwitter.com%2Fmudgen%29%5Cn%2A%20EIP-2535%20Diamond%20Standard%3A%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-2535%5Cn%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%5Cn%5Cnimport%20%5C%22..%2Finterfaces%2FIDiamondCut.sol%5C%22%3B%5Cnimport%20%5C%22..%2Flibraries%2FLibDiamond.sol%5C%22%3B%5Cn%5Cncontract%20DiamondCutFacet%20is%20IDiamondCut%20%7B%5Cn%20%20%20%20%2F%2F%2F%20%40notice%20Add%2Freplace%2Fremove%20any%20number%20of%20functions%20and%20optionally%20execute%5Cn%20%20%20%20%2F%2F%2F%20%20%20%20%20%20%20%20%20a%20function%20with%20delegatecall%5Cn%20%20%20%20%2F%2F%2F%20%40param%20_diamondCut%20Contains%20the%20facet%20addresses%20and%20function%20selectors%5Cn%20%20%20%20%2F%2F%2F%20%40param%20_init%20The%20address%20of%20the%20contract%20or%20facet%20to%20execute%20_calldata%5Cn%20%20%20%20%2F%2F%2F%20%40param%20_calldata%20A%20function%20call%2C%20including%20function%20selector%20and%20arguments%5Cn%20%20%20%20%2F%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_calldata%20is%20executed%20with%20delegatecall%20on%20_init%5Cn%20%20%20%20function%20diamondCut%28FacetCut%5B%5D%20calldata%20_diamondCut%2C%20address%20_init%2C%20bytes%20memory%20_calldata%29%20external%20override%20%7B%5Cn%20%20%20%20%20%20%20%20LibDiamond.enforceIsContractOwner%28%29%3B%5Cn%20%20%20%20%20%20%20%20LibDiamond.diamondCut%28_diamondCut%2C%20_init%2C%20_calldata%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Fvendor%2Fdiamond%2Ffacets%2FDiamondLoupeFacet.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.28%3B%5Cn%5Cn%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%5C%5C%5Cn%2A%20Author%3A%20Nick%20Mudge%20%3Cnick%40perfectabstractions.com%3E%20%28https%3A%2F%2Ftwitter.com%2Fmudgen%29%5Cn%2A%20EIP-2535%20Diamond%20Standard%3A%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-2535%5Cn%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%5Cn%5Cnimport%20%5C%22..%2Flibraries%2FLibDiamond.sol%5C%22%3B%5Cnimport%20%5C%22..%2Finterfaces%2FIDiamondLoupe.sol%5C%22%3B%5Cnimport%20%5C%22..%2Finterfaces%2FIERC165.sol%5C%22%3B%5Cn%5Cncontract%20DiamondLoupeFacet%20is%20IDiamondLoupe%2C%20IERC165%20%7B%5Cn%20%20%20%20%2F%2F%20Diamond%20Loupe%20Functions%5Cn%20%20%20%20%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%5Cn%20%20%20%20%2F%2F%2F%20These%20functions%20are%20expected%20to%20be%20called%20frequently%20by%20tools.%5Cn%20%20%20%20%2F%2F%5Cn%20%20%20%20%2F%2F%20struct%20Facet%20%7B%5Cn%20%20%20%20%2F%2F%20%20%20%20%20address%20facetAddress%3B%5Cn%20%20%20%20%2F%2F%20%20%20%20%20bytes4%5B%5D%20functionSelectors%3B%5Cn%20%20%20%20%2F%2F%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40notice%20Gets%20all%20facets%20and%20their%20selectors.%5Cn%20%20%20%20%2F%2F%2F%20%40return%20facets_%20Facet%5Cn%20%20%20%20function%20facets%28%29%20external%20view%20override%20returns%20%28Facet%5B%5D%20memory%20facets_%29%20%7B%5Cn%20%20%20%20%20%20%20%20LibDiamond.DiamondStorage%20storage%20ds%20%3D%20LibDiamond.diamondStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20uint256%20numFacets%20%3D%20ds.facetAddresses.length%3B%5Cn%20%20%20%20%20%20%20%20facets_%20%3D%20new%20Facet%5B%5D%28numFacets%29%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20i%3B%20i%20%3C%20numFacets%3B%20%2B%2Bi%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20address%20facetAddress_%20%3D%20ds.facetAddresses%5Bi%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20facets_%5Bi%5D.facetAddress%20%3D%20facetAddress_%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20facets_%5Bi%5D.functionSelectors%20%3D%20ds.facetFunctionSelectors%5BfacetAddress_%5D.functionSelectors%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40notice%20Gets%20all%20the%20function%20selectors%20provided%20by%20a%20facet.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20_facet%20The%20facet%20address.%5Cn%20%20%20%20%2F%2F%2F%20%40return%20facetFunctionSelectors_%5Cn%20%20%20%20function%20facetFunctionSelectors%28%5Cn%20%20%20%20%20%20%20%20address%20_facet%5Cn%20%20%20%20%29%20external%20view%20override%20returns%20%28bytes4%5B%5D%20memory%20facetFunctionSelectors_%29%20%7B%5Cn%20%20%20%20%20%20%20%20LibDiamond.DiamondStorage%20storage%20ds%20%3D%20LibDiamond.diamondStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20facetFunctionSelectors_%20%3D%20ds.facetFunctionSelectors%5B_facet%5D.functionSelectors%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40notice%20Get%20all%20the%20facet%20addresses%20used%20by%20a%20diamond.%5Cn%20%20%20%20%2F%2F%2F%20%40return%20facetAddresses_%5Cn%20%20%20%20function%20facetAddresses%28%29%20external%20view%20override%20returns%20%28address%5B%5D%20memory%20facetAddresses_%29%20%7B%5Cn%20%20%20%20%20%20%20%20LibDiamond.DiamondStorage%20storage%20ds%20%3D%20LibDiamond.diamondStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20facetAddresses_%20%3D%20ds.facetAddresses%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40notice%20Gets%20the%20facet%20that%20supports%20the%20given%20selector.%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20If%20facet%20is%20not%20found%20return%20address%280%29.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20_functionSelector%20The%20function%20selector.%5Cn%20%20%20%20%2F%2F%2F%20%40return%20facetAddress_%20The%20facet%20address.%5Cn%20%20%20%20function%20facetAddress%28bytes4%20_functionSelector%29%20external%20view%20override%20returns%20%28address%20facetAddress_%29%20%7B%5Cn%20%20%20%20%20%20%20%20LibDiamond.DiamondStorage%20storage%20ds%20%3D%20LibDiamond.diamondStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20facetAddress_%20%3D%20ds.selectorToFacetAndPosition%5B_functionSelector%5D.facetAddress%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%20This%20implements%20ERC-165.%5Cn%20%20%20%20function%20supportsInterface%28bytes4%20interfaceId%29%20external%20view%20override%20returns%20%28bool%29%20%7B%5Cn%20%20%20%20%20%20%20%20LibDiamond.DiamondStorage%20storage%20ds%20%3D%20LibDiamond.diamondStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20return%20ds.supportedInterfaces%5BinterfaceId%5D%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Fvendor%2Fdiamond%2Ffacets%2FOwnershipFacet.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cnimport%20%5C%22..%2Flibraries%2FLibDiamond.sol%5C%22%3B%5Cnimport%20%5C%22..%2Finterfaces%2FIERC173.sol%5C%22%3B%5Cn%5Cncontract%20OwnershipFacet%20is%20IERC173%20%7B%5Cn%20%20%20%20function%20transferOwnership%28address%20_newOwner%29%20external%20override%20%7B%5Cn%20%20%20%20%20%20%20%20LibDiamond.enforceIsContractOwner%28%29%3B%5Cn%20%20%20%20%20%20%20%20LibDiamond.setContractOwner%28_newOwner%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20owner%28%29%20external%20view%20override%20returns%20%28address%29%20%7B%5Cn%20%20%20%20%20%20%20%20return%20LibDiamond.contractOwner%28%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Fvendor%2Fdiamond%2Finterfaces%2FIDiamondCut.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%5C%5C%5Cn%2A%20%20Adapted%20from%5Cn%2A%20%20Author%3A%20Nick%20Mudge%20%3Cnick%40perfectabstractions.com%3E%20%28https%3A%2F%2Ftwitter.com%2Fmudgen%29%5Cn%2A%20EIP-2535%20Diamond%20Standard%3A%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-2535%5Cn%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%5Cn%5Cninterface%20IDiamondCut%20%7B%5Cn%20%20%20%20enum%20FacetCutAction%20%7B%5Cn%20%20%20%20%20%20%20%20Add%2C%5Cn%20%20%20%20%20%20%20%20Replace%2C%5Cn%20%20%20%20%20%20%20%20Remove%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%2F%2F%20Add%3D0%2C%20Replace%3D1%2C%20Remove%3D2%5Cn%5Cn%20%20%20%20struct%20FacetCut%20%7B%5Cn%20%20%20%20%20%20%20%20address%20facetAddress%3B%5Cn%20%20%20%20%20%20%20%20FacetCutAction%20action%3B%5Cn%20%20%20%20%20%20%20%20bytes4%5B%5D%20functionSelectors%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40notice%20Add%2Freplace%2Fremove%20any%20number%20of%20functions%20and%20optionally%20execute%5Cn%20%20%20%20%2F%2F%2F%20%20%20%20%20%20%20%20%20a%20function%20with%20delegatecall%5Cn%20%20%20%20%2F%2F%2F%20%40param%20_diamondCut%20Contains%20the%20facet%20addresses%20and%20function%20selectors%5Cn%20%20%20%20%2F%2F%2F%20%40param%20_init%20The%20address%20of%20the%20contract%20or%20facet%20to%20execute%20_calldata%5Cn%20%20%20%20%2F%2F%2F%20%40param%20_calldata%20A%20function%20call%2C%20including%20function%20selector%20and%20arguments%5Cn%20%20%20%20%2F%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_calldata%20is%20executed%20with%20delegatecall%20on%20_init%5Cn%20%20%20%20function%20diamondCut%28FacetCut%5B%5D%20calldata%20_diamondCut%2C%20address%20_init%2C%20bytes%20calldata%20_calldata%29%20external%3B%5Cn%7D%5Cn%22%7D%2C%22src%2Fvendor%2Fdiamond%2Finterfaces%2FIDiamondLoupe.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%5C%5C%5Cn%2A%20Author%3A%20Nick%20Mudge%20%3Cnick%40perfectabstractions.com%3E%20%28https%3A%2F%2Ftwitter.com%2Fmudgen%29%5Cn%2A%20EIP-2535%20Diamond%20Standard%3A%20https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-2535%5Cn%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%5Cn%5Cn%2F%2F%20A%20loupe%20is%20a%20small%20magnifying%20glass%20used%20to%20look%20at%20diamonds.%5Cn%2F%2F%20These%20functions%20look%20at%20diamonds%5Cninterface%20IDiamondLoupe%20%7B%5Cn%20%20%20%20%2F%2F%2F%20These%20functions%20are%20expected%20to%20be%20called%20frequently%5Cn%20%20%20%20%2F%2F%2F%20by%20tools.%5Cn%5Cn%20%20%20%20struct%20Facet%20%7B%5Cn%20%20%20%20%20%20%20%20address%20facetAddress%3B%5Cn%20%20%20%20%20%20%20%20bytes4%5B%5D%20functionSelectors%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40notice%20Gets%20all%20facet%20addresses%20and%20their%20four%20byte%20function%20selectors.%5Cn%20%20%20%20%2F%2F%2F%20%40return%20facets_%20Facet%5Cn%20%20%20%20function%20facets%28%29%20external%20view%20returns%20%28Facet%5B%5D%20memory%20facets_%29%3B%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40notice%20Gets%20all%20the%20function%20selectors%20supported%20by%20a%20specific%20facet.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20_facet%20The%20facet%20address.%5Cn%20%20%20%20%2F%2F%2F%20%40return%20facetFunctionSelectors_%5Cn%20%20%20%20function%20facetFunctionSelectors%28address%20_facet%29%20external%20view%20returns%20%28bytes4%5B%5D%20memory%20facetFunctionSelectors_%29%3B%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40notice%20Get%20all%20the%20facet%20addresses%20used%20by%20a%20diamond.%5Cn%20%20%20%20%2F%2F%2F%20%40return%20facetAddresses_%5Cn%20%20%20%20function%20facetAddresses%28%29%20external%20view%20returns%20%28address%5B%5D%20memory%20facetAddresses_%29%3B%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40notice%20Gets%20the%20facet%20that%20supports%20the%20given%20selector.%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20If%20facet%20is%20not%20found%20return%20address%280%29.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20_functionSelector%20The%20function%20selector.%5Cn%20%20%20%20%2F%2F%2F%20%40return%20facetAddress_%20The%20facet%20address.%5Cn%20%20%20%20function%20facetAddress%28bytes4%20_functionSelector%29%20external%20view%20returns%20%28address%20facetAddress_%29%3B%5Cn%7D%5Cn%22%7D%2C%22src%2Fvendor%2Fdiamond%2Finterfaces%2FIERC165.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cninterface%20IERC165%20%7B%5Cn%20%20%20%20%2F%2F%2F%20%40notice%20Query%20if%20a%20contract%20implements%20an%20interface%5Cn%20%20%20%20%2F%2F%2F%20%40param%20interfaceId%20The%20interface%20identifier%2C%20as%20specified%20in%20ERC-165%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20Interface%20identification%20is%20specified%20in%20ERC-165.%20This%20function%5Cn%20%20%20%20%2F%2F%2F%20%20uses%20less%20than%2030%2C000%20gas.%5Cn%20%20%20%20%2F%2F%2F%20%40return%20%60true%60%20if%20the%20contract%20implements%20%60interfaceID%60%20and%5Cn%20%20%20%20%2F%2F%2F%20%20%60interfaceID%60%20is%20not%200xffffffff%2C%20%60false%60%20otherwise%5Cn%20%20%20%20function%20supportsInterface%28bytes4%20interfaceId%29%20external%20view%20returns%20%28bool%29%3B%5Cn%7D%5Cn%22%7D%2C%22src%2Fvendor%2Fdiamond%2Finterfaces%2FIERC173.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.20%3B%5Cn%5Cn%2F%2F%2F%20%40title%20ERC-173%20Contract%20Ownership%20Standard%5Cn%2F%2F%2F%20%20Note%3A%20the%20ERC-165%20identifier%20for%20this%20interface%20is%200x7f5828d0%5Cn%2F%2A%20is%20ERC165%20%2A%2F%5Cninterface%20IERC173%20%7B%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20This%20emits%20when%20ownership%20of%20a%20contract%20changes.%5Cn%20%20%20%20%2F%2F%20Removed%20deue%20to%20duplicate%20abi%20generation%20in%208.20%20compiler%5Cn%20%20%20%20%2F%2F%20event%20OwnershipTransferred%28address%20indexed%20previousOwner%2C%20address%20indexed%20newOwner%29%3B%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40notice%20Get%20the%20address%20of%20the%20owner%5Cn%20%20%20%20%2F%2F%2F%20%40return%20owner_%20The%20address%20of%20the%20owner.%5Cn%20%20%20%20function%20owner%28%29%20external%20view%20returns%20%28address%20owner_%29%3B%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40notice%20Set%20the%20address%20of%20the%20new%20owner%20of%20the%20contract%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20Set%20_newOwner%20to%20address%280%29%20to%20renounce%20any%20ownership.%5Cn%20%20%20%20%2F%2F%2F%20%40param%20_newOwner%20The%20address%20of%20the%20new%20owner%20of%20the%20contract%5Cn%20%20%20%20function%20transferOwnership%28address%20_newOwner%29%20external%3B%5Cn%7D%5Cn%22%7D%2C%22src%2Fvendor%2Fdiamond%2Flibraries%2FLibDiamond.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cnpragma%20solidity%20%5E0.8.0%3B%5Cn%5Cn%2F%2F%20Adapted%20from%20the%20Diamond%203%20reference%20implementation%20by%20Nick%20Mudge%3A%5Cn%2F%2F%20https%3A%2F%2Fgithub.com%2Fmudgen%2Fdiamond-3-hardhat%5Cn%5Cnimport%20%7BIDiamondCut%7D%20from%20%5C%22..%2Finterfaces%2FIDiamondCut.sol%5C%22%3B%5Cn%5Cnlibrary%20LibDiamond%20%7B%5Cn%20%20%20%20bytes32%20constant%20DIAMOND_STORAGE_POSITION%20%3D%20keccak256%28%5C%22diamond.standard.diamond.storage%5C%22%29%3B%5Cn%5Cn%20%20%20%20struct%20FacetAddressAndPosition%20%7B%5Cn%20%20%20%20%20%20%20%20address%20facetAddress%3B%5Cn%20%20%20%20%20%20%20%20uint96%20functionSelectorPosition%3B%20%2F%2F%20position%20in%20facetFunctionSelectors.functionSelectors%20array%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20FacetFunctionSelectors%20%7B%5Cn%20%20%20%20%20%20%20%20bytes4%5B%5D%20functionSelectors%3B%5Cn%20%20%20%20%20%20%20%20uint256%20facetAddressPosition%3B%20%2F%2F%20position%20of%20facetAddress%20in%20facetAddresses%20array%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20struct%20DiamondStorage%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20maps%20function%20selector%20to%20the%20facet%20address%20and%5Cn%20%20%20%20%20%20%20%20%2F%2F%20the%20position%20of%20the%20selector%20in%20the%20facetFunctionSelectors.selectors%20array%5Cn%20%20%20%20%20%20%20%20mapping%28bytes4%20%3D%3E%20FacetAddressAndPosition%29%20selectorToFacetAndPosition%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20maps%20facet%20addresses%20to%20function%20selectors%5Cn%20%20%20%20%20%20%20%20mapping%28address%20%3D%3E%20FacetFunctionSelectors%29%20facetFunctionSelectors%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20facet%20addresses%5Cn%20%20%20%20%20%20%20%20address%5B%5D%20facetAddresses%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Used%20to%20query%20if%20a%20contract%20implements%20an%20interface.%5Cn%20%20%20%20%20%20%20%20%2F%2F%20Used%20to%20implement%20ERC-165.%5Cn%20%20%20%20%20%20%20%20mapping%28bytes4%20%3D%3E%20bool%29%20supportedInterfaces%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20owner%20of%20the%20contract%5Cn%20%20%20%20%20%20%20%20address%20contractOwner%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20diamondStorage%28%29%20internal%20pure%20returns%20%28DiamondStorage%20storage%20ds%29%20%7B%5Cn%20%20%20%20%20%20%20%20bytes32%20position%20%3D%20DIAMOND_STORAGE_POSITION%3B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20ds.slot%20%3A%3D%20position%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20event%20OwnershipTransferred%28address%20indexed%20previousOwner%2C%20address%20indexed%20newOwner%29%3B%5Cn%5Cn%20%20%20%20function%20setContractOwner%28address%20_newOwner%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20DiamondStorage%20storage%20ds%20%3D%20diamondStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20address%20previousOwner%20%3D%20ds.contractOwner%3B%5Cn%20%20%20%20%20%20%20%20ds.contractOwner%20%3D%20_newOwner%3B%5Cn%20%20%20%20%20%20%20%20emit%20OwnershipTransferred%28previousOwner%2C%20_newOwner%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20contractOwner%28%29%20internal%20view%20returns%20%28address%20contractOwner_%29%20%7B%5Cn%20%20%20%20%20%20%20%20contractOwner_%20%3D%20diamondStorage%28%29.contractOwner%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20enforceIsContractOwner%28%29%20internal%20view%20%7B%5Cn%20%20%20%20%20%20%20%20require%28msg.sender%20%3D%3D%20diamondStorage%28%29.contractOwner%2C%20%5C%22LibDiamond%3A%20Must%20be%20contract%20owner%5C%22%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20event%20DiamondCut%28IDiamondCut.FacetCut%5B%5D%20_diamondCut%2C%20address%20_init%2C%20bytes%20_calldata%29%3B%5Cn%5Cn%20%20%20%20%2F%2F%20Internal%20function%20version%20of%20diamondCut%5Cn%20%20%20%20function%20diamondCut%28IDiamondCut.FacetCut%5B%5D%20memory%20_diamondCut%2C%20address%20_init%2C%20bytes%20memory%20_calldata%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20facetIndex%3B%20facetIndex%20%3C%20_diamondCut.length%3B%20facetIndex%2B%2B%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20IDiamondCut.FacetCutAction%20action%20%3D%20_diamondCut%5BfacetIndex%5D.action%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28action%20%3D%3D%20IDiamondCut.FacetCutAction.Add%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20addFunctions%28_diamondCut%5BfacetIndex%5D.facetAddress%2C%20_diamondCut%5BfacetIndex%5D.functionSelectors%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28action%20%3D%3D%20IDiamondCut.FacetCutAction.Replace%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20replaceFunctions%28_diamondCut%5BfacetIndex%5D.facetAddress%2C%20_diamondCut%5BfacetIndex%5D.functionSelectors%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28action%20%3D%3D%20IDiamondCut.FacetCutAction.Remove%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20removeFunctions%28_diamondCut%5BfacetIndex%5D.facetAddress%2C%20_diamondCut%5BfacetIndex%5D.functionSelectors%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%28%5C%22LibDiamondCut%3A%20Incorrect%20FacetCutAction%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20emit%20DiamondCut%28_diamondCut%2C%20_init%2C%20_calldata%29%3B%5Cn%20%20%20%20%20%20%20%20initializeDiamondCut%28_init%2C%20_calldata%29%3B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20error%20DuplicateSignature%28bytes4%20_selector%29%3B%5Cn%20%20%20%20function%20addFunctions%28address%20_facetAddress%2C%20bytes4%5B%5D%20memory%20_functionSelectors%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20require%28_functionSelectors.length%20%3E%200%2C%20%5C%22LibDiamondCut%3A%20No%20selectors%20in%20facet%20to%20cut%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20DiamondStorage%20storage%20ds%20%3D%20diamondStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20require%28_facetAddress%20%21%3D%20address%280%29%2C%20%5C%22LibDiamondCut%3A%20Add%20facet%20can%27t%20be%20address%280%29%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20uint96%20selectorPosition%20%3D%20uint96%28ds.facetFunctionSelectors%5B_facetAddress%5D.functionSelectors.length%29%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20add%20new%20facet%20address%20if%20it%20does%20not%20exist%5Cn%20%20%20%20%20%20%20%20if%20%28selectorPosition%20%3D%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20addFacet%28ds%2C%20_facetAddress%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20selectorIndex%3B%20selectorIndex%20%3C%20_functionSelectors.length%3B%20selectorIndex%2B%2B%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes4%20selector%20%3D%20_functionSelectors%5BselectorIndex%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20address%20oldFacetAddress%20%3D%20ds.selectorToFacetAndPosition%5Bselector%5D.facetAddress%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20require%28oldFacetAddress%20%3D%3D%20address%280%29%2C%20%5C%22LibDiamondCut%3A%20Can%27t%20add%20function%20that%20already%20exists%5C%22%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20addFunction%28ds%2C%20selector%2C%20selectorPosition%2C%20_facetAddress%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20selectorPosition%2B%2B%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20replaceFunctions%28address%20_facetAddress%2C%20bytes4%5B%5D%20memory%20_functionSelectors%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20require%28_functionSelectors.length%20%3E%200%2C%20%5C%22LibDiamondCut%3A%20No%20selectors%20in%20facet%20to%20cut%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20DiamondStorage%20storage%20ds%20%3D%20diamondStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20require%28_facetAddress%20%21%3D%20address%280%29%2C%20%5C%22LibDiamondCut%3A%20Add%20facet%20can%27t%20be%20address%280%29%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20uint96%20selectorPosition%20%3D%20uint96%28ds.facetFunctionSelectors%5B_facetAddress%5D.functionSelectors.length%29%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20add%20new%20facet%20address%20if%20it%20does%20not%20exist%5Cn%20%20%20%20%20%20%20%20if%20%28selectorPosition%20%3D%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20addFacet%28ds%2C%20_facetAddress%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20selectorIndex%3B%20selectorIndex%20%3C%20_functionSelectors.length%3B%20selectorIndex%2B%2B%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes4%20selector%20%3D%20_functionSelectors%5BselectorIndex%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20address%20oldFacetAddress%20%3D%20ds.selectorToFacetAndPosition%5Bselector%5D.facetAddress%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20require%28oldFacetAddress%20%21%3D%20_facetAddress%2C%20%5C%22LibDiamondCut%3A%20Can%27t%20replace%20function%20with%20same%20function%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20removeFunction%28ds%2C%20oldFacetAddress%2C%20selector%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20addFunction%28ds%2C%20selector%2C%20selectorPosition%2C%20_facetAddress%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20selectorPosition%2B%2B%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20removeFunctions%28address%20_facetAddress%2C%20bytes4%5B%5D%20memory%20_functionSelectors%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20require%28_functionSelectors.length%20%3E%200%2C%20%5C%22LibDiamondCut%3A%20No%20selectors%20in%20facet%20to%20cut%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20DiamondStorage%20storage%20ds%20%3D%20diamondStorage%28%29%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20if%20function%20does%20not%20exist%20then%20do%20nothing%20and%20return%5Cn%20%20%20%20%20%20%20%20require%28_facetAddress%20%3D%3D%20address%280%29%2C%20%5C%22LibDiamondCut%3A%20Remove%20facet%20address%20must%20be%20address%280%29%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20for%20%28uint256%20selectorIndex%3B%20selectorIndex%20%3C%20_functionSelectors.length%3B%20selectorIndex%2B%2B%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes4%20selector%20%3D%20_functionSelectors%5BselectorIndex%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20address%20oldFacetAddress%20%3D%20ds.selectorToFacetAndPosition%5Bselector%5D.facetAddress%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20removeFunction%28ds%2C%20oldFacetAddress%2C%20selector%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20addFacet%28DiamondStorage%20storage%20ds%2C%20address%20_facetAddress%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20enforceHasContractCode%28_facetAddress%2C%20%5C%22LibDiamondCut%3A%20New%20facet%20has%20no%20code%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20ds.facetFunctionSelectors%5B_facetAddress%5D.facetAddressPosition%20%3D%20ds.facetAddresses.length%3B%5Cn%20%20%20%20%20%20%20%20ds.facetAddresses.push%28_facetAddress%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20addFunction%28%5Cn%20%20%20%20%20%20%20%20DiamondStorage%20storage%20ds%2C%5Cn%20%20%20%20%20%20%20%20bytes4%20_selector%2C%5Cn%20%20%20%20%20%20%20%20uint96%20_selectorPosition%2C%5Cn%20%20%20%20%20%20%20%20address%20_facetAddress%5Cn%20%20%20%20%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20ds.selectorToFacetAndPosition%5B_selector%5D.functionSelectorPosition%20%3D%20_selectorPosition%3B%5Cn%20%20%20%20%20%20%20%20ds.facetFunctionSelectors%5B_facetAddress%5D.functionSelectors.push%28_selector%29%3B%5Cn%20%20%20%20%20%20%20%20ds.selectorToFacetAndPosition%5B_selector%5D.facetAddress%20%3D%20_facetAddress%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20removeFunction%28DiamondStorage%20storage%20ds%2C%20address%20_facetAddress%2C%20bytes4%20_selector%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20require%28_facetAddress%20%21%3D%20address%280%29%2C%20%5C%22LibDiamondCut%3A%20Can%27t%20remove%20function%20that%20doesn%27t%20exist%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20an%20immutable%20function%20is%20a%20function%20defined%20directly%20in%20a%20diamond%5Cn%20%20%20%20%20%20%20%20require%28_facetAddress%20%21%3D%20address%28this%29%2C%20%5C%22LibDiamondCut%3A%20Can%27t%20remove%20immutable%20function%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20replace%20selector%20with%20last%20selector%2C%20then%20delete%20last%20selector%5Cn%20%20%20%20%20%20%20%20uint256%20selectorPosition%20%3D%20ds.selectorToFacetAndPosition%5B_selector%5D.functionSelectorPosition%3B%5Cn%20%20%20%20%20%20%20%20uint256%20lastSelectorPosition%20%3D%20ds.facetFunctionSelectors%5B_facetAddress%5D.functionSelectors.length%20-%201%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20if%20not%20the%20same%20then%20replace%20_selector%20with%20lastSelector%5Cn%20%20%20%20%20%20%20%20if%20%28selectorPosition%20%21%3D%20lastSelectorPosition%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20bytes4%20lastSelector%20%3D%20ds.facetFunctionSelectors%5B_facetAddress%5D.functionSelectors%5BlastSelectorPosition%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20ds.facetFunctionSelectors%5B_facetAddress%5D.functionSelectors%5BselectorPosition%5D%20%3D%20lastSelector%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20ds.selectorToFacetAndPosition%5BlastSelector%5D.functionSelectorPosition%20%3D%20uint96%28selectorPosition%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%2F%2F%20delete%20the%20last%20selector%5Cn%20%20%20%20%20%20%20%20ds.facetFunctionSelectors%5B_facetAddress%5D.functionSelectors.pop%28%29%3B%5Cn%20%20%20%20%20%20%20%20delete%20ds.selectorToFacetAndPosition%5B_selector%5D%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20if%20no%20more%20selectors%20for%20facet%20address%20then%20delete%20the%20facet%20address%5Cn%20%20%20%20%20%20%20%20if%20%28lastSelectorPosition%20%3D%3D%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20replace%20facet%20address%20with%20last%20facet%20address%20and%20delete%20last%20facet%20address%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20lastFacetAddressPosition%20%3D%20ds.facetAddresses.length%20-%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20uint256%20facetAddressPosition%20%3D%20ds.facetFunctionSelectors%5B_facetAddress%5D.facetAddressPosition%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28facetAddressPosition%20%21%3D%20lastFacetAddressPosition%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20address%20lastFacetAddress%20%3D%20ds.facetAddresses%5BlastFacetAddressPosition%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ds.facetAddresses%5BfacetAddressPosition%5D%20%3D%20lastFacetAddress%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ds.facetFunctionSelectors%5BlastFacetAddress%5D.facetAddressPosition%20%3D%20facetAddressPosition%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20ds.facetAddresses.pop%28%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20delete%20ds.facetFunctionSelectors%5B_facetAddress%5D.facetAddressPosition%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20initializeDiamondCut%28address%20_init%2C%20bytes%20memory%20_calldata%29%20internal%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28_init%20%3D%3D%20address%280%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20require%28_calldata.length%20%3D%3D%200%2C%20%5C%22LibDiamondCut%3A%20_init%20is%20address%280%29%20but_calldata%20is%20not%20empty%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20this%20is%20removed%20in%20order%20to%20work%20with%20ethereum%20distribution%20system%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20require%28_calldata.length%20%3E%200%2C%20%5C%22LibDiamondCut%3A%20_calldata%20is%20empty%20but%20_init%20is%20not%20address%280%29%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28_init%20%21%3D%20address%28this%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20enforceHasContractCode%28_init%2C%20%5C%22LibDiamondCut%3A%20_init%20address%20has%20no%20code%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%28bool%20success%2C%20bytes%20memory%20error%29%20%3D%20_init.delegatecall%28_calldata%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21success%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28error.length%20%3E%200%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20bubble%20up%20the%20error%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%28string%28error%29%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20revert%28%5C%22LibDiamondCut%3A%20_init%20function%20reverted%5C%22%29%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20function%20enforceHasContractCode%28address%20_contract%2C%20string%20memory%20_errorMessage%29%20internal%20view%20%7B%5Cn%20%20%20%20%20%20%20%20uint256%20contractSize%3B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20contractSize%20%3A%3D%20extcodesize%28_contract%29%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20require%28contractSize%20%3E%200%2C%20_errorMessage%29%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%2C%22src%2Fverifiers%2FProposalsIntegrity15Groth16Verifier.sol%22%3A%7B%22content%22%3A%22%2F%2F%20SPDX-License-Identifier%3A%20MIT%5Cn%5Cn%2F%2A%20AUTOGENERATED%20FILE%20BY%20HARDHAT-ZKIT.%20DO%20NOT%20EDIT.%20%2A%2F%5Cn%5Cnpragma%20solidity%20%3E%3D0.7.0%20%3C0.9.0%3B%5Cn%5Cncontract%20ProposalsIntegrity15Groth16Verifier%20%7B%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20base%20field%20size%5Cn%20%20%20%20uint256%20public%20constant%20BASE_FIELD_SIZE%20%3D%5Cn%20%20%20%20%20%20%20%2021888242871839275222246405745257275088696311157297823662689037894645226208583%3B%5Cn%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20verification%20key%20data%5Cn%20%20%20%20uint256%20public%20constant%20ALPHA_X%20%3D%5Cn%20%20%20%20%20%20%20%2020491192805390485299153009773594534940189261866228447918068658471970481763042%3B%5Cn%20%20%20%20uint256%20public%20constant%20ALPHA_Y%20%3D%5Cn%20%20%20%20%20%20%20%209383485363053290200918347156157836566562967994039712273449902621266178545958%3B%5Cn%20%20%20%20uint256%20public%20constant%20BETA_X1%20%3D%5Cn%20%20%20%20%20%20%20%204252822878758300859123897981450591353533073413197771768651442665752259397132%3B%5Cn%20%20%20%20uint256%20public%20constant%20BETA_X2%20%3D%5Cn%20%20%20%20%20%20%20%206375614351688725206403948262868962793625744043794305715222011528459656738731%3B%5Cn%20%20%20%20uint256%20public%20constant%20BETA_Y1%20%3D%5Cn%20%20%20%20%20%20%20%2021847035105528745403288232691147584728191162732299865338377159692350059136679%3B%5Cn%20%20%20%20uint256%20public%20constant%20BETA_Y2%20%3D%5Cn%20%20%20%20%20%20%20%2010505242626370262277552901082094356697409835680220590971873171140371331206856%3B%5Cn%20%20%20%20uint256%20public%20constant%20GAMMA_X1%20%3D%5Cn%20%20%20%20%20%20%20%2011559732032986387107991004021392285783925812861821192530917403151452391805634%3B%5Cn%20%20%20%20uint256%20public%20constant%20GAMMA_X2%20%3D%5Cn%20%20%20%20%20%20%20%2010857046999023057135944570762232829481370756359578518086990519993285655852781%3B%5Cn%20%20%20%20uint256%20public%20constant%20GAMMA_Y1%20%3D%5Cn%20%20%20%20%20%20%20%204082367875863433681332203403145435568316851327593401208105741076214120093531%3B%5Cn%20%20%20%20uint256%20public%20constant%20GAMMA_Y2%20%3D%5Cn%20%20%20%20%20%20%20%208495653923123431417604973247489272438418190587263600148770280649306958101930%3B%5Cn%20%20%20%20uint256%20public%20constant%20DELTA_X1%20%3D%5Cn%20%20%20%20%20%20%20%205545017867962501469197988449758658516673587249205882039362978111522672427226%3B%5Cn%20%20%20%20uint256%20public%20constant%20DELTA_X2%20%3D%5Cn%20%20%20%20%20%20%20%2019448423959375750855206127924828311117050960803864574166657530553299956322527%3B%5Cn%20%20%20%20uint256%20public%20constant%20DELTA_Y1%20%3D%5Cn%20%20%20%20%20%20%20%2019958333776506118976444527516293428159666713414195208248197128607154362021861%3B%5Cn%20%20%20%20uint256%20public%20constant%20DELTA_Y2%20%3D%5Cn%20%20%20%20%20%20%20%20403671295757259186704764527309900141792802274937586198789172578520484956290%3B%5Cn%5Cn%20%20%20%20uint256%20public%20constant%20IC0_X%20%3D%5Cn%20%20%20%20%20%20%20%2014683541697182085272970457138834575603889118102403173182441426147372055171199%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC0_Y%20%3D%5Cn%20%20%20%20%20%20%20%2015828106890827031044303831138464387019076067773474851454594995633341138423973%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC1_X%20%3D%5Cn%20%20%20%20%20%20%20%20931350454775311225726529939363021547468254698471122619231764441911366897908%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC1_Y%20%3D%5Cn%20%20%20%20%20%20%20%204375955915673550592447622878557683110408945548086441385802807586743607712302%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC2_X%20%3D%5Cn%20%20%20%20%20%20%20%204114760598395990026979823272982475487591884596696964679643335828714618602991%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC2_Y%20%3D%5Cn%20%20%20%20%20%20%20%2014139523484594891707796256678098621163124867920341648929872003988045059476018%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC3_X%20%3D%5Cn%20%20%20%20%20%20%20%209956948280022397189816553783649025689445249551760227976506924266821723239552%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC3_Y%20%3D%5Cn%20%20%20%20%20%20%20%2013287125790767565666438571418521403760085210034152132165294814734841926235060%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC4_X%20%3D%5Cn%20%20%20%20%20%20%20%209166141991627960620799367532057672092127759484546352794909978440486809735523%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC4_Y%20%3D%5Cn%20%20%20%20%20%20%20%2015327572766279697528616614806368179837738458096070982027950873188401236281495%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC5_X%20%3D%5Cn%20%20%20%20%20%20%20%2020794043095447656965147702531595998112836022210976219228257437462103543700857%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC5_Y%20%3D%5Cn%20%20%20%20%20%20%20%20956170243796799570651284866374958845257187450767403611325425887961597681476%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC6_X%20%3D%5Cn%20%20%20%20%20%20%20%2011217103035977176112933408563767521671611683513731914281901719441868601760885%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC6_Y%20%3D%5Cn%20%20%20%20%20%20%20%2016592436117958271930315720460978366363130025536852712554494467139521674698014%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC7_X%20%3D%5Cn%20%20%20%20%20%20%20%2014582312991638979300934901102128688548034213363481313090134427294682219561316%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC7_Y%20%3D%5Cn%20%20%20%20%20%20%20%20683412996374558886961490024194718858983010432926411082557023832732459662953%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC8_X%20%3D%5Cn%20%20%20%20%20%20%20%204318803171102741537644636603456635806596669507521211218570986664741905765669%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC8_Y%20%3D%5Cn%20%20%20%20%20%20%20%2016812810236964430307925254807239848743556052644165083205670334488726550399332%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC9_X%20%3D%5Cn%20%20%20%20%20%20%20%206106216416162939038859545928641188266403999525369425027112024368111659405961%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC9_Y%20%3D%5Cn%20%20%20%20%20%20%20%202430695711414767733369316929614791565561726190803955108913202685023066862603%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC10_X%20%3D%5Cn%20%20%20%20%20%20%20%2011145471141203367699735152456572699621780407417053628090097541162589141279943%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC10_Y%20%3D%5Cn%20%20%20%20%20%20%20%2018042667503991844648868638274290770286824772392264358282186759640684724328319%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC11_X%20%3D%5Cn%20%20%20%20%20%20%20%2011117473557063998024662861187995375408291416968351995634420617374516042047198%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC11_Y%20%3D%5Cn%20%20%20%20%20%20%20%204397663347026032908202665099914709771739699822079022317803759720908428670649%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC12_X%20%3D%5Cn%20%20%20%20%20%20%20%2020685780591523777395032887136039464753737046038308749962370298552072500704817%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC12_Y%20%3D%5Cn%20%20%20%20%20%20%20%202930274192323646188099361490870598368472831144445988624285661109486028248172%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC13_X%20%3D%5Cn%20%20%20%20%20%20%20%2015534642391258460790709232396530076051117027243609969679497395940869713161493%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC13_Y%20%3D%5Cn%20%20%20%20%20%20%20%201044856701307702561380786678369528675922138631992119209129557277144160764217%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC14_X%20%3D%5Cn%20%20%20%20%20%20%20%2019202281176256741786197776710385465162429147615511732052173548508190549142224%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC14_Y%20%3D%5Cn%20%20%20%20%20%20%20%2012203224860934196875059962608605280059847309415293543672505594466850105531222%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC15_X%20%3D%5Cn%20%20%20%20%20%20%20%203204873038253225528144604783617308735352977773645579131962993288491786919113%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC15_Y%20%3D%5Cn%20%20%20%20%20%20%20%2014745425993160358322356154296630481898304529731030747018783656243628324226419%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC16_X%20%3D%5Cn%20%20%20%20%20%20%20%202879068951326848915522200328492070415748777417172288395311442738020044635979%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC16_Y%20%3D%5Cn%20%20%20%20%20%20%20%2017887341835821156001190454927774167305958066354938698936431768942797630456717%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC17_X%20%3D%5Cn%20%20%20%20%20%20%20%207768371285211514888164725131330013035354946221714266872156548477700204543184%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC17_Y%20%3D%5Cn%20%20%20%20%20%20%20%2016551033986105221556500022543579939439756273913357846208040756606405408605744%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC18_X%20%3D%5Cn%20%20%20%20%20%20%20%2019666914214921060704377659641992233840488930645345974474891490563665455654680%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC18_Y%20%3D%5Cn%20%20%20%20%20%20%20%2016207512430288020792510035103427771346480670497127296426473102819478968362879%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC19_X%20%3D%5Cn%20%20%20%20%20%20%20%202544258309340201436779825164740695326857059184907764027574138203558683019201%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC19_Y%20%3D%5Cn%20%20%20%20%20%20%20%203430859352287865523986834677544019942649310010788523440603858586109562617924%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC20_X%20%3D%5Cn%20%20%20%20%20%20%20%20481434627547883087347068523800224705172729936288839811092542178279424982307%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC20_Y%20%3D%5Cn%20%20%20%20%20%20%20%2018208938037494092978906271323026847613257944612772698727321902259134196182994%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC21_X%20%3D%5Cn%20%20%20%20%20%20%20%204540200849532123050821116299952165643082213994606763965746432689924094383596%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC21_Y%20%3D%5Cn%20%20%20%20%20%20%20%2011743911884330962100199732417189179740736014940110681086334778318969241160881%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC22_X%20%3D%5Cn%20%20%20%20%20%20%20%205127893874427286191688206822403241672810166849390088231196067911560301525322%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC22_Y%20%3D%5Cn%20%20%20%20%20%20%20%201905507368217522281658080234740884695286385554800754987076456979721755928562%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC23_X%20%3D%5Cn%20%20%20%20%20%20%20%2015090313415225616725831606708496781837005230426648912422586279746136183713192%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC23_Y%20%3D%5Cn%20%20%20%20%20%20%20%207952679477909942062628916302268110391810545876828536820322001136670111686968%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC24_X%20%3D%5Cn%20%20%20%20%20%20%20%2012910729401870425859453342357044019900511907371271813904295707228204698457661%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC24_Y%20%3D%5Cn%20%20%20%20%20%20%20%2015576640413681051971038774907200362543952673607154567558784680696686140929528%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC25_X%20%3D%5Cn%20%20%20%20%20%20%20%2015295986425333023552509354674171472840774507376238772714905006927325070423725%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC25_Y%20%3D%5Cn%20%20%20%20%20%20%20%2021512942617527186784349379216702428204956258148732095020829078444871377128062%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC26_X%20%3D%5Cn%20%20%20%20%20%20%20%206063213620139358089713125506616693185651197551164859996409249869507399308278%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC26_Y%20%3D%5Cn%20%20%20%20%20%20%20%208197158941096729635290945373090625063425600763318722634682425547574985654598%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC27_X%20%3D%5Cn%20%20%20%20%20%20%20%2021167644729111369431653301366469292219619096813996237727254959654116858408396%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC27_Y%20%3D%5Cn%20%20%20%20%20%20%20%2017726213107039379897004307636803728159663261615318478501568737742346981884746%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC28_X%20%3D%5Cn%20%20%20%20%20%20%20%202065121795390698932578476622600175260876194847326511170803551861438790729132%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC28_Y%20%3D%5Cn%20%20%20%20%20%20%20%2011377439111365828829364320243300536431576318896808100794336670322402844137898%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC29_X%20%3D%5Cn%20%20%20%20%20%20%20%208523461856375525773162470887133725962859693614213423524162221868438737133302%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC29_Y%20%3D%5Cn%20%20%20%20%20%20%20%205213727753552735097266117822476167382258727291405273129622605202408510801127%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC30_X%20%3D%5Cn%20%20%20%20%20%20%20%2012680827951545276710778918665081964735147643026741863498892766301280985631491%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC30_Y%20%3D%5Cn%20%20%20%20%20%20%20%209971305825900468647159682426979511793744889158757480227189092345473574407016%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC31_X%20%3D%5Cn%20%20%20%20%20%20%20%2010271419318250641951216771554770740572660950518529152917897504968265701672408%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC31_Y%20%3D%5Cn%20%20%20%20%20%20%20%209246245793728919092232666761688380719993004064646942071940839826943497436072%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC32_X%20%3D%5Cn%20%20%20%20%20%20%20%209702489188766403102022053644005167130287665475244876490772058772387388446705%3B%5Cn%20%20%20%20uint256%20public%20constant%20IC32_Y%20%3D%5Cn%20%20%20%20%20%20%20%209626565426982983094442914660661095024163674705588160463008260881762357567647%3B%5Cn%20%20%20%20%5Cn%20%20%20%20%2F%2F%2F%20%40dev%20memory%20pointer%20sizes%5Cn%20%20%20%20uint16%20public%20constant%20P_PUBLIC_SIGNALS_ACCUMULATOR_SIZE%20%3D%20128%3B%5Cn%20%20%20%20uint16%20public%20constant%20P_TOTAL_SIZE%20%3D%20896%3B%5Cn%5Cn%20%20%20%20function%20verifyProof%28%5Cn%20%20%20%20%20%20%20%20uint256%5B2%5D%20memory%20pointA_%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B2%5D%5B2%5D%20memory%20pointB_%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B2%5D%20memory%20pointC_%2C%5Cn%20%20%20%20%20%20%20%20uint256%5B32%5D%20memory%20publicSignals_%5Cn%20%20%20%20%29%20public%20view%20returns%20%28bool%20verified_%29%20%7B%5Cn%20%20%20%20%20%20%20%20assembly%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20function%20checkField%28signal_%29%20-%3E%20res_%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20res_%20%3A%3D%20lt%28signal_%2C%20BASE_FIELD_SIZE%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20function%20g1MulAdd%28pR_%2C%20x_%2C%20y_%2C%20s_%29%20-%3E%20res_%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20pointer_%20%3A%3D%20mload%2864%29%20%2F%2F%20free%20pointer%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28pointer_%2C%20x_%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pointer_%2C%2032%29%2C%20y_%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pointer_%2C%2064%29%2C%20s_%29%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20res_%20%3A%3D%20staticcall%286000%2C%207%2C%20pointer_%2C%2096%2C%20pointer_%2C%2064%29%20%2F%2F%20ecMul%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20res_%20%3A%3D%20and%28res_%2C%20gt%28returndatasize%28%29%2C%200%29%29%20%2F%2F%20check%20that%20multiplication%20succeeded%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28res_%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pointer_%2C%2064%29%2C%20mload%28pR_%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pointer_%2C%2096%29%2C%20mload%28add%28pR_%2C%2032%29%29%29%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20res_%20%3A%3D%20staticcall%28150%2C%206%2C%20pointer_%2C%20128%2C%20pR_%2C%2064%29%20%2F%2F%20ecAdd%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20res_%20%3A%3D%20and%28res_%2C%20gt%28returndatasize%28%29%2C%200%29%29%20%2F%2F%20check%20that%20addition%20succeeded%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20function%20checkPairing%28pA_%2C%20pB_%2C%20pC_%2C%20pubSignals_%2C%20pointer_%29%20-%3E%20res_%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20pPairing_%20%3A%3D%20add%28pointer_%2C%20P_PUBLIC_SIGNALS_ACCUMULATOR_SIZE%29%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28pointer_%2C%20IC0_X%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pointer_%2C%2032%29%2C%20IC0_Y%29%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%2F%20%40dev%20compute%20the%20linear%20combination%20of%20public%20signals%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC1_X%2C%20IC1_Y%2C%20mload%28add%28pubSignals_%2C%200%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC2_X%2C%20IC2_Y%2C%20mload%28add%28pubSignals_%2C%2032%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC3_X%2C%20IC3_Y%2C%20mload%28add%28pubSignals_%2C%2064%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC4_X%2C%20IC4_Y%2C%20mload%28add%28pubSignals_%2C%2096%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC5_X%2C%20IC5_Y%2C%20mload%28add%28pubSignals_%2C%20128%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC6_X%2C%20IC6_Y%2C%20mload%28add%28pubSignals_%2C%20160%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC7_X%2C%20IC7_Y%2C%20mload%28add%28pubSignals_%2C%20192%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC8_X%2C%20IC8_Y%2C%20mload%28add%28pubSignals_%2C%20224%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC9_X%2C%20IC9_Y%2C%20mload%28add%28pubSignals_%2C%20256%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC10_X%2C%20IC10_Y%2C%20mload%28add%28pubSignals_%2C%20288%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC11_X%2C%20IC11_Y%2C%20mload%28add%28pubSignals_%2C%20320%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC12_X%2C%20IC12_Y%2C%20mload%28add%28pubSignals_%2C%20352%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC13_X%2C%20IC13_Y%2C%20mload%28add%28pubSignals_%2C%20384%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC14_X%2C%20IC14_Y%2C%20mload%28add%28pubSignals_%2C%20416%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC15_X%2C%20IC15_Y%2C%20mload%28add%28pubSignals_%2C%20448%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC16_X%2C%20IC16_Y%2C%20mload%28add%28pubSignals_%2C%20480%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC17_X%2C%20IC17_Y%2C%20mload%28add%28pubSignals_%2C%20512%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC18_X%2C%20IC18_Y%2C%20mload%28add%28pubSignals_%2C%20544%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC19_X%2C%20IC19_Y%2C%20mload%28add%28pubSignals_%2C%20576%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC20_X%2C%20IC20_Y%2C%20mload%28add%28pubSignals_%2C%20608%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC21_X%2C%20IC21_Y%2C%20mload%28add%28pubSignals_%2C%20640%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC22_X%2C%20IC22_Y%2C%20mload%28add%28pubSignals_%2C%20672%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC23_X%2C%20IC23_Y%2C%20mload%28add%28pubSignals_%2C%20704%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC24_X%2C%20IC24_Y%2C%20mload%28add%28pubSignals_%2C%20736%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC25_X%2C%20IC25_Y%2C%20mload%28add%28pubSignals_%2C%20768%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC26_X%2C%20IC26_Y%2C%20mload%28add%28pubSignals_%2C%20800%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC27_X%2C%20IC27_Y%2C%20mload%28add%28pubSignals_%2C%20832%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC28_X%2C%20IC28_Y%2C%20mload%28add%28pubSignals_%2C%20864%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC29_X%2C%20IC29_Y%2C%20mload%28add%28pubSignals_%2C%20896%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC30_X%2C%20IC30_Y%2C%20mload%28add%28pubSignals_%2C%20928%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC31_X%2C%20IC31_Y%2C%20mload%28add%28pubSignals_%2C%20960%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20iszero%28g1MulAdd%28pointer_%2C%20IC32_X%2C%20IC32_Y%2C%20mload%28add%28pubSignals_%2C%20992%29%29%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20leave%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%2F%20%40dev%20-A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28pPairing_%2C%20mload%28pA_%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20add%28pPairing_%2C%2032%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mod%28sub%28BASE_FIELD_SIZE%2C%20mload%28add%28pA_%2C%2032%29%29%29%2C%20BASE_FIELD_SIZE%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%2F%20%40dev%20B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pPairing_%2C%2064%29%2C%20mload%28mload%28pB_%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pPairing_%2C%2096%29%2C%20mload%28add%28mload%28pB_%29%2C%2032%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pPairing_%2C%20128%29%2C%20mload%28mload%28add%28pB_%2C%2032%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pPairing_%2C%20160%29%2C%20mload%28add%28mload%28add%28pB_%2C%2032%29%29%2C%2032%29%29%29%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%2F%20%40dev%20alpha1%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pPairing_%2C%20192%29%2C%20ALPHA_X%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pPairing_%2C%20224%29%2C%20ALPHA_Y%29%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%2F%20%40dev%20beta2%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pPairing_%2C%20256%29%2C%20BETA_X1%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pPairing_%2C%20288%29%2C%20BETA_X2%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pPairing_%2C%20320%29%2C%20BETA_Y1%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pPairing_%2C%20352%29%2C%20BETA_Y2%29%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%2F%20%40dev%20public%20signals%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pPairing_%2C%20384%29%2C%20mload%28pointer_%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pPairing_%2C%20416%29%2C%20mload%28add%28pointer_%2C%2032%29%29%29%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%2F%20%40dev%20gamma2%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pPairing_%2C%20448%29%2C%20GAMMA_X1%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pPairing_%2C%20480%29%2C%20GAMMA_X2%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pPairing_%2C%20512%29%2C%20GAMMA_Y1%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pPairing_%2C%20544%29%2C%20GAMMA_Y2%29%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%2F%20%40dev%20C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pPairing_%2C%20576%29%2C%20mload%28pC_%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pPairing_%2C%20608%29%2C%20mload%28add%28pC_%2C%2032%29%29%29%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%2F%20%40dev%20delta2%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pPairing_%2C%20640%29%2C%20DELTA_X1%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pPairing_%2C%20672%29%2C%20DELTA_X2%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pPairing_%2C%20704%29%2C%20DELTA_Y1%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mstore%28add%28pPairing_%2C%20736%29%2C%20DELTA_Y2%29%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20res_%20%3A%3D%20staticcall%28181000%2C%208%2C%20pPairing_%2C%20768%2C%20pPairing_%2C%2032%29%20%2F%2F%20ecPairing%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20res_%20%3A%3D%20and%28res_%2C%20mload%28pPairing_%29%29%20%2F%2F%20check%20that%20pairing%20succeeded%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20let%20pointer_%20%3A%3D%20mload%2864%29%20%2F%2F%20free%20pointer%5Cn%20%20%20%20%20%20%20%20%20%20%20%20mstore%2864%2C%20add%28pointer_%2C%20P_TOTAL_SIZE%29%29%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%2F%20%40dev%20check%20that%20all%20public%20signals%20are%20in%20F%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%201%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%200%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%2032%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%2064%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%2096%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20128%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20160%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20192%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20224%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20256%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20288%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20320%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20352%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20384%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20416%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20448%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20480%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20512%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20544%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20576%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20608%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20640%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20672%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20704%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20736%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20768%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20800%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20832%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20864%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20896%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20928%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20960%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20and%28verified_%2C%20checkField%28mload%28add%28publicSignals_%2C%20992%29%29%29%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%2F%20%40dev%20check%20pairings%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20not%28iszero%28verified_%29%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20verified_%20%3A%3D%20checkPairing%28pointA_%2C%20pointB_%2C%20pointC_%2C%20publicSignals_%2C%20pointer_%29%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D%7D%2C%22settings%22%3A%7B%22viaIR%22%3Atrue%2C%22optimizer%22%3A%7B%22enabled%22%3Atrue%2C%22runs%22%3A2000%7D%2C%22evmVersion%22%3A%22paris%22%2C%22outputSelection%22%3A%7B%22%2A%22%3A%7B%22%2A%22%3A%5B%22abi%22%2C%22evm.bytecode%22%2C%22evm.deployedBytecode%22%2C%22evm.methodIdentifiers%22%2C%22metadata%22%2C%22devdoc%22%2C%22userdoc%22%2C%22storageLayout%22%2C%22evm.gasEstimates%22%5D%2C%22%22%3A%5B%22ast%22%5D%7D%7D%2C%22metadata%22%3A%7B%22useLiteralContent%22%3Atrue%7D%2C%22libraries%22%3A%7B%22src%2Ffacets%2FRankifyInstanceMainFacet.sol%3ARankifyInstanceMainFacet%22%3A%7B%22LibRankify%22%3A%220x8692A57Bc23cEF145cc4444a5335206769bDE40b%22%7D%7D%7D%7D&codeformat=solidity-standard-json-input&contractname=src%2Ffacets%2FRankifyInstanceMainFacet.sol%3ARankifyInstanceMainFacet&compilerversion=v0.8.28%2Bcommit.7893614a&licenseType=3